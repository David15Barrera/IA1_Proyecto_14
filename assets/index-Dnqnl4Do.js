function bj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Vc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wj(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var j2={exports:{}},uh={},G2={exports:{}},un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function xj(){if(u_)return un;u_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(q){return q===null||typeof q!="object"?null:(q=f&&q[f]||q["@@iterator"],typeof q=="function"?q:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(q,j,H){this.props=q,this.context=j,this.refs=v,this.updater=H||h}y.prototype.isReactComponent={},y.prototype.setState=function(q,j){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,j,"setState")},y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=y.prototype;function x(q,j,H){this.props=q,this.context=j,this.refs=v,this.updater=H||h}var w=x.prototype=new b;w.constructor=x,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,E={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(q,j,H){var ne,ue={},te=null,se=null;if(j!=null)for(ne in j.ref!==void 0&&(se=j.ref),j.key!==void 0&&(te=""+j.key),j)C.call(j,ne)&&!A.hasOwnProperty(ne)&&(ue[ne]=j[ne]);var J=arguments.length-2;if(J===1)ue.children=H;else if(1<J){for(var K=Array(J),ae=0;ae<J;ae++)K[ae]=arguments[ae+2];ue.children=K}if(q&&q.defaultProps)for(ne in J=q.defaultProps,J)ue[ne]===void 0&&(ue[ne]=J[ne]);return{$$typeof:t,type:q,key:te,ref:se,props:ue,_owner:E.current}}function D(q,j){return{$$typeof:t,type:q.type,key:j,ref:q.ref,props:q.props,_owner:q._owner}}function I(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function $(q){var j={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(H){return j[H]})}var O=/\/+/g;function B(q,j){return typeof q=="object"&&q!==null&&q.key!=null?$(""+q.key):j.toString(36)}function z(q,j,H,ne,ue){var te=typeof q;(te==="undefined"||te==="boolean")&&(q=null);var se=!1;if(q===null)se=!0;else switch(te){case"string":case"number":se=!0;break;case"object":switch(q.$$typeof){case t:case e:se=!0}}if(se)return se=q,ue=ue(se),q=ne===""?"."+B(se,0):ne,S(ue)?(H="",q!=null&&(H=q.replace(O,"$&/")+"/"),z(ue,j,H,"",function(ae){return ae})):ue!=null&&(I(ue)&&(ue=D(ue,H+(!ue.key||se&&se.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+q)),j.push(ue)),1;if(se=0,ne=ne===""?".":ne+":",S(q))for(var J=0;J<q.length;J++){te=q[J];var K=ne+B(te,J);se+=z(te,j,H,K,ue)}else if(K=d(q),typeof K=="function")for(q=K.call(q),J=0;!(te=q.next()).done;)te=te.value,K=ne+B(te,J++),se+=z(te,j,H,K,ue);else if(te==="object")throw j=String(q),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return se}function L(q,j,H){if(q==null)return q;var ne=[],ue=0;return z(q,ne,"","",function(te){return j.call(H,te,ue++)}),ne}function F(q){if(q._status===-1){var j=q._result;j=j(),j.then(function(H){(q._status===0||q._status===-1)&&(q._status=1,q._result=H)},function(H){(q._status===0||q._status===-1)&&(q._status=2,q._result=H)}),q._status===-1&&(q._status=0,q._result=j)}if(q._status===1)return q._result.default;throw q._result}var R={current:null},W={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:W,ReactCurrentOwner:E};function G(){throw Error("act(...) is not supported in production builds of React.")}return un.Children={map:L,forEach:function(q,j,H){L(q,function(){j.apply(this,arguments)},H)},count:function(q){var j=0;return L(q,function(){j++}),j},toArray:function(q){return L(q,function(j){return j})||[]},only:function(q){if(!I(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},un.Component=y,un.Fragment=n,un.Profiler=a,un.PureComponent=x,un.StrictMode=r,un.Suspense=u,un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,un.act=G,un.cloneElement=function(q,j,H){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ne=m({},q.props),ue=q.key,te=q.ref,se=q._owner;if(j!=null){if(j.ref!==void 0&&(te=j.ref,se=E.current),j.key!==void 0&&(ue=""+j.key),q.type&&q.type.defaultProps)var J=q.type.defaultProps;for(K in j)C.call(j,K)&&!A.hasOwnProperty(K)&&(ne[K]=j[K]===void 0&&J!==void 0?J[K]:j[K])}var K=arguments.length-2;if(K===1)ne.children=H;else if(1<K){J=Array(K);for(var ae=0;ae<K;ae++)J[ae]=arguments[ae+2];ne.children=J}return{$$typeof:t,type:q.type,key:ue,ref:te,props:ne,_owner:se}},un.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},un.createElement=k,un.createFactory=function(q){var j=k.bind(null,q);return j.type=q,j},un.createRef=function(){return{current:null}},un.forwardRef=function(q){return{$$typeof:o,render:q}},un.isValidElement=I,un.lazy=function(q){return{$$typeof:c,_payload:{_status:-1,_result:q},_init:F}},un.memo=function(q,j){return{$$typeof:l,type:q,compare:j===void 0?null:j}},un.startTransition=function(q){var j=W.transition;W.transition={};try{q()}finally{W.transition=j}},un.unstable_act=G,un.useCallback=function(q,j){return R.current.useCallback(q,j)},un.useContext=function(q){return R.current.useContext(q)},un.useDebugValue=function(){},un.useDeferredValue=function(q){return R.current.useDeferredValue(q)},un.useEffect=function(q,j){return R.current.useEffect(q,j)},un.useId=function(){return R.current.useId()},un.useImperativeHandle=function(q,j,H){return R.current.useImperativeHandle(q,j,H)},un.useInsertionEffect=function(q,j){return R.current.useInsertionEffect(q,j)},un.useLayoutEffect=function(q,j){return R.current.useLayoutEffect(q,j)},un.useMemo=function(q,j){return R.current.useMemo(q,j)},un.useReducer=function(q,j,H){return R.current.useReducer(q,j,H)},un.useRef=function(q){return R.current.useRef(q)},un.useState=function(q){return R.current.useState(q)},un.useSyncExternalStore=function(q,j,H){return R.current.useSyncExternalStore(q,j,H)},un.useTransition=function(){return R.current.useTransition()},un.version="18.3.1",un}var l_;function lE(){return l_||(l_=1,G2.exports=xj()),G2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function Nj(){if(c_)return uh;c_=1;var t=lE(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(o,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!i.hasOwnProperty(c)&&(f[c]=u[c]);if(o&&o.defaultProps)for(c in u=o.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:e,type:o,key:d,ref:h,props:f,_owner:a.current}}return uh.Fragment=n,uh.jsx=s,uh.jsxs=s,uh}var f_;function Sj(){return f_||(f_=1,j2.exports=Nj()),j2.exports}var tn=Sj(),xn=lE();const Fe=Vc(xn);var hy={},X2={exports:{}},si={},K2={exports:{}},Y2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function Cj(){return d_||(d_=1,function(t){function e(W,M){var G=W.length;W.push(M);e:for(;0<G;){var q=G-1>>>1,j=W[q];if(0<a(j,M))W[q]=M,W[G]=j,G=q;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var M=W[0],G=W.pop();if(G!==M){W[0]=G;e:for(var q=0,j=W.length,H=j>>>1;q<H;){var ne=2*(q+1)-1,ue=W[ne],te=ne+1,se=W[te];if(0>a(ue,G))te<j&&0>a(se,ue)?(W[q]=se,W[te]=G,q=te):(W[q]=ue,W[ne]=G,q=ne);else if(te<j&&0>a(se,G))W[q]=se,W[te]=G,q=te;else break e}}return M}function a(W,M){var G=W.sortIndex-M.sortIndex;return G!==0?G:W.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=W)r(l),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(l)}}function S(W){if(v=!1,w(W),!m)if(n(u)!==null)m=!0,F(C);else{var M=n(l);M!==null&&R(S,M.startTime-W)}}function C(W,M){m=!1,v&&(v=!1,b(k),k=-1),h=!0;var G=d;try{for(w(M),f=n(u);f!==null&&(!(f.expirationTime>M)||W&&!$());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var j=q(f.expirationTime<=M);M=t.unstable_now(),typeof j=="function"?f.callback=j:f===n(u)&&r(u),w(M)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var ne=n(l);ne!==null&&R(S,ne.startTime-M),H=!1}return H}finally{f=null,d=G,h=!1}}var E=!1,A=null,k=-1,D=5,I=-1;function $(){return!(t.unstable_now()-I<D)}function O(){if(A!==null){var W=t.unstable_now();I=W;var M=!0;try{M=A(!0,W)}finally{M?B():(E=!1,A=null)}}else E=!1}var B;if(typeof x=="function")B=function(){x(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,L=z.port2;z.port1.onmessage=O,B=function(){L.postMessage(null)}}else B=function(){y(O,0)};function F(W){A=W,E||(E=!0,B())}function R(W,M){k=y(function(){W(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,F(C))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var G=d;d=M;try{return W()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,M){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var G=d;d=W;try{return M()}finally{d=G}},t.unstable_scheduleCallback=function(W,M,G){var q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,W){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=G+j,W={id:c++,callback:M,priorityLevel:W,startTime:G,expirationTime:j,sortIndex:-1},G>q?(W.sortIndex=G,e(l,W),n(u)===null&&W===n(l)&&(v?(b(k),k=-1):v=!0,R(S,G-q))):(W.sortIndex=j,e(u,W),m||h||(m=!0,F(C))),W},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(W){var M=d;return function(){var G=d;d=M;try{return W.apply(this,arguments)}finally{d=G}}}}(Y2)),Y2}var p_;function Ej(){return p_||(p_=1,K2.exports=Cj()),K2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function Tj(){if(h_)return si;h_=1;var t=lE(),e=Ej();function n(p){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+p,N=1;N<arguments.length;N++)g+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(p,g){s(p,g),s(p+"Capture",g)}function s(p,g){for(a[p]=g,p=0;p<g.length;p++)r.add(g[p])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(p){return u.call(f,p)?!0:u.call(c,p)?!1:l.test(p)?f[p]=!0:(c[p]=!0,!1)}function h(p,g,N,T){if(N!==null&&N.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return T?!1:N!==null?!N.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function m(p,g,N,T){if(g===null||typeof g>"u"||h(p,g,N,T))return!0;if(T)return!1;if(N!==null)switch(N.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v(p,g,N,T,_,P,X){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=T,this.attributeNamespace=_,this.mustUseProperty=N,this.propertyName=p,this.type=g,this.sanitizeURL=P,this.removeEmptyString=X}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new v(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var g=p[0];y[g]=new v(g,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new v(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new v(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new v(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new v(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new v(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new v(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new v(p,5,!1,p.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function x(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var g=p.replace(b,x);y[g]=new v(g,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new v(p,1,!1,p.toLowerCase(),null,!0,!0)});function w(p,g,N,T){var _=y.hasOwnProperty(g)?y[g]:null;(_!==null?_.type!==0:T||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(m(g,N,_,T)&&(N=null),T||_===null?d(g)&&(N===null?p.removeAttribute(g):p.setAttribute(g,""+N)):_.mustUseProperty?p[_.propertyName]=N===null?_.type===3?!1:"":N:(g=_.attributeName,T=_.attributeNamespace,N===null?p.removeAttribute(g):(_=_.type,N=_===3||_===4&&N===!0?"":""+N,T?p.setAttributeNS(T,g,N):p.setAttribute(g,N))))}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),$=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),W=Symbol.iterator;function M(p){return p===null||typeof p!="object"?null:(p=W&&p[W]||p["@@iterator"],typeof p=="function"?p:null)}var G=Object.assign,q;function j(p){if(q===void 0)try{throw Error()}catch(N){var g=N.stack.trim().match(/\n( *(at )?)/);q=g&&g[1]||""}return`
`+q+p}var H=!1;function ne(p,g){if(!p||H)return"";H=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_e){var T=_e}Reflect.construct(p,[],g)}else{try{g.call()}catch(_e){T=_e}p.call(g.prototype)}else{try{throw Error()}catch(_e){T=_e}p()}}catch(_e){if(_e&&T&&typeof _e.stack=="string"){for(var _=_e.stack.split(`
`),P=T.stack.split(`
`),X=_.length-1,le=P.length-1;1<=X&&0<=le&&_[X]!==P[le];)le--;for(;1<=X&&0<=le;X--,le--)if(_[X]!==P[le]){if(X!==1||le!==1)do if(X--,le--,0>le||_[X]!==P[le]){var ye=`
`+_[X].replace(" at new "," at ");return p.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",p.displayName)),ye}while(1<=X&&0<=le);break}}}finally{H=!1,Error.prepareStackTrace=N}return(p=p?p.displayName||p.name:"")?j(p):""}function ue(p){switch(p.tag){case 5:return j(p.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return p=ne(p.type,!1),p;case 11:return p=ne(p.type.render,!1),p;case 1:return p=ne(p.type,!0),p;default:return""}}function te(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case E:return"Portal";case D:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case $:return(p.displayName||"Context")+".Consumer";case I:return(p._context.displayName||"Context")+".Provider";case O:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case L:return g=p.displayName||null,g!==null?g:te(p.type)||"Memo";case F:g=p._payload,p=p._init;try{return te(p(g))}catch{}}return null}function se(p){var g=p.type;switch(p.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=g.render,p=p.displayName||p.name||"",g.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(g);case 8:return g===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function J(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function K(p){var g=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ae(p){var g=K(p)?"checked":"value",N=Object.getOwnPropertyDescriptor(p.constructor.prototype,g),T=""+p[g];if(!p.hasOwnProperty(g)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var _=N.get,P=N.set;return Object.defineProperty(p,g,{configurable:!0,get:function(){return _.call(this)},set:function(X){T=""+X,P.call(this,X)}}),Object.defineProperty(p,g,{enumerable:N.enumerable}),{getValue:function(){return T},setValue:function(X){T=""+X},stopTracking:function(){p._valueTracker=null,delete p[g]}}}}function pe(p){p._valueTracker||(p._valueTracker=ae(p))}function he(p){if(!p)return!1;var g=p._valueTracker;if(!g)return!0;var N=g.getValue(),T="";return p&&(T=K(p)?p.checked?"true":"false":p.value),p=T,p!==N?(g.setValue(p),!0):!1}function Se(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Ee(p,g){var N=g.checked;return G({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??p._wrapperState.initialChecked})}function Z(p,g){var N=g.defaultValue==null?"":g.defaultValue,T=g.checked!=null?g.checked:g.defaultChecked;N=J(g.value!=null?g.value:N),p._wrapperState={initialChecked:T,initialValue:N,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ie(p,g){g=g.checked,g!=null&&w(p,"checked",g,!1)}function ve(p,g){ie(p,g);var N=J(g.value),T=g.type;if(N!=null)T==="number"?(N===0&&p.value===""||p.value!=N)&&(p.value=""+N):p.value!==""+N&&(p.value=""+N);else if(T==="submit"||T==="reset"){p.removeAttribute("value");return}g.hasOwnProperty("value")?Re(p,g.type,N):g.hasOwnProperty("defaultValue")&&Re(p,g.type,J(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(p.defaultChecked=!!g.defaultChecked)}function xe(p,g,N){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var T=g.type;if(!(T!=="submit"&&T!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+p._wrapperState.initialValue,N||g===p.value||(p.value=g),p.defaultValue=g}N=p.name,N!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,N!==""&&(p.name=N)}function Re(p,g,N){(g!=="number"||Se(p.ownerDocument)!==p)&&(N==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+N&&(p.defaultValue=""+N))}var Me=Array.isArray;function je(p,g,N,T){if(p=p.options,g){g={};for(var _=0;_<N.length;_++)g["$"+N[_]]=!0;for(N=0;N<p.length;N++)_=g.hasOwnProperty("$"+p[N].value),p[N].selected!==_&&(p[N].selected=_),_&&T&&(p[N].defaultSelected=!0)}else{for(N=""+J(N),g=null,_=0;_<p.length;_++){if(p[_].value===N){p[_].selected=!0,T&&(p[_].defaultSelected=!0);return}g!==null||p[_].disabled||(g=p[_])}g!==null&&(g.selected=!0)}}function Qe(p,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},g,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function re(p,g){var N=g.value;if(N==null){if(N=g.children,g=g.defaultValue,N!=null){if(g!=null)throw Error(n(92));if(Me(N)){if(1<N.length)throw Error(n(93));N=N[0]}g=N}g==null&&(g=""),N=g}p._wrapperState={initialValue:J(N)}}function ce(p,g){var N=J(g.value),T=J(g.defaultValue);N!=null&&(N=""+N,N!==p.value&&(p.value=N),g.defaultValue==null&&p.defaultValue!==N&&(p.defaultValue=N)),T!=null&&(p.defaultValue=""+T)}function Ce(p){var g=p.textContent;g===p._wrapperState.initialValue&&g!==""&&g!==null&&(p.value=g)}function $e(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(p,g){return p==null||p==="http://www.w3.org/1999/xhtml"?$e(g):p==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Pe,Je=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,N,T,_){MSApp.execUnsafeLocalFunction(function(){return p(g,N,T,_)})}:p}(function(p,g){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=g;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Pe.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;g.firstChild;)p.appendChild(g.firstChild)}});function He(p,g){if(g){var N=p.firstChild;if(N&&N===p.lastChild&&N.nodeType===3){N.nodeValue=g;return}}p.textContent=g}var tt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ze=["Webkit","ms","Moz","O"];Object.keys(tt).forEach(function(p){Ze.forEach(function(g){g=g+p.charAt(0).toUpperCase()+p.substring(1),tt[g]=tt[p]})});function Xt(p,g,N){return g==null||typeof g=="boolean"||g===""?"":N||typeof g!="number"||g===0||tt.hasOwnProperty(p)&&tt[p]?(""+g).trim():g+"px"}function St(p,g){p=p.style;for(var N in g)if(g.hasOwnProperty(N)){var T=N.indexOf("--")===0,_=Xt(N,g[N],T);N==="float"&&(N="cssFloat"),T?p.setProperty(N,_):p[N]=_}}var Cn=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V(p,g){if(g){if(Cn[p]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function fe(p,g){if(p.indexOf("-")===-1)return typeof g.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function We(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Dt=null,At=null,lr=null;function pf(p){if(p=Gp(p)){if(typeof Dt!="function")throw Error(n(280));var g=p.stateNode;g&&(g=Av(g),Dt(p.stateNode,p.type,g))}}function Jg(p){At?lr?lr.push(p):lr=[p]:At=p}function ev(){if(At){var p=At,g=lr;if(lr=At=null,pf(p),g)for(p=0;p<g.length;p++)pf(g[p])}}function tv(p,g){return p(g)}function nv(){}var Ep=!1;function rv(p,g,N){if(Ep)return p(g,N);Ep=!0;try{return tv(p,g,N)}finally{Ep=!1,(At!==null||lr!==null)&&(nv(),ev())}}function zl(p,g){var N=p.stateNode;if(N===null)return null;var T=Av(N);if(T===null)return null;N=T[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(p=p.type,T=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!T;break e;default:p=!1}if(p)return null;if(N&&typeof N!="function")throw Error(n(231,g,typeof N));return N}var Tp=!1;if(o)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){Tp=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{Tp=!1}function sx(p,g,N,T,_,P,X,le,ye){var _e=Array.prototype.slice.call(arguments,3);try{g.apply(N,_e)}catch(Ye){this.onError(Ye)}}var Vl=!1,hf=null,mf=!1,Dp=null,ox={onError:function(p){Vl=!0,hf=p}};function ux(p,g,N,T,_,P,X,le,ye){Vl=!1,hf=null,sx.apply(ox,arguments)}function lx(p,g,N,T,_,P,X,le,ye){if(ux.apply(this,arguments),Vl){if(Vl){var _e=hf;Vl=!1,hf=null}else throw Error(n(198));mf||(mf=!0,Dp=_e)}}function Ro(p){var g=p,N=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(N=g.return),p=g.return;while(p)}return g.tag===3?N:null}function av(p){if(p.tag===13){var g=p.memoizedState;if(g===null&&(p=p.alternate,p!==null&&(g=p.memoizedState)),g!==null)return g.dehydrated}return null}function iv(p){if(Ro(p)!==p)throw Error(n(188))}function cx(p){var g=p.alternate;if(!g){if(g=Ro(p),g===null)throw Error(n(188));return g!==p?null:p}for(var N=p,T=g;;){var _=N.return;if(_===null)break;var P=_.alternate;if(P===null){if(T=_.return,T!==null){N=T;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===N)return iv(_),p;if(P===T)return iv(_),g;P=P.sibling}throw Error(n(188))}if(N.return!==T.return)N=_,T=P;else{for(var X=!1,le=_.child;le;){if(le===N){X=!0,N=_,T=P;break}if(le===T){X=!0,T=_,N=P;break}le=le.sibling}if(!X){for(le=P.child;le;){if(le===N){X=!0,N=P,T=_;break}if(le===T){X=!0,T=P,N=_;break}le=le.sibling}if(!X)throw Error(n(189))}}if(N.alternate!==T)throw Error(n(190))}if(N.tag!==3)throw Error(n(188));return N.stateNode.current===N?p:g}function sv(p){return p=cx(p),p!==null?ov(p):null}function ov(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var g=ov(p);if(g!==null)return g;p=p.sibling}return null}var uv=e.unstable_scheduleCallback,lv=e.unstable_cancelCallback,fx=e.unstable_shouldYield,Wl=e.unstable_requestPaint,Ot=e.unstable_now,xa=e.unstable_getCurrentPriorityLevel,$p=e.unstable_ImmediatePriority,ql=e.unstable_UserBlockingPriority,no=e.unstable_NormalPriority,dx=e.unstable_LowPriority,BA=e.unstable_IdlePriority,cv=null,ro=null;function Fq(p){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(cv,p,void 0,(p.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:Pq,Rq=Math.log,Mq=Math.LN2;function Pq(p){return p>>>=0,p===0?32:31-(Rq(p)/Mq|0)|0}var fv=64,dv=4194304;function Ap(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function pv(p,g){var N=p.pendingLanes;if(N===0)return 0;var T=0,_=p.suspendedLanes,P=p.pingedLanes,X=N&268435455;if(X!==0){var le=X&~_;le!==0?T=Ap(le):(P&=X,P!==0&&(T=Ap(P)))}else X=N&~_,X!==0?T=Ap(X):P!==0&&(T=Ap(P));if(T===0)return 0;if(g!==0&&g!==T&&!(g&_)&&(_=T&-T,P=g&-g,_>=P||_===16&&(P&4194240)!==0))return g;if(T&4&&(T|=N&16),g=p.entangledLanes,g!==0)for(p=p.entanglements,g&=T;0<g;)N=31-Ts(g),_=1<<N,T|=p[N],g&=~_;return T}function Bq(p,g){switch(p){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lq(p,g){for(var N=p.suspendedLanes,T=p.pingedLanes,_=p.expirationTimes,P=p.pendingLanes;0<P;){var X=31-Ts(P),le=1<<X,ye=_[X];ye===-1?(!(le&N)||le&T)&&(_[X]=Bq(le,g)):ye<=g&&(p.expiredLanes|=le),P&=~le}}function px(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function LA(){var p=fv;return fv<<=1,!(fv&4194240)&&(fv=64),p}function hx(p){for(var g=[],N=0;31>N;N++)g.push(p);return g}function Ip(p,g,N){p.pendingLanes|=g,g!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,g=31-Ts(g),p[g]=N}function zq(p,g){var N=p.pendingLanes&~g;p.pendingLanes=g,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=g,p.mutableReadLanes&=g,p.entangledLanes&=g,g=p.entanglements;var T=p.eventTimes;for(p=p.expirationTimes;0<N;){var _=31-Ts(N),P=1<<_;g[_]=0,T[_]=-1,p[_]=-1,N&=~P}}function mx(p,g){var N=p.entangledLanes|=g;for(p=p.entanglements;N;){var T=31-Ts(N),_=1<<T;_&g|p[T]&g&&(p[T]|=g),N&=~_}}var kn=0;function zA(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var UA,gx,VA,WA,qA,vx=!1,hv=[],bu=null,wu=null,xu=null,kp=new Map,_p=new Map,Nu=[],Uq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HA(p,g){switch(p){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":xu=null;break;case"pointerover":case"pointerout":kp.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(g.pointerId)}}function Op(p,g,N,T,_,P){return p===null||p.nativeEvent!==P?(p={blockedOn:g,domEventName:N,eventSystemFlags:T,nativeEvent:P,targetContainers:[_]},g!==null&&(g=Gp(g),g!==null&&gx(g)),p):(p.eventSystemFlags|=T,g=p.targetContainers,_!==null&&g.indexOf(_)===-1&&g.push(_),p)}function Vq(p,g,N,T,_){switch(g){case"focusin":return bu=Op(bu,p,g,N,T,_),!0;case"dragenter":return wu=Op(wu,p,g,N,T,_),!0;case"mouseover":return xu=Op(xu,p,g,N,T,_),!0;case"pointerover":var P=_.pointerId;return kp.set(P,Op(kp.get(P)||null,p,g,N,T,_)),!0;case"gotpointercapture":return P=_.pointerId,_p.set(P,Op(_p.get(P)||null,p,g,N,T,_)),!0}return!1}function jA(p){var g=Hl(p.target);if(g!==null){var N=Ro(g);if(N!==null){if(g=N.tag,g===13){if(g=av(N),g!==null){p.blockedOn=g,qA(p.priority,function(){VA(N)});return}}else if(g===3&&N.stateNode.current.memoizedState.isDehydrated){p.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}p.blockedOn=null}function mv(p){if(p.blockedOn!==null)return!1;for(var g=p.targetContainers;0<g.length;){var N=bx(p.domEventName,p.eventSystemFlags,g[0],p.nativeEvent);if(N===null){N=p.nativeEvent;var T=new N.constructor(N.type,N);ke=T,N.target.dispatchEvent(T),ke=null}else return g=Gp(N),g!==null&&gx(g),p.blockedOn=N,!1;g.shift()}return!0}function GA(p,g,N){mv(p)&&N.delete(g)}function Wq(){vx=!1,bu!==null&&mv(bu)&&(bu=null),wu!==null&&mv(wu)&&(wu=null),xu!==null&&mv(xu)&&(xu=null),kp.forEach(GA),_p.forEach(GA)}function Fp(p,g){p.blockedOn===g&&(p.blockedOn=null,vx||(vx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wq)))}function Rp(p){function g(_){return Fp(_,p)}if(0<hv.length){Fp(hv[0],p);for(var N=1;N<hv.length;N++){var T=hv[N];T.blockedOn===p&&(T.blockedOn=null)}}for(bu!==null&&Fp(bu,p),wu!==null&&Fp(wu,p),xu!==null&&Fp(xu,p),kp.forEach(g),_p.forEach(g),N=0;N<Nu.length;N++)T=Nu[N],T.blockedOn===p&&(T.blockedOn=null);for(;0<Nu.length&&(N=Nu[0],N.blockedOn===null);)jA(N),N.blockedOn===null&&Nu.shift()}var gf=S.ReactCurrentBatchConfig,gv=!0;function qq(p,g,N,T){var _=kn,P=gf.transition;gf.transition=null;try{kn=1,yx(p,g,N,T)}finally{kn=_,gf.transition=P}}function Hq(p,g,N,T){var _=kn,P=gf.transition;gf.transition=null;try{kn=4,yx(p,g,N,T)}finally{kn=_,gf.transition=P}}function yx(p,g,N,T){if(gv){var _=bx(p,g,N,T);if(_===null)Mx(p,g,T,vv,N),HA(p,T);else if(Vq(_,p,g,N,T))T.stopPropagation();else if(HA(p,T),g&4&&-1<Uq.indexOf(p)){for(;_!==null;){var P=Gp(_);if(P!==null&&UA(P),P=bx(p,g,N,T),P===null&&Mx(p,g,T,vv,N),P===_)break;_=P}_!==null&&T.stopPropagation()}else Mx(p,g,T,null,N)}}var vv=null;function bx(p,g,N,T){if(vv=null,p=We(T),p=Hl(p),p!==null)if(g=Ro(p),g===null)p=null;else if(N=g.tag,N===13){if(p=av(g),p!==null)return p;p=null}else if(N===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;p=null}else g!==p&&(p=null);return vv=p,null}function XA(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xa()){case $p:return 1;case ql:return 4;case no:case dx:return 16;case BA:return 536870912;default:return 16}default:return 16}}var Su=null,wx=null,yv=null;function KA(){if(yv)return yv;var p,g=wx,N=g.length,T,_="value"in Su?Su.value:Su.textContent,P=_.length;for(p=0;p<N&&g[p]===_[p];p++);var X=N-p;for(T=1;T<=X&&g[N-T]===_[P-T];T++);return yv=_.slice(p,1<T?1-T:void 0)}function bv(p){var g=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&g===13&&(p=13)):p=g,p===10&&(p=13),32<=p||p===13?p:0}function wv(){return!0}function YA(){return!1}function Ai(p){function g(N,T,_,P,X){this._reactName=N,this._targetInst=_,this.type=T,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var le in p)p.hasOwnProperty(le)&&(N=p[le],this[le]=N?N(P):P[le]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?wv:YA,this.isPropagationStopped=YA,this}return G(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=wv)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=wv)},persist:function(){},isPersistent:wv}),g}var vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xx=Ai(vf),Mp=G({},vf,{view:0,detail:0}),jq=Ai(Mp),Nx,Sx,Pp,xv=G({},Mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ex,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Pp&&(Pp&&p.type==="mousemove"?(Nx=p.screenX-Pp.screenX,Sx=p.screenY-Pp.screenY):Sx=Nx=0,Pp=p),Nx)},movementY:function(p){return"movementY"in p?p.movementY:Sx}}),ZA=Ai(xv),Gq=G({},xv,{dataTransfer:0}),Xq=Ai(Gq),Kq=G({},Mp,{relatedTarget:0}),Cx=Ai(Kq),Yq=G({},vf,{animationName:0,elapsedTime:0,pseudoElement:0}),Zq=Ai(Yq),Qq=G({},vf,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Jq=Ai(Qq),eH=G({},vf,{data:0}),QA=Ai(eH),tH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aH(p){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(p):(p=rH[p])?!!g[p]:!1}function Ex(){return aH}var iH=G({},Mp,{key:function(p){if(p.key){var g=tH[p.key]||p.key;if(g!=="Unidentified")return g}return p.type==="keypress"?(p=bv(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?nH[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ex,charCode:function(p){return p.type==="keypress"?bv(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?bv(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),sH=Ai(iH),oH=G({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JA=Ai(oH),uH=G({},Mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ex}),lH=Ai(uH),cH=G({},vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),fH=Ai(cH),dH=G({},xv,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),pH=Ai(dH),hH=[9,13,27,32],Tx=o&&"CompositionEvent"in window,Bp=null;o&&"documentMode"in document&&(Bp=document.documentMode);var mH=o&&"TextEvent"in window&&!Bp,eI=o&&(!Tx||Bp&&8<Bp&&11>=Bp),tI=" ",nI=!1;function rI(p,g){switch(p){case"keyup":return hH.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aI(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var yf=!1;function gH(p,g){switch(p){case"compositionend":return aI(g);case"keypress":return g.which!==32?null:(nI=!0,tI);case"textInput":return p=g.data,p===tI&&nI?null:p;default:return null}}function vH(p,g){if(yf)return p==="compositionend"||!Tx&&rI(p,g)?(p=KA(),yv=wx=Su=null,yf=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return eI&&g.locale!=="ko"?null:g.data;default:return null}}var yH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iI(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g==="input"?!!yH[p.type]:g==="textarea"}function sI(p,g,N,T){Jg(T),g=Tv(g,"onChange"),0<g.length&&(N=new xx("onChange","change",null,N,T),p.push({event:N,listeners:g}))}var Lp=null,zp=null;function bH(p){CI(p,0)}function Nv(p){var g=Sf(p);if(he(g))return p}function wH(p,g){if(p==="change")return g}var oI=!1;if(o){var Dx;if(o){var $x="oninput"in document;if(!$x){var uI=document.createElement("div");uI.setAttribute("oninput","return;"),$x=typeof uI.oninput=="function"}Dx=$x}else Dx=!1;oI=Dx&&(!document.documentMode||9<document.documentMode)}function lI(){Lp&&(Lp.detachEvent("onpropertychange",cI),zp=Lp=null)}function cI(p){if(p.propertyName==="value"&&Nv(zp)){var g=[];sI(g,zp,p,We(p)),rv(bH,g)}}function xH(p,g,N){p==="focusin"?(lI(),Lp=g,zp=N,Lp.attachEvent("onpropertychange",cI)):p==="focusout"&&lI()}function NH(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Nv(zp)}function SH(p,g){if(p==="click")return Nv(g)}function CH(p,g){if(p==="input"||p==="change")return Nv(g)}function EH(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var Ds=typeof Object.is=="function"?Object.is:EH;function Up(p,g){if(Ds(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var N=Object.keys(p),T=Object.keys(g);if(N.length!==T.length)return!1;for(T=0;T<N.length;T++){var _=N[T];if(!u.call(g,_)||!Ds(p[_],g[_]))return!1}return!0}function fI(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function dI(p,g){var N=fI(p);p=0;for(var T;N;){if(N.nodeType===3){if(T=p+N.textContent.length,p<=g&&T>=g)return{node:N,offset:g-p};p=T}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=fI(N)}}function pI(p,g){return p&&g?p===g?!0:p&&p.nodeType===3?!1:g&&g.nodeType===3?pI(p,g.parentNode):"contains"in p?p.contains(g):p.compareDocumentPosition?!!(p.compareDocumentPosition(g)&16):!1:!1}function hI(){for(var p=window,g=Se();g instanceof p.HTMLIFrameElement;){try{var N=typeof g.contentWindow.location.href=="string"}catch{N=!1}if(N)p=g.contentWindow;else break;g=Se(p.document)}return g}function Ax(p){var g=p&&p.nodeName&&p.nodeName.toLowerCase();return g&&(g==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||g==="textarea"||p.contentEditable==="true")}function TH(p){var g=hI(),N=p.focusedElem,T=p.selectionRange;if(g!==N&&N&&N.ownerDocument&&pI(N.ownerDocument.documentElement,N)){if(T!==null&&Ax(N)){if(g=T.start,p=T.end,p===void 0&&(p=g),"selectionStart"in N)N.selectionStart=g,N.selectionEnd=Math.min(p,N.value.length);else if(p=(g=N.ownerDocument||document)&&g.defaultView||window,p.getSelection){p=p.getSelection();var _=N.textContent.length,P=Math.min(T.start,_);T=T.end===void 0?P:Math.min(T.end,_),!p.extend&&P>T&&(_=T,T=P,P=_),_=dI(N,P);var X=dI(N,T);_&&X&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==X.node||p.focusOffset!==X.offset)&&(g=g.createRange(),g.setStart(_.node,_.offset),p.removeAllRanges(),P>T?(p.addRange(g),p.extend(X.node,X.offset)):(g.setEnd(X.node,X.offset),p.addRange(g)))}}for(g=[],p=N;p=p.parentNode;)p.nodeType===1&&g.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<g.length;N++)p=g[N],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var DH=o&&"documentMode"in document&&11>=document.documentMode,bf=null,Ix=null,Vp=null,kx=!1;function mI(p,g,N){var T=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;kx||bf==null||bf!==Se(T)||(T=bf,"selectionStart"in T&&Ax(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Vp&&Up(Vp,T)||(Vp=T,T=Tv(Ix,"onSelect"),0<T.length&&(g=new xx("onSelect","select",null,g,N),p.push({event:g,listeners:T}),g.target=bf)))}function Sv(p,g){var N={};return N[p.toLowerCase()]=g.toLowerCase(),N["Webkit"+p]="webkit"+g,N["Moz"+p]="moz"+g,N}var wf={animationend:Sv("Animation","AnimationEnd"),animationiteration:Sv("Animation","AnimationIteration"),animationstart:Sv("Animation","AnimationStart"),transitionend:Sv("Transition","TransitionEnd")},_x={},gI={};o&&(gI=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function Cv(p){if(_x[p])return _x[p];if(!wf[p])return p;var g=wf[p],N;for(N in g)if(g.hasOwnProperty(N)&&N in gI)return _x[p]=g[N];return p}var vI=Cv("animationend"),yI=Cv("animationiteration"),bI=Cv("animationstart"),wI=Cv("transitionend"),xI=new Map,NI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cu(p,g){xI.set(p,g),i(g,[p])}for(var Ox=0;Ox<NI.length;Ox++){var Fx=NI[Ox],$H=Fx.toLowerCase(),AH=Fx[0].toUpperCase()+Fx.slice(1);Cu($H,"on"+AH)}Cu(vI,"onAnimationEnd"),Cu(yI,"onAnimationIteration"),Cu(bI,"onAnimationStart"),Cu("dblclick","onDoubleClick"),Cu("focusin","onFocus"),Cu("focusout","onBlur"),Cu(wI,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wp));function SI(p,g,N){var T=p.type||"unknown-event";p.currentTarget=N,lx(T,g,void 0,p),p.currentTarget=null}function CI(p,g){g=(g&4)!==0;for(var N=0;N<p.length;N++){var T=p[N],_=T.event;T=T.listeners;e:{var P=void 0;if(g)for(var X=T.length-1;0<=X;X--){var le=T[X],ye=le.instance,_e=le.currentTarget;if(le=le.listener,ye!==P&&_.isPropagationStopped())break e;SI(_,le,_e),P=ye}else for(X=0;X<T.length;X++){if(le=T[X],ye=le.instance,_e=le.currentTarget,le=le.listener,ye!==P&&_.isPropagationStopped())break e;SI(_,le,_e),P=ye}}}if(mf)throw p=Dp,mf=!1,Dp=null,p}function Gn(p,g){var N=g[Vx];N===void 0&&(N=g[Vx]=new Set);var T=p+"__bubble";N.has(T)||(EI(g,p,2,!1),N.add(T))}function Rx(p,g,N){var T=0;g&&(T|=4),EI(N,p,T,g)}var Ev="_reactListening"+Math.random().toString(36).slice(2);function qp(p){if(!p[Ev]){p[Ev]=!0,r.forEach(function(N){N!=="selectionchange"&&(IH.has(N)||Rx(N,!1,p),Rx(N,!0,p))});var g=p.nodeType===9?p:p.ownerDocument;g===null||g[Ev]||(g[Ev]=!0,Rx("selectionchange",!1,g))}}function EI(p,g,N,T){switch(XA(g)){case 1:var _=qq;break;case 4:_=Hq;break;default:_=yx}N=_.bind(null,g,N,p),_=void 0,!Tp||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(_=!0),T?_!==void 0?p.addEventListener(g,N,{capture:!0,passive:_}):p.addEventListener(g,N,!0):_!==void 0?p.addEventListener(g,N,{passive:_}):p.addEventListener(g,N,!1)}function Mx(p,g,N,T,_){var P=T;if(!(g&1)&&!(g&2)&&T!==null)e:for(;;){if(T===null)return;var X=T.tag;if(X===3||X===4){var le=T.stateNode.containerInfo;if(le===_||le.nodeType===8&&le.parentNode===_)break;if(X===4)for(X=T.return;X!==null;){var ye=X.tag;if((ye===3||ye===4)&&(ye=X.stateNode.containerInfo,ye===_||ye.nodeType===8&&ye.parentNode===_))return;X=X.return}for(;le!==null;){if(X=Hl(le),X===null)return;if(ye=X.tag,ye===5||ye===6){T=P=X;continue e}le=le.parentNode}}T=T.return}rv(function(){var _e=P,Ye=We(N),et=[];e:{var Ke=xI.get(p);if(Ke!==void 0){var ct=xx,gt=p;switch(p){case"keypress":if(bv(N)===0)break e;case"keydown":case"keyup":ct=sH;break;case"focusin":gt="focus",ct=Cx;break;case"focusout":gt="blur",ct=Cx;break;case"beforeblur":case"afterblur":ct=Cx;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=ZA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Xq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=lH;break;case vI:case yI:case bI:ct=Zq;break;case wI:ct=fH;break;case"scroll":ct=jq;break;case"wheel":ct=pH;break;case"copy":case"cut":case"paste":ct=Jq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=JA}var yt=(g&4)!==0,vr=!yt&&p==="scroll",De=yt?Ke!==null?Ke+"Capture":null:Ke;yt=[];for(var Ne=_e,Ie;Ne!==null;){Ie=Ne;var at=Ie.stateNode;if(Ie.tag===5&&at!==null&&(Ie=at,De!==null&&(at=zl(Ne,De),at!=null&&yt.push(Hp(Ne,at,Ie)))),vr)break;Ne=Ne.return}0<yt.length&&(Ke=new ct(Ke,gt,null,N,Ye),et.push({event:Ke,listeners:yt}))}}if(!(g&7)){e:{if(Ke=p==="mouseover"||p==="pointerover",ct=p==="mouseout"||p==="pointerout",Ke&&N!==ke&&(gt=N.relatedTarget||N.fromElement)&&(Hl(gt)||gt[Mo]))break e;if((ct||Ke)&&(Ke=Ye.window===Ye?Ye:(Ke=Ye.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,ct?(gt=N.relatedTarget||N.toElement,ct=_e,gt=gt?Hl(gt):null,gt!==null&&(vr=Ro(gt),gt!==vr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ct=null,gt=_e),ct!==gt)){if(yt=ZA,at="onMouseLeave",De="onMouseEnter",Ne="mouse",(p==="pointerout"||p==="pointerover")&&(yt=JA,at="onPointerLeave",De="onPointerEnter",Ne="pointer"),vr=ct==null?Ke:Sf(ct),Ie=gt==null?Ke:Sf(gt),Ke=new yt(at,Ne+"leave",ct,N,Ye),Ke.target=vr,Ke.relatedTarget=Ie,at=null,Hl(Ye)===_e&&(yt=new yt(De,Ne+"enter",gt,N,Ye),yt.target=Ie,yt.relatedTarget=vr,at=yt),vr=at,ct&&gt)t:{for(yt=ct,De=gt,Ne=0,Ie=yt;Ie;Ie=xf(Ie))Ne++;for(Ie=0,at=De;at;at=xf(at))Ie++;for(;0<Ne-Ie;)yt=xf(yt),Ne--;for(;0<Ie-Ne;)De=xf(De),Ie--;for(;Ne--;){if(yt===De||De!==null&&yt===De.alternate)break t;yt=xf(yt),De=xf(De)}yt=null}else yt=null;ct!==null&&TI(et,Ke,ct,yt,!1),gt!==null&&vr!==null&&TI(et,vr,gt,yt,!0)}}e:{if(Ke=_e?Sf(_e):window,ct=Ke.nodeName&&Ke.nodeName.toLowerCase(),ct==="select"||ct==="input"&&Ke.type==="file")var xt=wH;else if(iI(Ke))if(oI)xt=CH;else{xt=NH;var It=xH}else(ct=Ke.nodeName)&&ct.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(xt=SH);if(xt&&(xt=xt(p,_e))){sI(et,xt,N,Ye);break e}It&&It(p,Ke,_e),p==="focusout"&&(It=Ke._wrapperState)&&It.controlled&&Ke.type==="number"&&Re(Ke,"number",Ke.value)}switch(It=_e?Sf(_e):window,p){case"focusin":(iI(It)||It.contentEditable==="true")&&(bf=It,Ix=_e,Vp=null);break;case"focusout":Vp=Ix=bf=null;break;case"mousedown":kx=!0;break;case"contextmenu":case"mouseup":case"dragend":kx=!1,mI(et,N,Ye);break;case"selectionchange":if(DH)break;case"keydown":case"keyup":mI(et,N,Ye)}var kt;if(Tx)e:{switch(p){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else yf?rI(p,N)&&(Lt="onCompositionEnd"):p==="keydown"&&N.keyCode===229&&(Lt="onCompositionStart");Lt&&(eI&&N.locale!=="ko"&&(yf||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&yf&&(kt=KA()):(Su=Ye,wx="value"in Su?Su.value:Su.textContent,yf=!0)),It=Tv(_e,Lt),0<It.length&&(Lt=new QA(Lt,p,null,N,Ye),et.push({event:Lt,listeners:It}),kt?Lt.data=kt:(kt=aI(N),kt!==null&&(Lt.data=kt)))),(kt=mH?gH(p,N):vH(p,N))&&(_e=Tv(_e,"onBeforeInput"),0<_e.length&&(Ye=new QA("onBeforeInput","beforeinput",null,N,Ye),et.push({event:Ye,listeners:_e}),Ye.data=kt))}CI(et,g)})}function Hp(p,g,N){return{instance:p,listener:g,currentTarget:N}}function Tv(p,g){for(var N=g+"Capture",T=[];p!==null;){var _=p,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=zl(p,N),P!=null&&T.unshift(Hp(p,P,_)),P=zl(p,g),P!=null&&T.push(Hp(p,P,_))),p=p.return}return T}function xf(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function TI(p,g,N,T,_){for(var P=g._reactName,X=[];N!==null&&N!==T;){var le=N,ye=le.alternate,_e=le.stateNode;if(ye!==null&&ye===T)break;le.tag===5&&_e!==null&&(le=_e,_?(ye=zl(N,P),ye!=null&&X.unshift(Hp(N,ye,le))):_||(ye=zl(N,P),ye!=null&&X.push(Hp(N,ye,le)))),N=N.return}X.length!==0&&p.push({event:g,listeners:X})}var kH=/\r\n?/g,_H=/\u0000|\uFFFD/g;function DI(p){return(typeof p=="string"?p:""+p).replace(kH,`
`).replace(_H,"")}function Dv(p,g,N){if(g=DI(g),DI(p)!==g&&N)throw Error(n(425))}function $v(){}var Px=null,Bx=null;function Lx(p,g){return p==="textarea"||p==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var zx=typeof setTimeout=="function"?setTimeout:void 0,OH=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,FH=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(p){return $I.resolve(null).then(p).catch(RH)}:zx;function RH(p){setTimeout(function(){throw p})}function Ux(p,g){var N=g,T=0;do{var _=N.nextSibling;if(p.removeChild(N),_&&_.nodeType===8)if(N=_.data,N==="/$"){if(T===0){p.removeChild(_),Rp(g);return}T--}else N!=="$"&&N!=="$?"&&N!=="$!"||T++;N=_}while(N);Rp(g)}function Eu(p){for(;p!=null;p=p.nextSibling){var g=p.nodeType;if(g===1||g===3)break;if(g===8){if(g=p.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return p}function AI(p){p=p.previousSibling;for(var g=0;p;){if(p.nodeType===8){var N=p.data;if(N==="$"||N==="$!"||N==="$?"){if(g===0)return p;g--}else N==="/$"&&g++}p=p.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),ao="__reactFiber$"+Nf,jp="__reactProps$"+Nf,Mo="__reactContainer$"+Nf,Vx="__reactEvents$"+Nf,MH="__reactListeners$"+Nf,PH="__reactHandles$"+Nf;function Hl(p){var g=p[ao];if(g)return g;for(var N=p.parentNode;N;){if(g=N[Mo]||N[ao]){if(N=g.alternate,g.child!==null||N!==null&&N.child!==null)for(p=AI(p);p!==null;){if(N=p[ao])return N;p=AI(p)}return g}p=N,N=p.parentNode}return null}function Gp(p){return p=p[ao]||p[Mo],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function Sf(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function Av(p){return p[jp]||null}var Wx=[],Cf=-1;function Tu(p){return{current:p}}function Xn(p){0>Cf||(p.current=Wx[Cf],Wx[Cf]=null,Cf--)}function qn(p,g){Cf++,Wx[Cf]=p.current,p.current=g}var Du={},Na=Tu(Du),ti=Tu(!1),jl=Du;function Ef(p,g){var N=p.type.contextTypes;if(!N)return Du;var T=p.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===g)return T.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in N)_[P]=g[P];return T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=g,p.__reactInternalMemoizedMaskedChildContext=_),_}function ni(p){return p=p.childContextTypes,p!=null}function Iv(){Xn(ti),Xn(Na)}function II(p,g,N){if(Na.current!==Du)throw Error(n(168));qn(Na,g),qn(ti,N)}function kI(p,g,N){var T=p.stateNode;if(g=g.childContextTypes,typeof T.getChildContext!="function")return N;T=T.getChildContext();for(var _ in T)if(!(_ in g))throw Error(n(108,se(p)||"Unknown",_));return G({},N,T)}function kv(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Du,jl=Na.current,qn(Na,p),qn(ti,ti.current),!0}function _I(p,g,N){var T=p.stateNode;if(!T)throw Error(n(169));N?(p=kI(p,g,jl),T.__reactInternalMemoizedMergedChildContext=p,Xn(ti),Xn(Na),qn(Na,p)):Xn(ti),qn(ti,N)}var Po=null,_v=!1,qx=!1;function OI(p){Po===null?Po=[p]:Po.push(p)}function BH(p){_v=!0,OI(p)}function $u(){if(!qx&&Po!==null){qx=!0;var p=0,g=kn;try{var N=Po;for(kn=1;p<N.length;p++){var T=N[p];do T=T(!0);while(T!==null)}Po=null,_v=!1}catch(_){throw Po!==null&&(Po=Po.slice(p+1)),uv($p,$u),_}finally{kn=g,qx=!1}}return null}var Tf=[],Df=0,Ov=null,Fv=0,Hi=[],ji=0,Gl=null,Bo=1,Lo="";function Xl(p,g){Tf[Df++]=Fv,Tf[Df++]=Ov,Ov=p,Fv=g}function FI(p,g,N){Hi[ji++]=Bo,Hi[ji++]=Lo,Hi[ji++]=Gl,Gl=p;var T=Bo;p=Lo;var _=32-Ts(T)-1;T&=~(1<<_),N+=1;var P=32-Ts(g)+_;if(30<P){var X=_-_%5;P=(T&(1<<X)-1).toString(32),T>>=X,_-=X,Bo=1<<32-Ts(g)+_|N<<_|T,Lo=P+p}else Bo=1<<P|N<<_|T,Lo=p}function Hx(p){p.return!==null&&(Xl(p,1),FI(p,1,0))}function jx(p){for(;p===Ov;)Ov=Tf[--Df],Tf[Df]=null,Fv=Tf[--Df],Tf[Df]=null;for(;p===Gl;)Gl=Hi[--ji],Hi[ji]=null,Lo=Hi[--ji],Hi[ji]=null,Bo=Hi[--ji],Hi[ji]=null}var Ii=null,ki=null,Zn=!1,$s=null;function RI(p,g){var N=Yi(5,null,null,0);N.elementType="DELETED",N.stateNode=g,N.return=p,g=p.deletions,g===null?(p.deletions=[N],p.flags|=16):g.push(N)}function MI(p,g){switch(p.tag){case 5:var N=p.type;return g=g.nodeType!==1||N.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(p.stateNode=g,Ii=p,ki=Eu(g.firstChild),!0):!1;case 6:return g=p.pendingProps===""||g.nodeType!==3?null:g,g!==null?(p.stateNode=g,Ii=p,ki=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(N=Gl!==null?{id:Bo,overflow:Lo}:null,p.memoizedState={dehydrated:g,treeContext:N,retryLane:1073741824},N=Yi(18,null,null,0),N.stateNode=g,N.return=p,p.child=N,Ii=p,ki=null,!0):!1;default:return!1}}function Gx(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Xx(p){if(Zn){var g=ki;if(g){var N=g;if(!MI(p,g)){if(Gx(p))throw Error(n(418));g=Eu(N.nextSibling);var T=Ii;g&&MI(p,g)?RI(T,N):(p.flags=p.flags&-4097|2,Zn=!1,Ii=p)}}else{if(Gx(p))throw Error(n(418));p.flags=p.flags&-4097|2,Zn=!1,Ii=p}}}function PI(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Ii=p}function Rv(p){if(p!==Ii)return!1;if(!Zn)return PI(p),Zn=!0,!1;var g;if((g=p.tag!==3)&&!(g=p.tag!==5)&&(g=p.type,g=g!=="head"&&g!=="body"&&!Lx(p.type,p.memoizedProps)),g&&(g=ki)){if(Gx(p))throw BI(),Error(n(418));for(;g;)RI(p,g),g=Eu(g.nextSibling)}if(PI(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,g=0;p;){if(p.nodeType===8){var N=p.data;if(N==="/$"){if(g===0){ki=Eu(p.nextSibling);break e}g--}else N!=="$"&&N!=="$!"&&N!=="$?"||g++}p=p.nextSibling}ki=null}}else ki=Ii?Eu(p.stateNode.nextSibling):null;return!0}function BI(){for(var p=ki;p;)p=Eu(p.nextSibling)}function $f(){ki=Ii=null,Zn=!1}function Kx(p){$s===null?$s=[p]:$s.push(p)}var LH=S.ReactCurrentBatchConfig;function Xp(p,g,N){if(p=N.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(n(309));var T=N.stateNode}if(!T)throw Error(n(147,p));var _=T,P=""+p;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===P?g.ref:(g=function(X){var le=_.refs;X===null?delete le[P]:le[P]=X},g._stringRef=P,g)}if(typeof p!="string")throw Error(n(284));if(!N._owner)throw Error(n(290,p))}return p}function Mv(p,g){throw p=Object.prototype.toString.call(g),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p))}function LI(p){var g=p._init;return g(p._payload)}function zI(p){function g(De,Ne){if(p){var Ie=De.deletions;Ie===null?(De.deletions=[Ne],De.flags|=16):Ie.push(Ne)}}function N(De,Ne){if(!p)return null;for(;Ne!==null;)g(De,Ne),Ne=Ne.sibling;return null}function T(De,Ne){for(De=new Map;Ne!==null;)Ne.key!==null?De.set(Ne.key,Ne):De.set(Ne.index,Ne),Ne=Ne.sibling;return De}function _(De,Ne){return De=Mu(De,Ne),De.index=0,De.sibling=null,De}function P(De,Ne,Ie){return De.index=Ie,p?(Ie=De.alternate,Ie!==null?(Ie=Ie.index,Ie<Ne?(De.flags|=2,Ne):Ie):(De.flags|=2,Ne)):(De.flags|=1048576,Ne)}function X(De){return p&&De.alternate===null&&(De.flags|=2),De}function le(De,Ne,Ie,at){return Ne===null||Ne.tag!==6?(Ne=z2(Ie,De.mode,at),Ne.return=De,Ne):(Ne=_(Ne,Ie),Ne.return=De,Ne)}function ye(De,Ne,Ie,at){var xt=Ie.type;return xt===A?Ye(De,Ne,Ie.props.children,at,Ie.key):Ne!==null&&(Ne.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&LI(xt)===Ne.type)?(at=_(Ne,Ie.props),at.ref=Xp(De,Ne,Ie),at.return=De,at):(at=sy(Ie.type,Ie.key,Ie.props,null,De.mode,at),at.ref=Xp(De,Ne,Ie),at.return=De,at)}function _e(De,Ne,Ie,at){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==Ie.containerInfo||Ne.stateNode.implementation!==Ie.implementation?(Ne=U2(Ie,De.mode,at),Ne.return=De,Ne):(Ne=_(Ne,Ie.children||[]),Ne.return=De,Ne)}function Ye(De,Ne,Ie,at,xt){return Ne===null||Ne.tag!==7?(Ne=nc(Ie,De.mode,at,xt),Ne.return=De,Ne):(Ne=_(Ne,Ie),Ne.return=De,Ne)}function et(De,Ne,Ie){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ne=z2(""+Ne,De.mode,Ie),Ne.return=De,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case C:return Ie=sy(Ne.type,Ne.key,Ne.props,null,De.mode,Ie),Ie.ref=Xp(De,null,Ne),Ie.return=De,Ie;case E:return Ne=U2(Ne,De.mode,Ie),Ne.return=De,Ne;case F:var at=Ne._init;return et(De,at(Ne._payload),Ie)}if(Me(Ne)||M(Ne))return Ne=nc(Ne,De.mode,Ie,null),Ne.return=De,Ne;Mv(De,Ne)}return null}function Ke(De,Ne,Ie,at){var xt=Ne!==null?Ne.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return xt!==null?null:le(De,Ne,""+Ie,at);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ie.key===xt?ye(De,Ne,Ie,at):null;case E:return Ie.key===xt?_e(De,Ne,Ie,at):null;case F:return xt=Ie._init,Ke(De,Ne,xt(Ie._payload),at)}if(Me(Ie)||M(Ie))return xt!==null?null:Ye(De,Ne,Ie,at,null);Mv(De,Ie)}return null}function ct(De,Ne,Ie,at,xt){if(typeof at=="string"&&at!==""||typeof at=="number")return De=De.get(Ie)||null,le(Ne,De,""+at,xt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case C:return De=De.get(at.key===null?Ie:at.key)||null,ye(Ne,De,at,xt);case E:return De=De.get(at.key===null?Ie:at.key)||null,_e(Ne,De,at,xt);case F:var It=at._init;return ct(De,Ne,Ie,It(at._payload),xt)}if(Me(at)||M(at))return De=De.get(Ie)||null,Ye(Ne,De,at,xt,null);Mv(Ne,at)}return null}function gt(De,Ne,Ie,at){for(var xt=null,It=null,kt=Ne,Lt=Ne=0,Kr=null;kt!==null&&Lt<Ie.length;Lt++){kt.index>Lt?(Kr=kt,kt=null):Kr=kt.sibling;var Nn=Ke(De,kt,Ie[Lt],at);if(Nn===null){kt===null&&(kt=Kr);break}p&&kt&&Nn.alternate===null&&g(De,kt),Ne=P(Nn,Ne,Lt),It===null?xt=Nn:It.sibling=Nn,It=Nn,kt=Kr}if(Lt===Ie.length)return N(De,kt),Zn&&Xl(De,Lt),xt;if(kt===null){for(;Lt<Ie.length;Lt++)kt=et(De,Ie[Lt],at),kt!==null&&(Ne=P(kt,Ne,Lt),It===null?xt=kt:It.sibling=kt,It=kt);return Zn&&Xl(De,Lt),xt}for(kt=T(De,kt);Lt<Ie.length;Lt++)Kr=ct(kt,De,Lt,Ie[Lt],at),Kr!==null&&(p&&Kr.alternate!==null&&kt.delete(Kr.key===null?Lt:Kr.key),Ne=P(Kr,Ne,Lt),It===null?xt=Kr:It.sibling=Kr,It=Kr);return p&&kt.forEach(function(Pu){return g(De,Pu)}),Zn&&Xl(De,Lt),xt}function yt(De,Ne,Ie,at){var xt=M(Ie);if(typeof xt!="function")throw Error(n(150));if(Ie=xt.call(Ie),Ie==null)throw Error(n(151));for(var It=xt=null,kt=Ne,Lt=Ne=0,Kr=null,Nn=Ie.next();kt!==null&&!Nn.done;Lt++,Nn=Ie.next()){kt.index>Lt?(Kr=kt,kt=null):Kr=kt.sibling;var Pu=Ke(De,kt,Nn.value,at);if(Pu===null){kt===null&&(kt=Kr);break}p&&kt&&Pu.alternate===null&&g(De,kt),Ne=P(Pu,Ne,Lt),It===null?xt=Pu:It.sibling=Pu,It=Pu,kt=Kr}if(Nn.done)return N(De,kt),Zn&&Xl(De,Lt),xt;if(kt===null){for(;!Nn.done;Lt++,Nn=Ie.next())Nn=et(De,Nn.value,at),Nn!==null&&(Ne=P(Nn,Ne,Lt),It===null?xt=Nn:It.sibling=Nn,It=Nn);return Zn&&Xl(De,Lt),xt}for(kt=T(De,kt);!Nn.done;Lt++,Nn=Ie.next())Nn=ct(kt,De,Lt,Nn.value,at),Nn!==null&&(p&&Nn.alternate!==null&&kt.delete(Nn.key===null?Lt:Nn.key),Ne=P(Nn,Ne,Lt),It===null?xt=Nn:It.sibling=Nn,It=Nn);return p&&kt.forEach(function(yj){return g(De,yj)}),Zn&&Xl(De,Lt),xt}function vr(De,Ne,Ie,at){if(typeof Ie=="object"&&Ie!==null&&Ie.type===A&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:e:{for(var xt=Ie.key,It=Ne;It!==null;){if(It.key===xt){if(xt=Ie.type,xt===A){if(It.tag===7){N(De,It.sibling),Ne=_(It,Ie.props.children),Ne.return=De,De=Ne;break e}}else if(It.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===F&&LI(xt)===It.type){N(De,It.sibling),Ne=_(It,Ie.props),Ne.ref=Xp(De,It,Ie),Ne.return=De,De=Ne;break e}N(De,It);break}else g(De,It);It=It.sibling}Ie.type===A?(Ne=nc(Ie.props.children,De.mode,at,Ie.key),Ne.return=De,De=Ne):(at=sy(Ie.type,Ie.key,Ie.props,null,De.mode,at),at.ref=Xp(De,Ne,Ie),at.return=De,De=at)}return X(De);case E:e:{for(It=Ie.key;Ne!==null;){if(Ne.key===It)if(Ne.tag===4&&Ne.stateNode.containerInfo===Ie.containerInfo&&Ne.stateNode.implementation===Ie.implementation){N(De,Ne.sibling),Ne=_(Ne,Ie.children||[]),Ne.return=De,De=Ne;break e}else{N(De,Ne);break}else g(De,Ne);Ne=Ne.sibling}Ne=U2(Ie,De.mode,at),Ne.return=De,De=Ne}return X(De);case F:return It=Ie._init,vr(De,Ne,It(Ie._payload),at)}if(Me(Ie))return gt(De,Ne,Ie,at);if(M(Ie))return yt(De,Ne,Ie,at);Mv(De,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,Ne!==null&&Ne.tag===6?(N(De,Ne.sibling),Ne=_(Ne,Ie),Ne.return=De,De=Ne):(N(De,Ne),Ne=z2(Ie,De.mode,at),Ne.return=De,De=Ne),X(De)):N(De,Ne)}return vr}var Af=zI(!0),UI=zI(!1),Pv=Tu(null),Bv=null,If=null,Yx=null;function Zx(){Yx=If=Bv=null}function Qx(p){var g=Pv.current;Xn(Pv),p._currentValue=g}function Jx(p,g,N){for(;p!==null;){var T=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,T!==null&&(T.childLanes|=g)):T!==null&&(T.childLanes&g)!==g&&(T.childLanes|=g),p===N)break;p=p.return}}function kf(p,g){Bv=p,Yx=If=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&g&&(ri=!0),p.firstContext=null)}function Gi(p){var g=p._currentValue;if(Yx!==p)if(p={context:p,memoizedValue:g,next:null},If===null){if(Bv===null)throw Error(n(308));If=p,Bv.dependencies={lanes:0,firstContext:p}}else If=If.next=p;return g}var Kl=null;function e2(p){Kl===null?Kl=[p]:Kl.push(p)}function VI(p,g,N,T){var _=g.interleaved;return _===null?(N.next=N,e2(g)):(N.next=_.next,_.next=N),g.interleaved=N,zo(p,T)}function zo(p,g){p.lanes|=g;var N=p.alternate;for(N!==null&&(N.lanes|=g),N=p,p=p.return;p!==null;)p.childLanes|=g,N=p.alternate,N!==null&&(N.childLanes|=g),N=p,p=p.return;return N.tag===3?N.stateNode:null}var Au=!1;function t2(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WI(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Uo(p,g){return{eventTime:p,lane:g,tag:0,payload:null,callback:null,next:null}}function Iu(p,g,N){var T=p.updateQueue;if(T===null)return null;if(T=T.shared,wn&2){var _=T.pending;return _===null?g.next=g:(g.next=_.next,_.next=g),T.pending=g,zo(p,N)}return _=T.interleaved,_===null?(g.next=g,e2(T)):(g.next=_.next,_.next=g),T.interleaved=g,zo(p,N)}function Lv(p,g,N){if(g=g.updateQueue,g!==null&&(g=g.shared,(N&4194240)!==0)){var T=g.lanes;T&=p.pendingLanes,N|=T,g.lanes=N,mx(p,N)}}function qI(p,g){var N=p.updateQueue,T=p.alternate;if(T!==null&&(T=T.updateQueue,N===T)){var _=null,P=null;if(N=N.firstBaseUpdate,N!==null){do{var X={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};P===null?_=P=X:P=P.next=X,N=N.next}while(N!==null);P===null?_=P=g:P=P.next=g}else _=P=g;N={baseState:T.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:T.shared,effects:T.effects},p.updateQueue=N;return}p=N.lastBaseUpdate,p===null?N.firstBaseUpdate=g:p.next=g,N.lastBaseUpdate=g}function zv(p,g,N,T){var _=p.updateQueue;Au=!1;var P=_.firstBaseUpdate,X=_.lastBaseUpdate,le=_.shared.pending;if(le!==null){_.shared.pending=null;var ye=le,_e=ye.next;ye.next=null,X===null?P=_e:X.next=_e,X=ye;var Ye=p.alternate;Ye!==null&&(Ye=Ye.updateQueue,le=Ye.lastBaseUpdate,le!==X&&(le===null?Ye.firstBaseUpdate=_e:le.next=_e,Ye.lastBaseUpdate=ye))}if(P!==null){var et=_.baseState;X=0,Ye=_e=ye=null,le=P;do{var Ke=le.lane,ct=le.eventTime;if((T&Ke)===Ke){Ye!==null&&(Ye=Ye.next={eventTime:ct,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var gt=p,yt=le;switch(Ke=g,ct=N,yt.tag){case 1:if(gt=yt.payload,typeof gt=="function"){et=gt.call(ct,et,Ke);break e}et=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=yt.payload,Ke=typeof gt=="function"?gt.call(ct,et,Ke):gt,Ke==null)break e;et=G({},et,Ke);break e;case 2:Au=!0}}le.callback!==null&&le.lane!==0&&(p.flags|=64,Ke=_.effects,Ke===null?_.effects=[le]:Ke.push(le))}else ct={eventTime:ct,lane:Ke,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ye===null?(_e=Ye=ct,ye=et):Ye=Ye.next=ct,X|=Ke;if(le=le.next,le===null){if(le=_.shared.pending,le===null)break;Ke=le,le=Ke.next,Ke.next=null,_.lastBaseUpdate=Ke,_.shared.pending=null}}while(!0);if(Ye===null&&(ye=et),_.baseState=ye,_.firstBaseUpdate=_e,_.lastBaseUpdate=Ye,g=_.shared.interleaved,g!==null){_=g;do X|=_.lane,_=_.next;while(_!==g)}else P===null&&(_.shared.lanes=0);Ql|=X,p.lanes=X,p.memoizedState=et}}function HI(p,g,N){if(p=g.effects,g.effects=null,p!==null)for(g=0;g<p.length;g++){var T=p[g],_=T.callback;if(_!==null){if(T.callback=null,T=N,typeof _!="function")throw Error(n(191,_));_.call(T)}}}var Kp={},io=Tu(Kp),Yp=Tu(Kp),Zp=Tu(Kp);function Yl(p){if(p===Kp)throw Error(n(174));return p}function n2(p,g){switch(qn(Zp,g),qn(Yp,p),qn(io,Kp),p=g.nodeType,p){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Le(null,"");break;default:p=p===8?g.parentNode:g,g=p.namespaceURI||null,p=p.tagName,g=Le(g,p)}Xn(io),qn(io,g)}function _f(){Xn(io),Xn(Yp),Xn(Zp)}function jI(p){Yl(Zp.current);var g=Yl(io.current),N=Le(g,p.type);g!==N&&(qn(Yp,p),qn(io,N))}function r2(p){Yp.current===p&&(Xn(io),Xn(Yp))}var ar=Tu(0);function Uv(p){for(var g=p;g!==null;){if(g.tag===13){var N=g.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var a2=[];function i2(){for(var p=0;p<a2.length;p++)a2[p]._workInProgressVersionPrimary=null;a2.length=0}var Vv=S.ReactCurrentDispatcher,s2=S.ReactCurrentBatchConfig,Zl=0,ir=null,Fr=null,Gr=null,Wv=!1,Qp=!1,Jp=0,zH=0;function Sa(){throw Error(n(321))}function o2(p,g){if(g===null)return!1;for(var N=0;N<g.length&&N<p.length;N++)if(!Ds(p[N],g[N]))return!1;return!0}function u2(p,g,N,T,_,P){if(Zl=P,ir=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Vv.current=p===null||p.memoizedState===null?qH:HH,p=N(T,_),Qp){P=0;do{if(Qp=!1,Jp=0,25<=P)throw Error(n(301));P+=1,Gr=Fr=null,g.updateQueue=null,Vv.current=jH,p=N(T,_)}while(Qp)}if(Vv.current=jv,g=Fr!==null&&Fr.next!==null,Zl=0,Gr=Fr=ir=null,Wv=!1,g)throw Error(n(300));return p}function l2(){var p=Jp!==0;return Jp=0,p}function so(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?ir.memoizedState=Gr=p:Gr=Gr.next=p,Gr}function Xi(){if(Fr===null){var p=ir.alternate;p=p!==null?p.memoizedState:null}else p=Fr.next;var g=Gr===null?ir.memoizedState:Gr.next;if(g!==null)Gr=g,Fr=p;else{if(p===null)throw Error(n(310));Fr=p,p={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Gr===null?ir.memoizedState=Gr=p:Gr=Gr.next=p}return Gr}function eh(p,g){return typeof g=="function"?g(p):g}function c2(p){var g=Xi(),N=g.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=p;var T=Fr,_=T.baseQueue,P=N.pending;if(P!==null){if(_!==null){var X=_.next;_.next=P.next,P.next=X}T.baseQueue=_=P,N.pending=null}if(_!==null){P=_.next,T=T.baseState;var le=X=null,ye=null,_e=P;do{var Ye=_e.lane;if((Zl&Ye)===Ye)ye!==null&&(ye=ye.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),T=_e.hasEagerState?_e.eagerState:p(T,_e.action);else{var et={lane:Ye,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ye===null?(le=ye=et,X=T):ye=ye.next=et,ir.lanes|=Ye,Ql|=Ye}_e=_e.next}while(_e!==null&&_e!==P);ye===null?X=T:ye.next=le,Ds(T,g.memoizedState)||(ri=!0),g.memoizedState=T,g.baseState=X,g.baseQueue=ye,N.lastRenderedState=T}if(p=N.interleaved,p!==null){_=p;do P=_.lane,ir.lanes|=P,Ql|=P,_=_.next;while(_!==p)}else _===null&&(N.lanes=0);return[g.memoizedState,N.dispatch]}function f2(p){var g=Xi(),N=g.queue;if(N===null)throw Error(n(311));N.lastRenderedReducer=p;var T=N.dispatch,_=N.pending,P=g.memoizedState;if(_!==null){N.pending=null;var X=_=_.next;do P=p(P,X.action),X=X.next;while(X!==_);Ds(P,g.memoizedState)||(ri=!0),g.memoizedState=P,g.baseQueue===null&&(g.baseState=P),N.lastRenderedState=P}return[P,T]}function GI(){}function XI(p,g){var N=ir,T=Xi(),_=g(),P=!Ds(T.memoizedState,_);if(P&&(T.memoizedState=_,ri=!0),T=T.queue,d2(ZI.bind(null,N,T,p),[p]),T.getSnapshot!==g||P||Gr!==null&&Gr.memoizedState.tag&1){if(N.flags|=2048,th(9,YI.bind(null,N,T,_,g),void 0,null),Xr===null)throw Error(n(349));Zl&30||KI(N,g,_)}return _}function KI(p,g,N){p.flags|=16384,p={getSnapshot:g,value:N},g=ir.updateQueue,g===null?(g={lastEffect:null,stores:null},ir.updateQueue=g,g.stores=[p]):(N=g.stores,N===null?g.stores=[p]:N.push(p))}function YI(p,g,N,T){g.value=N,g.getSnapshot=T,QI(g)&&JI(p)}function ZI(p,g,N){return N(function(){QI(g)&&JI(p)})}function QI(p){var g=p.getSnapshot;p=p.value;try{var N=g();return!Ds(p,N)}catch{return!0}}function JI(p){var g=zo(p,1);g!==null&&_s(g,p,1,-1)}function ek(p){var g=so();return typeof p=="function"&&(p=p()),g.memoizedState=g.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eh,lastRenderedState:p},g.queue=p,p=p.dispatch=WH.bind(null,ir,p),[g.memoizedState,p]}function th(p,g,N,T){return p={tag:p,create:g,destroy:N,deps:T,next:null},g=ir.updateQueue,g===null?(g={lastEffect:null,stores:null},ir.updateQueue=g,g.lastEffect=p.next=p):(N=g.lastEffect,N===null?g.lastEffect=p.next=p:(T=N.next,N.next=p,p.next=T,g.lastEffect=p)),p}function tk(){return Xi().memoizedState}function qv(p,g,N,T){var _=so();ir.flags|=p,_.memoizedState=th(1|g,N,void 0,T===void 0?null:T)}function Hv(p,g,N,T){var _=Xi();T=T===void 0?null:T;var P=void 0;if(Fr!==null){var X=Fr.memoizedState;if(P=X.destroy,T!==null&&o2(T,X.deps)){_.memoizedState=th(g,N,P,T);return}}ir.flags|=p,_.memoizedState=th(1|g,N,P,T)}function nk(p,g){return qv(8390656,8,p,g)}function d2(p,g){return Hv(2048,8,p,g)}function rk(p,g){return Hv(4,2,p,g)}function ak(p,g){return Hv(4,4,p,g)}function ik(p,g){if(typeof g=="function")return p=p(),g(p),function(){g(null)};if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function sk(p,g,N){return N=N!=null?N.concat([p]):null,Hv(4,4,ik.bind(null,g,p),N)}function p2(){}function ok(p,g){var N=Xi();g=g===void 0?null:g;var T=N.memoizedState;return T!==null&&g!==null&&o2(g,T[1])?T[0]:(N.memoizedState=[p,g],p)}function uk(p,g){var N=Xi();g=g===void 0?null:g;var T=N.memoizedState;return T!==null&&g!==null&&o2(g,T[1])?T[0]:(p=p(),N.memoizedState=[p,g],p)}function lk(p,g,N){return Zl&21?(Ds(N,g)||(N=LA(),ir.lanes|=N,Ql|=N,p.baseState=!0),g):(p.baseState&&(p.baseState=!1,ri=!0),p.memoizedState=N)}function UH(p,g){var N=kn;kn=N!==0&&4>N?N:4,p(!0);var T=s2.transition;s2.transition={};try{p(!1),g()}finally{kn=N,s2.transition=T}}function ck(){return Xi().memoizedState}function VH(p,g,N){var T=Fu(p);if(N={lane:T,action:N,hasEagerState:!1,eagerState:null,next:null},fk(p))dk(g,N);else if(N=VI(p,g,N,T),N!==null){var _=Ua();_s(N,p,T,_),pk(N,g,T)}}function WH(p,g,N){var T=Fu(p),_={lane:T,action:N,hasEagerState:!1,eagerState:null,next:null};if(fk(p))dk(g,_);else{var P=p.alternate;if(p.lanes===0&&(P===null||P.lanes===0)&&(P=g.lastRenderedReducer,P!==null))try{var X=g.lastRenderedState,le=P(X,N);if(_.hasEagerState=!0,_.eagerState=le,Ds(le,X)){var ye=g.interleaved;ye===null?(_.next=_,e2(g)):(_.next=ye.next,ye.next=_),g.interleaved=_;return}}catch{}finally{}N=VI(p,g,_,T),N!==null&&(_=Ua(),_s(N,p,T,_),pk(N,g,T))}}function fk(p){var g=p.alternate;return p===ir||g!==null&&g===ir}function dk(p,g){Qp=Wv=!0;var N=p.pending;N===null?g.next=g:(g.next=N.next,N.next=g),p.pending=g}function pk(p,g,N){if(N&4194240){var T=g.lanes;T&=p.pendingLanes,N|=T,g.lanes=N,mx(p,N)}}var jv={readContext:Gi,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},qH={readContext:Gi,useCallback:function(p,g){return so().memoizedState=[p,g===void 0?null:g],p},useContext:Gi,useEffect:nk,useImperativeHandle:function(p,g,N){return N=N!=null?N.concat([p]):null,qv(4194308,4,ik.bind(null,g,p),N)},useLayoutEffect:function(p,g){return qv(4194308,4,p,g)},useInsertionEffect:function(p,g){return qv(4,2,p,g)},useMemo:function(p,g){var N=so();return g=g===void 0?null:g,p=p(),N.memoizedState=[p,g],p},useReducer:function(p,g,N){var T=so();return g=N!==void 0?N(g):g,T.memoizedState=T.baseState=g,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:g},T.queue=p,p=p.dispatch=VH.bind(null,ir,p),[T.memoizedState,p]},useRef:function(p){var g=so();return p={current:p},g.memoizedState=p},useState:ek,useDebugValue:p2,useDeferredValue:function(p){return so().memoizedState=p},useTransition:function(){var p=ek(!1),g=p[0];return p=UH.bind(null,p[1]),so().memoizedState=p,[g,p]},useMutableSource:function(){},useSyncExternalStore:function(p,g,N){var T=ir,_=so();if(Zn){if(N===void 0)throw Error(n(407));N=N()}else{if(N=g(),Xr===null)throw Error(n(349));Zl&30||KI(T,g,N)}_.memoizedState=N;var P={value:N,getSnapshot:g};return _.queue=P,nk(ZI.bind(null,T,P,p),[p]),T.flags|=2048,th(9,YI.bind(null,T,P,N,g),void 0,null),N},useId:function(){var p=so(),g=Xr.identifierPrefix;if(Zn){var N=Lo,T=Bo;N=(T&~(1<<32-Ts(T)-1)).toString(32)+N,g=":"+g+"R"+N,N=Jp++,0<N&&(g+="H"+N.toString(32)),g+=":"}else N=zH++,g=":"+g+"r"+N.toString(32)+":";return p.memoizedState=g},unstable_isNewReconciler:!1},HH={readContext:Gi,useCallback:ok,useContext:Gi,useEffect:d2,useImperativeHandle:sk,useInsertionEffect:rk,useLayoutEffect:ak,useMemo:uk,useReducer:c2,useRef:tk,useState:function(){return c2(eh)},useDebugValue:p2,useDeferredValue:function(p){var g=Xi();return lk(g,Fr.memoizedState,p)},useTransition:function(){var p=c2(eh)[0],g=Xi().memoizedState;return[p,g]},useMutableSource:GI,useSyncExternalStore:XI,useId:ck,unstable_isNewReconciler:!1},jH={readContext:Gi,useCallback:ok,useContext:Gi,useEffect:d2,useImperativeHandle:sk,useInsertionEffect:rk,useLayoutEffect:ak,useMemo:uk,useReducer:f2,useRef:tk,useState:function(){return f2(eh)},useDebugValue:p2,useDeferredValue:function(p){var g=Xi();return Fr===null?g.memoizedState=p:lk(g,Fr.memoizedState,p)},useTransition:function(){var p=f2(eh)[0],g=Xi().memoizedState;return[p,g]},useMutableSource:GI,useSyncExternalStore:XI,useId:ck,unstable_isNewReconciler:!1};function As(p,g){if(p&&p.defaultProps){g=G({},g),p=p.defaultProps;for(var N in p)g[N]===void 0&&(g[N]=p[N]);return g}return g}function h2(p,g,N,T){g=p.memoizedState,N=N(T,g),N=N==null?g:G({},g,N),p.memoizedState=N,p.lanes===0&&(p.updateQueue.baseState=N)}var Gv={isMounted:function(p){return(p=p._reactInternals)?Ro(p)===p:!1},enqueueSetState:function(p,g,N){p=p._reactInternals;var T=Ua(),_=Fu(p),P=Uo(T,_);P.payload=g,N!=null&&(P.callback=N),g=Iu(p,P,_),g!==null&&(_s(g,p,_,T),Lv(g,p,_))},enqueueReplaceState:function(p,g,N){p=p._reactInternals;var T=Ua(),_=Fu(p),P=Uo(T,_);P.tag=1,P.payload=g,N!=null&&(P.callback=N),g=Iu(p,P,_),g!==null&&(_s(g,p,_,T),Lv(g,p,_))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var N=Ua(),T=Fu(p),_=Uo(N,T);_.tag=2,g!=null&&(_.callback=g),g=Iu(p,_,T),g!==null&&(_s(g,p,T,N),Lv(g,p,T))}};function hk(p,g,N,T,_,P,X){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(T,P,X):g.prototype&&g.prototype.isPureReactComponent?!Up(N,T)||!Up(_,P):!0}function mk(p,g,N){var T=!1,_=Du,P=g.contextType;return typeof P=="object"&&P!==null?P=Gi(P):(_=ni(g)?jl:Na.current,T=g.contextTypes,P=(T=T!=null)?Ef(p,_):Du),g=new g(N,P),p.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Gv,p.stateNode=g,g._reactInternals=p,T&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=_,p.__reactInternalMemoizedMaskedChildContext=P),g}function gk(p,g,N,T){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(N,T),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(N,T),g.state!==p&&Gv.enqueueReplaceState(g,g.state,null)}function m2(p,g,N,T){var _=p.stateNode;_.props=N,_.state=p.memoizedState,_.refs={},t2(p);var P=g.contextType;typeof P=="object"&&P!==null?_.context=Gi(P):(P=ni(g)?jl:Na.current,_.context=Ef(p,P)),_.state=p.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(h2(p,g,P,N),_.state=p.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(g=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),g!==_.state&&Gv.enqueueReplaceState(_,_.state,null),zv(p,N,_,T),_.state=p.memoizedState),typeof _.componentDidMount=="function"&&(p.flags|=4194308)}function Of(p,g){try{var N="",T=g;do N+=ue(T),T=T.return;while(T);var _=N}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:p,source:g,stack:_,digest:null}}function g2(p,g,N){return{value:p,source:null,stack:N??null,digest:g??null}}function v2(p,g){try{console.error(g.value)}catch(N){setTimeout(function(){throw N})}}var GH=typeof WeakMap=="function"?WeakMap:Map;function vk(p,g,N){N=Uo(-1,N),N.tag=3,N.payload={element:null};var T=g.value;return N.callback=function(){ey||(ey=!0,_2=T),v2(p,g)},N}function yk(p,g,N){N=Uo(-1,N),N.tag=3;var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var _=g.value;N.payload=function(){return T(_)},N.callback=function(){v2(p,g)}}var P=p.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(N.callback=function(){v2(p,g),typeof T!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})}),N}function bk(p,g,N){var T=p.pingCache;if(T===null){T=p.pingCache=new GH;var _=new Set;T.set(g,_)}else _=T.get(g),_===void 0&&(_=new Set,T.set(g,_));_.has(N)||(_.add(N),p=oj.bind(null,p,g,N),g.then(p,p))}function wk(p){do{var g;if((g=p.tag===13)&&(g=p.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return p;p=p.return}while(p!==null);return null}function xk(p,g,N,T,_){return p.mode&1?(p.flags|=65536,p.lanes=_,p):(p===g?p.flags|=65536:(p.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(g=Uo(-1,1),g.tag=2,Iu(N,g,1))),N.lanes|=1),p)}var XH=S.ReactCurrentOwner,ri=!1;function za(p,g,N,T){g.child=p===null?UI(g,null,N,T):Af(g,p.child,N,T)}function Nk(p,g,N,T,_){N=N.render;var P=g.ref;return kf(g,_),T=u2(p,g,N,T,P,_),N=l2(),p!==null&&!ri?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Vo(p,g,_)):(Zn&&N&&Hx(g),g.flags|=1,za(p,g,T,_),g.child)}function Sk(p,g,N,T,_){if(p===null){var P=N.type;return typeof P=="function"&&!L2(P)&&P.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(g.tag=15,g.type=P,Ck(p,g,P,T,_)):(p=sy(N.type,null,T,g,g.mode,_),p.ref=g.ref,p.return=g,g.child=p)}if(P=p.child,!(p.lanes&_)){var X=P.memoizedProps;if(N=N.compare,N=N!==null?N:Up,N(X,T)&&p.ref===g.ref)return Vo(p,g,_)}return g.flags|=1,p=Mu(P,T),p.ref=g.ref,p.return=g,g.child=p}function Ck(p,g,N,T,_){if(p!==null){var P=p.memoizedProps;if(Up(P,T)&&p.ref===g.ref)if(ri=!1,g.pendingProps=T=P,(p.lanes&_)!==0)p.flags&131072&&(ri=!0);else return g.lanes=p.lanes,Vo(p,g,_)}return y2(p,g,N,T,_)}function Ek(p,g,N){var T=g.pendingProps,_=T.children,P=p!==null?p.memoizedState:null;if(T.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},qn(Rf,_i),_i|=N;else{if(!(N&1073741824))return p=P!==null?P.baseLanes|N:N,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:p,cachePool:null,transitions:null},g.updateQueue=null,qn(Rf,_i),_i|=p,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=P!==null?P.baseLanes:N,qn(Rf,_i),_i|=T}else P!==null?(T=P.baseLanes|N,g.memoizedState=null):T=N,qn(Rf,_i),_i|=T;return za(p,g,_,N),g.child}function Tk(p,g){var N=g.ref;(p===null&&N!==null||p!==null&&p.ref!==N)&&(g.flags|=512,g.flags|=2097152)}function y2(p,g,N,T,_){var P=ni(N)?jl:Na.current;return P=Ef(g,P),kf(g,_),N=u2(p,g,N,T,P,_),T=l2(),p!==null&&!ri?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~_,Vo(p,g,_)):(Zn&&T&&Hx(g),g.flags|=1,za(p,g,N,_),g.child)}function Dk(p,g,N,T,_){if(ni(N)){var P=!0;kv(g)}else P=!1;if(kf(g,_),g.stateNode===null)Kv(p,g),mk(g,N,T),m2(g,N,T,_),T=!0;else if(p===null){var X=g.stateNode,le=g.memoizedProps;X.props=le;var ye=X.context,_e=N.contextType;typeof _e=="object"&&_e!==null?_e=Gi(_e):(_e=ni(N)?jl:Na.current,_e=Ef(g,_e));var Ye=N.getDerivedStateFromProps,et=typeof Ye=="function"||typeof X.getSnapshotBeforeUpdate=="function";et||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(le!==T||ye!==_e)&&gk(g,X,T,_e),Au=!1;var Ke=g.memoizedState;X.state=Ke,zv(g,T,X,_),ye=g.memoizedState,le!==T||Ke!==ye||ti.current||Au?(typeof Ye=="function"&&(h2(g,N,Ye,T),ye=g.memoizedState),(le=Au||hk(g,N,le,T,Ke,ye,_e))?(et||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(g.flags|=4194308)):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=T,g.memoizedState=ye),X.props=T,X.state=ye,X.context=_e,T=le):(typeof X.componentDidMount=="function"&&(g.flags|=4194308),T=!1)}else{X=g.stateNode,WI(p,g),le=g.memoizedProps,_e=g.type===g.elementType?le:As(g.type,le),X.props=_e,et=g.pendingProps,Ke=X.context,ye=N.contextType,typeof ye=="object"&&ye!==null?ye=Gi(ye):(ye=ni(N)?jl:Na.current,ye=Ef(g,ye));var ct=N.getDerivedStateFromProps;(Ye=typeof ct=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(le!==et||Ke!==ye)&&gk(g,X,T,ye),Au=!1,Ke=g.memoizedState,X.state=Ke,zv(g,T,X,_);var gt=g.memoizedState;le!==et||Ke!==gt||ti.current||Au?(typeof ct=="function"&&(h2(g,N,ct,T),gt=g.memoizedState),(_e=Au||hk(g,N,_e,T,Ke,gt,ye)||!1)?(Ye||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(T,gt,ye),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(T,gt,ye)),typeof X.componentDidUpdate=="function"&&(g.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof X.componentDidUpdate!="function"||le===p.memoizedProps&&Ke===p.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Ke===p.memoizedState||(g.flags|=1024),g.memoizedProps=T,g.memoizedState=gt),X.props=T,X.state=gt,X.context=ye,T=_e):(typeof X.componentDidUpdate!="function"||le===p.memoizedProps&&Ke===p.memoizedState||(g.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||le===p.memoizedProps&&Ke===p.memoizedState||(g.flags|=1024),T=!1)}return b2(p,g,N,T,P,_)}function b2(p,g,N,T,_,P){Tk(p,g);var X=(g.flags&128)!==0;if(!T&&!X)return _&&_I(g,N,!1),Vo(p,g,P);T=g.stateNode,XH.current=g;var le=X&&typeof N.getDerivedStateFromError!="function"?null:T.render();return g.flags|=1,p!==null&&X?(g.child=Af(g,p.child,null,P),g.child=Af(g,null,le,P)):za(p,g,le,P),g.memoizedState=T.state,_&&_I(g,N,!0),g.child}function $k(p){var g=p.stateNode;g.pendingContext?II(p,g.pendingContext,g.pendingContext!==g.context):g.context&&II(p,g.context,!1),n2(p,g.containerInfo)}function Ak(p,g,N,T,_){return $f(),Kx(_),g.flags|=256,za(p,g,N,T),g.child}var w2={dehydrated:null,treeContext:null,retryLane:0};function x2(p){return{baseLanes:p,cachePool:null,transitions:null}}function Ik(p,g,N){var T=g.pendingProps,_=ar.current,P=!1,X=(g.flags&128)!==0,le;if((le=X)||(le=p!==null&&p.memoizedState===null?!1:(_&2)!==0),le?(P=!0,g.flags&=-129):(p===null||p.memoizedState!==null)&&(_|=1),qn(ar,_&1),p===null)return Xx(g),p=g.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(g.mode&1?p.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(X=T.children,p=T.fallback,P?(T=g.mode,P=g.child,X={mode:"hidden",children:X},!(T&1)&&P!==null?(P.childLanes=0,P.pendingProps=X):P=oy(X,T,0,null),p=nc(p,T,N,null),P.return=g,p.return=g,P.sibling=p,g.child=P,g.child.memoizedState=x2(N),g.memoizedState=w2,p):N2(g,X));if(_=p.memoizedState,_!==null&&(le=_.dehydrated,le!==null))return KH(p,g,X,T,le,_,N);if(P){P=T.fallback,X=g.mode,_=p.child,le=_.sibling;var ye={mode:"hidden",children:T.children};return!(X&1)&&g.child!==_?(T=g.child,T.childLanes=0,T.pendingProps=ye,g.deletions=null):(T=Mu(_,ye),T.subtreeFlags=_.subtreeFlags&14680064),le!==null?P=Mu(le,P):(P=nc(P,X,N,null),P.flags|=2),P.return=g,T.return=g,T.sibling=P,g.child=T,T=P,P=g.child,X=p.child.memoizedState,X=X===null?x2(N):{baseLanes:X.baseLanes|N,cachePool:null,transitions:X.transitions},P.memoizedState=X,P.childLanes=p.childLanes&~N,g.memoizedState=w2,T}return P=p.child,p=P.sibling,T=Mu(P,{mode:"visible",children:T.children}),!(g.mode&1)&&(T.lanes=N),T.return=g,T.sibling=null,p!==null&&(N=g.deletions,N===null?(g.deletions=[p],g.flags|=16):N.push(p)),g.child=T,g.memoizedState=null,T}function N2(p,g){return g=oy({mode:"visible",children:g},p.mode,0,null),g.return=p,p.child=g}function Xv(p,g,N,T){return T!==null&&Kx(T),Af(g,p.child,null,N),p=N2(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function KH(p,g,N,T,_,P,X){if(N)return g.flags&256?(g.flags&=-257,T=g2(Error(n(422))),Xv(p,g,X,T)):g.memoizedState!==null?(g.child=p.child,g.flags|=128,null):(P=T.fallback,_=g.mode,T=oy({mode:"visible",children:T.children},_,0,null),P=nc(P,_,X,null),P.flags|=2,T.return=g,P.return=g,T.sibling=P,g.child=T,g.mode&1&&Af(g,p.child,null,X),g.child.memoizedState=x2(X),g.memoizedState=w2,P);if(!(g.mode&1))return Xv(p,g,X,null);if(_.data==="$!"){if(T=_.nextSibling&&_.nextSibling.dataset,T)var le=T.dgst;return T=le,P=Error(n(419)),T=g2(P,T,void 0),Xv(p,g,X,T)}if(le=(X&p.childLanes)!==0,ri||le){if(T=Xr,T!==null){switch(X&-X){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(T.suspendedLanes|X)?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,zo(p,_),_s(T,p,_,-1))}return B2(),T=g2(Error(n(421))),Xv(p,g,X,T)}return _.data==="$?"?(g.flags|=128,g.child=p.child,g=uj.bind(null,p),_._reactRetry=g,null):(p=P.treeContext,ki=Eu(_.nextSibling),Ii=g,Zn=!0,$s=null,p!==null&&(Hi[ji++]=Bo,Hi[ji++]=Lo,Hi[ji++]=Gl,Bo=p.id,Lo=p.overflow,Gl=g),g=N2(g,T.children),g.flags|=4096,g)}function kk(p,g,N){p.lanes|=g;var T=p.alternate;T!==null&&(T.lanes|=g),Jx(p.return,g,N)}function S2(p,g,N,T,_){var P=p.memoizedState;P===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:T,tail:N,tailMode:_}:(P.isBackwards=g,P.rendering=null,P.renderingStartTime=0,P.last=T,P.tail=N,P.tailMode=_)}function _k(p,g,N){var T=g.pendingProps,_=T.revealOrder,P=T.tail;if(za(p,g,T.children,N),T=ar.current,T&2)T=T&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&kk(p,N,g);else if(p.tag===19)kk(p,N,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}T&=1}if(qn(ar,T),!(g.mode&1))g.memoizedState=null;else switch(_){case"forwards":for(N=g.child,_=null;N!==null;)p=N.alternate,p!==null&&Uv(p)===null&&(_=N),N=N.sibling;N=_,N===null?(_=g.child,g.child=null):(_=N.sibling,N.sibling=null),S2(g,!1,_,N,P);break;case"backwards":for(N=null,_=g.child,g.child=null;_!==null;){if(p=_.alternate,p!==null&&Uv(p)===null){g.child=_;break}p=_.sibling,_.sibling=N,N=_,_=p}S2(g,!0,N,null,P);break;case"together":S2(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Kv(p,g){!(g.mode&1)&&p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2)}function Vo(p,g,N){if(p!==null&&(g.dependencies=p.dependencies),Ql|=g.lanes,!(N&g.childLanes))return null;if(p!==null&&g.child!==p.child)throw Error(n(153));if(g.child!==null){for(p=g.child,N=Mu(p,p.pendingProps),g.child=N,N.return=g;p.sibling!==null;)p=p.sibling,N=N.sibling=Mu(p,p.pendingProps),N.return=g;N.sibling=null}return g.child}function YH(p,g,N){switch(g.tag){case 3:$k(g),$f();break;case 5:jI(g);break;case 1:ni(g.type)&&kv(g);break;case 4:n2(g,g.stateNode.containerInfo);break;case 10:var T=g.type._context,_=g.memoizedProps.value;qn(Pv,T._currentValue),T._currentValue=_;break;case 13:if(T=g.memoizedState,T!==null)return T.dehydrated!==null?(qn(ar,ar.current&1),g.flags|=128,null):N&g.child.childLanes?Ik(p,g,N):(qn(ar,ar.current&1),p=Vo(p,g,N),p!==null?p.sibling:null);qn(ar,ar.current&1);break;case 19:if(T=(N&g.childLanes)!==0,p.flags&128){if(T)return _k(p,g,N);g.flags|=128}if(_=g.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),qn(ar,ar.current),T)break;return null;case 22:case 23:return g.lanes=0,Ek(p,g,N)}return Vo(p,g,N)}var Ok,C2,Fk,Rk;Ok=function(p,g){for(var N=g.child;N!==null;){if(N.tag===5||N.tag===6)p.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===g)break;for(;N.sibling===null;){if(N.return===null||N.return===g)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},C2=function(){},Fk=function(p,g,N,T){var _=p.memoizedProps;if(_!==T){p=g.stateNode,Yl(io.current);var P=null;switch(N){case"input":_=Ee(p,_),T=Ee(p,T),P=[];break;case"select":_=G({},_,{value:void 0}),T=G({},T,{value:void 0}),P=[];break;case"textarea":_=Qe(p,_),T=Qe(p,T),P=[];break;default:typeof _.onClick!="function"&&typeof T.onClick=="function"&&(p.onclick=$v)}V(N,T);var X;N=null;for(_e in _)if(!T.hasOwnProperty(_e)&&_.hasOwnProperty(_e)&&_[_e]!=null)if(_e==="style"){var le=_[_e];for(X in le)le.hasOwnProperty(X)&&(N||(N={}),N[X]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(a.hasOwnProperty(_e)?P||(P=[]):(P=P||[]).push(_e,null));for(_e in T){var ye=T[_e];if(le=_!=null?_[_e]:void 0,T.hasOwnProperty(_e)&&ye!==le&&(ye!=null||le!=null))if(_e==="style")if(le){for(X in le)!le.hasOwnProperty(X)||ye&&ye.hasOwnProperty(X)||(N||(N={}),N[X]="");for(X in ye)ye.hasOwnProperty(X)&&le[X]!==ye[X]&&(N||(N={}),N[X]=ye[X])}else N||(P||(P=[]),P.push(_e,N)),N=ye;else _e==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,le=le?le.__html:void 0,ye!=null&&le!==ye&&(P=P||[]).push(_e,ye)):_e==="children"?typeof ye!="string"&&typeof ye!="number"||(P=P||[]).push(_e,""+ye):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(a.hasOwnProperty(_e)?(ye!=null&&_e==="onScroll"&&Gn("scroll",p),P||le===ye||(P=[])):(P=P||[]).push(_e,ye))}N&&(P=P||[]).push("style",N);var _e=P;(g.updateQueue=_e)&&(g.flags|=4)}},Rk=function(p,g,N,T){N!==T&&(g.flags|=4)};function nh(p,g){if(!Zn)switch(p.tailMode){case"hidden":g=p.tail;for(var N=null;g!==null;)g.alternate!==null&&(N=g),g=g.sibling;N===null?p.tail=null:N.sibling=null;break;case"collapsed":N=p.tail;for(var T=null;N!==null;)N.alternate!==null&&(T=N),N=N.sibling;T===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:T.sibling=null}}function Ca(p){var g=p.alternate!==null&&p.alternate.child===p.child,N=0,T=0;if(g)for(var _=p.child;_!==null;)N|=_.lanes|_.childLanes,T|=_.subtreeFlags&14680064,T|=_.flags&14680064,_.return=p,_=_.sibling;else for(_=p.child;_!==null;)N|=_.lanes|_.childLanes,T|=_.subtreeFlags,T|=_.flags,_.return=p,_=_.sibling;return p.subtreeFlags|=T,p.childLanes=N,g}function ZH(p,g,N){var T=g.pendingProps;switch(jx(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(g),null;case 1:return ni(g.type)&&Iv(),Ca(g),null;case 3:return T=g.stateNode,_f(),Xn(ti),Xn(Na),i2(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(p===null||p.child===null)&&(Rv(g)?g.flags|=4:p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,$s!==null&&(R2($s),$s=null))),C2(p,g),Ca(g),null;case 5:r2(g);var _=Yl(Zp.current);if(N=g.type,p!==null&&g.stateNode!=null)Fk(p,g,N,T,_),p.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!T){if(g.stateNode===null)throw Error(n(166));return Ca(g),null}if(p=Yl(io.current),Rv(g)){T=g.stateNode,N=g.type;var P=g.memoizedProps;switch(T[ao]=g,T[jp]=P,p=(g.mode&1)!==0,N){case"dialog":Gn("cancel",T),Gn("close",T);break;case"iframe":case"object":case"embed":Gn("load",T);break;case"video":case"audio":for(_=0;_<Wp.length;_++)Gn(Wp[_],T);break;case"source":Gn("error",T);break;case"img":case"image":case"link":Gn("error",T),Gn("load",T);break;case"details":Gn("toggle",T);break;case"input":Z(T,P),Gn("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!P.multiple},Gn("invalid",T);break;case"textarea":re(T,P),Gn("invalid",T)}V(N,P),_=null;for(var X in P)if(P.hasOwnProperty(X)){var le=P[X];X==="children"?typeof le=="string"?T.textContent!==le&&(P.suppressHydrationWarning!==!0&&Dv(T.textContent,le,p),_=["children",le]):typeof le=="number"&&T.textContent!==""+le&&(P.suppressHydrationWarning!==!0&&Dv(T.textContent,le,p),_=["children",""+le]):a.hasOwnProperty(X)&&le!=null&&X==="onScroll"&&Gn("scroll",T)}switch(N){case"input":pe(T),xe(T,P,!0);break;case"textarea":pe(T),Ce(T);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(T.onclick=$v)}T=_,g.updateQueue=T,T!==null&&(g.flags|=4)}else{X=_.nodeType===9?_:_.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=$e(N)),p==="http://www.w3.org/1999/xhtml"?N==="script"?(p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof T.is=="string"?p=X.createElement(N,{is:T.is}):(p=X.createElement(N),N==="select"&&(X=p,T.multiple?X.multiple=!0:T.size&&(X.size=T.size))):p=X.createElementNS(p,N),p[ao]=g,p[jp]=T,Ok(p,g,!1,!1),g.stateNode=p;e:{switch(X=fe(N,T),N){case"dialog":Gn("cancel",p),Gn("close",p),_=T;break;case"iframe":case"object":case"embed":Gn("load",p),_=T;break;case"video":case"audio":for(_=0;_<Wp.length;_++)Gn(Wp[_],p);_=T;break;case"source":Gn("error",p),_=T;break;case"img":case"image":case"link":Gn("error",p),Gn("load",p),_=T;break;case"details":Gn("toggle",p),_=T;break;case"input":Z(p,T),_=Ee(p,T),Gn("invalid",p);break;case"option":_=T;break;case"select":p._wrapperState={wasMultiple:!!T.multiple},_=G({},T,{value:void 0}),Gn("invalid",p);break;case"textarea":re(p,T),_=Qe(p,T),Gn("invalid",p);break;default:_=T}V(N,_),le=_;for(P in le)if(le.hasOwnProperty(P)){var ye=le[P];P==="style"?St(p,ye):P==="dangerouslySetInnerHTML"?(ye=ye?ye.__html:void 0,ye!=null&&Je(p,ye)):P==="children"?typeof ye=="string"?(N!=="textarea"||ye!=="")&&He(p,ye):typeof ye=="number"&&He(p,""+ye):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?ye!=null&&P==="onScroll"&&Gn("scroll",p):ye!=null&&w(p,P,ye,X))}switch(N){case"input":pe(p),xe(p,T,!1);break;case"textarea":pe(p),Ce(p);break;case"option":T.value!=null&&p.setAttribute("value",""+J(T.value));break;case"select":p.multiple=!!T.multiple,P=T.value,P!=null?je(p,!!T.multiple,P,!1):T.defaultValue!=null&&je(p,!!T.multiple,T.defaultValue,!0);break;default:typeof _.onClick=="function"&&(p.onclick=$v)}switch(N){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Ca(g),null;case 6:if(p&&g.stateNode!=null)Rk(p,g,p.memoizedProps,T);else{if(typeof T!="string"&&g.stateNode===null)throw Error(n(166));if(N=Yl(Zp.current),Yl(io.current),Rv(g)){if(T=g.stateNode,N=g.memoizedProps,T[ao]=g,(P=T.nodeValue!==N)&&(p=Ii,p!==null))switch(p.tag){case 3:Dv(T.nodeValue,N,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Dv(T.nodeValue,N,(p.mode&1)!==0)}P&&(g.flags|=4)}else T=(N.nodeType===9?N:N.ownerDocument).createTextNode(T),T[ao]=g,g.stateNode=T}return Ca(g),null;case 13:if(Xn(ar),T=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Zn&&ki!==null&&g.mode&1&&!(g.flags&128))BI(),$f(),g.flags|=98560,P=!1;else if(P=Rv(g),T!==null&&T.dehydrated!==null){if(p===null){if(!P)throw Error(n(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[ao]=g}else $f(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;Ca(g),P=!1}else $s!==null&&(R2($s),$s=null),P=!0;if(!P)return g.flags&65536?g:null}return g.flags&128?(g.lanes=N,g):(T=T!==null,T!==(p!==null&&p.memoizedState!==null)&&T&&(g.child.flags|=8192,g.mode&1&&(p===null||ar.current&1?Rr===0&&(Rr=3):B2())),g.updateQueue!==null&&(g.flags|=4),Ca(g),null);case 4:return _f(),C2(p,g),p===null&&qp(g.stateNode.containerInfo),Ca(g),null;case 10:return Qx(g.type._context),Ca(g),null;case 17:return ni(g.type)&&Iv(),Ca(g),null;case 19:if(Xn(ar),P=g.memoizedState,P===null)return Ca(g),null;if(T=(g.flags&128)!==0,X=P.rendering,X===null)if(T)nh(P,!1);else{if(Rr!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(X=Uv(p),X!==null){for(g.flags|=128,nh(P,!1),T=X.updateQueue,T!==null&&(g.updateQueue=T,g.flags|=4),g.subtreeFlags=0,T=N,N=g.child;N!==null;)P=N,p=T,P.flags&=14680066,X=P.alternate,X===null?(P.childLanes=0,P.lanes=p,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=X.childLanes,P.lanes=X.lanes,P.child=X.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=X.memoizedProps,P.memoizedState=X.memoizedState,P.updateQueue=X.updateQueue,P.type=X.type,p=X.dependencies,P.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),N=N.sibling;return qn(ar,ar.current&1|2),g.child}p=p.sibling}P.tail!==null&&Ot()>Mf&&(g.flags|=128,T=!0,nh(P,!1),g.lanes=4194304)}else{if(!T)if(p=Uv(X),p!==null){if(g.flags|=128,T=!0,N=p.updateQueue,N!==null&&(g.updateQueue=N,g.flags|=4),nh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!X.alternate&&!Zn)return Ca(g),null}else 2*Ot()-P.renderingStartTime>Mf&&N!==1073741824&&(g.flags|=128,T=!0,nh(P,!1),g.lanes=4194304);P.isBackwards?(X.sibling=g.child,g.child=X):(N=P.last,N!==null?N.sibling=X:g.child=X,P.last=X)}return P.tail!==null?(g=P.tail,P.rendering=g,P.tail=g.sibling,P.renderingStartTime=Ot(),g.sibling=null,N=ar.current,qn(ar,T?N&1|2:N&1),g):(Ca(g),null);case 22:case 23:return P2(),T=g.memoizedState!==null,p!==null&&p.memoizedState!==null!==T&&(g.flags|=8192),T&&g.mode&1?_i&1073741824&&(Ca(g),g.subtreeFlags&6&&(g.flags|=8192)):Ca(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function QH(p,g){switch(jx(g),g.tag){case 1:return ni(g.type)&&Iv(),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return _f(),Xn(ti),Xn(Na),i2(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 5:return r2(g),null;case 13:if(Xn(ar),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(n(340));$f()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return Xn(ar),null;case 4:return _f(),null;case 10:return Qx(g.type._context),null;case 22:case 23:return P2(),null;case 24:return null;default:return null}}var Yv=!1,Ea=!1,JH=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Ff(p,g){var N=p.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(T){cr(p,g,T)}else N.current=null}function E2(p,g,N){try{N()}catch(T){cr(p,g,T)}}var Mk=!1;function ej(p,g){if(Px=gv,p=hI(),Ax(p)){if("selectionStart"in p)var N={start:p.selectionStart,end:p.selectionEnd};else e:{N=(N=p.ownerDocument)&&N.defaultView||window;var T=N.getSelection&&N.getSelection();if(T&&T.rangeCount!==0){N=T.anchorNode;var _=T.anchorOffset,P=T.focusNode;T=T.focusOffset;try{N.nodeType,P.nodeType}catch{N=null;break e}var X=0,le=-1,ye=-1,_e=0,Ye=0,et=p,Ke=null;t:for(;;){for(var ct;et!==N||_!==0&&et.nodeType!==3||(le=X+_),et!==P||T!==0&&et.nodeType!==3||(ye=X+T),et.nodeType===3&&(X+=et.nodeValue.length),(ct=et.firstChild)!==null;)Ke=et,et=ct;for(;;){if(et===p)break t;if(Ke===N&&++_e===_&&(le=X),Ke===P&&++Ye===T&&(ye=X),(ct=et.nextSibling)!==null)break;et=Ke,Ke=et.parentNode}et=ct}N=le===-1||ye===-1?null:{start:le,end:ye}}else N=null}N=N||{start:0,end:0}}else N=null;for(Bx={focusedElem:p,selectionRange:N},gv=!1,dt=g;dt!==null;)if(g=dt,p=g.child,(g.subtreeFlags&1028)!==0&&p!==null)p.return=g,dt=p;else for(;dt!==null;){g=dt;try{var gt=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var yt=gt.memoizedProps,vr=gt.memoizedState,De=g.stateNode,Ne=De.getSnapshotBeforeUpdate(g.elementType===g.type?yt:As(g.type,yt),vr);De.__reactInternalSnapshotBeforeUpdate=Ne}break;case 3:var Ie=g.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(at){cr(g,g.return,at)}if(p=g.sibling,p!==null){p.return=g.return,dt=p;break}dt=g.return}return gt=Mk,Mk=!1,gt}function rh(p,g,N){var T=g.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var _=T=T.next;do{if((_.tag&p)===p){var P=_.destroy;_.destroy=void 0,P!==void 0&&E2(g,N,P)}_=_.next}while(_!==T)}}function Zv(p,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&p)===p){var T=N.create;N.destroy=T()}N=N.next}while(N!==g)}}function T2(p){var g=p.ref;if(g!==null){var N=p.stateNode;switch(p.tag){case 5:p=N;break;default:p=N}typeof g=="function"?g(p):g.current=p}}function Pk(p){var g=p.alternate;g!==null&&(p.alternate=null,Pk(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&(delete g[ao],delete g[jp],delete g[Vx],delete g[MH],delete g[PH])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Bk(p){return p.tag===5||p.tag===3||p.tag===4}function Lk(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Bk(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function D2(p,g,N){var T=p.tag;if(T===5||T===6)p=p.stateNode,g?N.nodeType===8?N.parentNode.insertBefore(p,g):N.insertBefore(p,g):(N.nodeType===8?(g=N.parentNode,g.insertBefore(p,N)):(g=N,g.appendChild(p)),N=N._reactRootContainer,N!=null||g.onclick!==null||(g.onclick=$v));else if(T!==4&&(p=p.child,p!==null))for(D2(p,g,N),p=p.sibling;p!==null;)D2(p,g,N),p=p.sibling}function $2(p,g,N){var T=p.tag;if(T===5||T===6)p=p.stateNode,g?N.insertBefore(p,g):N.appendChild(p);else if(T!==4&&(p=p.child,p!==null))for($2(p,g,N),p=p.sibling;p!==null;)$2(p,g,N),p=p.sibling}var ua=null,Is=!1;function ku(p,g,N){for(N=N.child;N!==null;)zk(p,g,N),N=N.sibling}function zk(p,g,N){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(cv,N)}catch{}switch(N.tag){case 5:Ea||Ff(N,g);case 6:var T=ua,_=Is;ua=null,ku(p,g,N),ua=T,Is=_,ua!==null&&(Is?(p=ua,N=N.stateNode,p.nodeType===8?p.parentNode.removeChild(N):p.removeChild(N)):ua.removeChild(N.stateNode));break;case 18:ua!==null&&(Is?(p=ua,N=N.stateNode,p.nodeType===8?Ux(p.parentNode,N):p.nodeType===1&&Ux(p,N),Rp(p)):Ux(ua,N.stateNode));break;case 4:T=ua,_=Is,ua=N.stateNode.containerInfo,Is=!0,ku(p,g,N),ua=T,Is=_;break;case 0:case 11:case 14:case 15:if(!Ea&&(T=N.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){_=T=T.next;do{var P=_,X=P.destroy;P=P.tag,X!==void 0&&(P&2||P&4)&&E2(N,g,X),_=_.next}while(_!==T)}ku(p,g,N);break;case 1:if(!Ea&&(Ff(N,g),T=N.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=N.memoizedProps,T.state=N.memoizedState,T.componentWillUnmount()}catch(le){cr(N,g,le)}ku(p,g,N);break;case 21:ku(p,g,N);break;case 22:N.mode&1?(Ea=(T=Ea)||N.memoizedState!==null,ku(p,g,N),Ea=T):ku(p,g,N);break;default:ku(p,g,N)}}function Uk(p){var g=p.updateQueue;if(g!==null){p.updateQueue=null;var N=p.stateNode;N===null&&(N=p.stateNode=new JH),g.forEach(function(T){var _=lj.bind(null,p,T);N.has(T)||(N.add(T),T.then(_,_))})}}function ks(p,g){var N=g.deletions;if(N!==null)for(var T=0;T<N.length;T++){var _=N[T];try{var P=p,X=g,le=X;e:for(;le!==null;){switch(le.tag){case 5:ua=le.stateNode,Is=!1;break e;case 3:ua=le.stateNode.containerInfo,Is=!0;break e;case 4:ua=le.stateNode.containerInfo,Is=!0;break e}le=le.return}if(ua===null)throw Error(n(160));zk(P,X,_),ua=null,Is=!1;var ye=_.alternate;ye!==null&&(ye.return=null),_.return=null}catch(_e){cr(_,g,_e)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)Vk(g,p),g=g.sibling}function Vk(p,g){var N=p.alternate,T=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ks(g,p),oo(p),T&4){try{rh(3,p,p.return),Zv(3,p)}catch(yt){cr(p,p.return,yt)}try{rh(5,p,p.return)}catch(yt){cr(p,p.return,yt)}}break;case 1:ks(g,p),oo(p),T&512&&N!==null&&Ff(N,N.return);break;case 5:if(ks(g,p),oo(p),T&512&&N!==null&&Ff(N,N.return),p.flags&32){var _=p.stateNode;try{He(_,"")}catch(yt){cr(p,p.return,yt)}}if(T&4&&(_=p.stateNode,_!=null)){var P=p.memoizedProps,X=N!==null?N.memoizedProps:P,le=p.type,ye=p.updateQueue;if(p.updateQueue=null,ye!==null)try{le==="input"&&P.type==="radio"&&P.name!=null&&ie(_,P),fe(le,X);var _e=fe(le,P);for(X=0;X<ye.length;X+=2){var Ye=ye[X],et=ye[X+1];Ye==="style"?St(_,et):Ye==="dangerouslySetInnerHTML"?Je(_,et):Ye==="children"?He(_,et):w(_,Ye,et,_e)}switch(le){case"input":ve(_,P);break;case"textarea":ce(_,P);break;case"select":var Ke=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var ct=P.value;ct!=null?je(_,!!P.multiple,ct,!1):Ke!==!!P.multiple&&(P.defaultValue!=null?je(_,!!P.multiple,P.defaultValue,!0):je(_,!!P.multiple,P.multiple?[]:"",!1))}_[jp]=P}catch(yt){cr(p,p.return,yt)}}break;case 6:if(ks(g,p),oo(p),T&4){if(p.stateNode===null)throw Error(n(162));_=p.stateNode,P=p.memoizedProps;try{_.nodeValue=P}catch(yt){cr(p,p.return,yt)}}break;case 3:if(ks(g,p),oo(p),T&4&&N!==null&&N.memoizedState.isDehydrated)try{Rp(g.containerInfo)}catch(yt){cr(p,p.return,yt)}break;case 4:ks(g,p),oo(p);break;case 13:ks(g,p),oo(p),_=p.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(k2=Ot())),T&4&&Uk(p);break;case 22:if(Ye=N!==null&&N.memoizedState!==null,p.mode&1?(Ea=(_e=Ea)||Ye,ks(g,p),Ea=_e):ks(g,p),oo(p),T&8192){if(_e=p.memoizedState!==null,(p.stateNode.isHidden=_e)&&!Ye&&p.mode&1)for(dt=p,Ye=p.child;Ye!==null;){for(et=dt=Ye;dt!==null;){switch(Ke=dt,ct=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:rh(4,Ke,Ke.return);break;case 1:Ff(Ke,Ke.return);var gt=Ke.stateNode;if(typeof gt.componentWillUnmount=="function"){T=Ke,N=Ke.return;try{g=T,gt.props=g.memoizedProps,gt.state=g.memoizedState,gt.componentWillUnmount()}catch(yt){cr(T,N,yt)}}break;case 5:Ff(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){Hk(et);continue}}ct!==null?(ct.return=Ke,dt=ct):Hk(et)}Ye=Ye.sibling}e:for(Ye=null,et=p;;){if(et.tag===5){if(Ye===null){Ye=et;try{_=et.stateNode,_e?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(le=et.stateNode,ye=et.memoizedProps.style,X=ye!=null&&ye.hasOwnProperty("display")?ye.display:null,le.style.display=Xt("display",X))}catch(yt){cr(p,p.return,yt)}}}else if(et.tag===6){if(Ye===null)try{et.stateNode.nodeValue=_e?"":et.memoizedProps}catch(yt){cr(p,p.return,yt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===p)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===p)break e;for(;et.sibling===null;){if(et.return===null||et.return===p)break e;Ye===et&&(Ye=null),et=et.return}Ye===et&&(Ye=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:ks(g,p),oo(p),T&4&&Uk(p);break;case 21:break;default:ks(g,p),oo(p)}}function oo(p){var g=p.flags;if(g&2){try{e:{for(var N=p.return;N!==null;){if(Bk(N)){var T=N;break e}N=N.return}throw Error(n(160))}switch(T.tag){case 5:var _=T.stateNode;T.flags&32&&(He(_,""),T.flags&=-33);var P=Lk(p);$2(p,P,_);break;case 3:case 4:var X=T.stateNode.containerInfo,le=Lk(p);D2(p,le,X);break;default:throw Error(n(161))}}catch(ye){cr(p,p.return,ye)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function tj(p,g,N){dt=p,Wk(p)}function Wk(p,g,N){for(var T=(p.mode&1)!==0;dt!==null;){var _=dt,P=_.child;if(_.tag===22&&T){var X=_.memoizedState!==null||Yv;if(!X){var le=_.alternate,ye=le!==null&&le.memoizedState!==null||Ea;le=Yv;var _e=Ea;if(Yv=X,(Ea=ye)&&!_e)for(dt=_;dt!==null;)X=dt,ye=X.child,X.tag===22&&X.memoizedState!==null?jk(_):ye!==null?(ye.return=X,dt=ye):jk(_);for(;P!==null;)dt=P,Wk(P),P=P.sibling;dt=_,Yv=le,Ea=_e}qk(p)}else _.subtreeFlags&8772&&P!==null?(P.return=_,dt=P):qk(p)}}function qk(p){for(;dt!==null;){var g=dt;if(g.flags&8772){var N=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Ea||Zv(5,g);break;case 1:var T=g.stateNode;if(g.flags&4&&!Ea)if(N===null)T.componentDidMount();else{var _=g.elementType===g.type?N.memoizedProps:As(g.type,N.memoizedProps);T.componentDidUpdate(_,N.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var P=g.updateQueue;P!==null&&HI(g,P,T);break;case 3:var X=g.updateQueue;if(X!==null){if(N=null,g.child!==null)switch(g.child.tag){case 5:N=g.child.stateNode;break;case 1:N=g.child.stateNode}HI(g,X,N)}break;case 5:var le=g.stateNode;if(N===null&&g.flags&4){N=le;var ye=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":ye.autoFocus&&N.focus();break;case"img":ye.src&&(N.src=ye.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var _e=g.alternate;if(_e!==null){var Ye=_e.memoizedState;if(Ye!==null){var et=Ye.dehydrated;et!==null&&Rp(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ea||g.flags&512&&T2(g)}catch(Ke){cr(g,g.return,Ke)}}if(g===p){dt=null;break}if(N=g.sibling,N!==null){N.return=g.return,dt=N;break}dt=g.return}}function Hk(p){for(;dt!==null;){var g=dt;if(g===p){dt=null;break}var N=g.sibling;if(N!==null){N.return=g.return,dt=N;break}dt=g.return}}function jk(p){for(;dt!==null;){var g=dt;try{switch(g.tag){case 0:case 11:case 15:var N=g.return;try{Zv(4,g)}catch(ye){cr(g,N,ye)}break;case 1:var T=g.stateNode;if(typeof T.componentDidMount=="function"){var _=g.return;try{T.componentDidMount()}catch(ye){cr(g,_,ye)}}var P=g.return;try{T2(g)}catch(ye){cr(g,P,ye)}break;case 5:var X=g.return;try{T2(g)}catch(ye){cr(g,X,ye)}}}catch(ye){cr(g,g.return,ye)}if(g===p){dt=null;break}var le=g.sibling;if(le!==null){le.return=g.return,dt=le;break}dt=g.return}}var nj=Math.ceil,Qv=S.ReactCurrentDispatcher,A2=S.ReactCurrentOwner,Ki=S.ReactCurrentBatchConfig,wn=0,Xr=null,Sr=null,la=0,_i=0,Rf=Tu(0),Rr=0,ah=null,Ql=0,Jv=0,I2=0,ih=null,ai=null,k2=0,Mf=1/0,Wo=null,ey=!1,_2=null,_u=null,ty=!1,Ou=null,ny=0,sh=0,O2=null,ry=-1,ay=0;function Ua(){return wn&6?Ot():ry!==-1?ry:ry=Ot()}function Fu(p){return p.mode&1?wn&2&&la!==0?la&-la:LH.transition!==null?(ay===0&&(ay=LA()),ay):(p=kn,p!==0||(p=window.event,p=p===void 0?16:XA(p.type)),p):1}function _s(p,g,N,T){if(50<sh)throw sh=0,O2=null,Error(n(185));Ip(p,N,T),(!(wn&2)||p!==Xr)&&(p===Xr&&(!(wn&2)&&(Jv|=N),Rr===4&&Ru(p,la)),ii(p,T),N===1&&wn===0&&!(g.mode&1)&&(Mf=Ot()+500,_v&&$u()))}function ii(p,g){var N=p.callbackNode;Lq(p,g);var T=pv(p,p===Xr?la:0);if(T===0)N!==null&&lv(N),p.callbackNode=null,p.callbackPriority=0;else if(g=T&-T,p.callbackPriority!==g){if(N!=null&&lv(N),g===1)p.tag===0?BH(Xk.bind(null,p)):OI(Xk.bind(null,p)),FH(function(){!(wn&6)&&$u()}),N=null;else{switch(zA(T)){case 1:N=$p;break;case 4:N=ql;break;case 16:N=no;break;case 536870912:N=BA;break;default:N=no}N=n_(N,Gk.bind(null,p))}p.callbackPriority=g,p.callbackNode=N}}function Gk(p,g){if(ry=-1,ay=0,wn&6)throw Error(n(327));var N=p.callbackNode;if(Pf()&&p.callbackNode!==N)return null;var T=pv(p,p===Xr?la:0);if(T===0)return null;if(T&30||T&p.expiredLanes||g)g=iy(p,T);else{g=T;var _=wn;wn|=2;var P=Yk();(Xr!==p||la!==g)&&(Wo=null,Mf=Ot()+500,ec(p,g));do try{ij();break}catch(le){Kk(p,le)}while(!0);Zx(),Qv.current=P,wn=_,Sr!==null?g=0:(Xr=null,la=0,g=Rr)}if(g!==0){if(g===2&&(_=px(p),_!==0&&(T=_,g=F2(p,_))),g===1)throw N=ah,ec(p,0),Ru(p,T),ii(p,Ot()),N;if(g===6)Ru(p,T);else{if(_=p.current.alternate,!(T&30)&&!rj(_)&&(g=iy(p,T),g===2&&(P=px(p),P!==0&&(T=P,g=F2(p,P))),g===1))throw N=ah,ec(p,0),Ru(p,T),ii(p,Ot()),N;switch(p.finishedWork=_,p.finishedLanes=T,g){case 0:case 1:throw Error(n(345));case 2:tc(p,ai,Wo);break;case 3:if(Ru(p,T),(T&130023424)===T&&(g=k2+500-Ot(),10<g)){if(pv(p,0)!==0)break;if(_=p.suspendedLanes,(_&T)!==T){Ua(),p.pingedLanes|=p.suspendedLanes&_;break}p.timeoutHandle=zx(tc.bind(null,p,ai,Wo),g);break}tc(p,ai,Wo);break;case 4:if(Ru(p,T),(T&4194240)===T)break;for(g=p.eventTimes,_=-1;0<T;){var X=31-Ts(T);P=1<<X,X=g[X],X>_&&(_=X),T&=~P}if(T=_,T=Ot()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*nj(T/1960))-T,10<T){p.timeoutHandle=zx(tc.bind(null,p,ai,Wo),T);break}tc(p,ai,Wo);break;case 5:tc(p,ai,Wo);break;default:throw Error(n(329))}}}return ii(p,Ot()),p.callbackNode===N?Gk.bind(null,p):null}function F2(p,g){var N=ih;return p.current.memoizedState.isDehydrated&&(ec(p,g).flags|=256),p=iy(p,g),p!==2&&(g=ai,ai=N,g!==null&&R2(g)),p}function R2(p){ai===null?ai=p:ai.push.apply(ai,p)}function rj(p){for(var g=p;;){if(g.flags&16384){var N=g.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var T=0;T<N.length;T++){var _=N[T],P=_.getSnapshot;_=_.value;try{if(!Ds(P(),_))return!1}catch{return!1}}}if(N=g.child,g.subtreeFlags&16384&&N!==null)N.return=g,g=N;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ru(p,g){for(g&=~I2,g&=~Jv,p.suspendedLanes|=g,p.pingedLanes&=~g,p=p.expirationTimes;0<g;){var N=31-Ts(g),T=1<<N;p[N]=-1,g&=~T}}function Xk(p){if(wn&6)throw Error(n(327));Pf();var g=pv(p,0);if(!(g&1))return ii(p,Ot()),null;var N=iy(p,g);if(p.tag!==0&&N===2){var T=px(p);T!==0&&(g=T,N=F2(p,T))}if(N===1)throw N=ah,ec(p,0),Ru(p,g),ii(p,Ot()),N;if(N===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=g,tc(p,ai,Wo),ii(p,Ot()),null}function M2(p,g){var N=wn;wn|=1;try{return p(g)}finally{wn=N,wn===0&&(Mf=Ot()+500,_v&&$u())}}function Jl(p){Ou!==null&&Ou.tag===0&&!(wn&6)&&Pf();var g=wn;wn|=1;var N=Ki.transition,T=kn;try{if(Ki.transition=null,kn=1,p)return p()}finally{kn=T,Ki.transition=N,wn=g,!(wn&6)&&$u()}}function P2(){_i=Rf.current,Xn(Rf)}function ec(p,g){p.finishedWork=null,p.finishedLanes=0;var N=p.timeoutHandle;if(N!==-1&&(p.timeoutHandle=-1,OH(N)),Sr!==null)for(N=Sr.return;N!==null;){var T=N;switch(jx(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Iv();break;case 3:_f(),Xn(ti),Xn(Na),i2();break;case 5:r2(T);break;case 4:_f();break;case 13:Xn(ar);break;case 19:Xn(ar);break;case 10:Qx(T.type._context);break;case 22:case 23:P2()}N=N.return}if(Xr=p,Sr=p=Mu(p.current,null),la=_i=g,Rr=0,ah=null,I2=Jv=Ql=0,ai=ih=null,Kl!==null){for(g=0;g<Kl.length;g++)if(N=Kl[g],T=N.interleaved,T!==null){N.interleaved=null;var _=T.next,P=N.pending;if(P!==null){var X=P.next;P.next=_,T.next=X}N.pending=T}Kl=null}return p}function Kk(p,g){do{var N=Sr;try{if(Zx(),Vv.current=jv,Wv){for(var T=ir.memoizedState;T!==null;){var _=T.queue;_!==null&&(_.pending=null),T=T.next}Wv=!1}if(Zl=0,Gr=Fr=ir=null,Qp=!1,Jp=0,A2.current=null,N===null||N.return===null){Rr=1,ah=g,Sr=null;break}e:{var P=p,X=N.return,le=N,ye=g;if(g=la,le.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var _e=ye,Ye=le,et=Ye.tag;if(!(Ye.mode&1)&&(et===0||et===11||et===15)){var Ke=Ye.alternate;Ke?(Ye.updateQueue=Ke.updateQueue,Ye.memoizedState=Ke.memoizedState,Ye.lanes=Ke.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var ct=wk(X);if(ct!==null){ct.flags&=-257,xk(ct,X,le,P,g),ct.mode&1&&bk(P,_e,g),g=ct,ye=_e;var gt=g.updateQueue;if(gt===null){var yt=new Set;yt.add(ye),g.updateQueue=yt}else gt.add(ye);break e}else{if(!(g&1)){bk(P,_e,g),B2();break e}ye=Error(n(426))}}else if(Zn&&le.mode&1){var vr=wk(X);if(vr!==null){!(vr.flags&65536)&&(vr.flags|=256),xk(vr,X,le,P,g),Kx(Of(ye,le));break e}}P=ye=Of(ye,le),Rr!==4&&(Rr=2),ih===null?ih=[P]:ih.push(P),P=X;do{switch(P.tag){case 3:P.flags|=65536,g&=-g,P.lanes|=g;var De=vk(P,ye,g);qI(P,De);break e;case 1:le=ye;var Ne=P.type,Ie=P.stateNode;if(!(P.flags&128)&&(typeof Ne.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(_u===null||!_u.has(Ie)))){P.flags|=65536,g&=-g,P.lanes|=g;var at=yk(P,le,g);qI(P,at);break e}}P=P.return}while(P!==null)}Qk(N)}catch(xt){g=xt,Sr===N&&N!==null&&(Sr=N=N.return);continue}break}while(!0)}function Yk(){var p=Qv.current;return Qv.current=jv,p===null?jv:p}function B2(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Xr===null||!(Ql&268435455)&&!(Jv&268435455)||Ru(Xr,la)}function iy(p,g){var N=wn;wn|=2;var T=Yk();(Xr!==p||la!==g)&&(Wo=null,ec(p,g));do try{aj();break}catch(_){Kk(p,_)}while(!0);if(Zx(),wn=N,Qv.current=T,Sr!==null)throw Error(n(261));return Xr=null,la=0,Rr}function aj(){for(;Sr!==null;)Zk(Sr)}function ij(){for(;Sr!==null&&!fx();)Zk(Sr)}function Zk(p){var g=t_(p.alternate,p,_i);p.memoizedProps=p.pendingProps,g===null?Qk(p):Sr=g,A2.current=null}function Qk(p){var g=p;do{var N=g.alternate;if(p=g.return,g.flags&32768){if(N=QH(N,g),N!==null){N.flags&=32767,Sr=N;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Rr=6,Sr=null;return}}else if(N=ZH(N,g,_i),N!==null){Sr=N;return}if(g=g.sibling,g!==null){Sr=g;return}Sr=g=p}while(g!==null);Rr===0&&(Rr=5)}function tc(p,g,N){var T=kn,_=Ki.transition;try{Ki.transition=null,kn=1,sj(p,g,N,T)}finally{Ki.transition=_,kn=T}return null}function sj(p,g,N,T){do Pf();while(Ou!==null);if(wn&6)throw Error(n(327));N=p.finishedWork;var _=p.finishedLanes;if(N===null)return null;if(p.finishedWork=null,p.finishedLanes=0,N===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var P=N.lanes|N.childLanes;if(zq(p,P),p===Xr&&(Sr=Xr=null,la=0),!(N.subtreeFlags&2064)&&!(N.flags&2064)||ty||(ty=!0,n_(no,function(){return Pf(),null})),P=(N.flags&15990)!==0,N.subtreeFlags&15990||P){P=Ki.transition,Ki.transition=null;var X=kn;kn=1;var le=wn;wn|=4,A2.current=null,ej(p,N),Vk(N,p),TH(Bx),gv=!!Px,Bx=Px=null,p.current=N,tj(N),Wl(),wn=le,kn=X,Ki.transition=P}else p.current=N;if(ty&&(ty=!1,Ou=p,ny=_),P=p.pendingLanes,P===0&&(_u=null),Fq(N.stateNode),ii(p,Ot()),g!==null)for(T=p.onRecoverableError,N=0;N<g.length;N++)_=g[N],T(_.value,{componentStack:_.stack,digest:_.digest});if(ey)throw ey=!1,p=_2,_2=null,p;return ny&1&&p.tag!==0&&Pf(),P=p.pendingLanes,P&1?p===O2?sh++:(sh=0,O2=p):sh=0,$u(),null}function Pf(){if(Ou!==null){var p=zA(ny),g=Ki.transition,N=kn;try{if(Ki.transition=null,kn=16>p?16:p,Ou===null)var T=!1;else{if(p=Ou,Ou=null,ny=0,wn&6)throw Error(n(331));var _=wn;for(wn|=4,dt=p.current;dt!==null;){var P=dt,X=P.child;if(dt.flags&16){var le=P.deletions;if(le!==null){for(var ye=0;ye<le.length;ye++){var _e=le[ye];for(dt=_e;dt!==null;){var Ye=dt;switch(Ye.tag){case 0:case 11:case 15:rh(8,Ye,P)}var et=Ye.child;if(et!==null)et.return=Ye,dt=et;else for(;dt!==null;){Ye=dt;var Ke=Ye.sibling,ct=Ye.return;if(Pk(Ye),Ye===_e){dt=null;break}if(Ke!==null){Ke.return=ct,dt=Ke;break}dt=ct}}}var gt=P.alternate;if(gt!==null){var yt=gt.child;if(yt!==null){gt.child=null;do{var vr=yt.sibling;yt.sibling=null,yt=vr}while(yt!==null)}}dt=P}}if(P.subtreeFlags&2064&&X!==null)X.return=P,dt=X;else e:for(;dt!==null;){if(P=dt,P.flags&2048)switch(P.tag){case 0:case 11:case 15:rh(9,P,P.return)}var De=P.sibling;if(De!==null){De.return=P.return,dt=De;break e}dt=P.return}}var Ne=p.current;for(dt=Ne;dt!==null;){X=dt;var Ie=X.child;if(X.subtreeFlags&2064&&Ie!==null)Ie.return=X,dt=Ie;else e:for(X=Ne;dt!==null;){if(le=dt,le.flags&2048)try{switch(le.tag){case 0:case 11:case 15:Zv(9,le)}}catch(xt){cr(le,le.return,xt)}if(le===X){dt=null;break e}var at=le.sibling;if(at!==null){at.return=le.return,dt=at;break e}dt=le.return}}if(wn=_,$u(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(cv,p)}catch{}T=!0}return T}finally{kn=N,Ki.transition=g}}return!1}function Jk(p,g,N){g=Of(N,g),g=vk(p,g,1),p=Iu(p,g,1),g=Ua(),p!==null&&(Ip(p,1,g),ii(p,g))}function cr(p,g,N){if(p.tag===3)Jk(p,p,N);else for(;g!==null;){if(g.tag===3){Jk(g,p,N);break}else if(g.tag===1){var T=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(_u===null||!_u.has(T))){p=Of(N,p),p=yk(g,p,1),g=Iu(g,p,1),p=Ua(),g!==null&&(Ip(g,1,p),ii(g,p));break}}g=g.return}}function oj(p,g,N){var T=p.pingCache;T!==null&&T.delete(g),g=Ua(),p.pingedLanes|=p.suspendedLanes&N,Xr===p&&(la&N)===N&&(Rr===4||Rr===3&&(la&130023424)===la&&500>Ot()-k2?ec(p,0):I2|=N),ii(p,g)}function e_(p,g){g===0&&(p.mode&1?(g=dv,dv<<=1,!(dv&130023424)&&(dv=4194304)):g=1);var N=Ua();p=zo(p,g),p!==null&&(Ip(p,g,N),ii(p,N))}function uj(p){var g=p.memoizedState,N=0;g!==null&&(N=g.retryLane),e_(p,N)}function lj(p,g){var N=0;switch(p.tag){case 13:var T=p.stateNode,_=p.memoizedState;_!==null&&(N=_.retryLane);break;case 19:T=p.stateNode;break;default:throw Error(n(314))}T!==null&&T.delete(g),e_(p,N)}var t_;t_=function(p,g,N){if(p!==null)if(p.memoizedProps!==g.pendingProps||ti.current)ri=!0;else{if(!(p.lanes&N)&&!(g.flags&128))return ri=!1,YH(p,g,N);ri=!!(p.flags&131072)}else ri=!1,Zn&&g.flags&1048576&&FI(g,Fv,g.index);switch(g.lanes=0,g.tag){case 2:var T=g.type;Kv(p,g),p=g.pendingProps;var _=Ef(g,Na.current);kf(g,N),_=u2(null,g,T,p,_,N);var P=l2();return g.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ni(T)?(P=!0,kv(g)):P=!1,g.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,t2(g),_.updater=Gv,g.stateNode=_,_._reactInternals=g,m2(g,T,p,N),g=b2(null,g,T,!0,P,N)):(g.tag=0,Zn&&P&&Hx(g),za(null,g,_,N),g=g.child),g;case 16:T=g.elementType;e:{switch(Kv(p,g),p=g.pendingProps,_=T._init,T=_(T._payload),g.type=T,_=g.tag=fj(T),p=As(T,p),_){case 0:g=y2(null,g,T,p,N);break e;case 1:g=Dk(null,g,T,p,N);break e;case 11:g=Nk(null,g,T,p,N);break e;case 14:g=Sk(null,g,T,As(T.type,p),N);break e}throw Error(n(306,T,""))}return g;case 0:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:As(T,_),y2(p,g,T,_,N);case 1:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:As(T,_),Dk(p,g,T,_,N);case 3:e:{if($k(g),p===null)throw Error(n(387));T=g.pendingProps,P=g.memoizedState,_=P.element,WI(p,g),zv(g,T,null,N);var X=g.memoizedState;if(T=X.element,P.isDehydrated)if(P={element:T,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},g.updateQueue.baseState=P,g.memoizedState=P,g.flags&256){_=Of(Error(n(423)),g),g=Ak(p,g,T,N,_);break e}else if(T!==_){_=Of(Error(n(424)),g),g=Ak(p,g,T,N,_);break e}else for(ki=Eu(g.stateNode.containerInfo.firstChild),Ii=g,Zn=!0,$s=null,N=UI(g,null,T,N),g.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if($f(),T===_){g=Vo(p,g,N);break e}za(p,g,T,N)}g=g.child}return g;case 5:return jI(g),p===null&&Xx(g),T=g.type,_=g.pendingProps,P=p!==null?p.memoizedProps:null,X=_.children,Lx(T,_)?X=null:P!==null&&Lx(T,P)&&(g.flags|=32),Tk(p,g),za(p,g,X,N),g.child;case 6:return p===null&&Xx(g),null;case 13:return Ik(p,g,N);case 4:return n2(g,g.stateNode.containerInfo),T=g.pendingProps,p===null?g.child=Af(g,null,T,N):za(p,g,T,N),g.child;case 11:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:As(T,_),Nk(p,g,T,_,N);case 7:return za(p,g,g.pendingProps,N),g.child;case 8:return za(p,g,g.pendingProps.children,N),g.child;case 12:return za(p,g,g.pendingProps.children,N),g.child;case 10:e:{if(T=g.type._context,_=g.pendingProps,P=g.memoizedProps,X=_.value,qn(Pv,T._currentValue),T._currentValue=X,P!==null)if(Ds(P.value,X)){if(P.children===_.children&&!ti.current){g=Vo(p,g,N);break e}}else for(P=g.child,P!==null&&(P.return=g);P!==null;){var le=P.dependencies;if(le!==null){X=P.child;for(var ye=le.firstContext;ye!==null;){if(ye.context===T){if(P.tag===1){ye=Uo(-1,N&-N),ye.tag=2;var _e=P.updateQueue;if(_e!==null){_e=_e.shared;var Ye=_e.pending;Ye===null?ye.next=ye:(ye.next=Ye.next,Ye.next=ye),_e.pending=ye}}P.lanes|=N,ye=P.alternate,ye!==null&&(ye.lanes|=N),Jx(P.return,N,g),le.lanes|=N;break}ye=ye.next}}else if(P.tag===10)X=P.type===g.type?null:P.child;else if(P.tag===18){if(X=P.return,X===null)throw Error(n(341));X.lanes|=N,le=X.alternate,le!==null&&(le.lanes|=N),Jx(X,N,g),X=P.sibling}else X=P.child;if(X!==null)X.return=P;else for(X=P;X!==null;){if(X===g){X=null;break}if(P=X.sibling,P!==null){P.return=X.return,X=P;break}X=X.return}P=X}za(p,g,_.children,N),g=g.child}return g;case 9:return _=g.type,T=g.pendingProps.children,kf(g,N),_=Gi(_),T=T(_),g.flags|=1,za(p,g,T,N),g.child;case 14:return T=g.type,_=As(T,g.pendingProps),_=As(T.type,_),Sk(p,g,T,_,N);case 15:return Ck(p,g,g.type,g.pendingProps,N);case 17:return T=g.type,_=g.pendingProps,_=g.elementType===T?_:As(T,_),Kv(p,g),g.tag=1,ni(T)?(p=!0,kv(g)):p=!1,kf(g,N),mk(g,T,_),m2(g,T,_,N),b2(null,g,T,!0,p,N);case 19:return _k(p,g,N);case 22:return Ek(p,g,N)}throw Error(n(156,g.tag))};function n_(p,g){return uv(p,g)}function cj(p,g,N,T){this.tag=p,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(p,g,N,T){return new cj(p,g,N,T)}function L2(p){return p=p.prototype,!(!p||!p.isReactComponent)}function fj(p){if(typeof p=="function")return L2(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===L)return 14}return 2}function Mu(p,g){var N=p.alternate;return N===null?(N=Yi(p.tag,g,p.key,p.mode),N.elementType=p.elementType,N.type=p.type,N.stateNode=p.stateNode,N.alternate=p,p.alternate=N):(N.pendingProps=g,N.type=p.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=p.flags&14680064,N.childLanes=p.childLanes,N.lanes=p.lanes,N.child=p.child,N.memoizedProps=p.memoizedProps,N.memoizedState=p.memoizedState,N.updateQueue=p.updateQueue,g=p.dependencies,N.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},N.sibling=p.sibling,N.index=p.index,N.ref=p.ref,N}function sy(p,g,N,T,_,P){var X=2;if(T=p,typeof p=="function")L2(p)&&(X=1);else if(typeof p=="string")X=5;else e:switch(p){case A:return nc(N.children,_,P,g);case k:X=8,_|=8;break;case D:return p=Yi(12,N,g,_|2),p.elementType=D,p.lanes=P,p;case B:return p=Yi(13,N,g,_),p.elementType=B,p.lanes=P,p;case z:return p=Yi(19,N,g,_),p.elementType=z,p.lanes=P,p;case R:return oy(N,_,P,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case I:X=10;break e;case $:X=9;break e;case O:X=11;break e;case L:X=14;break e;case F:X=16,T=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return g=Yi(X,N,g,_),g.elementType=p,g.type=T,g.lanes=P,g}function nc(p,g,N,T){return p=Yi(7,p,T,g),p.lanes=N,p}function oy(p,g,N,T){return p=Yi(22,p,T,g),p.elementType=R,p.lanes=N,p.stateNode={isHidden:!1},p}function z2(p,g,N){return p=Yi(6,p,null,g),p.lanes=N,p}function U2(p,g,N){return g=Yi(4,p.children!==null?p.children:[],p.key,g),g.lanes=N,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function dj(p,g,N,T,_){this.tag=g,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hx(0),this.expirationTimes=hx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hx(0),this.identifierPrefix=T,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function V2(p,g,N,T,_,P,X,le,ye){return p=new dj(p,g,N,le,ye),g===1?(g=1,P===!0&&(g|=8)):g=0,P=Yi(3,null,null,g),p.current=P,P.stateNode=p,P.memoizedState={element:T,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},t2(P),p}function pj(p,g,N){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:T==null?null:""+T,children:p,containerInfo:g,implementation:N}}function r_(p){if(!p)return Du;p=p._reactInternals;e:{if(Ro(p)!==p||p.tag!==1)throw Error(n(170));var g=p;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ni(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(p.tag===1){var N=p.type;if(ni(N))return kI(p,N,g)}return g}function a_(p,g,N,T,_,P,X,le,ye){return p=V2(N,T,!0,p,_,P,X,le,ye),p.context=r_(null),N=p.current,T=Ua(),_=Fu(N),P=Uo(T,_),P.callback=g??null,Iu(N,P,_),p.current.lanes=_,Ip(p,_,T),ii(p,T),p}function uy(p,g,N,T){var _=g.current,P=Ua(),X=Fu(_);return N=r_(N),g.context===null?g.context=N:g.pendingContext=N,g=Uo(P,X),g.payload={element:p},T=T===void 0?null:T,T!==null&&(g.callback=T),p=Iu(_,g,X),p!==null&&(_s(p,_,X,P),Lv(p,_,X)),X}function ly(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function i_(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var N=p.retryLane;p.retryLane=N!==0&&N<g?N:g}}function W2(p,g){i_(p,g),(p=p.alternate)&&i_(p,g)}function hj(){return null}var s_=typeof reportError=="function"?reportError:function(p){console.error(p)};function q2(p){this._internalRoot=p}cy.prototype.render=q2.prototype.render=function(p){var g=this._internalRoot;if(g===null)throw Error(n(409));uy(p,g,null,null)},cy.prototype.unmount=q2.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var g=p.containerInfo;Jl(function(){uy(null,p,null,null)}),g[Mo]=null}};function cy(p){this._internalRoot=p}cy.prototype.unstable_scheduleHydration=function(p){if(p){var g=WA();p={blockedOn:null,target:p,priority:g};for(var N=0;N<Nu.length&&g!==0&&g<Nu[N].priority;N++);Nu.splice(N,0,p),N===0&&jA(p)}};function H2(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function fy(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function o_(){}function mj(p,g,N,T,_){if(_){if(typeof T=="function"){var P=T;T=function(){var _e=ly(X);P.call(_e)}}var X=a_(g,T,p,0,null,!1,!1,"",o_);return p._reactRootContainer=X,p[Mo]=X.current,qp(p.nodeType===8?p.parentNode:p),Jl(),X}for(;_=p.lastChild;)p.removeChild(_);if(typeof T=="function"){var le=T;T=function(){var _e=ly(ye);le.call(_e)}}var ye=V2(p,0,!1,null,null,!1,!1,"",o_);return p._reactRootContainer=ye,p[Mo]=ye.current,qp(p.nodeType===8?p.parentNode:p),Jl(function(){uy(g,ye,N,T)}),ye}function dy(p,g,N,T,_){var P=N._reactRootContainer;if(P){var X=P;if(typeof _=="function"){var le=_;_=function(){var ye=ly(X);le.call(ye)}}uy(g,X,p,_)}else X=mj(N,g,p,_,T);return ly(X)}UA=function(p){switch(p.tag){case 3:var g=p.stateNode;if(g.current.memoizedState.isDehydrated){var N=Ap(g.pendingLanes);N!==0&&(mx(g,N|1),ii(g,Ot()),!(wn&6)&&(Mf=Ot()+500,$u()))}break;case 13:Jl(function(){var T=zo(p,1);if(T!==null){var _=Ua();_s(T,p,1,_)}}),W2(p,1)}},gx=function(p){if(p.tag===13){var g=zo(p,134217728);if(g!==null){var N=Ua();_s(g,p,134217728,N)}W2(p,134217728)}},VA=function(p){if(p.tag===13){var g=Fu(p),N=zo(p,g);if(N!==null){var T=Ua();_s(N,p,g,T)}W2(p,g)}},WA=function(){return kn},qA=function(p,g){var N=kn;try{return kn=p,g()}finally{kn=N}},Dt=function(p,g,N){switch(g){case"input":if(ve(p,N),g=N.name,N.type==="radio"&&g!=null){for(N=p;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<N.length;g++){var T=N[g];if(T!==p&&T.form===p.form){var _=Av(T);if(!_)throw Error(n(90));he(T),ve(T,_)}}}break;case"textarea":ce(p,N);break;case"select":g=N.value,g!=null&&je(p,!!N.multiple,g,!1)}},tv=M2,nv=Jl;var gj={usingClientEntryPoint:!1,Events:[Gp,Sf,Av,Jg,ev,M2]},oh={findFiberByHostInstance:Hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vj={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=sv(p),p===null?null:p.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||hj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var py=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!py.isDisabled&&py.supportsFiber)try{cv=py.inject(vj),ro=py}catch{}}return si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gj,si.createPortal=function(p,g){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H2(g))throw Error(n(200));return pj(p,g,null,N)},si.createRoot=function(p,g){if(!H2(p))throw Error(n(299));var N=!1,T="",_=s_;return g!=null&&(g.unstable_strictMode===!0&&(N=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onRecoverableError!==void 0&&(_=g.onRecoverableError)),g=V2(p,1,!1,null,null,N,!1,T,_),p[Mo]=g.current,qp(p.nodeType===8?p.parentNode:p),new q2(g)},si.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=sv(g),p=p===null?null:p.stateNode,p},si.flushSync=function(p){return Jl(p)},si.hydrate=function(p,g,N){if(!fy(g))throw Error(n(200));return dy(null,p,g,!0,N)},si.hydrateRoot=function(p,g,N){if(!H2(p))throw Error(n(405));var T=N!=null&&N.hydratedSources||null,_=!1,P="",X=s_;if(N!=null&&(N.unstable_strictMode===!0&&(_=!0),N.identifierPrefix!==void 0&&(P=N.identifierPrefix),N.onRecoverableError!==void 0&&(X=N.onRecoverableError)),g=a_(g,null,p,1,N??null,_,!1,P,X),p[Mo]=g.current,qp(p),T)for(p=0;p<T.length;p++)N=T[p],_=N._getVersion,_=_(N._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[N,_]:g.mutableSourceEagerHydrationData.push(N,_);return new cy(g)},si.render=function(p,g,N){if(!fy(g))throw Error(n(200));return dy(null,p,g,!1,N)},si.unmountComponentAtNode=function(p){if(!fy(p))throw Error(n(40));return p._reactRootContainer?(Jl(function(){dy(null,null,p,!1,function(){p._reactRootContainer=null,p[Mo]=null})}),!0):!1},si.unstable_batchedUpdates=M2,si.unstable_renderSubtreeIntoContainer=function(p,g,N,T){if(!fy(N))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return dy(p,g,N,!1,T)},si.version="18.3.1-next-f1338f8080-20240426",si}var m_;function Dj(){if(m_)return X2.exports;m_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),X2.exports=Tj(),X2.exports}var g_;function $j(){if(g_)return hy;g_=1;var t=Dj();return hy.createRoot=t.createRoot,hy.hydrateRoot=t.hydrateRoot,hy}var jP=$j();const Aj=()=>tn.jsx("header",{className:"bg-sidebar text-text py-4 px-6 shadow-md",children:tn.jsx("h1",{className:"text-lg font-semibold",children:"Emely Chat Bot IA1-EDV"})});var GP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v_=Fe.createContext&&Fe.createContext(GP),Ij=["attr","size","title"];function kj(t,e){if(t==null)return{};var n=_j(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _j(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m0.apply(this,arguments)}function y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function g0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y_(Object(n),!0).forEach(function(r){Oj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oj(t,e,n){return e=Fj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fj(t){var e=Rj(t,"string");return typeof e=="symbol"?e:e+""}function Rj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XP(t){return t&&t.map((e,n)=>Fe.createElement(e.tag,g0({key:n},e.attr),XP(e.child)))}function sm(t){return e=>Fe.createElement(Mj,m0({attr:g0({},t.attr)},e),XP(t.child))}function Mj(t){var e=n=>{var{attr:r,size:a,title:i}=t,s=kj(t,Ij),o=a||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Fe.createElement("svg",m0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:g0(g0({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&Fe.createElement("title",null,i),t.children)};return v_!==void 0?Fe.createElement(v_.Consumer,null,n=>e(n)):e(GP)}function Pj(t){return sm({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(t)}function Bj(t){return sm({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}function Lj(t){return sm({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function zj(t){return sm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M144 464a16 16 0 0 1-16-16v-64h-24a72.08 72.08 0 0 1-72-72V120a72.08 72.08 0 0 1 72-72h304a72.08 72.08 0 0 1 72 72v192a72.08 72.08 0 0 1-72 72H245.74l-91.49 76.29A16.05 16.05 0 0 1 144 464z"},child:[]}]})(t)}function Uj(t){return sm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}const Vj=()=>{const[t,e]=xn.useState(!1),n=()=>{e(!t)};return tn.jsxs("div",{className:`${t?"w-16":"w-64"} bg-sidebar h-full shadow-md flex flex-col transition-all duration-300`,children:[tn.jsx("div",{className:"flex items-center justify-between p-4 cursor-pointer text-text",onClick:n,children:t?tn.jsx(Bj,{size:24,className:"text-text"}):tn.jsx(Pj,{size:24,className:"text-text"})}),tn.jsxs("div",{className:"flex-1 flex flex-col items-start",children:[tn.jsx(Z2,{text:"Nuevo chat",icon:tn.jsx(zj,{}),isCollapsed:t}),tn.jsx(Z2,{text:"Historial",icon:tn.jsx(Uj,{}),isCollapsed:t}),tn.jsx(Z2,{text:"Borrar Chat",icon:tn.jsx(Lj,{}),isCollapsed:t})]}),tn.jsx("div",{className:"p-4 text-gray-400 text-sm",children:t?"":" 2024 Tu Chatbot"})]})},Z2=({text:t,icon:e,isCollapsed:n})=>tn.jsxs("div",{className:"flex items-center w-full px-4 py-2 cursor-pointer hover:bg-gray-600 hover:text-accent transition-colors",children:[tn.jsx("span",{className:"text-xl",children:e}),!n&&tn.jsx("span",{className:"ml-3 text-text font-medium",children:t})]});var Q2={exports:{}},J2,b_;function Wj(){if(b_)return J2;b_=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return J2=t,J2}var eN,w_;function qj(){if(w_)return eN;w_=1;var t=Wj();function e(){}function n(){}return n.resetWarningCache=e,eN=function(){function r(s,o,u,l,c,f){if(f!==t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return i.PropTypes=i,i},eN}var x_;function Hj(){return x_||(x_=1,Q2.exports=qj()()),Q2.exports}var jj=Hj();const it=Vc(jj);var Rt="cs",tN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var N_;function Gj(){return N_||(N_=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(i=a(i,r(o)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var o in i)e.call(i,o)&&i[o]&&(s=a(s,o));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(tN)),tN.exports}var Xj=Gj();const on=Vc(Xj);var KP=["available","unavailable","away","dnd","invisible","eager"],YP=["xs","sm","md","lg","fluid"];function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}var Kj=["status","size","className","name","selected","children"];function JN(){return JN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JN.apply(this,arguments)}function S_(t,e,n){return e=Yj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yj(t){var e=Zj(t,"string");return Ah(e)=="symbol"?e:String(e)}function Zj(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qj(t,e){if(t==null)return{};var n=Jj(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jj(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var ZP=function(e){var n=e.status,r=e.size,a=r===void 0?"md":r,i=e.className,s=e.name,o=e.selected,u=e.children,l=Qj(e,Kj),c="".concat(Rt,"-status"),f=Fe.createElement("div",{className:"".concat(c,"__bullet")}),d=s||u;return Fe.createElement("div",JN({},l,{"aria-selected":o===!0?"":null,className:on(c,"".concat(c,"--").concat(a),"".concat(c,"--").concat(n),S_({},"".concat(c,"--selected"),o),S_({},"".concat(c,"--named"),d),i)}),f,d&&Fe.createElement("div",{className:"".concat(c,"__name")},s||u))};function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}var eG=["name","src","size","status","className","active","children"];function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(this,arguments)}function tG(t,e,n){return e=nG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nG(t){var e=rG(t,"string");return Ih(e)=="symbol"?e:String(e)}function rG(t,e){if(Ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aG(t,e){if(t==null)return{};var n=iG(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function sG(t,e){var n=t.name,r=n===void 0?"":n,a=t.src,i=a===void 0?"":a,s=t.size,o=s===void 0?"md":s,u=t.status,l=t.className,c=t.active,f=c===void 0?!1:c,d=t.children,h=aG(t,eG),m="".concat(Rt,"-avatar"),v=typeof o<"u"?" ".concat(m,"--").concat(o):"",y=xn.useRef();return xn.useImperativeHandle(e,function(){return{focus:function(){return y.current.focus()}}}),Fe.createElement("div",eS({ref:y},h,{className:on("".concat(m).concat(v),tG({},"".concat(m,"--active"),f),l)}),d||Fe.createElement(Fe.Fragment,null,Fe.createElement("img",{src:i,alt:r}),typeof u=="string"&&Fe.createElement(ZP,{status:u,size:o})," "))}var Cc=xn.forwardRef(sG);Cc.displayName="Avatar";Cc.propTypes={children:it.node,name:it.string,src:it.string,size:it.oneOf(YP),status:it.oneOf(KP),active:it.bool,className:it.string};function C_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function my(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C_(Object(n),!0).forEach(function(r){oG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oG(t,e,n){return e=uG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uG(t){var e=lG(t,"string");return rl(e)=="symbol"?e:String(e)}function lG(t,e){if(rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(t)}var t0=function(){},cG=function(e){return e==null||Array.isArray(e)&&e.length===0},om=function(e,n){var r=[],a=n.map(function(i){return i.displayName||i.name});return Fe.Children.toArray(e).forEach(function(i){var s=n.indexOf(i.type);if(s!==-1)r[s]=i;else{var o,u,l,c=(o=i==null||(u=i.props)===null||u===void 0?void 0:u.as)!==null&&o!==void 0?o:i==null||(l=i.props)===null||l===void 0?void 0:l.is,f=rl(c);if(f==="function"){var d=n.indexOf(c);d!==-1&&(r[d]=Fe.cloneElement(i,my(my({},i.props),{},{as:null})))}else if(f==="object"){var h=c.name||c.displayName,m=a.indexOf(h);m!==-1&&(r[m]=Fe.cloneElement(i,my(my({},i.props),{},{as:null})))}else if(f==="string"){var v=a.indexOf(c);v!==-1&&(r[v]=i)}}}),r},QP=function(e){if(typeof e=="string")return e;if("type"in e){var n=rl(e.type);if(n==="function"||n==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(n==="string")return e.type;return"undefined"}return"undefined"},JP=function(e){return function(n,r,a){var i=e.map(function(c){return c.name||c.displayName}),s=Fe.Children.toArray(n[r]).find(function(c){if(typeof c=="string"&&c.trim().length===0)return!1;if(e.indexOf(c.type)===-1){var f,d,h=(c==null||(f=c.props)===null||f===void 0?void 0:f.as)||(c==null||(d=c.props)===null||d===void 0?void 0:d.is),m=rl(h);if(m==="function")return e.indexOf(h)===-1;if(m==="object"){var v=h.name||h.displayName;return i.indexOf(v)===-1}else return m==="string"?i.indexOf(h)===-1:!0}});if(typeof s<"u"){var o=QP(s),u=e.map(function(c){return c.name||c.displayName}).join(", "),l='"'.concat(o,'" is not a valid child for ').concat(a,". Allowed types: ").concat(u);return new Error(l)}}},fG=["children","size","className","max","activeIndex","hoverToFront"];function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tS.apply(this,arguments)}function dG(t,e){if(t==null)return{};var n=pG(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var eB=function(e){var n=e.children,r=e.size,a=r===void 0?"md":r,i=e.className,s=e.max,o=e.activeIndex,u=e.hoverToFront,l=dG(e,fG),c="".concat(Rt,"-avatar-group"),f=typeof s=="number"&&Fe.Children.count(n)>s?Fe.Children.toArray(n).reverse().slice(0,s):Fe.Children.toArray(n).reverse(),d=typeof o=="number"?f.length-o-1:void 0;return Fe.createElement("div",tS({},l,{className:on(c,"".concat(c,"--").concat(a),i)}),f.map(function(h,m){var v=typeof d=="number"?{active:d===m}:{};return u===!0&&(v.className=on("".concat(Rt,"-avatar--active-on-hover"),h.props.className)),Fe.cloneElement(h,v)}))};eB.displayName="AvatarGroup";var hG=["children","className","icon","border","labelPosition"];function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nS.apply(this,arguments)}function mG(t,e){if(t==null)return{};var n=gG(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gG(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var um=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=a===void 0?"":a,s=e.icon,o=s===void 0?void 0:s,u=e.border,l=u===void 0?!1:u,c=e.labelPosition,f=c===void 0?void 0:c,d=mG(e,hG),h="".concat(Rt,"-button"),m=typeof f<"u"?f:"right",v=Fe.Children.count(r)>0?"".concat(h,"--").concat(m):"",y=l===!0?"".concat(h,"--border"):"";return Fe.createElement("button",nS({},d,{className:on(h,v,y,i)}),m==="left"&&r,o,m==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function Eh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eh=function(e){return typeof e}:Eh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function vG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bG(t,e,n){return e&&yG(t.prototype,e),t}function wG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){wG(t,a,n[a])})}return t}function tB(t,e){return xG(t)||NG(t,e)||SG()}function xG(t){if(Array.isArray(t))return t}function NG(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(u){a=!0,i=u}finally{try{!r&&s.return!=null&&s.return()}finally{if(a)throw i}}return n}function SG(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var E_=function(){},cE={},nB={},CG=null,rB={mark:E_,measure:E_};try{typeof window<"u"&&(cE=window),typeof document<"u"&&(nB=document),typeof MutationObserver<"u"&&(CG=MutationObserver),typeof performance<"u"&&(rB=performance)}catch{}var EG=cE.navigator||{},T_=EG.userAgent,D_=T_===void 0?"":T_,R1=cE,Ha=nB,gy=rB;R1.document;var fE=!!Ha.documentElement&&!!Ha.head&&typeof Ha.addEventListener=="function"&&typeof Ha.createElement=="function";~D_.indexOf("MSIE")||~D_.indexOf("Trident/");var nu="___FONT_AWESOME___",aB="fa",iB="svg-inline--fa",TG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var nN={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},sB=R1.FontAwesomeConfig||{};function DG(t){var e=Ha.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function $G(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ha&&typeof Ha.querySelector=="function"){var AG=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];AG.forEach(function(t){var e=tB(t,2),n=e[0],r=e[1],a=$G(DG(n));a!=null&&(sB[r]=a)})}var IG={familyPrefix:aB,replacementClass:iB,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},rS=En({},IG,sB);rS.autoReplaceSvg||(rS.observeMutations=!1);var Ri=En({},rS);R1.FontAwesomeConfig=Ri;var ru=R1||{};ru[nu]||(ru[nu]={});ru[nu].styles||(ru[nu].styles={});ru[nu].hooks||(ru[nu].hooks={});ru[nu].shims||(ru[nu].shims=[]);var ho=ru[nu],kG=[],_G=function t(){Ha.removeEventListener("DOMContentLoaded",t),aS=1,kG.map(function(e){return e()})},aS=!1;fE&&(aS=(Ha.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ha.readyState),aS||Ha.addEventListener("DOMContentLoaded",_G));var dE="pending",oB="settled",v0="fulfilled",y0="rejected",OG=function(){},uB=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",FG=typeof setImmediate>"u"?setTimeout:setImmediate,mh=[],iS;function RG(){for(var t=0;t<mh.length;t++)mh[t][0](mh[t][1]);mh=[],iS=!1}function b0(t,e){mh.push([t,e]),iS||(iS=!0,FG(RG,0))}function MG(t,e){function n(a){pE(e,a)}function r(a){kh(e,a)}try{t(n,r)}catch(a){r(a)}}function lB(t){var e=t.owner,n=e._state,r=e._data,a=t[n],i=t.then;if(typeof a=="function"){n=v0;try{r=a(r)}catch(s){kh(i,s)}}cB(i,r)||(n===v0&&pE(i,r),n===y0&&kh(i,r))}function cB(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||Eh(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(a){n||(n=!0,e===a?fB(t,a):pE(t,a))},function(a){n||(n=!0,kh(t,a))}),!0}}catch(a){return n||kh(t,a),!0}return!1}function pE(t,e){(t===e||!cB(t,e))&&fB(t,e)}function fB(t,e){t._state===dE&&(t._state=oB,t._data=e,b0(PG,t))}function kh(t,e){t._state===dE&&(t._state=oB,t._data=e,b0(BG,t))}function dB(t){t._then=t._then.forEach(lB)}function PG(t){t._state=v0,dB(t)}function BG(t){t._state=y0,dB(t),!t._handled&&uB&&global.process.emit("unhandledRejection",t._data,t)}function LG(t){global.process.emit("rejectionHandled",t)}function fs(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof fs))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],MG(t,this)}fs.prototype={constructor:fs,_state:dE,_then:null,_data:void 0,_handled:!1,then:function(e,n){var r={owner:this,then:new this.constructor(OG),fulfilled:e,rejected:n};return(n||e)&&!this._handled&&(this._handled=!0,this._state===y0&&uB&&b0(LG,this)),this._state===v0||this._state===y0?b0(lB,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};fs.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new fs(function(e,n){var r=[],a=0;function i(u){return a++,function(l){r[u]=l,--a||e(r)}}for(var s=0,o;s<t.length;s++)o=t[s],o&&typeof o.then=="function"?o.then(i(s),n):r[s]=o;a||e(r)})};fs.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new fs(function(e,n){for(var r=0,a;r<t.length;r++)a=t[r],a&&typeof a.then=="function"?a.then(e,n):e(a)})};fs.resolve=function(t){return t&&Eh(t)==="object"&&t.constructor===fs?t:new fs(function(e){e(t)})};fs.reject=function(t){return new fs(function(e,n){n(t)})};var Qf={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function zG(t){if(!(!t||!fE)){var e=Ha.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ha.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],s=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=i)}return Ha.head.insertBefore(e,r),t}}var UG="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function w0(){for(var t=12,e="";t-- >0;)e+=UG[Math.random()*62|0];return e}function pB(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function VG(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(pB(t[n]),'" ')},"").trim()}function hB(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function mB(t){return t.size!==Qf.size||t.x!==Qf.x||t.y!==Qf.y||t.rotate!==Qf.rotate||t.flipX||t.flipY}function gB(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(e.x*32,", ").concat(e.y*32,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(i," ").concat(s," ").concat(o)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:a,inner:u,path:l}}var rN={x:0,y:0,width:"100%",height:"100%"};function $_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function WG(t){return t.tag==="g"?t.children:[t]}function qG(t){var e=t.children,n=t.attributes,r=t.main,a=t.mask,i=t.maskId,s=t.transform,o=r.width,u=r.icon,l=a.width,c=a.icon,f=gB({transform:s,containerWidth:l,iconWidth:o}),d={tag:"rect",attributes:En({},rN,{fill:"white"})},h=u.children?{children:u.children.map($_)}:{},m={tag:"g",attributes:En({},f.inner),children:[$_(En({tag:u.tag,attributes:En({},u.attributes,f.path)},h))]},v={tag:"g",attributes:En({},f.outer),children:[m]},y="mask-".concat(i||w0()),b="clip-".concat(i||w0()),x={tag:"mask",attributes:En({},rN,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,v]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:WG(c)},x]};return e.push(w,{tag:"rect",attributes:En({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},rN)}),{children:e,attributes:n}}function HG(t){var e=t.children,n=t.attributes,r=t.main,a=t.transform,i=t.styles,s=hB(i);if(s.length>0&&(n.style=s),mB(a)){var o=gB({transform:a,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:En({},o.outer),children:[{tag:"g",attributes:En({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:En({},r.icon.attributes,o.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}function jG(t){var e=t.children,n=t.main,r=t.mask,a=t.attributes,i=t.styles,s=t.transform;if(mB(s)&&n.found&&!r.found){var o=n.width,u=n.height,l={x:o/u/2,y:.5};a.style=hB(En({},i,{"transform-origin":"".concat(l.x+s.x/16,"em ").concat(l.y+s.y/16,"em")}))}return[{tag:"svg",attributes:a,children:e}]}function GG(t){var e=t.prefix,n=t.iconName,r=t.children,a=t.attributes,i=t.symbol,s=i===!0?"".concat(e,"-").concat(Ri.familyPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:En({},a,{id:s}),children:r}]}]}function XG(t){var e=t.icons,n=e.main,r=e.mask,a=t.prefix,i=t.iconName,s=t.transform,o=t.symbol,u=t.title,l=t.maskId,c=t.titleId,f=t.extra,d=t.watchable,h=d===void 0?!1:d,m=r.found?r:n,v=m.width,y=m.height,b=a==="fak",x=b?"":"fa-w-".concat(Math.ceil(v/y*16)),w=[Ri.replacementClass,i?"".concat(Ri.familyPrefix,"-").concat(i):"",x].filter(function(I){return f.classes.indexOf(I)===-1}).filter(function(I){return I!==""||!!I}).concat(f.classes).join(" "),S={children:[],attributes:En({},f.attributes,{"data-prefix":a,"data-icon":i,class:w,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},C=b&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};h&&(S.attributes[TG]=""),u&&S.children.push({tag:"title",attributes:{id:S.attributes["aria-labelledby"]||"title-".concat(c||w0())},children:[u]});var E=En({},S,{prefix:a,iconName:i,main:n,mask:r,maskId:l,transform:s,symbol:o,styles:En({},C,f.styles)}),A=r.found&&n.found?qG(E):HG(E),k=A.children,D=A.attributes;return E.children=k,E.attributes=D,o?GG(E):jG(E)}var A_=function(){};Ri.measurePerformance&&gy&&gy.mark&&gy.measure;var aN=function(e,n,r,a){var i=Object.keys(e),s=i.length,o=n,u,l,c;for(r===void 0?(u=1,c=e[i[0]]):(u=0,c=r);u<s;u++)l=i[u],c=o(c,e[l],l,e);return c};function vB(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,a=r===void 0?!1:r,i=Object.keys(e).reduce(function(s,o){var u=e[o],l=!!u.icon;return l?s[u.iconName]=u.icon:s[o]=u,s},{});typeof ho.hooks.addPack=="function"&&!a?ho.hooks.addPack(t,i):ho.styles[t]=En({},ho.styles[t]||{},i),t==="fas"&&vB("fa",e)}var I_=ho.styles,KG=ho.shims,yB=function(){var e=function(a){return aN(I_,function(i,s,o){return i[o]=aN(s,a,{}),i},{})};e(function(r,a,i){return a[3]&&(r[a[3]]=i),r}),e(function(r,a,i){var s=a[2];return r[i]=i,s.forEach(function(o){r[o]=i}),r});var n="far"in I_;aN(KG,function(r,a){var i=a[0],s=a[1],o=a[2];return s==="far"&&!n&&(s="fas"),r[i]={prefix:s,iconName:o},r},{})};yB();ho.styles;function k_(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function bB(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,a=t.children,i=a===void 0?[]:a;return typeof t=="string"?pB(t):"<".concat(e," ").concat(VG(r),">").concat(i.map(bB).join(""),"</").concat(e,">")}var YG=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,a){var i=a.toLowerCase().split("-"),s=i[0],o=i.slice(1).join("-");if(s&&o==="h")return r.flipX=!0,r;if(s&&o==="v")return r.flipY=!0,r;if(o=parseFloat(o),isNaN(o))return r;switch(s){case"grow":r.size=r.size+o;break;case"shrink":r.size=r.size-o;break;case"left":r.x=r.x-o;break;case"right":r.x=r.x+o;break;case"up":r.y=r.y-o;break;case"down":r.y=r.y+o;break;case"rotate":r.rotate=r.rotate+o;break}return r},n):n};function sS(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=new Error().stack}sS.prototype=Object.create(Error.prototype);sS.prototype.constructor=sS;var M1={fill:"currentColor"},wB={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};En({},M1,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var hE=En({},wB,{attributeName:"opacity"});En({},M1,{cx:"256",cy:"364",r:"28"}),En({},wB,{attributeName:"r",values:"28;14;28;28;14;28;"}),En({},hE,{values:"1;0;1;1;0;1;"});En({},M1,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),En({},hE,{values:"1;0;0;0;0;1;"});En({},M1,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),En({},hE,{values:"0;0;1;1;0;0;"});ho.styles;function __(t){var e=t[0],n=t[1],r=t.slice(4),a=tB(r,1),i=a[0],s=null;return Array.isArray(i)?s={tag:"g",attributes:{class:"".concat(Ri.familyPrefix,"-").concat(nN.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ri.familyPrefix,"-").concat(nN.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Ri.familyPrefix,"-").concat(nN.PRIMARY),fill:"currentColor",d:i[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:s}}ho.styles;var ZG=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function QG(){var t=aB,e=iB,n=Ri.familyPrefix,r=Ri.replacementClass,a=ZG;if(n!==t||r!==e){var i=new RegExp("\\.".concat(t,"\\-"),"g"),s=new RegExp("\\--".concat(t,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");a=a.replace(i,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(o,".".concat(r))}return a}var JG=function(){function t(){vG(this,t),this.definitions={}}return bG(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.reduce(this._pullDefinitions,{});Object.keys(s).forEach(function(o){n.definitions[o]=En({},n.definitions[o]||{},s[o]),vB(o,s[o]),yB()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var a=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(a).map(function(i){var s=a[i],o=s.prefix,u=s.iconName,l=s.icon;n[o]||(n[o]={}),n[o][u]=l}),n}}]),t}();function eX(){Ri.autoAddCss&&!F_&&(zG(QG()),F_=!0)}function tX(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return bB(r)})}}),Object.defineProperty(t,"node",{get:function(){if(fE){var r=Ha.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function O_(t){var e=t.prefix,n=e===void 0?"fa":e,r=t.iconName;if(r)return k_(rX.definitions,n,r)||k_(ho.styles,n,r)}function nX(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:O_(e||{}),a=n.mask;return a&&(a=(a||{}).icon?a:O_(a||{})),t(r,En({},n,{mask:a}))}}var rX=new JG,F_=!1,oS={transform:function(e){return YG(e)}},aX=nX(function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.transform,r=n===void 0?Qf:n,a=e.symbol,i=a===void 0?!1:a,s=e.mask,o=s===void 0?null:s,u=e.maskId,l=u===void 0?null:u,c=e.title,f=c===void 0?null:c,d=e.titleId,h=d===void 0?null:d,m=e.classes,v=m===void 0?[]:m,y=e.attributes,b=y===void 0?{}:y,x=e.styles,w=x===void 0?{}:x;if(t){var S=t.prefix,C=t.iconName,E=t.icon;return tX(En({type:"icon"},t),function(){return eX(),Ri.autoA11y&&(f?b["aria-labelledby"]="".concat(Ri.replacementClass,"-title-").concat(h||w0()):(b["aria-hidden"]="true",b.focusable="false")),XG({icons:{main:__(E),mask:o?__(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:C,transform:En({},Qf,r),symbol:i,title:f,maskId:l,titleId:h,extra:{attributes:b,styles:w,classes:v}})})}});function R_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R_(Object(n),!0).forEach(function(r){Jf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x0(t){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x0(t)}function Jf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function xB(t,e){if(t==null)return{};var n=iX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uS(t){return sX(t)||oX(t)||uX(t)||lX()}function sX(t){if(Array.isArray(t))return lS(t)}function oX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uX(t,e){if(t){if(typeof t=="string")return lS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lS(t,e)}}function lS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cX(t){var e,n=t.beat,r=t.fade,a=t.beatFade,i=t.bounce,s=t.shake,o=t.flash,u=t.spin,l=t.spinPulse,c=t.spinReverse,f=t.pulse,d=t.fixedWidth,h=t.inverse,m=t.border,v=t.listItem,y=t.flip,b=t.size,x=t.rotation,w=t.pull,S=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":a,"fa-bounce":i,"fa-shake":s,"fa-flash":o,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":f,"fa-fw":d,"fa-inverse":h,"fa-border":m,"fa-li":v,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Jf(e,"fa-".concat(b),typeof b<"u"&&b!==null),Jf(e,"fa-rotate-".concat(x),typeof x<"u"&&x!==null&&x!==0),Jf(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Jf(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(S).map(function(C){return S[C]?C:null}).filter(function(C){return C})}function fX(t){return t=t-0,t===t}function NB(t){return fX(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var dX=["style"];function pX(t){return t.charAt(0).toUpperCase()+t.slice(1)}function hX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),a=NB(n.slice(0,r)),i=n.slice(r+1).trim();return a.startsWith("webkit")?e[pX(a)]=i:e[a]=i,e},{})}function SB(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(u){return SB(t,u)}),a=Object.keys(e.attributes||{}).reduce(function(u,l){var c=e.attributes[l];switch(l){case"class":u.attrs.className=c,delete e.attributes.class;break;case"style":u.attrs.style=hX(c);break;default:l.indexOf("aria-")===0||l.indexOf("data-")===0?u.attrs[l.toLowerCase()]=c:u.attrs[NB(l)]=c}return u},{attrs:{}}),i=n.style,s=i===void 0?{}:i,o=xB(n,dX);return a.attrs.style=Vu(Vu({},a.attrs.style),s),t.apply(void 0,[e.tag,Vu(Vu({},a.attrs),o)].concat(uS(r)))}var CB=!1;try{CB=!0}catch{}function mX(){if(!CB&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function M_(t){if(t&&x0(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(oS.icon)return oS.icon(t);if(t===null)return null;if(t&&x0(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function iN(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Jf({},t,e):{}}var gX=["forwardedRef"];function gs(t){var e=t.forwardedRef,n=xB(t,gX),r=n.icon,a=n.mask,i=n.symbol,s=n.className,o=n.title,u=n.titleId,l=n.maskId,c=M_(r),f=iN("classes",[].concat(uS(cX(n)),uS(s.split(" ")))),d=iN("transform",typeof n.transform=="string"?oS.transform(n.transform):n.transform),h=iN("mask",M_(a)),m=aX(c,Vu(Vu(Vu(Vu({},f),d),h),{},{symbol:i,title:o,titleId:u,maskId:l}));if(!m)return mX("Could not find icon",c),null;var v=m.abstract,y={ref:e};return Object.keys(n).forEach(function(b){gs.defaultProps.hasOwnProperty(b)||(y[b]=n[b])}),vX(v[0],y)}gs.displayName="FontAwesomeIcon";gs.propTypes={beat:it.bool,border:it.bool,beatFade:it.bool,bounce:it.bool,className:it.string,fade:it.bool,flash:it.bool,mask:it.oneOfType([it.object,it.array,it.string]),maskId:it.string,fixedWidth:it.bool,inverse:it.bool,flip:it.oneOf([!0,!1,"horizontal","vertical","both"]),icon:it.oneOfType([it.object,it.array,it.string]),listItem:it.bool,pull:it.oneOf(["right","left"]),pulse:it.bool,rotation:it.oneOf([0,90,180,270]),shake:it.bool,size:it.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:it.bool,spinPulse:it.bool,spinReverse:it.bool,symbol:it.oneOfType([it.bool,it.string]),title:it.string,titleId:it.string,transform:it.oneOfType([it.string,it.object]),swapOpacity:it.bool};gs.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var vX=SB.bind(null,Fe.createElement),sN={},P_;function yX(){return P_||(P_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-up",r=448,a=512,i=[],s="f062",o="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowUp=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(sN)),sN}var bX=yX(),oN={},B_;function wX(){return B_||(B_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-right",r=448,a=512,i=[],s="f061",o="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowRight=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(oN)),oN}var xX=wX(),uN={},L_;function NX(){return L_||(L_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-down",r=448,a=512,i=[],s="f063",o="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowDown=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(uN)),uN}var SX=NX(),lN={},z_;function CX(){return z_||(z_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="arrow-left",r=448,a=512,i=[],s="f060",o="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faArrowLeft=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(lN)),lN}var EX=CX(),TX=["className","direction","children"];function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cS.apply(this,arguments)}function DX(t,e){if(t==null)return{};var n=$X(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $X(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var AX=function(e){var n=e.className,r=n===void 0?"":n,a=e.direction,i=a===void 0?"right":a,s=e.children,o=DX(e,TX),u="".concat(Rt,"-button--arrow"),l=function(){if(i==="up")return bX.faArrowUp;if(i==="right")return xX.faArrowRight;if(i==="down")return SX.faArrowDown;if(i==="left")return EX.faArrowLeft}();return Fe.createElement(um,cS({},o,{className:on(u,r),icon:Fe.createElement(gs,{icon:l})}),s)},cN={},U_;function IX(){return U_||(U_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="info-circle",r=512,a=512,i=[],s="f05a",o="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faInfoCircle=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(cN)),cN}var kX=IX(),_X=["className","children"];function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fS.apply(this,arguments)}function OX(t,e){if(t==null)return{};var n=FX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var RX=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=OX(e,_X),s="".concat(Rt,"-button--info");return Fe.createElement(um,fS({},i,{className:on(s,r),icon:Fe.createElement(gs,{icon:kX.faInfoCircle})}),a)},fN={},V_;function MX(){return V_||(V_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="star",r=576,a=512,i=[],s="f005",o="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faStar=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(fN)),fN}var PX=MX(),BX=["className","children"];function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(this,arguments)}function LX(t,e){if(t==null)return{};var n=zX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var UX=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=LX(e,BX),s="".concat(Rt,"-button--star");return Fe.createElement(um,dS({},i,{className:on(s,r),icon:Fe.createElement(gs,{icon:PX.faStar})}),a)},dN={},W_;function VX(){return W_||(W_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="ellipsis-v",r=192,a=512,i=[],s="f142",o="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faEllipsisV=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(dN)),dN}var WX=VX(),pN={},q_;function qX(){return q_||(q_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paper-plane",r=512,a=512,i=[],s="f1d8",o="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faPaperPlane=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(pN)),pN}var HX=qX(),jX=["className","children"];function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pS.apply(this,arguments)}function GX(t,e){if(t==null)return{};var n=XX(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XX(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var KX=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=GX(e,jX),s="".concat(Rt,"-button--send");return Fe.createElement(um,pS({},i,{className:on(s,r),icon:Fe.createElement(gs,{icon:HX.faPaperPlane})}),a)},hN={},H_;function YX(){return H_||(H_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e="fas",n="paperclip",r=448,a=512,i=[],s="f0c6",o="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";t.definition={prefix:e,iconName:n,icon:[r,a,i,s,o]},t.faPaperclip=t.definition,t.prefix=e,t.iconName=n,t.width=r,t.height=a,t.ligatures=i,t.unicode=s,t.svgPathData=o}(hN)),hN}var ZX=YX(),QX=["className","children"];function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(this,arguments)}function JX(t,e){if(t==null)return{};var n=eK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var tK=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=JX(e,QX),s="".concat(Rt,"-button--attachment");return Fe.createElement(um,hS({},i,{className:on(s,r),icon:Fe.createElement(gs,{icon:ZX.faPaperclip})}),a)},nK=["onClick","children","className"];function mS(){return mS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mS.apply(this,arguments)}function rK(t,e){if(t==null)return{};var n=aK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var mE=function(e){var n=e.onClick,r=n===void 0?function(){}:n,a=e.children,i=a===void 0?void 0:a,s=e.className,o=rK(e,nK),u="".concat(Rt,"-conversation-header__back");return Fe.createElement("div",mS({},o,{className:on(u,s)}),typeof i<"u"?i:Fe.createElement(AX,{direction:"left",onClick:r}))};mE.displayName="ConversationHeader.Back";var iK=["children","className"];function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gS.apply(this,arguments)}function sK(t,e){if(t==null)return{};var n=oK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var gE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=sK(e,iK),s="".concat(Rt,"-conversation-header__actions");return Fe.createElement("section",gS({},i,{className:on(s,a)}),r)};gE.displayName="ConversationHeader.Actions";var uK=["userName","info","children","className"];function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(this,arguments)}function lK(t,e){if(t==null)return{};var n=cK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var vE=function(e){var n=e.userName,r=n===void 0?"":n,a=e.info,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=lK(e,uK),c="".concat(Rt,"-conversation-header__content");return Fe.createElement("div",vS({},l,{className:on(c,u)}),typeof o<"u"?o:Fe.createElement(Fe.Fragment,null,Fe.createElement("div",{className:"".concat(Rt,"-conversation-header__user-name")},r),Fe.createElement("div",{className:"".concat(Rt,"-conversation-header__info")},i)))};vE.displayName="ConversationHeader.Content";var fK=["children","className"];function yS(){return yS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yS.apply(this,arguments)}function dK(t,e){return gK(t)||mK(t,e)||hK(t,e)||pK()}function pK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hK(t,e){if(t){if(typeof t=="string")return j_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j_(t,e)}}function j_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function gK(t){if(Array.isArray(t))return t}function vK(t,e){if(t==null)return{};var n=yK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Zu=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=vK(e,fK),s="".concat(Rt,"-conversation-header"),o=om(r,[mE,Cc,eB,vE,gE]),u=dK(o,5),l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];return Fe.createElement("div",yS({},i,{className:on(s,a)}),l,c&&Fe.createElement("div",{className:"".concat(s,"__avatar")},c),!c&&f&&Fe.createElement("div",{className:"".concat(s,"__avatar")},f),d,h)};Zu.displayName="ConversationHeader";Zu.Back=mE;Zu.Actions=gE;Zu.Content=vE;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function mo(t){return getComputedStyle(t)}function fi(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function vy(t){var e=document.createElement("div");return e.className=t,e}var G_=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Wu(t,e){if(!G_)throw new Error("No element matching method supported");return G_.call(t,e)}function ed(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function X_(t,e){return Array.prototype.filter.call(t.children,function(n){return Wu(n,e)})}var Cr={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},EB={x:null,y:null};function TB(t,e){var n=t.element.classList,r=Cr.state.scrolling(e);n.contains(r)?clearTimeout(EB[e]):n.add(r)}function DB(t,e){EB[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(Cr.state.scrolling(e))},t.settings.scrollingThreshold)}function bK(t,e){TB(t,e),DB(t,e)}var lm=function(e){this.element=e,this.handlers={}},$B={isEmpty:{configurable:!0}};lm.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,n,{passive:!1}):this.element.addEventListener(e,n,!1)};lm.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(a){return n&&a!==n?!0:(r.element.removeEventListener(e,a,!1),!1)})};lm.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};$B.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(lm.prototype,$B);var qd=function(){this.eventElements=[]};qd.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new lm(e),this.eventElements.push(n)),n};qd.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};qd.prototype.unbind=function(e,n,r){var a=this.eventElement(e);a.unbind(n,r),a.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(a),1)};qd.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};qd.prototype.once=function(e,n,r){var a=this.eventElement(e),i=function s(o){a.unbind(n,s),r(o)};a.bind(n,i)};function yy(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function N0(t,e,n,r,a,i){r===void 0&&(r=!0),a===void 0&&(a=!1);var s;if(e==="top")s=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")s=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");wK(t,n,s,r,a,i)}function wK(t,e,n,r,a,i){var s=n[0],o=n[1],u=n[2],l=n[3],c=n[4],f=n[5];r===void 0&&(r=!0),a===void 0&&(a=!1);var d=t.element;t.reach[l]=null;var h=i===!0?t[s]!==t[o]:!0;h&&d[u]<1&&(t.reach[l]="start"),h&&d[u]>t[s]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(yy("ps-scroll-"+l)),e<0?d.dispatchEvent(yy("ps-scroll-"+c)):e>0&&d.dispatchEvent(yy("ps-scroll-"+f)),r&&bK(t,l)),t.reach[l]&&(e||a)&&d.dispatchEvent(yy("ps-"+l+"-reach-"+t.reach[l]))}function sr(t){return parseInt(t,10)||0}function xK(t){return Wu(t,"input,[contenteditable]")||Wu(t,"select,[contenteditable]")||Wu(t,"textarea,[contenteditable]")||Wu(t,"button,[contenteditable]")}function NK(t){var e=mo(t);return sr(e.width)+sr(e.paddingLeft)+sr(e.paddingRight)+sr(e.borderLeftWidth)+sr(e.borderRightWidth)}var gh={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function au(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(X_(e,Cr.element.rail("x")).forEach(function(a){return ed(a)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(X_(e,Cr.element.rail("y")).forEach(function(a){return ed(a)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=K_(t,sr(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=sr((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=K_(t,sr(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=sr(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),SK(e,t),t.scrollbarXActive?e.classList.add(Cr.state.active("x")):(e.classList.remove(Cr.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(Cr.state.active("y")):(e.classList.remove(Cr.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function K_(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function SK(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,fi(e.scrollbarXRail,n);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,fi(e.scrollbarYRail,a),fi(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),fi(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function CK(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,au(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,au(t),e.stopPropagation()})}function EK(t){Y_(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Y_(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Y_(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],f=t.element,d=null,h=null,m=null;function v(x){x.touches&&x.touches[0]&&(x[a]=x.touches[0].pageY),f[u]=d+m*(x[a]-h),TB(t,l),au(t),x.stopPropagation(),x.preventDefault()}function y(){DB(t,l),t[c].classList.remove(Cr.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",v)}function b(x,w){d=f[u],w&&x.touches&&(x[a]=x.touches[0].pageY),h=x[a],m=(t[r]-t[n])/(t[i]-t[o]),w?t.event.bind(t.ownerDocument,"touchmove",v):(t.event.bind(t.ownerDocument,"mousemove",v),t.event.once(t.ownerDocument,"mouseup",y),x.preventDefault()),t[c].classList.add(Cr.state.clicking),x.stopPropagation()}t.event.bind(t[s],"mousedown",function(x){b(x)}),t.event.bind(t[s],"touchstart",function(x){b(x,!0)})}function TK(t){var e=t.element,n=function(){return Wu(e,":hover")},r=function(){return Wu(t.scrollbarX,":focus")||Wu(t.scrollbarY,":focus")};function a(i,s){var o=Math.floor(e.scrollTop);if(i===0){if(!t.scrollbarYActive)return!1;if(o===0&&s>0||o>=t.contentHeight-t.containerHeight&&s<0)return!t.settings.wheelPropagation}var u=e.scrollLeft;if(s===0){if(!t.scrollbarXActive)return!1;if(u===0&&i<0||u>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!n()&&!r())){var s=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(s){if(s.tagName==="IFRAME")s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(xK(s))return}var o=0,u=0;switch(i.which){case 37:i.metaKey?o=-t.contentWidth:i.altKey?o=-t.containerWidth:o=-30;break;case 38:i.metaKey?u=t.contentHeight:i.altKey?u=t.containerHeight:u=30;break;case 39:i.metaKey?o=t.contentWidth:i.altKey?o=t.containerWidth:o=30;break;case 40:i.metaKey?u=-t.contentHeight:i.altKey?u=-t.containerHeight:u=-30;break;case 32:i.shiftKey?u=t.containerHeight:u=-t.containerHeight;break;case 33:u=t.containerHeight;break;case 34:u=-t.containerHeight;break;case 36:u=t.contentHeight;break;case 35:u=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&o!==0||t.settings.suppressScrollY&&u!==0||(e.scrollTop-=u,e.scrollLeft+=o,au(t),a(o,u)&&i.preventDefault())}})}function DK(t){var e=t.element;function n(s,o){var u=Math.floor(e.scrollTop),l=e.scrollTop===0,c=u+e.offsetHeight===e.scrollHeight,f=e.scrollLeft===0,d=e.scrollLeft+e.offsetWidth===e.scrollWidth,h;return Math.abs(o)>Math.abs(s)?h=l||c:h=f||d,h?!t.settings.wheelPropagation:!0}function r(s){var o=s.deltaX,u=-1*s.deltaY;return(typeof o>"u"||typeof u>"u")&&(o=-1*s.wheelDeltaX/6,u=s.wheelDeltaY/6),s.deltaMode&&s.deltaMode===1&&(o*=10,u*=10),o!==o&&u!==u&&(o=0,u=s.wheelDelta),s.shiftKey?[-u,-o]:[o,u]}function a(s,o,u){if(!gh.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(s))return!1;for(var l=s;l&&l!==e;){if(l.classList.contains(Cr.element.consuming))return!0;var c=mo(l);if(u&&c.overflowY.match(/(scroll|auto)/)){var f=l.scrollHeight-l.clientHeight;if(f>0&&(l.scrollTop>0&&u<0||l.scrollTop<f&&u>0))return!0}if(o&&c.overflowX.match(/(scroll|auto)/)){var d=l.scrollWidth-l.clientWidth;if(d>0&&(l.scrollLeft>0&&o<0||l.scrollLeft<d&&o>0))return!0}l=l.parentNode}return!1}function i(s){var o=r(s),u=o[0],l=o[1];if(!a(s.target,u,l)){var c=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(l?e.scrollTop-=l*t.settings.wheelSpeed:e.scrollTop+=u*t.settings.wheelSpeed,c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?e.scrollLeft+=u*t.settings.wheelSpeed:e.scrollLeft-=l*t.settings.wheelSpeed,c=!0):(e.scrollTop-=l*t.settings.wheelSpeed,e.scrollLeft+=u*t.settings.wheelSpeed),au(t),c=c||n(u,l),c&&!s.ctrlKey&&(s.stopPropagation(),s.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",i):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",i)}function $K(t){if(!gh.supportsTouch&&!gh.supportsIePointer)return;var e=t.element;function n(m,v){var y=Math.floor(e.scrollTop),b=Math.ceil(e.scrollLeft),x=Math.abs(m),w=Math.abs(v);if(!t.settings.wheelPropagation)return!0;if(w>x){if(t.settings.suppressScrollY)return!1;if(v>0)return y!==0;if(v<0)return y<t.contentHeight-t.containerHeight}else if(x>w){if(t.settings.suppressScrollX)return!1;if(m>0)return b!==0;if(v<0)return b<t.contentWidth-t.containerWidth}return!0}function r(m,v){e.scrollTop-=v,e.scrollLeft-=m,au(t)}var a={},i=0,s={},o=null;function u(m){return m.targetTouches?m.targetTouches[0]:m}function l(m){return m.pointerType&&m.pointerType==="pen"&&m.buttons===0?!1:!!(m.targetTouches&&m.targetTouches.length===1||m.pointerType&&m.pointerType!=="mouse"&&m.pointerType!==m.MSPOINTER_TYPE_MOUSE)}function c(m){if(l(m)){var v=u(m);a.pageX=v.pageX,a.pageY=v.pageY,i=new Date().getTime(),o!==null&&clearInterval(o)}}function f(m,v,y){if(!e.contains(m))return!1;for(var b=m;b&&b!==e;){if(b.classList.contains(Cr.element.consuming))return!0;var x=mo(b);if(y&&x.overflowY.match(/(scroll|auto)/)){var w=b.scrollHeight-b.clientHeight;if(w>0&&(b.scrollTop>0&&y<0||b.scrollTop<w&&y>0))return!0}if(v&&x.overflowX.match(/(scroll|auto)/)){var S=b.scrollWidth-b.clientWidth;if(S>0&&(b.scrollLeft>0&&v<0||b.scrollLeft<S&&v>0))return!0}b=b.parentNode}return!1}function d(m){if(l(m)){var v=u(m),y={pageX:v.pageX,pageY:v.pageY},b=y.pageX-a.pageX,x=y.pageY-a.pageY;if(f(m.target,b,x))return;r(b,x),a=y;var w=new Date().getTime(),S=w-i;S>0&&(s.x=b/S,s.y=x/S,i=w),m.cancelable&&n(b,x)&&m.preventDefault()}}function h(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval(function(){if(t.isInitialized){clearInterval(o);return}if(!s.x&&!s.y){clearInterval(o);return}if(Math.abs(s.x)<.01&&Math.abs(s.y)<.01){clearInterval(o);return}r(s.x*30,s.y*30),s.x*=.8,s.y*=.8},10))}gh.supportsTouch?(t.event.bind(e,"touchstart",c),t.event.bind(e,"touchmove",d),t.event.bind(e,"touchend",h)):gh.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",c),t.event.bind(e,"pointermove",d),t.event.bind(e,"pointerup",h)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",c),t.event.bind(e,"MSPointerMove",d),t.event.bind(e,"MSPointerUp",h)))}var AK=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},IK={"click-rail":CK,"drag-thumb":EK,keyboard:TK,wheel:DK,touch:$K},cm=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(Cr.main),this.settings=AK();for(var a in n)this.settings[a]=n[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return e.classList.add(Cr.state.focus)},s=function(){return e.classList.remove(Cr.state.focus)};this.isRtl=mo(e).direction==="rtl",this.isRtl===!0&&e.classList.add(Cr.rtl),this.isNegativeScroll=function(){var l=e.scrollLeft,c=null;return e.scrollLeft=-1,c=e.scrollLeft<0,e.scrollLeft=l,c}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new qd,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=vy(Cr.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=vy(Cr.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",s),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var o=mo(this.scrollbarXRail);this.scrollbarXBottom=parseInt(o.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=sr(o.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=sr(o.borderLeftWidth)+sr(o.borderRightWidth),fi(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=sr(o.marginLeft)+sr(o.marginRight),fi(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=vy(Cr.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=vy(Cr.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",s),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=mo(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=sr(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?NK(this.scrollbarY):null,this.railBorderYWidth=sr(u.borderTopWidth)+sr(u.borderBottomWidth),fi(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=sr(u.marginTop)+sr(u.marginBottom),fi(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(l){return IK[l](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(l){return r.onScroll(l)}),au(this)};cm.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,fi(this.scrollbarXRail,{display:"block"}),fi(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=sr(mo(this.scrollbarXRail).marginLeft)+sr(mo(this.scrollbarXRail).marginRight),this.railYMarginHeight=sr(mo(this.scrollbarYRail).marginTop)+sr(mo(this.scrollbarYRail).marginBottom),fi(this.scrollbarXRail,{display:"none"}),fi(this.scrollbarYRail,{display:"none"}),au(this),N0(this,"top",0,!1,!0,e),N0(this,"left",0,!1,!0,e),fi(this.scrollbarXRail,{display:""}),fi(this.scrollbarYRail,{display:""}))};cm.prototype.onScroll=function(e){this.isAlive&&(au(this),N0(this,"top",this.element.scrollTop-this.lastScrollTop),N0(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};cm.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),ed(this.scrollbarX),ed(this.scrollbarY),ed(this.scrollbarXRail),ed(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};cm.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}var kK=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(this,arguments)}function _K(t,e){if(t==null)return{};var n=OK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function FK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PK(r.key),r)}}function MK(t,e,n){return e&&RK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function PK(t){var e=BK(t,"string");return vd(e)=="symbol"?e:String(e)}function BK(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function LK(t,e,n){return e=S0(e),zK(t,AB()?Reflect.construct(e,n||[],S0(t).constructor):e.apply(t,n))}function zK(t,e){if(e&&(vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IB(t)}function AB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AB=function(){return!!t})()}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S0(t)}function IB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wS(t,e)}function wS(t,e){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},wS(t,e)}var n0={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(n0);var kB=function(t){UK(e,t);function e(n){var r;return FK(this,e),r=LK(this,e,[n]),r.handleRef=r.handleRef.bind(IB(r)),r._handlerByEvent={},r}return MK(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new cm(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(a){var i=r._handlerByEvent[a];i&&r._container.removeEventListener(a,i,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(n0).forEach(function(i){var s=r.props[n0[i]],o=a[n0[i]];if(s!==o){if(o){var u=r._handlerByEvent[i];r._container.removeEventListener(i,u,!1),r._handlerByEvent[i]=null}if(s){var l=function(){return s(r._container)};r._container.addEventListener(i,l,!1),r._handlerByEvent[i]=l}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,a=this._container.className.split(" ").filter(function(i){return i.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(a?" ".concat(a):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var a,i;this._container=r,(a=(i=this.props).containerRef)===null||a===void 0||a.call(i,r)}},{key:"render",value:function(){var r=this.props;r.className;var a=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var i=r.component;r.onSync;var s=r.children,o=_K(r,kK),u=typeof i>"u"?"div":i;return Fe.createElement(u,bS({style:a,ref:this.handleRef},o),s)}}]),e}(xn.Component);function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}var VK=["className","variant","children"];function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xS.apply(this,arguments)}function WK(t,e,n){return e=qK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qK(t){var e=HK(t,"string");return _h(e)=="symbol"?e:String(e)}function HK(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jK(t,e){if(t==null)return{};var n=GK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var Z_=function(e){var n=e.className,r=n===void 0?void 0:n,a=e.variant,i=a===void 0?"default":a,s=e.children,o=jK(e,VK),u="".concat(Rt,"-loader"),l=Fe.Children.count(s)>0?"".concat(u,"--content"):"";return Fe.createElement("div",xS({},o,{className:on(u,l,WK({},"".concat(u,"--variant-").concat(i),i!=="default"),r),role:"status"}),s)};function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}var XK=["className","children","blur","grayscale"];function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NS.apply(this,arguments)}function Q_(t,e,n){return e=KK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KK(t){var e=YK(t,"string");return Oh(e)=="symbol"?e:String(e)}function YK(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZK(t,e){if(t==null)return{};var n=QK(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QK(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var JK=function(e){var n=e.className,r=n===void 0?"":n,a=e.children,i=a===void 0?void 0:a,s=e.blur,o=s===void 0?!1:s,u=e.grayscale,l=u===void 0?!1:u,c=ZK(e,XK),f="".concat(Rt,"-overlay"),d="".concat(f,"--blur"),h="".concat(f,"--grayscale");return Fe.createElement("div",NS({},c,{className:on(f,Q_({},d,o),Q_({},h,l),r)}),Fe.createElement("div",{className:"".concat(f,"__content")},i))},eY=["sender","sentTime","children","className"];function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(this,arguments)}function tY(t,e){if(t==null)return{};var n=nY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yE=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=tY(e,eY),c="".concat(Rt,"-message__header");return Fe.createElement("div",SS({},l,{className:on(c,u)}),typeof o<"u"?o:Fe.createElement(Fe.Fragment,null,Fe.createElement("div",{className:"".concat(Rt,"-message__sender-name")},r),Fe.createElement("div",{className:"".concat(Rt,"-message__sent-time")},i)))};yE.displayName="Message.Header";var rY=["sender","sentTime","children","className"];function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(this,arguments)}function aY(t,e){if(t==null)return{};var n=iY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var bE=function(e){var n=e.sender,r=n===void 0?"":n,a=e.sentTime,i=a===void 0?"":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=aY(e,rY),c="".concat(Rt,"-message__footer");return Fe.createElement("div",CS({},l,{className:on(c,u)}),typeof o<"u"?o:Fe.createElement(Fe.Fragment,null,Fe.createElement("div",{className:"".concat(Rt,"-message__sender-name")},r),Fe.createElement("div",{className:"".concat(Rt,"-message__sent-time")},i)))};bE.displayName="Message.Footer";var wE=function(e){var n=e.children,r=e.className,a="".concat(Rt,"-message__custom-content");return Fe.createElement("div",{className:on(a,r)},n)};wE.displayName="Message.CustomContent";var C0=function(e){var n=e.src,r=e.width,a=e.height,i=e.alt,s=e.className,o="".concat(Rt,"-message__image-content"),u={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof a=="number"?"".concat(a,"px"):typeof a=="string"?a:void 0};return Fe.createElement("div",{className:on(o,s)},Fe.createElement("img",{src:n,style:u,alt:i}))};C0.displayName="Message.ImageContent";var E0=function(e){var n=e.html,r=e.className,a="".concat(Rt,"-message__html-content"),i=function(){return{__html:n}};return Fe.createElement("div",{className:on(a,r),dangerouslySetInnerHTML:i()})};E0.displayName="Message.HtmlContent";var T0=function(e){var n=e.text,r=e.className,a=e.children,i="".concat(Rt,"-message__text-content"),s=a??n;return Fe.createElement("div",{className:on(i,r)},s)};T0.displayName="Message.TextContent";var sY=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(this,arguments)}function J_(t,e,n){return e=oY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oY(t){var e=uY(t,"string");return yd(e)=="symbol"?e:String(e)}function uY(t,e){if(yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yd(t){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yd(t)}function lY(t,e){return pY(t)||dY(t,e)||fY(t,e)||cY()}function cY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fY(t,e){if(t){if(typeof t=="string")return eO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(t,e)}}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function pY(t){if(Array.isArray(t))return t}function hY(t,e){if(t==null)return{};var n=mY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var yl=function(e){var n,r,a=e.model,i=a.message,s=i===void 0?"":i,o=a.sentTime,u=o===void 0?"":o,l=a.sender,c=l===void 0?"":l,f=a.direction,d=f===void 0?1:f,h=a.position,m=a.type,v=a.payload,y=e.avatarSpacer,b=y===void 0?!1:y,x=e.avatarPosition,w=x===void 0?void 0:x,S=e.type,C=S===void 0?"html":S,E=e.payload,A=e.children,k=e.className,D=hY(e,sY),I="".concat(Rt,"-message"),$=om(A,[Cc,yE,bE,E0,T0,C0,wE]),O=lY($,7),B=O[0],z=O[1],L=O[2],F=O[3],R=O[4],W=O[5],M=O[6],G=function(){if(d===0||d==="incoming")return"".concat(I,"--incoming");if(d===1||d==="outgoing")return"".concat(I,"--outgoing")}(),q=function(te){var se="".concat(I,"--avatar-");if(te===0||te==="top-left"||te==="tl")return"".concat(se,"tl");if(te===1||te==="top-right"||te==="tr")return"".concat(se,"tr");if(te===2||te==="bottom-right"||te==="br")return"".concat(se,"br");if(te===3||te==="bottom-left"||te==="bl")return"".concat(se,"bl");if(te===4||te==="center-left"||te==="cl")return"".concat(se,"cl");if(te===5||te==="center-right"||te==="cr")return"".concat(se,"cr")}(w),j=function(te){var se="".concat(Rt,"-message--");if(te==="single"||te===0)return"".concat(se,"single");if(te==="first"||te===1)return"".concat(se,"first");if(te==="normal"||te===2)return"";if(te==="last"||te===3)return"".concat(se,"last")}(h),H=function(){return(c==null?void 0:c.length)>0&&(u==null?void 0:u.length)>0?"".concat(c,": ").concat(u):(c==null?void 0:c.length)>0&&(typeof u>"u"||(u==null?void 0:u.length)===0)?c:null}(),ne=(n=(r=F??R)!==null&&r!==void 0?r:W)!==null&&n!==void 0?n:M,ue=ne??function(){var te=m??C,se=v??s,J=se??E,K=yd(J)==="object"?QP(J):"";if(te==="html"&&K!=="Message.CustomContent")return Fe.createElement(E0,{html:J});if(te==="text")return Fe.createElement(T0,{text:J});if(te==="image")return Fe.createElement(C0,J);if(te==="custom"||K==="Message.CustomContent")return J}();return Fe.createElement("section",ES({},D,{"aria-label":H,className:on(I,G,J_({},"".concat(I,"--avatar-spacer"),b),j,q,k)},J_({},"data-".concat(Rt,"-message"),"")),typeof B<"u"&&Fe.createElement("div",{className:"".concat(I,"__avatar")},B),Fe.createElement("div",{className:"".concat(I,"__content-wrapper")},z,Fe.createElement("div",{className:"".concat(I,"__content")},ue),L))};yl.Header=yE;yl.HtmlContent=E0;yl.TextContent=T0;yl.ImageContent=C0;yl.CustomContent=wE;yl.Footer=bE;var gY=["children","className"];function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}function vY(t,e){if(t==null)return{};var n=yY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var xE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=vY(e,gY),s="".concat(Rt,"-message-group__header");return Fe.createElement("div",TS({},i,{className:on(s,a)}),r)};xE.displayName="MessageGroup.Header";var bY=["children","className"];function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function wY(t,e){if(t==null)return{};var n=xY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var NE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=wY(e,bY),s="".concat(Rt,"-message-group__footer");return Fe.createElement("div",DS({},i,{className:on(s,a)}),r)};NE.displayName="MessageGroup.Footer";var NY=["children","className"];function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$S.apply(this,arguments)}function SY(t,e){if(t==null)return{};var n=CY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var SE=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=SY(e,NY),s="".concat(Rt,"-message-group");return Fe.createElement("div",$S({},i,{className:on("".concat(s,"__messages"),a)}),r)};SE.displayName="MessageGroup.Messages";function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}var EY=["direction","avatarPosition","sender","sentTime","children","className"];function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(this,arguments)}function TY(t,e,n){return e=DY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DY(t){var e=$Y(t,"string");return Fh(e)=="symbol"?e:String(e)}function $Y(t,e){if(Fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AY(t,e){return OY(t)||_Y(t,e)||kY(t,e)||IY()}function IY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(t,e){if(t){if(typeof t=="string")return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Y(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function OY(t){if(Array.isArray(t))return t}function FY(t,e){if(t==null)return{};var n=RY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var P1=function(e){var n=e.direction,r=n===void 0?"incoming":n,a=e.avatarPosition,i=a===void 0?void 0:a,s=e.sender,o=s===void 0?"":s,u=e.sentTime,l=u===void 0?"":u,c=e.children,f=e.className,d=FY(e,EY),h="".concat(Rt,"-message-group"),m=function(){if(r===0||r==="incoming")return"".concat(h,"--incoming");if(r===1||r==="outgoing")return"".concat(h,"--outgoing")}(),v=function(){var A="".concat(h,"--avatar-");if(typeof i=="string"&&(i==="tl"||i==="top-left"||i==="tr"||i==="top-right"||i==="bl"||i==="bottom-right"||i==="br"||i==="bottom-right"||i==="cl"||i==="center-left"||i==="cr"||i==="center-right"))return"".concat(A).concat(i)}(),y=om(c,[Cc,xE,NE,SE]),b=AY(y,4),x=b[0],w=b[1],S=b[2],C=b[3],E=function(){return o.length>0&&l.length>0?"".concat(o,": ").concat(l):o.length>0&&l.length===0?o:null}();return Fe.createElement("section",AS({"aria-label":E},d,{className:on(h,m,v,f)},TY({},"data-".concat(Rt,"-message-group"),"")),typeof x<"u"&&Fe.createElement("div",{className:"".concat(h,"__avatar")},x),Fe.createElement("div",{className:"".concat(h,"__content")},w,C,S))};P1.Header=xE;P1.Footer=NE;P1.Messages=SE;var MY=["content","as","children","className"];function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(this,arguments)}function PY(t,e){if(t==null)return{};var n=BY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var LY=function(e){var n=e.content,r=n===void 0?void 0:n,a=e.as,i=a===void 0?"div":a,s=e.children,o=s===void 0?void 0:s,u=e.className,l=PY(e,MY),c="".concat(Rt,"-message-separator"),f=function(){return typeof i=="string"&&i.length>0?i:"div"}();return Fe.createElement(f,IS({},l,{className:on(c,u)}),cG(o)===!0?r:o)},zY=["className","children"];function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kS.apply(this,arguments)}function UY(t,e){if(t==null)return{};var n=VY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var B1=function(e){var n=e.className,r=e.children,a=UY(e,zY);return Fe.createElement("div",kS({},a,{className:n}),r)};B1.displayName="MessageList.Content";var WY=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rh.apply(this,arguments)}function qY(t,e){return XY(t)||GY(t,e)||jY(t,e)||HY()}function HY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jY(t,e){if(t){if(typeof t=="string")return nO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nO(t,e)}}function nO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function XY(t){if(Array.isArray(t))return t}function KY(t,e){if(t==null)return{};var n=YY(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YY(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function ZY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OB(r.key),r)}}function JY(t,e,n){return e&&QY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eZ(t,e,n){return e=D0(e),tZ(t,_B()?Reflect.construct(e,n||[],D0(t).constructor):e.apply(t,n))}function tZ(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gf(t)}function _B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_B=function(){return!!t})()}function D0(t){return D0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D0(t)}function Gf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_S(t,e)}function rc(t,e,n){return e=OB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OB(t){var e=rZ(t,"string");return bd(e)=="symbol"?e:String(e)}function rZ(t,e){if(bd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CE=function(t){nZ(e,t);function e(n){var r;return ZY(this,e),r=eZ(this,e,[n]),rc(Gf(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),rc(Gf(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var a=r.containerRef.current;if(a){var i=a.clientHeight,s=i-r.lastClientHeight;s>=1?r.preventScrollTop===!1&&(a.scrollTop=Math.round(a.scrollTop)-s):a.scrollTop=a.scrollTop-s,r.lastClientHeight=a.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),rc(Gf(r),"isSticked",function(){var a=r.containerRef.current;return a.scrollHeight===Math.round(a.scrollTop+a.clientHeight)}),rc(Gf(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),rc(Gf(r),"getLastMessageOrGroup",function(){var a=r.containerRef.current.querySelector("[data-".concat(Rt,"-message-list]>[data-").concat(Rt,"-message]:last-of-type,[data-").concat(Rt,"-message-list]>[data-").concat(Rt,"-message-group]:last-of-type")),i=a==null?void 0:a.querySelector("[data-".concat(Rt,"-message]:last-of-type"));return{lastElement:a,lastMessageInGroup:i}}),r.scrollPointRef=Fe.createRef(),r.containerRef=Fe.createRef(),r.scrollRef=Fe.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return JY(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,a=Math.round(r.scrollTop+r.clientHeight),i=r.scrollHeight===a||r.scrollHeight+1===a||r.scrollHeight-1===a;return{sticky:i,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,a,i){var s=this.props.autoScrollToBottom;if(typeof i<"u"){var o=this.containerRef.current,u=this.getLastMessageOrGroup(),l=u.lastElement,c=u.lastMessageInGroup;if(l===i.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===i.lastMessageOrGroup.lastMessageInGroup)&&(o.scrollTop=o.scrollHeight-i.diff+(this.lastClientHeight-o.clientHeight)),i.sticky===!0)s===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(i.clientHeight<this.lastClientHeight){var f=o.scrollTop+this.lastClientHeight;o.scrollHeight===f||o.scrollHeight+1===f||o.scrollHeight-1===f?s===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,l===i.lastMessageOrGroup.lastElement&&(typeof c>"u"||c===i.lastMessageOrGroup.lastMessageInGroup)&&o.scrollTop===0&&o.scrollHeight>i.scrollHeight&&(o.scrollTop=o.scrollHeight-i.scrollHeight);this.lastClientHeight=i.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,a=this.containerRef.current,i=this.scrollPointRef.current,s=a.getBoundingClientRect(),o=i.getBoundingClientRect(),u=o.top+a.scrollTop-s.top;a.scrollBy?a.scrollBy({top:u,behavior:r}):a.scrollTop=u,this.lastClientHeight=a.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,a=this.props,i=a.children,s=a.typingIndicator,o=a.loading,u=a.loadingMore,l=a.loadingMorePosition,c=a.onYReachStart,f=a.onYReachEnd,d=a.className,h=a.disableOnYReachWhenNoScroll;a.scrollBehavior,a.autoScrollToBottom,a.autoScrollToBottomOnMount;var m=KY(a,WY),v="".concat(Rt,"-message-list"),y=om(i,[B1]),b=qY(y,1),x=b[0];return Fe.createElement("div",Rh({},m,{className:on(v,d)}),u&&Fe.createElement("div",{className:on("".concat(v,"__loading-more"),rc({},"".concat(v,"__loading-more--bottom"),l==="bottom"))},Fe.createElement(Z_,null)),o&&Fe.createElement(JK,null,Fe.createElement(Z_,null)),Fe.createElement(kB,Rh({onYReachStart:c,onYReachEnd:f,onSync:function(S){return S.update(h)},className:"".concat(v,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(S){return r.containerRef.current=S},options:{suppressScrollX:!0}},rc({},"data-".concat(Rt,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),x||i,Fe.createElement("div",{className:"".concat(v,"__scroll-to"),ref:this.scrollPointRef})),typeof s<"u"&&Fe.createElement("div",{className:"".concat(v,"__typing-indicator-container")},s))}}]),e}(Fe.Component);CE.displayName="MessageList";function aZ(t,e){var n=xn.useRef(),r=function(i){return n.current.scrollToEnd(i)};return xn.useImperativeHandle(e,function(){return{scrollToBottom:r}}),Fe.createElement(CE,Rh({ref:n},t))}var Hd=xn.forwardRef(aZ);Hd.propTypes={children:JP([yl,P1,LY,B1]),typingIndicator:it.node,loading:it.bool,loadingMore:it.bool,loadingMorePosition:it.oneOf(["top","bottom"]),onYReachStart:it.func,onYReachEnd:it.func,disableOnYReachWhenNoScroll:it.bool,autoScrollToBottom:it.bool,autoScrollToBottomOnMount:it.bool,scrollBehavior:it.oneOf(["auto","smooth"]),className:it.string};Hd.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};CE.defaultProps=Hd.defaultProps;Hd.Content=B1;function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function iZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RB(r.key),r)}}function oZ(t,e,n){return e&&sZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uZ(t,e,n){return e=$0(e),lZ(t,FB()?Reflect.construct(e,n||[],$0(t).constructor):e.apply(t,n))}function lZ(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oc(t)}function FB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FB=function(){return!!t})()}function $0(t){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$0(t)}function oc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OS(t,e)}function OS(t,e){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},OS(t,e)}function mN(t,e,n){return e=RB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RB(t){var e=fZ(t,"string");return wd(e)=="symbol"?e:String(e)}function fZ(t,e){if(wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dZ=function(e,n){var r=document.activeElement===e,a=document.createTextNode("");if(e.appendChild(a),a!==null&&a.nodeValue!==null&&(r||n)){var i=window.getSelection();if(i!==null){var s=document.createRange();s.setStart(a,a.nodeValue.length),s.collapse(!0),i.removeAllRanges(),i.addRange(s)}}},pZ=function(t){cZ(e,t);function e(n){var r;return iZ(this,e),r=uZ(this,e,[n]),mN(oc(r),"innerHTML",function(){var a=oc(r),i=a.props.value;return{__html:typeof i<"u"?i:""}}),mN(oc(r),"handleKeyPress",function(a){var i=oc(r),s=i.props.onKeyPress;s==null||s(a)}),mN(oc(r),"handleInput",function(a){var i=oc(r),s=i.props.onChange,o=a.target;s==null||s(o.innerHTML,o.textContent,o.innerText)}),r.msgRef=Fe.createRef(),r}return oZ(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var a=this.msgRef,i=this.props,s=i.placeholder,o=i.disabled,u=i.activateAfterChange;return typeof a.current>"u"||r.value!==a.current.innerHTML?!0:s!==r.placeholder||o!==r.disabled||u!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,a=this.props,i=a.value,s=a.activateAfterChange;i!==r.current.innerHTML&&(r.current.innerHTML=typeof i=="string"?i:""),dZ(r.current,s)}},{key:"render",value:function(){var r=this.msgRef,a=this.handleInput,i=this.handleKeyPress,s=this.innerHTML,o=this.props,u=o.placeholder,l=o.disabled,c=o.className,f=typeof u=="string"?u:"";return Fe.createElement("div",{ref:r,className:c,contentEditable:l===!1,disabled:l,"data-placeholder":f,onInput:a,onKeyPress:i,dangerouslySetInnerHTML:s()})}}]),e}(xn.Component);function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}var hZ=["fancyScroll","children","forwardedRef"],mZ=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function gZ(t,e,n){return e=PB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FS(t,e){return wZ(t)||bZ(t,e)||yZ(t,e)||vZ()}function vZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yZ(t,e){if(t){if(typeof t=="string")return rO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(t,e)}}function rO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function wZ(t){if(Array.isArray(t))return t}function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}function MB(t,e){if(t==null)return{};var n=xZ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function NZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PB(r.key),r)}}function CZ(t,e,n){return e&&SZ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function PB(t){var e=EZ(t,"string");return xd(e)=="symbol"?e:String(e)}function EZ(t,e){if(xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TZ(t,e,n){return e=A0(e),DZ(t,BB()?Reflect.construct(e,n||[],A0(t).constructor):e.apply(t,n))}function DZ(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Z(t)}function $Z(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BB=function(){return!!t})()}function A0(t){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A0(t)}function AZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RS(t,e)}function RS(t,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},RS(t,e)}function IZ(){var t=function(e){AZ(n,e);function n(){return NZ(this,n),TZ(this,n,arguments)}return CZ(n,[{key:"render",value:function(){var a=this.props,i=a.fancyScroll,s=a.children,o=a.forwardedRef,u=MB(a,hZ);return Fe.createElement(Fe.Fragment,null,i===!0&&Fe.createElement(kB,rd({ref:function(c){return o.current=c}},u,{options:{suppressScrollX:!0}}),s),i===!1&&Fe.createElement("div",rd({ref:o},u),s))}}]),n}(xn.Component);return Fe.forwardRef(function(e,n){return Fe.createElement(t,rd({forwardedRef:n},e))})}var kZ=IZ(),aO=function(e,n){var r=typeof e<"u"?e:n,a=xn.useState(r),i=FS(a,2),s=i[0],o=i[1],u=typeof e<"u"?e:s;return[u,function(l){o(l)}]};function _Z(t,e){var n=t.value,r=n===void 0?void 0:n,a=t.onSend,i=a===void 0?t0:a,s=t.onChange,o=s===void 0?t0:s,u=t.autoFocus,l=u===void 0?!1:u,c=t.placeholder,f=c===void 0?"":c,d=t.fancyScroll,h=d===void 0?!0:d,m=t.className,v=t.activateAfterChange,y=v===void 0?!1:v,b=t.disabled,x=b===void 0?!1:b,w=t.sendDisabled,S=t.sendOnReturnDisabled,C=S===void 0?!1:S,E=t.attachDisabled,A=E===void 0?!1:E,k=t.sendButton,D=k===void 0?!0:k,I=t.attachButton,$=I===void 0?!0:I,O=t.onAttachClick,B=O===void 0?t0:O,z=MB(t,mZ),L=xn.useRef(),F=xn.useRef(),R=aO(r,""),W=FS(R,2),M=W[0],G=W[1],q=aO(w,!0),j=FS(q,2),H=j[0],ne=j[1],ue=function(){typeof F.current<"u"&&F.current.focus()};xn.useImperativeHandle(e,function(){return{focus:ue}}),xn.useEffect(function(){l===!0&&ue()},[]),xn.useEffect(function(){typeof L.current.updateScroll=="function"&&L.current.updateScroll()});var te=function(){var Se=F.current.msgRef.current;return[Se.textContent,Se.innerText,Se.cloneNode(!0).childNodes]},se=function(){if(M.length>0){r===void 0&&G(""),typeof w>"u"&&ne(!0);var Se=te();i(M,Se[0],Se[1],Se[2])}},J=function(Se){Se.key==="Enter"&&Se.shiftKey===!1&&C===!1&&(Se.preventDefault(),se())},K=function(Se,Ee,Z){G(Se),typeof w>"u"&&ne(Ee.length===0),typeof L.current.updateScroll=="function"&&L.current.updateScroll();var ie=te();o(Se,Ee,Z,ie[2])},ae="".concat(Rt,"-message-input"),pe=typeof f=="string"?f:"";return Fe.createElement("div",rd({},z,{className:on(ae,gZ({},"".concat(ae,"--disabled"),x),m)}),$===!0&&Fe.createElement("div",{className:"".concat(ae,"__tools")},Fe.createElement(tK,{onClick:B,disabled:x===!0||A===!0})),Fe.createElement("div",{className:"".concat(ae,"__content-editor-wrapper")},Fe.createElement(kZ,{fancyScroll:h,ref:L,className:"".concat(ae,"__content-editor-container")},Fe.createElement(pZ,{ref:F,className:"".concat(ae,"__content-editor"),disabled:x,placeholder:pe,onKeyPress:J,onChange:K,activateAfterChange:y,value:M}))),D===!0&&Fe.createElement("div",{className:"".concat(ae,"__tools")},Fe.createElement(KX,{onClick:se,disabled:x===!0||H===!0})))}var L1=xn.forwardRef(_Z);L1.displayName="MessageInput";L1.propTypes={value:it.string,placeholder:it.string,disabled:it.bool,sendOnReturnDisabled:it.bool,sendDisabled:it.bool,fancyScroll:it.bool,activateAfterChange:it.bool,autoFocus:it.bool,onChange:it.func,onSend:it.func,className:it.string,sendButton:it.bool,attachButton:it.bool,attachDisabled:it.bool,onAttachClick:it.func};var OZ=["className","children"];function MS(){return MS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MS.apply(this,arguments)}function FZ(t,e){if(t==null)return{};var n=RZ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var LB=function(e){var n=e.className,r=e.children,a=FZ(e,OZ),i="".concat(Rt,"-input-toolbox");return Fe.createElement("div",MS({},a,{className:on(i,n)}),r)};LB.displayName="InputToolbox";var MZ=["children","className"];function PS(){return PS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PS.apply(this,arguments)}function PZ(t,e){return UZ(t)||zZ(t,e)||LZ(t,e)||BZ()}function BZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LZ(t,e){if(t){if(typeof t=="string")return iO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iO(t,e)}}function iO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function UZ(t){if(Array.isArray(t))return t}function VZ(t,e){if(t==null)return{};var n=WZ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var qZ=function(e){var n=e.children,r=n===void 0?void 0:n,a=e.className,i=VZ(e,MZ),s="".concat(Rt,"-chat-container"),o=om(r,[Zu,Hd,L1,LB]),u=PZ(o,4),l=u[0],c=u[1],f=u[2],d=u[3];return Fe.createElement("div",PS({},i,{className:on(s,a)}),l,c,f,d)},bc="".concat(Rt,"-conversation");function Mh(t){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(t)}var HZ=["children","className","visible"];function BS(){return BS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BS.apply(this,arguments)}function jZ(t,e,n){return e=GZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GZ(t){var e=XZ(t,"string");return Mh(e)=="symbol"?e:String(e)}function XZ(t,e){if(Mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KZ(t,e){if(t==null)return{};var n=YZ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var ZZ=function(e){var n=e.children,r=e.className,a=e.visible,i=KZ(e,HZ);return Fe.createElement("div",BS({},i,{className:on("".concat(bc,"__operations"),jZ({},"".concat(bc,"__operations--visible"),a),r)}),Fe.Children.count(n)>0?n:Fe.createElement(gs,{icon:WX.faEllipsisV}))};ZZ.displayName="Conversation.Operations";var QZ=["lastSenderName","info","name","children","className"];function LS(){return LS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LS.apply(this,arguments)}function zS(t){"@babel/helpers - typeof";return zS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zS(t)}function JZ(t,e){if(t==null)return{};var n=eQ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var tQ=function(e){var n=e.name;return Fe.createElement(Fe.Fragment,null,Fe.createElement("div",{className:"".concat(bc,"__last-sender")},n),":")},nQ=function(e){var n=e.info;return Fe.createElement("div",{className:"".concat(bc,"__info-content")},n)},rQ=function(e){var n=e.lastSenderName,r=e.info,a=e.name,i=e.children,s=e.className,o=JZ(e,QZ),u=zS(n);return Fe.createElement("div",LS({},o,{className:on("".concat(bc,"__content"),s)}),Fe.Children.count(i)>0?i:Fe.createElement(Fe.Fragment,null,Fe.createElement("div",{className:"".concat(bc,"__name")},a),Fe.createElement("div",{className:"".concat(bc,"__info")},u!=="undefined"?Fe.createElement(Fe.Fragment,null,u==="string"?Fe.createElement(tQ,{name:n}):n," "):null,typeof r<"u"&&Fe.createElement(nQ,{info:r}))))};rQ.displayName="Conversation.Content";function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}var aQ=["responsive","children","className"];function US(){return US=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},US.apply(this,arguments)}function iQ(t,e,n){return e=sQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sQ(t){var e=oQ(t,"string");return Ph(e)=="symbol"?e:String(e)}function oQ(t,e){if(Ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uQ(t,e){if(t==null)return{};var n=lQ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var cQ=function(e){var n=e.responsive,r=n===void 0?!1:n,a=e.children,i=a===void 0?void 0:a,s=e.className,o=uQ(e,aQ),u="".concat(Rt,"-main-container");return Fe.createElement("div",US({},o,{className:on(u,iQ({},"".concat(u,"--responsive"),r),s)}),i)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var fQ={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},dQ={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}var pQ=["placeholder","value","onChange","onClearClick","className","disabled"];function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VS.apply(this,arguments)}function sO(t,e,n){return e=hQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hQ(t){var e=mQ(t,"string");return Bh(e)=="symbol"?e:String(e)}function mQ(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oO(t,e){return bQ(t)||yQ(t,e)||vQ(t,e)||gQ()}function gQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vQ(t,e){if(t){if(typeof t=="string")return uO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uO(t,e)}}function uO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,s,o=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(u=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function bQ(t){if(Array.isArray(t))return t}function wQ(t,e){if(t==null)return{};var n=xQ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var NQ=function(e,n){return typeof n>"u"?xn.useState(e):[n,function(){}]};function SQ(t,e){var n=t.placeholder,r=n===void 0?"":n,a=t.value,i=a===void 0?void 0:a,s=t.onChange,o=s===void 0?function(){}:s,u=t.onClearClick,l=u===void 0?function(){}:u,c=t.className,f=t.disabled,d=f===void 0?!1:f,h=wQ(t,pQ),m="".concat(Rt,"-search"),v=xn.useMemo(function(){return typeof i<"u"},[]),y=NQ("",i),b=oO(y,2),x=b[0],w=b[1],S=xn.useState(v?x.length>0:!1),C=oO(S,2),E=C[0],A=C[1];if(v!==typeof i<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var k=xn.useRef(void 0),D=function(){typeof k.current<"u"&&k.current.focus()};xn.useImperativeHandle(e,function(){return{focus:D}});var I=function(B){var z=B.target.value;A(z.length>0),v===!1&&w(z),o(z)},$=function(){v===!1&&w(""),A(!1),l()};return Fe.createElement("div",VS({},h,{className:on(m,sO({},"".concat(m,"--disabled"),d),c)}),Fe.createElement(gs,{icon:fQ,className:"".concat(m,"__search-icon")}),Fe.createElement("input",{ref:k,type:"text",className:"".concat(m,"__input"),placeholder:r,onChange:I,disabled:d,value:x}),Fe.createElement(gs,{icon:dQ,className:on("".concat(m,"__clear-icon"),sO({},"".concat(m,"__clear-icon--active"),E)),onClick:$}))}var zB=xn.forwardRef(SQ);zB.displayName="Search";zB.propTypes={placeholder:it.string,value:it.string,onChange:it.func,onClearClick:it.func,className:it.string,disabled:it.bool};function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}var CQ=["className","children","size","selected","onChange","itemsTabIndex"];function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WS.apply(this,arguments)}function EQ(t,e,n){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TQ(t){var e=DQ(t,"string");return Lh(e)=="symbol"?e:String(e)}function DQ(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Q(t,e){if(t==null)return{};var n=AQ(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function IQ(t,e){var n=t.className,r=t.children,a=t.size,i=t.selected,s=t.onChange,o=s===void 0?t0:s,u=t.itemsTabIndex,l=$Q(t,CQ),c="".concat(Rt,"-status-list"),f=xn.useRef();xn.useImperativeHandle(e,function(){return{focus:function(m){var v=Array.from(f.current.querySelectorAll("li")),y=v.filter(function(b){return b.parentNode===f.current});typeof y[m]<"u"&&y[m].focus()}}});var d=u;return Fe.createElement("ul",WS({ref:f},l,{className:on(c,n,EQ({},"".concat(c,"--").concat(a),a))}),Fe.Children.map(r,function(h){var m={};i&&(m.selected=h.props.status===i),o&&(m.onClick=function(b){o(h.props.status),h.onClick&&h.onClick(b)});var v=function(x){o&&x.key==="Enter"&&x.shiftKey===!1&&x.altKey===!1&&o(h.props.status)},y=function(){if(typeof d=="number")return d>0?d++:d}();return Fe.createElement("li",{tabIndex:y,onKeyPress:v},Fe.cloneElement(h,m))}))}var UB=xn.forwardRef(IQ);UB.displayName="StatusList";UB.propTypes={children:JP([ZP]),selected:it.oneOf(KP),size:it.oneOf(YP),itemsTabIndex:it.number,className:it.string,onChange:it.func};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQ=1e-7,_Q=1e-4;class VB{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class EE{refCount(e){return oi("refCount")}incRef(e){return oi("incRef")}timerAvailable(){return!0}time(e){return oi("time")}read(e){return oi("read")}readSync(e){return oi("readSync")}readToGPU(e,n){return oi("readToGPU")}numDataIds(){return oi("numDataIds")}disposeData(e,n){return oi("disposeData")}write(e,n,r){return oi("write")}move(e,n,r,a,i){return oi("move")}createTensorFromGPUData(e,n,r){return oi("createTensorFromGPUData")}memory(){return oi("memory")}floatPrecision(){return oi("floatPrecision")}epsilon(){return this.floatPrecision()===32?kQ:_Q}dispose(){return oi("dispose")}}function oi(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Xf(t,e,n)}function Ec(t,e,n){return Math.max(t,Math.min(e,n))}function TE(t){return t%2===0?t:t+1}function Xf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function FQ(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Y(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Ei(t,e,n=""){Y(fn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function jd(t){Y(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Oe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function RQ(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function fn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Nd(t){return t%1===0}function qS(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ad(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function lO(t,e=a=>0,n,r){return new Promise((a,i)=>{let s=0;const o=()=>{if(t()){a();return}s++;const u=e(s);if(n!=null&&s>=n){i();return}r!=null?r(o,u):setTimeout(o,u)};o()})}function WB(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const a=t.slice();return a[r]=e/n,a}function an(t,e){const n=e.length;return t=t==null?e.map((r,a)=>a):[].concat(t),Y(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),Y(t.every(r=>Nd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function bl(t,e){const n=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:an(e,t).sort();let s=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[s]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[s]==null||i[s]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[s]<=o&&s++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function ta(t,e){return fr(t,e)}function fr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function MQ(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function PQ(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function qB(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function I0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function BQ(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function fm(t){return typeof t=="string"||t instanceof String}function LQ(t){return typeof t=="boolean"}function HS(t){return typeof t=="number"}function Gd(t){return Array.isArray(t)?Gd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":HS(t)?"float32":fm(t)?"string":LQ(t)?"bool":"float32"}function jS(t){return!!(t&&t.constructor&&t.call&&t.apply)}function GS(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Nt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function HB(t,e,n,r=!1){const a=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let s=0;s<i;s++)a[s]=n[t+s]}else{const i=e[0],s=e.slice(1),o=s.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<i;u++)a[u]=HB(t+u*o,s,n,r)}return a}function ds(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((a,i)=>a*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return HB(0,t,e,n)}function zQ(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function DE(t,e){const n=ma(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ma(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function jB(t,e){const n=t.reduce((r,a)=>r*a,1);if(e==null||e==="float32")return ds(t,new Float32Array(n));if(e==="int32")return ds(t,new Int32Array(n));if(e==="bool")return ds(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Li(t){t.forEach(e=>{Y(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function yo(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Xd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function Tc(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cO="tfjsflags";class UQ{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=VQ,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const a=this.urlFlags[e];Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${a}.`),this.set(e,a)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Tc(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);cO in e&&e[cO].split(",").forEach(r=>{const[a,i]=r.split(":");this.urlFlags[a]=qQ(a,i)})}}function VQ(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(WQ(e,r[0],r[1]),r.join("="))),e}function WQ(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function qQ(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Ae(){return GB}let GB=null;function HQ(t){GB=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gN;function XB(){if(gN==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");gN=t}return gN}function jQ(){const t=XB();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function $E(t,e){const n=jQ();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const z1="Abs",dm="Acos",pm="Acosh",Kd="Add",U1="AddN",AE="All",IE="Any",V1="ArgMax",W1="ArgMin",hm="Asin",mm="Asinh",gm="Atan",vm="Atanh",ym="Atan2",q1="AvgPool",kE="AvgPoolGrad",H1="AvgPool3D",_E="AvgPool3DGrad",j1="BatchMatMul",G1="BatchToSpaceND",OE="Bincount",X1="BitwiseAnd",GQ="BroadcastTo",FE="BroadcastArgs",bm="Cast",wm="Ceil",xm="ClipByValue",RE="Complex",K1="ComplexAbs",Y1="Concat",Z1="Conv2D",ME="Conv2DBackpropFilter",Q1="Conv2DBackpropInput",J1="Conv3D",PE="Conv3DBackpropFilterV2",BE="Conv3DBackpropInputV2",Nm="Cos",Sm="Cosh",LE="Cumprod",eb="Cumsum",zE="CropAndResize",UE="DenseBincount",VE="DepthToSpace",tb="DepthwiseConv2dNative",WE="DepthwiseConv2dNativeBackpropFilter",qE="DepthwiseConv2dNativeBackpropInput",HE="Diag",nb="Dilation2D",XS="Dilation2DBackpropInput",KS="Dilation2DBackpropFilter",XQ="Draw",Cm="RealDiv",jE="Einsum",Em="Elu",GE="EluGrad",Tm="Erf",rb="Equal",Dm="Exp",ab="ExpandDims",$m="Expm1",XE="FFT",KE="Fill",YE="FlipLeftRight",Am="Floor",Im="FloorDiv",ib="FusedBatchNorm",sb="GatherV2",ZE="GatherNd",ob="Greater",km="GreaterEqual",_m="Identity",QE="IFFT",JE="Imag",Om="IsFinite",Fm="IsInf",Rm="IsNan",ub="LeakyRelu",lb="Less",cb="LessEqual",eT="LinSpace",Mm="Log",Pm="Log1p",fb="LogicalAnd",db="LogicalNot",pb="LogicalOr",KQ="LogSoftmax",hb="LRN",tT="LRNGrad",mb="Max",Bm="Maximum",gb="MaxPool",nT="MaxPoolGrad",vb="MaxPool3D",rT="MaxPool3DGrad",aT="MaxPoolWithArgmax",yb="Mean",bb="Min",Lm="Minimum",wb="MirrorPad",zm="Mod",iT="Multinomial",Um="Multiply",xb="Neg",Nb="NotEqual",sT="NonMaxSuppressionV3",oT="NonMaxSuppressionV4",uT="NonMaxSuppressionV5",Sb="OnesLike",Cb="OneHot",Eb="Pack",Tb="PadV2",Vm="Pow",Db="Prelu",$b="Prod",lT="RaggedGather",cT="RaggedRange",fT="RaggedTensorToTensor",dT="Range",pT="Real",Wm="Reciprocal",qm="Relu",Ab="Reshape",Ib="ResizeNearestNeighbor",hT="ResizeNearestNeighborGrad",kb="ResizeBilinear",mT="ResizeBilinearGrad",Hm="Relu6",_b="Reverse",jm="Round",Gm="Rsqrt",gT="ScatterNd",vT="TensorScatterUpdate",yT="SearchSorted",Ob="Select",Xm="Selu",Fb="Slice",Km="Sin",Ym="Sinh",Zm="Sign",Qm="Sigmoid",Jm="Softplus",eg="Sqrt",Rb="Sum",Mb="SpaceToBatchND",Pb="SplitV",Bb="Softmax",bT="SparseFillEmptyRows",wT="SparseReshape",xT="SparseSegmentMean",NT="SparseSegmentSum",ST="SparseToDense",tg="SquaredDifference",CT="Square",Lb="StaticRegexReplace",ET="StridedSlice",TT="StringNGrams",DT="StringSplit",$T="StringToHashBucketFast",ng="Sub",rg="Tan",ag="Tanh",ig="Tile",AT="TopK",IT="Transform",id="Transpose",kT="Unique",zb="Unpack",Ub="UnsortedSegmentSum",Vb="ZerosLike",sg="Step",YQ="FromPixels",_T="RotateWithOffset",k0="_FusedMatMul",_0="FusedConv2D",O0="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oi(...t){Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.warn(...t)}function ZQ(...t){Ae().getBool("IS_TEST")||Ae().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0=$E("kernelRegistry",()=>new Map),YS=$E("gradRegistry",()=>new Map);function fO(t,e){const n=YB(t,e);return F0.get(n)}function dO(t){return YS.get(t)}function pO(t){const e=F0.entries(),n=[];for(;;){const{done:r,value:a}=e.next();if(r)break;const[i,s]=a,[o]=i.split("_");o===t&&n.push(s)}return n}function KB(t){const{kernelName:e,backendName:n}=t,r=YB(e,n);F0.has(r)&&Oi(`The kernel '${e}' for backend '${n}' is already registered`),F0.set(r,t)}function QQ(t){const{kernelName:e}=t;YS.has(e)&&Ae().getBool("DEBUG")&&Oi(`Overriding the gradient for '${e}'`),YS.set(e,t)}function YB(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZB(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var vN,hO;function JQ(){if(hO)return vN;hO=1,vN=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(I,$,O){this.low=I|0,this.high=$|0,this.unsigned=!!O}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(I){return(I&&I.__isLong__)===!0}e.isLong=n;var r={},a={};function i(I,$){var O,B,z;return $?(I>>>=0,(z=0<=I&&I<256)&&(B=a[I],B)?B:(O=o(I,(I|0)<0?-1:0,!0),z&&(a[I]=O),O)):(I|=0,(z=-128<=I&&I<128)&&(B=r[I],B)?B:(O=o(I,I<0?-1:0,!1),z&&(r[I]=O),O))}e.fromInt=i;function s(I,$){if(isNaN(I))return $?x:b;if($){if(I<0)return x;if(I>=m)return A}else{if(I<=-v)return k;if(I+1>=v)return E}return I<0?s(-I,$).neg():o(I%h|0,I/h|0,$)}e.fromNumber=s;function o(I,$,O){return new e(I,$,O)}e.fromBits=o;var u=Math.pow;function l(I,$,O){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return b;if(typeof $=="number"?(O=$,$=!1):$=!!$,O=O||10,O<2||36<O)throw RangeError("radix");var B;if((B=I.indexOf("-"))>0)throw Error("interior hyphen");if(B===0)return l(I.substring(1),$,O).neg();for(var z=s(u(O,8)),L=b,F=0;F<I.length;F+=8){var R=Math.min(8,I.length-F),W=parseInt(I.substring(F,F+R),O);if(R<8){var M=s(u(O,R));L=L.mul(M).add(s(W))}else L=L.mul(z),L=L.add(s(W))}return L.unsigned=$,L}e.fromString=l;function c(I,$){return typeof I=="number"?s(I,$):typeof I=="string"?l(I,$):o(I.low,I.high,typeof $=="boolean"?$:I.unsigned)}e.fromValue=c;var f=65536,d=1<<24,h=f*f,m=h*h,v=m/2,y=i(d),b=i(0);e.ZERO=b;var x=i(0,!0);e.UZERO=x;var w=i(1);e.ONE=w;var S=i(1,!0);e.UONE=S;var C=i(-1);e.NEG_ONE=C;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var A=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=A;var k=o(0,-2147483648,!1);e.MIN_VALUE=k;var D=e.prototype;return D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},D.toString=function($){if($=$||10,$<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(k)){var O=s($),B=this.div(O),z=B.mul(O).sub(this);return B.toString($)+z.toInt().toString($)}else return"-"+this.neg().toString($);for(var L=s(u($,6),this.unsigned),F=this,R="";;){var W=F.div(L),M=F.sub(W.mul(L)).toInt()>>>0,G=M.toString($);if(F=W,F.isZero())return G+R;for(;G.length<6;)G="0"+G;R=""+G+R}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var $=this.high!=0?this.high:this.low,O=31;O>0&&!($&1<<O);O--);return this.high!=0?O+33:O+1},D.isZero=function(){return this.high===0&&this.low===0},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&this.high<0},D.isPositive=function(){return this.unsigned||this.high>=0},D.isOdd=function(){return(this.low&1)===1},D.isEven=function(){return(this.low&1)===0},D.equals=function($){return n($)||($=c($)),this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1?!1:this.high===$.high&&this.low===$.low},D.eq=D.equals,D.notEquals=function($){return!this.eq($)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function($){return this.comp($)<0},D.lt=D.lessThan,D.lessThanOrEqual=function($){return this.comp($)<=0},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function($){return this.comp($)>0},D.gt=D.greaterThan,D.greaterThanOrEqual=function($){return this.comp($)>=0},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function($){if(n($)||($=c($)),this.eq($))return 0;var O=this.isNegative(),B=$.isNegative();return O&&!B?-1:!O&&B?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(w)},D.neg=D.negate,D.add=function($){n($)||($=c($));var O=this.high>>>16,B=this.high&65535,z=this.low>>>16,L=this.low&65535,F=$.high>>>16,R=$.high&65535,W=$.low>>>16,M=$.low&65535,G=0,q=0,j=0,H=0;return H+=L+M,j+=H>>>16,H&=65535,j+=z+W,q+=j>>>16,j&=65535,q+=B+R,G+=q>>>16,q&=65535,G+=O+F,G&=65535,o(j<<16|H,G<<16|q,this.unsigned)},D.subtract=function($){return n($)||($=c($)),this.add($.neg())},D.sub=D.subtract,D.multiply=function($){if(this.isZero())return b;if(n($)||($=c($)),t){var O=t.mul(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}if($.isZero())return b;if(this.eq(k))return $.isOdd()?k:b;if($.eq(k))return this.isOdd()?k:b;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(y)&&$.lt(y))return s(this.toNumber()*$.toNumber(),this.unsigned);var B=this.high>>>16,z=this.high&65535,L=this.low>>>16,F=this.low&65535,R=$.high>>>16,W=$.high&65535,M=$.low>>>16,G=$.low&65535,q=0,j=0,H=0,ne=0;return ne+=F*G,H+=ne>>>16,ne&=65535,H+=L*G,j+=H>>>16,H&=65535,H+=F*M,j+=H>>>16,H&=65535,j+=z*G,q+=j>>>16,j&=65535,j+=L*M,q+=j>>>16,j&=65535,j+=F*W,q+=j>>>16,j&=65535,q+=B*G+z*M+L*W+F*R,q&=65535,o(H<<16|ne,q<<16|j,this.unsigned)},D.mul=D.multiply,D.divide=function($){if(n($)||($=c($)),$.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;var O=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?x:b;var B,z,L;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return x;if($.gt(this.shru(1)))return S;L=x}else{if(this.eq(k)){if($.eq(w)||$.eq(C))return k;if($.eq(k))return w;var F=this.shr(1);return B=F.div($).shl(1),B.eq(b)?$.isNegative()?w:C:(z=this.sub($.mul(B)),L=B.add(z.div($)),L)}else if($.eq(k))return this.unsigned?x:b;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();L=b}for(z=this;z.gte($);){B=Math.max(1,Math.floor(z.toNumber()/$.toNumber()));for(var R=Math.ceil(Math.log(B)/Math.LN2),W=R<=48?1:u(2,R-48),M=s(B),G=M.mul($);G.isNegative()||G.gt(z);)B-=W,M=s(B,this.unsigned),G=M.mul($);M.isZero()&&(M=w),L=L.add(M),z=z.sub(G)}return L},D.div=D.divide,D.modulo=function($){if(n($)||($=c($)),t){var O=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,$.low,$.high);return o(O,t.get_high(),this.unsigned)}return this.sub(this.div($).mul($))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return o(~this.low,~this.high,this.unsigned)},D.and=function($){return n($)||($=c($)),o(this.low&$.low,this.high&$.high,this.unsigned)},D.or=function($){return n($)||($=c($)),o(this.low|$.low,this.high|$.high,this.unsigned)},D.xor=function($){return n($)||($=c($)),o(this.low^$.low,this.high^$.high,this.unsigned)},D.shiftLeft=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):o(0,this.low<<$-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function($){return n($)&&($=$.toInt()),($&=63)===0?this:$<32?o(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):o(this.high>>$-32,this.high>=0?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function($){if(n($)&&($=$.toInt()),$&=63,$===0)return this;var O=this.high;if($<32){var B=this.low;return o(B>>>$|O<<32-$,O>>>$,this.unsigned)}else return $===32?o(O,0,this.unsigned):o(O>>>$-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},D.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var $=this.high,O=this.low;return[O&255,O>>>8&255,O>>>16&255,O>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]},D.toBytesBE=function(){var $=this.high,O=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,O>>>24,O>>>16&255,O>>>8&255,O&255]},e.fromBytes=function($,O,B){return B?e.fromBytesLE($,O):e.fromBytesBE($,O)},e.fromBytesLE=function($,O){return new e($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,O)},e.fromBytesBE=function($,O){return new e($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],O)},vN}var QB=JQ();const JB=Vc(QB),eJ=bj({__proto__:null,default:JB},[QB]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cc=JB||eJ;function Wb(t){return cc.fromString(t,!0,16)}const eL=Wb("c3a5c85c97cb3127"),uc=Wb("b492b66fbe98f273"),$a=Wb("9ae16a3b2f90404f");function ZS(t){return t.xor(t.shru(47))}function tL(t,e,n){const r=t.slice(e,e+n);return cc.fromBytes(Array.from(r),!0,!0)}function Un(t,e){return tL(t,e,8)}function mO(t,e){return tL(t,e,4)}function Pr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Qu(t,e,n=Wb("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let a=e.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function tJ(t,e,n,r,a,i){a=a.add(t),i=Pr(i.add(a).add(r),21);const s=a;return a=a.add(e),a=a.add(n),i=i.add(Pr(a,44)),[a.add(r),i.add(s)]}function by(t,e,n,r){return tJ(Un(t,e),Un(t,e+8),Un(t,e+16),Un(t,e+24),n,r)}function nJ(t,e=t.length){if(e>=8){const n=$a.add(e*2),r=Un(t,0).add($a),a=Un(t,e-8),i=Pr(a,37).mul(n).add(r),s=Pr(r,25).add(a).mul(n);return Qu(i,s,n)}if(e>=4){const n=$a.add(e*2),r=mO(t,0);return Qu(r.shl(3).add(e),mO(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],a=t[e-1],i=n+(r<<8),s=e+(a<<2);return ZS($a.mul(i).xor(eL.mul(s))).mul($a)}return $a}function rJ(t,e=t.length){const n=$a.add(e*2),r=Un(t,0).mul(uc),a=Un(t,8),i=Un(t,e-8).mul(n),s=Un(t,e-16).mul($a);return Qu(Pr(r.add(a),43).add(Pr(i,30)).add(s),r.add(Pr(a.add($a),18)).add(i),n)}function aJ(t,e=t.length){const n=$a.add(e*2),r=Un(t,0).mul($a),a=Un(t,8),i=Un(t,e-8).mul(n),s=Un(t,e-16).mul($a),o=Pr(r.add(a),43).add(Pr(i,30)).add(s),u=Qu(o,r.add(Pr(a.add($a),18)).add(i),n),l=Un(t,16).mul(n),c=Un(t,24),f=o.add(Un(t,e-32)).mul(n),d=u.add(Un(t,e-24)).mul(n);return Qu(Pr(l.add(c),43).add(Pr(f,30)).add(d),l.add(Pr(c.add(r),18)).add(f),n)}function iJ(t,e=t.length){const n=cc.fromNumber(81,!0);if(e<=32)return e<=16?nJ(t,e):rJ(t,e);if(e<=64)return aJ(t,e);let r=n,a=n.mul(uc).add(113),i=ZS(a.mul($a).add(113)).mul($a),s=[cc.UZERO,cc.UZERO],o=[cc.UZERO,cc.UZERO];r=r.mul($a).add(Un(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=Pr(r.add(a).add(s[0]).add(Un(t,u+8)),37).mul(uc),a=Pr(a.add(s[1]).add(Un(t,u+48)),42).mul(uc),r=r.xor(o[1]),a=a.add(s[0]).add(Un(t,u+40)),i=Pr(i.add(o[0]),33).mul(uc),s=by(t,u,s[1].mul(uc),r.add(o[0])),o=by(t,u+32,i.add(o[1]),a.add(Un(t,u+16))),[i,r]=[r,i],u+=64;while(u!==l);const f=uc.add(i.and(255).shl(1));return u=c,o[0]=o[0].add(e-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=Pr(r.add(a).add(s[0]).add(Un(t,u+8)),37).mul(f),a=Pr(a.add(s[1]).add(Un(t,u+48)),42).mul(f),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(Un(t,u+40))),i=Pr(i.add(o[0]),33).mul(f),s=by(t,u,s[1].mul(f),r.add(o[0])),o=by(t,u+32,i.add(o[1]),a.add(Un(t,u+16))),[i,r]=[r,i],Qu(Qu(s[0],o[0],f).add(ZS(a).mul(eL)).add(i),Qu(s[1],o[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wl(t,e){return e==="string"?Ju(t):Wc([t],e)}function sJ(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Wc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=il(t)),Ae().getBool("DEBUG")&&MQ(t,e),sJ(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Va(){return Ae().platform.now()}function oJ(t,e){return Ae().platform.fetch(t,e)}function Ju(t,e="utf-8"){return e=e||"utf-8",Ae().platform.encode(t,e)}function al(t,e="utf-8"){return e=e||"utf-8",Ae().platform.decode(t,e)}function vs(t){return Ae().platform.isTypedArray!=null?Ae().platform.isTypedArray(t):ZB(t)}function il(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Tc(t)||t==null||vs(t)&&n)e.push(t);else if(Array.isArray(t)||vs(t))for(let r=0;r<t.length;++r)il(t[r],e,n);else{let r=-1;for(const a of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(a)&&(r=Math.max(r,Number(a)));for(let a=0;a<=r;a++)il(t[a],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uJ{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new cJ)}profileKernel(e,n,r){let a;const i=()=>{a=r()};let s;const o=Va();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(const l of a)l.dataSync();s=Promise.resolve({kernelMs:Va()-o})}if(Ae().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<a.length;l++){const c=a[l];c.data().then(f=>{lJ(f,c.dtype,e)})}return{kernelName:e,outputs:a,inputs:n,timeMs:s.then(l=>l.kernelMs),extraInfo:s.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:a,inputs:i,extraInfo:s}=e;r.forEach(o=>{Promise.all([o.data(),a,s]).then(u=>{this.logger.logKernelProfile(n,o,u[0],u[1],i,u[2])})})}}function lJ(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const a=t[r];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class cJ{logKernelProfile(e,n,r,a,i,s){const o=typeof a=="number"?ad(`${a}ms`,9):a.error,u=ad(e,25),l=n.rank,c=n.size,f=ad(n.shape.toString(),14);let d="";for(const h in i){const m=i[h];if(m!=null){const v=m.shape||n.shape,y=v.length;d+=`${h}: ${y}D ${y>0?v:""} `}}console.log(`%c${u}	%c${o}	%c${l}D ${f}	%c${c}	%c${d}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJ(t,e,n){const r={},a={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const f in c){const d=c[f];let h=!1;for(let m=0;m<e.length;m++)if(r[d.id]){l.outputs.forEach(v=>r[v.id]=!0),h=!0,a[l.id]=!0;break}if(h)break}}const i={};i[n.id]=!0;const s={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(i[l.outputs[f].id]){for(const d in c)i[c[d].id]=!0,s[l.id]=!0;break}}const o=[];for(let u=0;u<t.length;u++){const l=t[u];if(a[l.id]&&s[l.id]){const c={};for(const d in l.inputs){const h=l.inputs[d];r[h.id]&&(c[d]=h)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,o.push(f)}}return o}function dJ(t,e,n,r){for(let a=e.length-1;a>=0;a--){const i=e[a],s=[];if(i.outputs.forEach(u=>{const l=t[u.id];l!=null?s.push(l):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(s);for(const u in i.inputs){if(!(u in o))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(o)}.`);const l=n(()=>o[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=i.inputs[u];if(!fn(l.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const f=t[c.id];t[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO=20,lh=3,yN=7;function pJ(t,e,n,r){const a=Nt(e),i=hJ(t,e,n,a),s=e.length,o=r0(t,e,n,a,i),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${s}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(o.map(l=>"    "+l).join(`
`)),u.join(`
`)}function hJ(t,e,n,r){const a=Oe(e),i=r[r.length-1],s=new Array(i).fill(0),o=e.length,u=n==="complex64"?yh(t):t;if(o>1)for(let l=0;l<a/i;l++){const c=l*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],vh(u[c+f],0,n).length)}return s}function vh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(yN))} + ${parseFloat(t[1].toFixed(yN))}j`:fm(t)?r=`'${t}'`:n==="bool"?r=nL(t):r=parseFloat(t.toFixed(yN)).toString(),ad(r,e)}function nL(t){return t===0?"false":"true"}function r0(t,e,n,r,a,i=!0){const s=n==="complex64"?2:1,o=e[0],u=e.length;if(u===0){if(n==="complex64"){const v=yh(t);return[vh(v[0],0,n)]}return n==="bool"?[nL(t[0])]:[t[0].toString()]}if(u===1){if(o>gO){const y=lh*s;let b=Array.from(t.slice(0,y)),x=Array.from(t.slice((o-lh)*s,o*s));return n==="complex64"&&(b=yh(b),x=yh(x)),["["+b.map((w,S)=>vh(w,a[S],n)).join(", ")+", ..., "+x.map((w,S)=>vh(w,a[o-lh+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?yh(t):Array.from(t)).map((y,b)=>vh(y,a[b],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),f=r[0]*s,d=[];if(o>gO){for(let v=0;v<lh;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,!1))}d.push("...");for(let v=o-lh;v<o;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,v===o-1))}}else for(let v=0;v<o;v++){const y=v*f,b=y+f;d.push(...r0(t.slice(y,b),l,n,c,a,v===o-1))}const h=u===2?",":"";d[0]="["+(o>0?d[0]+h:"");for(let v=1;v<d.length-1;v++)d[v]=" "+d[v]+h;let m=`,
`;for(let v=2;v<u;v++)m+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":m),d}function yh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ar{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Oe(e),r!=null){const a=r.length;Y(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||fr(n,this.size),this.strides=Nt(e)}set(e,...n){n.length===0&&(n=[0]),Y(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const a of e){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=this.strides[a]*e[a];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ms().makeTensor(this.values,this.shape,this.dtype)}}let Ms=null,Kf=null;function mJ(t){Ms=t}function gJ(t){Kf=t}class er{constructor(e,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Oe(e),this.strides=Nt(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Kf.buffer(this.shape,this.dtype,e)}bufferSync(){return Kf.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return ds(this.shape,e,this.dtype==="complex64")}arraySync(){return ds(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ms().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>al(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ms().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ms().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>al(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ms().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ms().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Kf.print(this,e)}clone(){return this.throwIfDisposed(),Kf.clone(this)}toString(e=!1){const n=this.dataSync();return pJ(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Kf.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ms().makeVariable(this,e,n,r)}}Object.defineProperty(er,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Be(){return $E("Tensor",()=>er)}Be();class R0 extends er{constructor(e,n,r,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!fn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ms().disposeTensor(this),this.dataId=e.dataId,Ms().incRef(this,null)}dispose(){Ms().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(R0,Symbol.hasInstance,{value:t=>t instanceof er&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vO;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(vO||(vO={}));var QS;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(QS||(QS={}));var JS;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(JS||(JS={}));var eC;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(eC||(eC={}));var tC;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(tC||(tC={}));const vJ={float32:eC,int32:QS,bool:JS,complex64:tC};function vi(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return vJ[t][e]}function OT(t){return vi(t,"int32")}function rL(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function aL(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t,e){if(t.dtype===e.dtype)return[t,e];const n=vi(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function yJ(t,e){Y(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function iL(t){const e=[];return sL(t,e,new Set),e}function sL(t,e,n){if(t==null)return;if(t instanceof er){e.push(t);return}if(!bJ(t))return;const r=t;for(const a in r){const i=r[a];n.has(i)||(n.add(i),sL(i,e,n))}}function bJ(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(t){return t.kernelName!=null}class yO{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Sd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yO}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Oi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new uJ(this.backendInstance),!0}setupRegisteredKernels(){pO(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){pO(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof EE)&&typeof r.then=="function"){const a=++this.pendingBackendInitId,i=r.then(s=>a<this.pendingBackendInitId?!1:(this.registry[e]=s,this.pendingBackendInit=null,!0)).catch(s=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,Oi(`Initialization of backend ${e} failed`),Oi(s.stack||s.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Oi(`Initialization of backend ${e} failed`),Oi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:a,asyncInit:i}=this.initializeBackend(r);if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),a=r.backend,i=this.readSync(n),s=a.refCount(n);a.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let a;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(e,n,r){e();try{const a=r();return n(),a}catch(a){throw n(),a}}nextTensorId(){return Sd.nextTensorId++}nextVariableId(){return Sd.nextVariableId++}clone(e){const n=me.runKernel(_m,{x:e}),r={x:e},a=s=>({x:()=>{const o="float32",u={x:s},l={dtype:o};return me.runKernel(bm,u,l)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],a,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(fO(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const a=this.backend.numDataIds();let i=0;r.forEach(u=>{i+=u.dtype==="complex64"?3:1});const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=a-n-i-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const a=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let u;const l=bN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(bN(e)){const{kernelName:m,inputs:v,attrs:y}=e;this.backendName==null&&this.backend;const b=fO(m,this.backendName);Y(b!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{const x=this.backend.numDataIds();u=b.kernelFunc({inputs:v,attrs:y,backend:this.backend});const w=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,x,w);const S=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(m,v,S);r=this.saveTensorsForBackwardMode(C)}return S}}else{const{forwardFunc:m}=e,v=y=>{a&&(r=y.map(b=>this.keep(this.clone(b))))};o=()=>{const y=this.backend.numDataIds();u=this.tidy(()=>m(this.backend,v));const b=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,y,b),b}}const{inputs:c,attrs:f}=e,d=bN(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(l,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),a&&this.addTapeNode(l,c,n,d,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const a=dO(e);if(a!=null){const i=a.inputsToSave||[],s=a.outputsToSave||[];let o;a.saveAllInputs?(Y(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(l=>n[l])):o=i.map(l=>n[l]);const u=r.filter((l,c)=>s[c]);return o.concat(u)}return[]}makeTensor(e,n,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;let i=e;r==="string"&&fm(e[0])&&(i=e.map(u=>Ju(u)));const s=a.write(i,n,r),o=new er(n,r,s,this.nextTensorId());if(this.trackTensor(o,a),r==="string"){const u=this.state.tensorInfo.get(s),l=BQ(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return o}makeTensorFromDataId(e,n,r,a){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:a,dtype:i}=e,s=new er(a,i,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(e,n=!0,r,a){r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.cast(a));const i=new R0(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*I0(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof R0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*I0(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,a,i,s){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},u=dO(e);u!=null&&(a=u.gradFunc),a!=null&&(o.gradient=l=>(l=l.map((c,f)=>{if(c==null){const d=r[f],h=ma(d.size,d.dtype);return this.makeTensor(h,d.shape,d.dtype)}return c}),a(l.length>1?l:l[0],i,s))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=iL(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const s=this.state.activeScope.track[i];!s.kept&&!r.has(s.id)&&s.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(e,n,r,a=!1){if(Y(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Y(i instanceof er,()=>"The result y returned by f() must be a tensor.");const s=fJ(this.state.activeTape,n,i);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??wJ(i.shape),dJ(o,s,l=>this.tidy(l),xJ);const u=n.map(l=>o[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:u}})}customGrad(e){return Y(jS(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{Y(n.every(o=>o instanceof er),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const a={};n.forEach((o,u)=>{a[u]=o});const i=(o,u)=>(r=e(...n,u),Y(r.value instanceof er,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Y(jS(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(o,u)=>{const l=r.gradFunc(o,u),c=Array.isArray(l)?l:[l];Y(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Y(c.every(d=>d instanceof er),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((d,h)=>{f[h]=()=>d}),f};return this.runKernelFunc({forwardFunc:i,backwardsFunc:s,inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Va(),r=await this.backend.time(e);return r.wallMs=Va()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yO;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Sd.nextTensorId=0;Sd.nextVariableId=0;function wJ(t){const e=DE(Oe(t),"float32");return me.makeTensor(e,t,"float32")}function oL(){const t=XB();if(t._tfengine==null){const e=new UQ(t);t._tfengine=new Sd(e)}return HQ(t._tfengine.ENV),mJ(()=>t._tfengine),t._tfengine}const me=oL();function xJ(t,e){const n={a:t,b:e};return me.runKernel(Kd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(){return typeof navigator<"u"&&navigator!=null}function uL(t){if(t||NJ()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function lL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ka=Ae();Ka.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ka.registerFlag("IS_BROWSER",()=>lL());Ka.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ka.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ka.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ka.registerFlag("PROD",()=>!1);Ka.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ka.getBool("DEBUG"));Ka.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ka.registerFlag("IS_TEST",()=>!1);Ka.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ka.getBool("DEBUG"));Ka.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ka.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ka.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xl(t,e){let n=t;if(vs(t))return e==="string"?[]:[t.length];if(rL(t)){const a=t.channels||"RGBA";return[t.height,t.width*a.length]}else if(aL(t))return[t.buffer.size/(e==null?4:I0(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||vs(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ae().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&cL(t,r,[]),r}function cL(t,e,n){if(n=n||[],!Array.isArray(t)&&!vs(t)){Y(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Y(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Y(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let a=0;a<t.length;++a)cL(t[a],r,n.concat(a))}function bO(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Q(t,e,n,r="numeric"){if(t instanceof Be())return bO(r,t.dtype,e,n),t;let a=Gd(t);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),bO(r,a,e,n),t==null||!vs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const i=xl(t,a);!vs(t)&&!Array.isArray(t)&&(t=[t]);const o=a!=="string"?Wc(t,a):il(t,[],!0);return me.makeTensor(o,i,a)}function M0(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>Q(i,`${e}[${s}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fL="__op";function de(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+fL;const a=(...i)=>{me.startScope(n);try{const s=r(...i);return Tc(s)&&console.error("Cannot return a Promise inside of tidy."),me.endScope(s),s}catch(s){throw me.endScope(null),s}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(t,e){const n=Q(t,"real","complex"),r=Q(e,"imag","complex");Ei(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return me.runKernel(RE,a)}const sl=de({complex_:SJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(t,e,n,r){if(r==null)r=Gd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(aL(t)||rL(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return me.backend.createTensorFromGPUData(t,e||n,r)}if(!vs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Li(e);const a=Oe(e),i=Oe(n);Y(a===i,()=>`Based on the provided shape, [${e}], the tensor should have ${a} values but has ${i}`);for(let s=0;s<n.length;++s){const o=n[s],u=s===n.length-1?o!==Oe(e.slice(s)):!0;Y(n[s]===e[s]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!vs(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Wc(t,r):il(t,[],!0),me.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(t,e,n){const r=xl(t,n);return Nl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Gs{static join(e){return new Gs(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>vs(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const a=e[r];r!==e.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const a=n-e,i=new ArrayBuffer(a),s=new Uint8Array(i);let o=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],f=e+o-l.start,d=o,m=Math.min(n,l.end)-l.start,v=new Uint8Array(l.buffer,f,m-f);if(s.set(v,d),o+=v.length,n<l.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(a){return e<a.start?-1:e>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=CJ(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function CJ(t,e){let n=0,r=t.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,i=e(t[a]);if(i===0)return a;i<0?r=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(){return me}function wO(){return me.memory()}function Te(t,e){return me.tidy(t,e)}function rn(t){iL(t).forEach(n=>n.dispose())}function Lr(t){return me.keep(t)}function EJ(t){return me.setBackend(t)}function TJ(){return me.ready()}function DJ(){return me.backendName}function dL(t,e,n=1){return me.registerBackend(t,e,n)}function pL(){return me.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ol=4;async function nC(t,e){const n=[],r=[],a=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<a.length;++s){const o=a[s],u=Array.isArray(t)?t[s].tensor:t[o];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${u.dtype}`);const l={name:o,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const d=await u.bytes(),h=d.reduce((y,b)=>y+b.length,0)+ol*d.length,m=new Uint8Array(h);let v=0;for(let y=0;y<d.length;y++){const b=d[y],x=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(x,v),v+=ol,m.set(b,v),v+=b.length}f(m)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const i=await Promise.all(r);return{data:IJ(i),specs:n}}function hL(t,e){const n=new Gs(t),r={};let a=0;for(const i of e){const s=$J(i,(o,u)=>n.slice(a+o,a+u));r[i.name]=mL(i,n.slice(a,a+s)),a+=s}return r}function $J(t,e){const n=Oe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=Dc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let i=0;i<n;i++)a+=ol+new Uint32Array(e(a,a+ol))[0];return a}else r=Dc[t.dtype];return n*r}async function AJ(t,e){const n=Oe(t.shape);let r;if("quantization"in t){const a=t.quantization;r=Dc[a.dtype]}else if(t.dtype==="string"){let a=0;for(let i=0;i<n;i++)a+=ol+new Uint32Array(await e(a,a+ol))[0];return a}else r=Dc[t.dtype];return n*r}function mL(t,e){const n=t.name,r=t.dtype,a=t.shape,i=Oe(a);let s,o=0;if("quantization"in t){const u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=Dc[u.dtype],c=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){s=new Float32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];s[f]=d*u.scale+u.min}}else if(u.dtype==="float16")s=MJ()(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);s=new Int32Array(c.length);for(let f=0;f<c.length;f++){const d=c[f];s[f]=Math.round(d*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*l}else if(r==="string"){const u=Oe(t.shape);s=[];for(let l=0;l<u;l++){const c=new Uint32Array(e.slice(o,o+ol))[0];o+=ol;const f=new Uint8Array(e.slice(o,o+c));s.push(f),o+=c}}else{const u=Dc[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);const l=new Float32Array(s.length/2),c=new Float32Array(s.length/2);for(let m=0;m<l.length;m++)l[m]=s[m*2],c[m]=s[m*2+1];const f=zs(l,a,"float32"),d=zs(c,a,"float32"),h=sl(f,d);return f.dispose(),d.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*u}return zs(s,a,r)}async function xO(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:a,value:i}=await t.read();if(a&&i==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer}async function gL(t,e){const n={},r=t.getReader();let a=new ArrayBuffer(0);for(const i of e){const s=await AJ(i,async(l,c)=>(a=await xO(r,a,c),a.slice(l,c)));a=await xO(r,a,s);const o=a.slice(0,s);a=a.slice(s);const u=mL(i,o);if(n[i.name]=u,DJ()==="webgpu"){const l=pL();"uploadToGPU"in l&&Oe(u.shape)>=Ae().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(u.dataId)}}return n}function IJ(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let a=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}const FT=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function NO(t){return FT?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function kJ(t){if(FT)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function _J(t){if(FT){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function vL(t){return Gs.join(t)}function SO(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function yL(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function bL(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function RT(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),bL(t,n,r)}function og(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:NO(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:NO(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Gs(t.weightData).byteLength}}function rC(t){const e=[];for(const n of t)e.push(...n.weights);return e}function OJ(){const t=n=>{let r=n<<13,a=0;for(;!(r&8388608);)a-=8388608,r<<=1;return r&=-8388609,a+=947912704,r|a},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function FJ(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function RJ(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function MJ(){const t=OJ(),e=FJ(),n=RJ();return r=>{const a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let s=0;s<r.length;s++){const o=r[s],u=t[n[o>>10]+(o&1023)]+e[o>>10];i[s]=u}return new Float32Array(a)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Jn.instance==null&&(Jn.instance=new Jn),Jn.instance}static registerSaveRouter(e){Jn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Jn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Jn.getHandlers(e,"save")}static getLoadHandlers(e,n){return Jn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const a=[];return(n==="load"?Jn.getInstance().loadRouters:Jn.getInstance().saveRouters).forEach(s=>{const o=s(e,r);o!==null&&a.push(o)}),a}}const PJ=t=>Jn.registerSaveRouter(t),BJ=t=>Jn.registerLoadRouter(t),wL=t=>Jn.getSaveHandlers(t),LJ=(t,e)=>Jn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aC="tensorflowjs",iC=1,mc="models_store",qu="model_info_store";function xL(){if(!Ae().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function sC(t){const e=t.result;e.createObjectStore(mc,{keyPath:"modelPath"}),e.createObjectStore(qu,{keyPath:"modelPath"})}class $c{constructor(e){if(this.indexedDB=xL(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,a)=>{const i=this.indexedDB.open(aC,iC);i.onupgradeneeded=()=>sC(i),i.onsuccess=()=>{const s=i.result;if(n==null){const o=s.transaction(mc,"readonly"),l=o.objectStore(mc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return s.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(s.close(),a(l.error)),o.oncomplete=()=>s.close()}else{n.weightData=Gs.join(n.weightData);const o=og(n),u=s.transaction(qu,"readwrite");let l=u.objectStore(qu),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(d){return a(d)}let f;c.onsuccess=()=>{f=s.transaction(mc,"readwrite");const d=f.objectStore(mc);let h;try{h=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(m){return a(m)}h.onsuccess=()=>r({modelArtifactsInfo:o}),h.onerror=m=>{l=u.objectStore(qu);const v=l.delete(this.modelPath);v.onsuccess=()=>(s.close(),a(h.error)),v.onerror=y=>(s.close(),a(h.error))}},c.onerror=d=>(s.close(),a(c.error)),u.oncomplete=()=>{f==null?s.close():f.oncomplete=()=>s.close()}}},i.onerror=s=>a(i.error)})}}$c.URL_SCHEME="indexeddb://";const NL=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith($c.URL_SCHEME)?zJ(t.slice($c.URL_SCHEME.length)):null;Jn.registerSaveRouter(NL);Jn.registerLoadRouter(NL);function zJ(t){return new $c(t)}function UJ(t){return t.startsWith($c.URL_SCHEME)?t.slice($c.URL_SCHEME.length):t}class VJ{constructor(){this.indexedDB=xL()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(aC,iC);r.onupgradeneeded=()=>sC(r),r.onsuccess=()=>{const a=r.result,i=a.transaction(qu,"readonly"),o=i.objectStore(qu).getAll();o.onsuccess=()=>{const u={};for(const l of o.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},o.onerror=u=>(a.close(),n(o.error)),i.oncomplete=()=>a.close()},r.onerror=a=>n(r.error)})}async removeModel(e){return e=UJ(e),new Promise((n,r)=>{const a=this.indexedDB.open(aC,iC);a.onupgradeneeded=()=>sC(a),a.onsuccess=()=>{const i=a.result,s=i.transaction(qu,"readwrite"),o=s.objectStore(qu),u=o.get(e);let l;u.onsuccess=()=>{if(u.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),f=()=>{l=i.transaction(mc,"readwrite");const h=l.objectStore(mc).delete(e);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=m=>r(u.error)};c.onsuccess=f,c.onerror=d=>(f(),i.close(),r(u.error))}},u.onerror=c=>(i.close(),r(u.error)),s.oncomplete=()=>{l==null?i.close():l.oncomplete=()=>i.close()}},a.onerror=i=>r(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ko="/",Yf="tensorflowjs_models",SL="info",WJ="model_topology",qJ="weight_specs",HJ="weight_data",jJ="model_metadata";function CL(t){return{info:[Yf,t,SL].join(Ko),topology:[Yf,t,WJ].join(Ko),weightSpecs:[Yf,t,qJ].join(Ko),weightData:[Yf,t,HJ].join(Ko),modelMetadata:[Yf,t,jJ].join(Ko)}}function EL(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function GJ(t){const e=t.split(Ko);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ko)}function XJ(t){return t.startsWith(Ac.URL_SCHEME)?t.slice(Ac.URL_SCHEME.length):t}class Ac{constructor(e){if(!Ae().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=CL(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=og(e),i=Gs.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,kJ(i));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:a}}catch{throw EL(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(s==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=_J(s),n}}Ac.URL_SCHEME="localstorage://";const TL=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ac.URL_SCHEME)?KJ(t.slice(Ac.URL_SCHEME.length)):null;Jn.registerSaveRouter(TL);Jn.registerLoadRouter(TL);function KJ(t){return new Ac(t)}class YJ{constructor(){Y(Ae().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Y(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Yf+Ko,r=Ko+SL;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(r)){const s=GJ(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=XJ(e);const n=CL(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return EL(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sd="://";class Da{constructor(){this.managers={}}static getInstance(){return Da.instance==null&&(Da.instance=new Da),Da.instance}static registerManager(e,n){Y(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(sd)&&(e=e.slice(0,e.indexOf(sd))),Y(e.length>0,()=>"scheme must not be an empty string.");const r=Da.getInstance();Y(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Da.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Da.getInstance().managers)}}function a0(t){if(t.indexOf(sd)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Da.getSchemes().join(",")}`);return{scheme:t.split(sd)[0],path:t.split(sd)[1]}}async function DL(t,e,n=!1){Y(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Jn.getLoadHandlers(t);Y(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Y(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const a=r[0],i=Jn.getSaveHandlers(e);Y(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Y(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const s=i[0],o=a0(t).scheme,u=a0(t).path,l=o===a0(t).scheme,c=await a.load();n&&l&&await Da.getManager(o).removeModel(u);const f=await s.save(c);return n&&!l&&await Da.getManager(o).removeModel(u),f.modelArtifactsInfo}async function ZJ(){const t=Da.getSchemes(),e={};for(const n of t){const r=await Da.getManager(n).listModels();for(const a in r){const i=n+sd+a;e[i]=r[a]}}return e}async function QJ(t){const e=a0(t);return Da.getManager(e.scheme).removeModel(e.path)}async function JJ(t,e){return DL(t,e,!1)}async function eee(t,e){return DL(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tee{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Ae().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const a=this.functionRefs[r.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return ZB(e)}}if(Ae().get("IS_BROWSER")){Ae().setPlatform("browser",new tee);try{Da.registerManager(Ac.URL_SCHEME,new YJ)}catch{}try{Da.registerManager($c.URL_SCHEME,new VJ)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nee={importFetch:()=>require("node-fetch")};let wN;class ree{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Ae().global.fetch!=null?Ae().global.fetch(e,n):(wN==null&&(wN=nee.importFetch()),wN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ae().get("IS_NODE")&&!Ae().get("IS_BROWSER")&&Ae().setPlatform("node",new ree);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(t,e="float32",n){return e=e||"float32",Li(t),new Ar(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(t,e){const n=Q(t,"x","cast");if(!PQ(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:e};return me.runKernel(bm,r,a)}const ot=de({cast_:aee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iee(t){const n={x:Q(t,"x","clone","string_or_numeric")};return me.runKernel(_m,n)}const Qo=de({clone_:iee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $L(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oL();const see={buffer:en,cast:ot,clone:Qo,print:$L};gJ(see);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oee(t,e){let n=Q(t,"a","add"),r=Q(e,"b","add");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Kd,a)}const qe=de({add_:oee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(t,e){let n=Q(t,"a","floorDiv"),r=Q(e,"b","floorDiv");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Im,a)}const MT=de({floorDiv_:uee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");if([n,r]=ur(n,r),n.dtype==="int32"&&r.dtype==="int32")return MT(n,r);const a={a:n,b:r},i={};return me.runKernel(Cm,a,i)}const bt=de({div_:lee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(t,e){let n=Q(t,"a","mul"),r=Q(e,"b","mul");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Um,a)}const ge=de({mul_:cee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fee(t){const e=Q(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return me.runKernel(K1,n)}else{const n={x:e};return me.runKernel(z1,n)}}const Er=de({abs_:fee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dee(t){const n={x:Q(t,"x","acos")};return me.runKernel(dm,n)}const AL=de({acos_:dee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(t){const n={x:Q(t,"x","acosh")};return me.runKernel(pm,n)}const IL=de({acosh_:pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(t){Y(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),Y(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((a,i)=>Q(a,`tensors${i}`,"addN")),n=e[0];e.forEach(a=>{if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(a=>{if(!fn(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return me.runKernel(U1,r)}const mee=de({addN_:hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gee(t,e=null,n=!1){const a={x:Q(t,"x","all","bool")},i={axis:e,keepDims:n};return me.runKernel(AE,a,i)}const PT=de({all_:gee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vee(t,e=null,n=!1){const a={x:Q(t,"x","any","bool")},i={axis:e,keepDims:n};return me.runKernel(IE,a,i)}const P0=de({any_:vee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t,e=0){const r={x:Q(t,"x","argMax")},a={axis:e};return me.runKernel(V1,r,a)}const Cd=de({argMax_:yee});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e=0){const r={x:Q(t,"x","argMin")},a={axis:e};return me.runKernel(W1,r,a)}const kL=de({argMin_:bee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(t){const n={x:Q(t,"x","asin")};return me.runKernel(hm,n)}const _L=de({asin_:wee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t){const n={x:Q(t,"x","asinh")};return me.runKernel(mm,n)}const OL=de({asinh_:xee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t){const n={x:Q(t,"x","atan")};return me.runKernel(gm,n)}const FL=de({atan_:Nee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t,e){let n=Q(t,"a","atan2"),r=Q(e,"b","atan2");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(ym,a)}const RL=de({atan2_:See});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cee(t){const n={x:Q(t,"x","atanh")};return me.runKernel(vm,n)}const ML=de({atanh_:Cee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ug(t,e,n,r,a="NHWC",i){const s=t[3],o=[...e,s],u=pu(a);return Vr(t,o,n,i,r,null,null,u)}function xs(t,e,n,r,a,i,s="channelsLast"){const[o,u]=zh(e);let l;if(s==="channelsLast")l=[o,u,t[3],t[3]];else if(s==="channelsFirst")l=[o,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Vr(t,l,n,r,a,i,!1,s)}function du(t,e,n,r,a,i,s="NDHWC"){const[o,u,l]=oC(e);let c,f;if(s==="NDHWC")f="channelsLast",c=[o,u,l,t[4],t[4]];else if(s==="NCDHW")f="channelsFirst",c=[o,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Sl(t,c,n,r,a,!1,f,i)}function Vr(t,e,n,r,a,i,s=!1,o="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f]=t;else if(o==="channelsFirst")[u,f,l,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[d,h,,m]=e,[v,y]=zh(n),[b,x]=zh(r),w=od(d,b),S=od(h,x),{padInfo:C,outHeight:E,outWidth:A}=Dee(a,l,c,v,y,w,S,i,o),k=s?m*f:m;let D;return o==="channelsFirst"?D=[u,k,E,A]:o==="channelsLast"&&(D=[u,E,A,k]),{batchSize:u,dataFormat:o,inHeight:l,inWidth:c,inChannels:f,outHeight:E,outWidth:A,outChannels:k,padInfo:C,strideHeight:v,strideWidth:y,filterHeight:d,filterWidth:h,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:x,inShape:t,outShape:D,filterShape:e}}function Sl(t,e,n,r,a,i=!1,s="channelsLast",o){let[u,l,c,f,d]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[u,l,c,f,d]=t;else if(s==="channelsFirst")[u,d,l,c,f]=t;else throw new Error(`Unknown dataFormat ${s}`);const[h,m,v,,y]=e,[b,x,w]=oC(n),[S,C,E]=oC(r),A=od(h,S),k=od(m,C),D=od(v,E),{padInfo:I,outDepth:$,outHeight:O,outWidth:B}=$ee(a,l,c,f,b,x,w,A,k,D,o),z=i?y*d:y;let L;return s==="channelsFirst"?L=[u,z,$,O,B]:s==="channelsLast"&&(L=[u,$,O,B,z]),{batchSize:u,dataFormat:s,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:$,outHeight:O,outWidth:B,outChannels:z,padInfo:I,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:h,filterHeight:m,filterWidth:v,effectiveFilterDepth:A,effectiveFilterHeight:k,effectiveFilterWidth:D,dilationDepth:S,dilationHeight:C,dilationWidth:E,inShape:t,outShape:L,filterShape:e}}function Eee(t,e,n,r,a){r==null&&(r=BT(t,e,n));const i=t[0],s=t[1],o=Uh((i-e+2*r)/n+1,a),u=Uh((s-e+2*r)/n+1,a);return[o,u]}function Tee(t,e,n,r,a,i){a==null&&(a=BT(t,e[0],r[0]));const s=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*a>=e[o]&&(s[o]=Uh((t[o]-e[o]+2*a)/r[o]+1,i));return s}function BT(t,e,n,r=1){const a=od(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function zh(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oC(t){return typeof t=="number"?[t,t,t]:t}function od(t,e){return e<=1?t:t+(t-1)*(e-1)}function Dee(t,e,n,r,a,i,s,o,u){let l,c,f;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=Eee([e,n],i,r,t,o);c=h[0],f=h[1]}else if(t==="same"){c=Math.ceil(e/r),f=Math.ceil(n/a);const d=Math.max(0,(c-1)*r+i-e),h=Math.max(0,(f-1)*a+s-n),m=Math.floor(d/2),v=d-m,y=Math.floor(h/2),b=h-y;l={top:m,bottom:v,left:y,right:b,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),f=Math.ceil((n-s+1)/a);else if(typeof t=="object"){const d=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],m=u==="channelsLast"?t[2][0]:t[3][0],v=u==="channelsLast"?t[2][1]:t[3][1];l={top:d,bottom:h,left:m,right:v,type:d===0&&h===0&&m===0&&v===0?"VALID":"EXPLICIT"},c=Uh((e-i+d+h)/r+1,o),f=Uh((n-s+m+v)/a+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:f}}function $ee(t,e,n,r,a,i,s,o,u,l,c){let f,d,h,m;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=Tee([e,n,r,1],[o,u,l],1,[a,i,s],t,c);d=y[0],h=y[1],m=y[2]}else if(t==="same"){d=Math.ceil(e/a),h=Math.ceil(n/i),m=Math.ceil(r/s);const v=(d-1)*a+o-e,y=(h-1)*i+u-n,b=(m-1)*s+l-r,x=Math.floor(v/2),w=v-x,S=Math.floor(y/2),C=y-S,E=Math.floor(b/2),A=b-E;f={top:S,bottom:C,left:E,right:A,front:x,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:d,outHeight:h,outWidth:m}}function Uh(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function ul(t){const[e,n,r]=zh(t);return e===1&&n===1&&r===1}function aa(t,e){return ul(t)||ul(e)}function Ic(t){return zh(t).every(e=>e>0)}function pu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ma(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")Y(Nd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(a=>{Y(Nd(a),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(t,e){const r={x:Q(t,"x","reshape","string_or_numeric")},a={shape:e};return me.runKernel(Ab,r,a)}const be=de({reshape_:Aee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iee(t,e,n,r,a){const i=Q(t,"x","avgPool","float32"),s=1;Y(aa(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let o=i,u=!1;i.rank===3&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Ma("avgPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a};let f=me.runKernel(q1,l,c);return f=ot(f,i.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const qb=de({avgPool_:Iee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kee(t,e,n,r,a,i="NDHWC"){const s=Q(t,"x","avgPool3d","float32");let o=s,u=!1;s.rank===4&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Y(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ma("avgPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i};let f=me.runKernel(H1,l,c);return f=ot(f,o.dtype),u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const PL=de({avgPool3d_:kee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(t,e=0){Y(t.length>=1,()=>"Pass at least one tensor to concat");const n=M0(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Qo(n[0]);const r=n,a={axis:e};return me.runKernel(Y1,r,a)}const wr=de({concat_:_ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t,e,n=!1,r=!1){let a=Q(t,"a","matMul"),i=Q(e,"b","matMul");[a,i]=ur(a,i);const s={a,b:i},o={transposeA:n,transposeB:r};return me.runKernel(j1,s,o)}const nn=de({matMul_:Oee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t){const n={x:Q(t,"x","sigmoid","float32")};return me.runKernel(Qm,n)}const bo=de({sigmoid_:Fee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t,e,n){const r=Q(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const a={x:r},i={begin:e,size:n};return me.runKernel(Fb,a,i)}const dn=de({slice_:Ree});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t){const n={x:Q(t,"x","tanh","float32")};return me.runKernel(ag,n)}const kc=de({tanh_:Mee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t,e,n,r,a,i){const s=Q(t,"forgetBias","basicLSTMCell"),o=Q(e,"lstmKernel","basicLSTMCell"),u=Q(n,"lstmBias","basicLSTMCell"),l=Q(r,"data","basicLSTMCell"),c=Q(a,"c","basicLSTMCell"),f=Q(i,"h","basicLSTMCell"),d=wr([l,f],1),h=nn(d,o),m=qe(h,u),v=m.shape[0],y=m.shape[1]/4,b=[v,y],x=dn(m,[0,0],b),w=dn(m,[0,y],b),S=dn(m,[0,y*2],b),C=dn(m,[0,y*3],b),E=qe(ge(bo(x),kc(w)),ge(c,bo(qe(s,S)))),A=ge(kc(E),bo(C));return[E,A]}const Bee=de({basicLSTMCell_:Pee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lee(t,e,n){const r=Q(t,"x","batchToSpaceND"),a=e.reduce((o,u)=>o*u);Y(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Y(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),Y(r.shape[0]%a===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${a}`);const i={x:r},s={blockShape:e,crops:n};return me.runKernel(G1,i,s)}const Hb=de({batchToSpaceND_:Lee});function zee(t){let e;return t.rank===0||t.rank===1?e=be(t,[1,1,1,t.size]):t.rank===2?e=be(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uee(t,e,n,r,a,i){i==null&&(i=.001);const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;r!=null&&(c=Q(r,"offset","batchNorm")),Y(o.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(l==null||o.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:zee(s),scale:l,offset:c,mean:o,variance:u},h={varianceEpsilon:i},m=me.runKernel(ib,d,h);return be(m,s.shape)}const lg=de({batchNorm_:Uee});function Vee(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),Y(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),Y(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),lg(s,o,u,c,l,i)}const BL=de({batchNorm2d_:Vee});function Wee(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),Y(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),Y(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),lg(s,o,u,c,l,i)}const LL=de({batchNorm3d_:Wee});function qee(t,e,n,r,a,i){const s=Q(t,"x","batchNorm"),o=Q(e,"mean","batchNorm"),u=Q(n,"variance","batchNorm");let l;a!=null&&(l=Q(a,"scale","batchNorm"));let c;return r!=null&&(c=Q(r,"offset","batchNorm")),Y(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),Y(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),Y(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&Y(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Y(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),lg(s,o,u,c,l,i)}const zL=de({batchNorm4d_:qee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t,e,n){const r=Q(t,"x","bincount"),a=Q(e,"weights","bincount");Y(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(a.size===r.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`);const i={x:r,weights:a},s={size:n};return me.runKernel(OE,i,s)}const UL=de({bincount_:Hee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t,e){const n=Q(t,"x","bitwiseAnd"),r=Q(e,"y","bitwiseAnd");if(!fn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const a={a:n,b:r};return me.runKernel(X1,a)}const Gee=de({bitwiseAnd_:jee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t,e){const n=Q(t,"s0","broadcastArgs","int32"),r=Q(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return me.runKernel(FE,a)}const Kee=de({broadcastArgs_:Xee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(t,e){let n=Q(t,"broadcastTo","x");const r=n.shape;if(Li(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=be(n,l)}const a=n.shape,i=Array.from(e);for(let l=e.length-1;l>=0;l--)if(a[l]===e[l])i[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Qo(n);const o={x:n},u={reps:i};return me.runKernel(ig,o,u)}const ud=de({broadcastTo_:Yee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t){const n={x:Q(t,"x","ceil","float32")};return me.runKernel(wm,n)}const VL=de({ceil_:Zee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yd(t,e,n){Li(t),n=n||Gd(e);const r={shape:t,value:e,dtype:n};return me.runKernel(KE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t,e,n){const r=Q(t,"x","clipByValue");if(Y(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Yd(r.shape,e,r.dtype);const a={x:r},i={clipValueMin:e,clipValueMax:n};return me.runKernel(xm,a,i)}const yi=de({clipByValue_:Qee});function Jee(t){return wr(t,0)}const WL=de({concat1d_:Jee});function ete(t,e){return wr(t,e)}const qL=de({concat2d_:ete});function tte(t,e){return wr(t,e)}const HL=de({concat3d_:tte});function nte(t,e){return wr(t,e)}const jL=de({concat4d_:nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rte(t,e,n,r,a="NHWC",i=[1,1],s){const o=Q(t,"x","conv2d","float32"),u=Q(e,"filter","conv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Ma("conv2d",r,s);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),Y(aa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Y(Ic(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),Y(Ic(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},m=me.runKernel(Z1,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const ll=de({conv2d_:rte});function ate(t,e,n,r,a="NWC",i=1,s){const o=Q(t,"x","conv1d"),u=Q(e,"filter","conv1d");let l=o,c=!1;o.rank===2&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1]])),Y(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),Y(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Ma("conv1d",r,s),Y(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),Y(aa(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),Y(Ic(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),Y(Ic(n),()=>"Error in conv1D: Stride should be larger than 0."),Y(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const f=be(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=be(l,[l.shape[0],1,l.shape[1],l.shape[2]]),y=ll(d,f,[1,n],r,"NHWC",[1,i],s);return c?be(y,[y.shape[2],y.shape[3]]):be(y,[y.shape[0],y.shape[2],y.shape[3]])}const LT=de({conv1d_:ate});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ite(t,e,n,r,a,i="NHWC",s){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,u=e,l=!1;e.rank===3&&(l=!0,u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),Y(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),Y(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),Y(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?o[3]:o[1],f=i==="NHWC"?u.shape[3]:u.shape[1];Y(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),Y(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Ma("conv2dDerInput",a,s);const d={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},m=me.runKernel(Q1,d,h);return l?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const zT=de({conv2DBackpropInput_:ite});function ste(t,e,n,r,a,i){const s=Q(t,"x","conv2dTranspose"),o=Q(e,"filter","conv2dTranspose");return zT(n,s,o,r,a,"NHWC",i)}const UT=de({conv2dTranspose_:ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ote(t,e,n,r,a="NDHWC",i=[1,1,1]){const s=Q(t,"x","conv3d"),o=Q(e,"filter","conv3d");let u=s,l=!1;s.rank===4&&(l=!0,u=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),Y(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),Y(u.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${o.shape[3]}.`),Y(aa(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Y(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),Y(Ic(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),Y(Ic(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:o},f={strides:n,pad:r,dataFormat:a,dilations:i},d=me.runKernel(J1,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const GL=de({conv3d_:ote});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(t,e,n,r,a){Y(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,o=!1;e.rank===4&&(o=!0,s=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const u=i[4],l=s.shape[4];Y(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),Y(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),Y(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),Y(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),Y(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:s,filter:n},f={pad:a,strides:r,inputShape:i},d=me.runKernel(BE,c,f);return o?be(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const XL=de({conv3DBackpropInput_:ute});function lte(t,e,n,r,a){const i=Q(t,"x","conv3dTranspose"),s=Q(e,"filter","conv3dTranspose");return XL(n,i,s,r,a)}const KL=de({conv3dTranspose_:lte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t){const n={x:Q(t,"x","cos","float32")};return me.runKernel(Nm,n)}const jb=de({cos_:cte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(t){const n={x:Q(t,"x","cosh","float32")};return me.runKernel(Sm,n)}const VT=de({cosh_:fte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return me.runKernel(LE,i,s)}const B0=de({cumprod_:dte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t,e=0,n=!1,r=!1){const i={x:Q(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return me.runKernel(eb,i,s)}const WT=de({cumsum_:pte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hte(t,e,n,r=!1){const a=Q(t,"x","denseBincount"),i=Q(e,"weights","denseBincount");Y(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),Y(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),Y(n>=0,()=>`size must be non-negative, but got ${n}.`),Y(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const s={x:a,weights:i},o={size:n,binaryOutput:r};return me.runKernel(UE,s,o)}const uC=de({denseBincount_:hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mte(t,e,n="NHWC"){const r=Q(t,"x","depthToSpace","float32"),a=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];Y(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Y(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Y(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),Y(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);const o={x:r},u={blockSize:e,dataFormat:n};return me.runKernel(VE,o,u)}const YL=de({depthToSpace_:mte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gte(t,e,n,r,a="NHWC",i=[1,1],s){const o=Q(t,"x","depthwiseConv2d","float32"),u=Q(e,"filter","depthwiseConv2d","float32");let l=o,c=!1;o.rank===3&&(c=!0,l=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),Y(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=a==="NHWC"?l.shape[3]:l.shape[1];Y(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),Ma("depthwiseConv2d",r,s);const d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},m=me.runKernel(tb,d,h);return c?be(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const cg=de({depthwiseConv2d_:gte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t){const n={x:Q(t,"x","diag")};return me.runKernel(HE,n)}const yte=de({diag_:vte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bte(t,e,n,r,a=[1,1],i="NHWC"){const s=Q(t,"x","dilation2d"),o=Q(e,"filter","dilation2d");Y(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),Y(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),Y(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let u=s,l=!1;s.rank===3&&(u=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=!0),Y(u.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${o.shape[2]}`);const c={x:u,filter:o},f={strides:n,pad:r,dilations:a},d=me.runKernel(nb,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ZL=de({dilation2d_:bte});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ed(t,e){const n=t.length,r=[];for(let a=0;a<n;a++){const i=n-1-a,s=t[i]||1;(e[e.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function _r(t,e){const n=[];for(let r=0;r<e.length;r++){const a=t[t.length-r-1],i=e.length-r-1,s=e[i];(a==null||a===1&&s>1)&&n.unshift(i)}return n}function Ht(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let a=0;a<n;a++){let i=t[t.length-a-1];i==null&&(i=1);let s=e[e.length-a-1];if(s==null&&(s=1),i===1)r[n-a-1]=s;else if(s===1)r[n-a-1]=i;else if(i!==s){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-a-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wte(t,e){let n=Q(t,"a","equal","string_or_numeric"),r=Q(e,"b","equal","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(rb,a)}const Ws=de({equal_:wte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xte(t,e,n){const r=Q(e,"a","where"),a=Q(n,"b","where"),i=Q(t,"condition","where","bool"),s=Ht(Ht(i.shape,r.shape),a.shape),o=ud(i,s),u=ud(r,s),l=ud(a,s),c={condition:o,t:u,e:l};return me.runKernel(Ob,c)}const pa=de({where_:xte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t){const n={x:Q(t,"x","zerosLike")};return me.runKernel(Vb,n)}const mn=de({zerosLike_:Nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(t,e){let n=Q(t,"a","div"),r=Q(e,"b","div");[n,r]=ur(n,r);const a=bt(n,r),i=mn(a),s=Ws(r,i);return pa(s,i,a)}const QL=de({divNoNan_:Ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t,e){const n=Q(t,"t1","dot"),r=Q(e,"t2","dot");Y((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(Y(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&r.rank===1){const s=be(n,[1,-1]),o=be(r,[-1,1]),u=nn(s,o);return be(u,[])}else if(n.rank===1&&r.rank===2){const s=be(n,[1,-1]),o=be(r,[r.shape[0],r.shape[1]]),u=nn(s,o);return be(u,[u.size])}else if(n.rank===2&&r.rank===1){const s=be(r,[-1,1]),o=nn(n,s);return be(o,[o.size])}else{const s=be(r,[r.shape[0],r.shape[1]]);return nn(n,s)}}const JL=de({dot_:Cte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,...e){const n=e.map((a,i)=>Q(a,`tensors${i}`,"einsum")),r={equation:t};return me.runKernel(jE,n,r)}const Zf=de({einsum_:Ete});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t){const n={x:Q(t,"x","elu","float32")};return me.runKernel(Em,n)}const fg=de({elu_:Tte});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(t,e){const n=Q(t,"x","ensureShape","string_or_numeric");if(!RQ(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const $te=de({ensureShape_:Dte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(t){let e=Q(t,"x","erf");Y(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=ot(e,"float32"));const n={x:e};return me.runKernel(Tm,n)}const qT=de({erf_:Ate});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HT(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function ez(t,e,n){const r=t.length+e.length,a=[];let i=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?a.push(t[i++]):a.push(e[s++]);return a}function Wr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const a=e.map(i=>t[i]);return[n,a]}function dr(t,e){const n=e.map(r=>1);return ez(t,n,e)}function ia(t,e,n){Y(HT(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function nr(t,e){if(HT(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Cl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function pr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t,e=null,n=!1){const a={x:Q(t,"x","max")},i={reductionIndices:e,keepDims:n};return me.runKernel(mb,a,i)}const ps=de({max_:Ite});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kte(t,e=null,n=!1){const a={x:Q(t,"x","min")},i={axis:e,keepDims:n};return me.runKernel(bb,a,i)}const Vh=de({min_:kte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(t,e){let n=Q(t,"base","pow"),r=Q(e,"exp","pow");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(Vm,a)}const iu=de({pow_:_te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t,e){if((vs(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&vs(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Nl(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ote(t){const n={x:Q(t,"x","sqrt","float32")};return me.runKernel(eg,n)}const na=de({sqrt_:Ote});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t){const e=Q(t,"x","square"),n={};return me.runKernel("Square",{x:e},n)}const Pn=de({square_:Fte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(t,e=null,n=!1){let r=Q(t,"x","sum");r.dtype==="bool"&&(r=ot(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return me.runKernel(Rb,a,i)}const ht=de({sum_:Rte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(t,e="euclidean",n=null,r=!1){t=Q(t,"x","norm");const a=tz(t,e,n);let i=a.shape;if(r){const s=an(n,t.shape);i=dr(a.shape,s)}return be(a,i)}function tz(t,e,n=null){if(t.rank===0)return Er(t);if(t.rank!==1&&n===null)return tz(be(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return ht(Er(t),n);if(e===1/0)return ps(Er(t),n);if(e===-1/0)return Vh(Er(t),n);if(e==="euclidean"||e===2)return na(ht(iu(Er(t),Ct(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ps(ht(Er(t),n[0]),n[1]-1);if(e===1/0)return ps(ht(Er(t),n[1]),n[0]);if(e===-1/0)return Vh(ht(Er(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return na(ht(Pn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const dg=de({norm_:Mte});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pte(t,e=null,n=!1){return dg(t,"euclidean",e,n)}const nz=de({euclideanNorm_:Pte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(t){const n={x:Q(t,"x","exp")};return me.runKernel(Dm,n)}const bi=de({exp_:Bte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lte(t,e=0){const n=Q(t,"x","expandDims","string_or_numeric");Y(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},a={dim:e};return me.runKernel(ab,r,a)}const Aa=de({expandDims_:Lte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(t){const n={x:Q(t,"x","expm1")};return me.runKernel($m,n)}const rz=de({expm1_:zte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e){const n=Q(t,"x","tile","string_or_numeric");Y(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},a={reps:e};return me.runKernel(ig,r,a)}const us=de({tile_:Ute});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t,e,n,r="float32"){e==null&&(e=t);const a=en([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)a.set(1,o,o);const s=be(a.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return us(Aa(s,0),[n[0],1,1]);if(n.length===2)return us(Aa(Aa(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return us(Aa(Aa(Aa(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const jT=de({eye_:Vte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wte(t){const n={x:Q(t,"x","floor","float32")};return me.runKernel(Am,n)}const pg=de({floor_:Wte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n=0,r=0){const a=Q(t,"x","gather"),i=Q(e,"indices","gather","int32"),s={x:a,indices:i},o={axis:n,batchDims:r};return me.runKernel(sb,s,o)}const hg=de({gather_:qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(t,e){let n=Q(t,"a","greater","string_or_numeric"),r=Q(e,"b","greater","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(ob,a)}const Ti=de({greater_:Hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jte(t,e){let n=Q(t,"a","greaterEqual","string_or_numeric"),r=Q(e,"b","greaterEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(km,a)}const El=de({greaterEqual_:jte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gte(t){const n={input:Q(t,"input","imag")};return me.runKernel(JE,n)}const Gb=de({imag_:Gte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xte(t){const n={x:Q(t,"x","isFinite")};return me.runKernel(Om,n)}const az=de({isFinite_:Xte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kte(t){const n={x:Q(t,"x","isInf")};return me.runKernel(Fm,n)}const iz=de({isInf_:Kte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t){const n={x:Q(t,"x","isNaN")};return me.runKernel(Rm,n)}const sz=de({isNaN_:Yte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zte(t,e=.2){const r={x:Q(t,"x","leakyRelu")},a={alpha:e};return me.runKernel(ub,r,a)}const Xb=de({leakyRelu_:Zte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qte(t,e){let n=Q(t,"a","less","string_or_numeric"),r=Q(e,"b","less","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(lb,a)}const Wh=de({less_:Qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(t,e){let n=Q(t,"a","lessEqual","string_or_numeric"),r=Q(e,"b","lessEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(cb,a)}const qc=de({lessEqual_:Jte});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ene(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return me.runKernel(eT,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t,e=5,n=1,r=1,a=.5){const i=Q(t,"x","localResponseNormalization");Y(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),Y(Nd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,o=!1;i.rank===3&&(o=!0,s=be(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const u={x:s},l={depthRadius:e,bias:n,alpha:r,beta:a},c=me.runKernel(hb,u,l);return o?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const oz=de({localResponseNormalization_:tne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t){const n={x:Q(t,"x","log","float32")};return me.runKernel(Mm,n)}const Mi=de({log_:nne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rne(t){const n={x:Q(t,"x","log1p")};return me.runKernel(Pm,n)}const Kb=de({log1p_:rne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(t,e){Y(jS(t),()=>"The f passed in variableGrads(f) must be a function"),Y(e==null||Array.isArray(e)&&e.every(l=>l instanceof R0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in me.registeredVariables)e.push(me.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,a=e.length;e=e.filter(l=>l.trainable),Y(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:s,grads:o}=me.gradients(t,e,null,i);Y(o.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Y(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);const u={};return e.forEach((l,c)=>{o[c]!=null&&(u[l.name]=o[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:s,grads:u}}function su(t){return me.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ine(t){const n={x:Q(t,"x","neg")};return me.runKernel(xb,n)}const Hn=de({neg_:ine});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sne(t){const n={x:Q(t,"x","softplus")};return me.runKernel(Jm,n)}const Zd=de({softplus_:sne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function one(t){const e=Q(t,"x","logSigmoid");return su(r=>({value:Hn(Zd(Hn(r))),gradFunc:s=>ge(s,bo(Hn(r)))}))(e)}const uz=de({logSigmoid_:one});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function une(t,e){let n=Q(t,"a","sub"),r=Q(e,"b","sub");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(ng,a)}const ft=de({sub_:une});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lne(t,e=-1){const n=Q(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return su((a,i)=>{const o=ps(a,e,!0),u=ft(a,o),l=ft(ot(u,"float32"),Mi(ht(bi(u),e,!0)));return i([l]),{value:l,gradFunc:(f,d)=>{const[h]=d,m=!0,v=bi(h);return ft(f,ge(ht(f,e,m),v))}}})(n)}const GT=de({logSoftmax_:lne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cne(t,e=null,n=!1){const r=Q(t,"x","logSumExp"),a=an(e,r.shape),i=ps(r,a,!0),s=ft(r,i),o=bi(s),u=ht(o,a),l=Mi(u),c=qe(be(i,l.shape),l);if(n){const f=dr(c.shape,a);return be(c,f)}return c}const Yb=de({logSumExp_:cne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne(t,e){const n=Q(t,"a","logicalAnd","bool"),r=Q(e,"b","logicalAnd","bool");Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(fb,a)}const So=de({logicalAnd_:fne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dne(t){const n={x:Q(t,"x","logicalNot","bool")};return me.runKernel(db,n)}const Zb=de({logicalNot_:dne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pne(t,e){const n=Q(t,"a","logicalOr","bool"),r=Q(e,"b","logicalOr","bool");Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(pb,a)}const XT=de({logicalOr_:pne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hne(t,e){const n=Q(t,"a","logicalXor","bool"),r=Q(e,"b","logicalXor","bool");return Ht(n.shape,r.shape),So(XT(t,e),Zb(So(t,e)))}const lz=de({logicalXor_:hne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy=2147483648;function mne(t,e,n="left"){const r=Q(t,"sortedSequence","searchSorted"),a=Q(e,"values","searchSorted"),i=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],o=be(r,[-1,i]),u=be(a,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Oe(u.shape)>=wy)throw new Error(`values tensor size must less than ${wy}`);if(o.shape[1]>=wy)throw new Error(`trailing dim_size must less than ${wy} for int32 output type, was ${o.shape[1]}`);const l={sortedSequence:o,values:u},c={side:n};return me.runKernel(yT,l,c)}const KT=de({searchSorted_:mne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gne(t,e){return KT(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vne(t,e,n,r,a){const i=Q(t,"x","maxPool"),s=1;let o=i,u=!1;i.rank===3&&(u=!0,o=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),Y(aa(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Ma("maxPool",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a},f=me.runKernel(gb,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Qb=de({maxPool_:vne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yne(t,e=[1,1,1],n,r,a,i="NDHWC"){const s=Q(t,"x","maxPool3d");let o=s,u=!1;s.rank===4&&(u=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Y(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Y(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ma("maxPool3d",r,a);const l={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=me.runKernel(vb,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const cz=de({maxPool3d_:yne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bne(t,e,n,r,a=!1){const s={x:Q(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:a},u=me.runKernel(aT,s,o);return{result:u[0],indexes:u[1]}}const wne=de({maxPoolWithArgmax_:bne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xne(t,e){let n=Q(t,"a","maximum"),r=Q(e,"b","maximum");[n,r]=ur(n,r),n.dtype==="bool"&&(n=ot(n,"int32"),r=ot(r,"int32")),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Bm,a)}const hu=de({maximum_:xne});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t,e=null,n=!1){const a={x:Q(t,"x","mean")},i={axis:e,keepDims:n};return me.runKernel(yb,a,i)}const or=de({mean_:Nne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t,e="float32"){if(Li(t),e==="complex64"){const r=Tr(t,"float32"),a=Tr(t,"float32");return sl(r,a)}const n=ma(Oe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi(t,e="float32"){if(Li(t),e==="complex64"){const r=pi(t,"float32"),a=Tr(t,"float32");return sl(r,a)}const n=DE(Oe(t),e);return me.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sne(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=Q(t,"x","meshgrid",t instanceof er?t.dtype:"float32");if(e===void 0)return[r];let a=Q(e,"y","meshgrid",e instanceof er?e.dtype:"float32");const i=Oe(r.shape),s=Oe(a.shape);return n==="xy"?(r=be(r,[1,-1]),a=be(a,[-1,1]),[nn(pi([s,1],r.dtype),r),nn(a,pi([1,i],a.dtype))]):(r=be(r,[-1,1]),a=be(a,[1,-1]),[nn(r,pi([1,s],r.dtype)),nn(pi([i,1],a.dtype),a)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(t,e){let n=Q(t,"a","minimum"),r=Q(e,"b","minimum");[n,r]=ur(n,r),n.dtype==="bool"&&(n=ot(n,"int32"),r=ot(r,"int32")),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Lm,a)}const _c=de({minimum_:Cne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ene(t,e,n){Y(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Q(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Y(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const a=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)Y(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Y(e[o][0]>=0&&e[o][0]<=r.shape[o]-a&&e[o][1]>=0&&e[o][1]<=r.shape[o]-a,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-a} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},s={x:r};return me.runKernel(wb,s,i)}const fz=de({mirrorPad_:Ene});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(t,e){let n=Q(t,"a","mod"),r=Q(e,"b","mod");[n,r]=ur(n,r);const a={a:n,b:r};return me.runKernel(zm,a)}const dz=de({mod_:Tne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t,e=null,n=!1){t=Q(t,"x","moments");const r=an(e,t.shape),a=or(t,r,n);let i=a.shape;n||(i=dr(a.shape,r));const s=Pn(ft(ot(t,"float32"),be(a,i))),o=or(s,r,n);return{mean:a,variance:o}}const Jb=de({moments_:Dne});function $ne(t,e,n,r){const a=Q(e,"data","multiRNNCell"),i=M0(n,"c","multiRNNCell"),s=M0(r,"h","multiRNNCell");let o=a;const u=[];for(let f=0;f<t.length;f++){const d=t[f](o,i[f],s[f]);u.push(d[0]),u.push(d[1]),o=d[1]}const l=[],c=[];for(let f=0;f<u.length;f+=2)l.push(u[f]),c.push(u[f+1]);return[l,c]}const Ane=de({multiRNNCell_:$ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ine(t,e,n,r=!1){const a=Q(t,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();const u={logits:s===1?be(a,[1,-1]):a},l={numSamples:e,seed:n,normalized:r},c=me.runKernel(iT,u,l);return s===1?be(c,[c.size]):c}const kne=de({multinomial_:Ine});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(t,e){let n=Q(t,"a","notEqual","string_or_numeric"),r=Q(e,"b","notEqual","string_or_numeric");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r};return me.runKernel(Nb,a)}const Td=de({notEqual_:_ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function One(t,e,n=1,r=0,a="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const s={indices:Q(t,"indices","oneHot","int32")},o={dtype:a,depth:e,onValue:n,offValue:r};return me.runKernel(Cb,s,o)}const YT=de({oneHot_:One});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fne(t){const n={x:Q(t,"x","onesLike")};return me.runKernel(Sb,n)}const Pi=de({onesLike_:Fne});function Rne(t,e){const n=Q(t,"v1","outerProduct"),r=Q(e,"v2","outerProduct");Y(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const a=be(n,[-1,1]),i=be(r,[1,-1]);return nn(a,i)}const Mne=de({outerProduct_:Rne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pne(t,e,n=0){const r=Q(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:e,constantValue:n},i={x:r};return me.runKernel(Tb,i,a)}const Tl=de({pad_:Pne});function Bne(t,e,n=0){return Y(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Tl(t,[e],n)}const Lne=de({pad1d_:Bne});function zne(t,e,n=0){return Y(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Une=de({pad2d_:zne});function Vne(t,e,n=0){return Y(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Wne=de({pad3d_:Vne});function qne(t,e,n=0){return Y(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Tl(t,e,n)}const Hne=de({pad4d_:qne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(t,e,n){const r=Q(t,"x","spaceToBatchND");Y(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Y(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),Y(r.shape.reduce((s,o,u)=>u>0&&u<=e.length?s&&(o+n[u-1][0]+n[u-1][1])%e[u-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const a={x:r},i={blockShape:e,paddings:n};return me.runKernel(Mb,a,i)}const ew=de({spaceToBatchND_:jne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(t,e,n,r,a,i,s){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=Q(t,"x","maxPool");let u=o,l=!1;o.rank===3&&(l=!0,u=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Y(aa(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const c=xs(u.shape,e,i,a,r),f=[c.dilationHeight,c.dilationWidth];let d;r==="same"?d=Kne([c.filterHeight,c.filterWidth],f):d=[[0,0],[0,0]];const h=f[0]===1&&f[1]===1,[m,v]=Xne([c.inHeight,c.inWidth],f,d),y=h?r:"valid",b=h?u:ew(u,f,m),w=(n==="avg"?()=>qb(b,e,i,y,s):()=>Qb(b,e,i,y,s))(),S=h?w:Hb(w,f,v);return l?be(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function Xne(t,e,n){const r=n.map(c=>c[0]),a=n.map(c=>c[1]),i=t.concat(r,a),s=e.map((c,f)=>(c-i[f]%c)%c),o=a.map((c,f)=>c+s[f]),u=e.map((c,f)=>[r[f],o[f]]),l=e.map((c,f)=>[0,s[f]]);return[u,l]}function Kne(t,e){const r=t.map((s,o)=>s+(s-1)*(e[o]-1)).map(s=>s-1),a=r.map(s=>Math.floor(s/2)),i=r.map((s,o)=>s-a[o]);return r.map((s,o)=>[a[o],i[o]])}const pz=de({pool_:Gne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yne(t,e){const n=Q(t,"x","prelu"),r=Q(e,"alpha","prelu"),a={x:n,alpha:r};return me.runKernel(Db,a)}const tw=de({prelu_:Yne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zne(t,e=null,n=!1){let r=Q(t,"x","prod");r.dtype==="bool"&&(r=ot(r,"int32"));const a={x:r},i={axis:e,keepDims:n};return me.runKernel($b,a,i)}const hz=de({prod_:Zne});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(t,e,n,r){const a=t.map((c,f)=>Q(c,`tensors${f}`,"raggedGather","int32")),i=Q(e,"paramsDenseValues","raggedGather"),s=Q(n,"indices","raggedGather","int32"),o={paramsNestedSplits:a,paramsDenseValues:i,indices:s},u={outputRaggedRank:r},l=me.runKernel(lT,o,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const Jne=de({raggedGather_:Qne});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ere(t,e,n){const r=Q(t,"starts","raggedRange"),a=Q(e,"limits","raggedRange",r.dtype),i=Q(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:a,deltas:i},o=me.runKernel(cT,s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const tre=de({raggedRange_:ere});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nre(t,e,n,r,a){const i=Q(t,"shape","raggedTensorToTensor","int32"),s=Q(e,"values","raggedTensorToTensor"),o=Q(n,"defaultValue","raggedTensorToTensor",s.dtype),u=r.map((f,d)=>Q(f,`tensors${d}`,"raggedTensorToTensor","int32")),l={shape:i,values:s,defaultValue:o,rowPartitionTensors:u},c={rowPartitionTypes:a};return me.runKernel(fT,l,c)}const rre=de({raggedTensorToTensor_:nre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function are(t,e,n){Li(t);const r=Oe(t);let a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else if(n==="bool")a=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)a[i]=e();return me.makeTensor(a,t,n)}const ire=de({rand_:are});var i0={exports:{}},sre=i0.exports,CO;function ore(){return CO||(CO=1,function(t){(function(e,n,r){function a(u){var l=this,c=o();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function i(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new a(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&i(f,c),d.state=function(){return i(c,{})}),d}function o(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=s:this.alea=s})(sre,t)}(i0)),i0.exports}var s0={exports:{}},ure=s0.exports,EO;function lre(){return EO||(EO=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function i(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xor128=s})(ure,t)}(s0)),s0.exports}var o0={exports:{}},cre=o0.exports,TO;function fre(){return TO||(TO=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u.v=o.v,u.d=o.d,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xorwow=s})(cre,t)}(o0)),o0.exports}var u0={exports:{}},dre=u0.exports,DO;function pre(){return DO||(DO=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,o)}function i(o,u){return u.x=o.x.slice(),u.i=o.i,u}function s(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xorshift7=s})(dre,t)}(u0)),u0.exports}var l0={exports:{}},hre=l0.exports,$O;function mre(){return $O||($O=1,function(t){(function(e,n,r){function a(o){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,v,y,b=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),m=0,v=-32;v<x;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=b[v&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(b[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=b[m+34&127],d=b[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,b[m]=h^d;c.w=y,c.X=b,c.i=m}l(u,o)}function i(o,u){return u.i=o.i,u.w=o.w,u.X=o.X.slice(),u}function s(o,u){o==null&&(o=+new Date);var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.xor4096=s})(hre,t)}(l0)),l0.exports}var c0={exports:{}},gre=c0.exports,AO;function vre(){return AO||(AO=1,function(t){(function(e,n,r){function a(o){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,o===Math.floor(o)?(u.a=o/4294967296|0,u.b=o|0):l+=o;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function i(o,u){return u.a=o.a,u.b=o.b,u.c=o.c,u.d=o.d,u}function s(o,u){var l=new a(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&i(c,l),f.state=function(){return i(l,{})}),f}n&&n.exports?n.exports=s:this.tychei=s})(gre,t)}(c0)),c0.exports}var f0={exports:{}};const yre={},bre=Object.freeze(Object.defineProperty({__proto__:null,default:yre},Symbol.toStringTag,{value:"Module"})),wre=wj(bre);var xre=f0.exports,IO;function Nre(){return IO||(IO=1,function(t){(function(e,n,r){var a=256,i=6,s=52,o="random",u=r.pow(a,i),l=r.pow(2,s),c=l*2,f=a-1,d;function h(S,C,E){var A=[];C=C==!0?{entropy:!0}:C||{};var k=b(y(C.entropy?[S,w(n)]:S??x(),3),A),D=new m(A),I=function(){for(var $=D.g(i),O=u,B=0;$<l;)$=($+B)*a,O*=a,B=D.g(1);for(;$>=c;)$/=2,O/=2,B>>>=1;return($+B)/O};return I.int32=function(){return D.g(4)|0},I.quick=function(){return D.g(4)/4294967296},I.double=I,b(w(D.S),n),(C.pass||E||function($,O,B,z){return z&&(z.S&&v(z,D),$.state=function(){return v(D,{})}),B?(r[o]=$,O):$})(I,k,"global"in C?C.global:this==r,C.state)}function m(S){var C,E=S.length,A=this,k=0,D=A.i=A.j=0,I=A.S=[];for(E||(S=[E++]);k<a;)I[k]=k++;for(k=0;k<a;k++)I[k]=I[D=f&D+S[k%E]+(C=I[k])],I[D]=C;(A.g=function($){for(var O,B=0,z=A.i,L=A.j,F=A.S;$--;)O=F[z=f&z+1],B=B*a+F[f&(F[z]=F[L=f&L+O])+(F[L]=O)];return A.i=z,A.j=L,B})(a)}function v(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function y(S,C){var E=[],A=typeof S,k;if(C&&A=="object")for(k in S)try{E.push(y(S[k],C-1))}catch{}return E.length?E:A=="string"?S:S+"\0"}function b(S,C){for(var E=S+"",A,k=0;k<E.length;)C[f&k]=f&(A^=C[f&k]*19)+E.charCodeAt(k++);return w(C)}function x(){try{var S;return d&&(S=d.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),w(S)}catch{var C=e.navigator,E=C&&C.plugins;return[+new Date,e,E,e.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(b(r.random(),n),t.exports){t.exports=h;try{d=wre}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:xre,[],Math)}(f0)),f0.exports}var xN,kO;function Sre(){if(kO)return xN;kO=1;var t=ore(),e=lre(),n=fre(),r=pre(),a=mre(),i=vre(),s=Nre();return s.alea=t,s.xor128=e,s.xorwow=n,s.xorshift7=r,s.xor4096=a,s.tychei=i,xN=s,xN}var mg=Sre();const mz=Vc(mg);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZT{constructor(e,n,r,a,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const s=i||Math.random();this.random=mg.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let e,n,r=!1;for(;!r;){let a,i,s;do a=2*this.random()-1,i=2*this.random()-1,s=a*a+i*i;while(s>=1||s===0);const o=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*a*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Cre{constructor(e,n,r,a){this.alpha=e,this.beta=1/n,this.dtype=r;const i=a||Math.random();this.randu=mg.alea(i.toString()),this.randn=new ZT(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,a,i,s;for(;;){do a=this.randn.nextValue(),s=1+this.c*a;while(s<=0);if(s*=s*s,e=a*a,n=1-.331*e*e,r=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Ere{constructor(e=0,n=1,r,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=mg.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t,e,n=1,r="float32",a){if(Li(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new Cre(e,n,r,a),s=en(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const Dre=de({randomGamma_:Tre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $re(t,e=0,n=1,r,a){if(Li(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new ZT(e,n,r,!1,a),s=en(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const QT=de({randomNormal_:$re});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Are(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return QT(t,0,1,e,n)}const Ire=de({randomStandardNormal_:Are});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kre(t,e=0,n=1,r="float32",a){Li(t);const i=en(t,r),s=new Ere(e,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}const Hc=de({randomUniform_:kre});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(t,e,n,r){return Hc(t,e,n,"int32",r)}const Ore=de({randomUniformInt_:_re});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dd(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:t,stop:e,step:n,dtype:r};return me.runKernel(dT,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t){const n={input:Q(t,"input","real")};return me.runKernel(pT,n)}const qh=de({real_:Fre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rre(t){const n={x:Q(t,"x","reciprocal")};return me.runKernel(Wm,n)}const gz=de({reciprocal_:Rre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t){const n={x:Q(t,"x","relu")};return me.runKernel(qm,n)}const Ao=de({relu_:Mre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(t){const n={x:Q(t,"x","relu6")};return me.runKernel(Hm,n)}const JT=de({relu6_:Pre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bre(t,e){const r={x:Q(t,"x","reverse")},a={dims:e};return me.runKernel(_b,r,a)}const ys=de({reverse_:Bre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t){const e=Q(t,"x","reverse");return Y(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),ys(e,0)}const zre=de({reverse1d_:Lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ure(t,e){const n=Q(t,"x","reverse");return Y(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ys(n,e)}const Vre=de({reverse2d_:Ure});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wre(t,e){const n=Q(t,"x","reverse");return Y(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ys(n,e)}const qre=de({reverse3d_:Wre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t,e){const n=Q(t,"x","reverse");return Y(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ys(n,e)}const jre=de({reverse4d_:Hre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gre(t){const n={x:Q(t,"x","round")};return me.runKernel(jm,n)}const eD=de({round_:Gre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xre(t){const n={x:Q(t,"x","rsqrt","float32")};return me.runKernel(Gm,n)}const tD=de({rsqrt_:Xre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kre(t){const n={x:Q(t,"x","selu")};return me.runKernel(Xm,n)}const nD=de({selu_:Kre});function Yre(t,e,n,r,a,i=[1,1],s="NHWC"){const o=Q(t,"x","separableConv2d"),u=Q(e,"depthwiseFilter","separableConv2d"),l=Q(n,"pointwiseFilter","separableConv2d");let c=o,f=!1;if(o.rank===3&&(f=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Y(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),Y(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),Y(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),Y(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const d=u.shape[2],h=u.shape[3];Y(l.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${l.shape[2]}.`);const m=cg(c,u,r,a,s,i),y=ll(m,l,1,"valid",s);return f?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const rD=de({separableConv2d_:Yre});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Zre(t,e){const n=Q(t,"x","setdiff1d"),r=Q(e,"y","setdiff1d");Y(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Y(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),Y(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const a=await n.data(),i=await r.data(),s=new Set(i);let o=0;for(let c=0;c<a.length;c++)s.has(a[c])||o++;const u=new Ar([o],n.dtype),l=new Ar([o],"int32");for(let c=0,f=0;c<a.length;c++)s.has(a[c])||(u.values[f]=a[c],l.values[f]=c,f++);return[u.toTensor(),l.toTensor()]}const Qre=Zre;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jre(t){const n={x:Q(t,"x","sign")};return me.runKernel(Zm,n)}const vz=de({sign_:Jre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t){const n={x:Q(t,"x","sin","float32")};return me.runKernel(Km,n)}const aD=de({sin_:eae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tae(t){const n={x:Q(t,"x","sinh")};return me.runKernel(Ym,n)}const iD=de({sinh_:tae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nae(t,e,n){const r=Q(t,"x","slice1d");return Y(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),dn(r,[e],[n])}const nw=de({slice1d_:nae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rae(t,e,n){const r=Q(t,"x","slice2d");return Y(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const sD=de({slice2d_:rae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae(t,e,n){const r=Q(t,"x","slice3d");return Y(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const rw=de({slice3d_:aae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t,e,n){const r=Q(t,"x","slice4d");return Y(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),dn(r,e,n)}const Hh=de({slice4d_:iae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t,e=-1){const n=Q(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},a={dim:e};return me.runKernel(Bb,r,a)}const aw=de({softmax_:sae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(XE,e)}const iw=de({fft_:oae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t){Y(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return me.runKernel(QE,e)}const jh=de({ifft_:uae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const a=be(t,[n,e]);r=jh(a)}else{const a=[n,2*(e-1)],i=be(qh(t),[n,e]),s=be(Gb(t),[n,e]),o=ys(dn(i,[0,1],[n,e-2]),1),u=ge(ys(dn(s,[0,1],[n,e-2]),1),Ct(-1)),l=wr([i,o],1),c=wr([s,u],1),f=be(sl(l,c),[a[0],a[1]]);r=jh(f)}if(r=qh(r),t.rank===3&&t.shape[0]!==0){const a=r,i=t.shape[0];r=be(r,[i,r.shape[0]/i,r.shape[1]]),a.dispose()}return r}const oD=de({irfft_:lae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(t,e,n=0){const a={x:Q(t,"x","split")},i={numOrSizeSplits:e,axis:n};return me.runKernel(Pb,a,i)}const hi=de({split_:cae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t,e){Y(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let a;if(e!=null&&e<n){const m=t.shape.map(y=>0),v=t.shape.map(y=>y);v[t.shape.length-1]=e,a=dn(t,m,v),n=e}else if(e!=null&&e>n){const m=t.shape.map(v=>v);m[t.shape.length-1]=e-n,a=wr([t,Tr(m)],t.shape.length-1),n=e}else a=t;const i=mn(a),s=be(sl(a,i),[r,n]),o=iw(s),u=Math.floor(n/2)+1,l=qh(o),c=Gb(o),f=hi(l,[u,n-u],l.shape.length-1),d=hi(c,[u,n-u],c.shape.length-1),h=a.shape.slice();return h[a.shape.length-1]=u,be(sl(f[0],d[0]),h)}const sw=de({rfft_:fae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t,e){let n=Q(t,"a","squaredDifference"),r=Q(e,"b","squaredDifference");[n,r]=ur(n,r),Ht(n.shape,r.shape);const a={a:n,b:r},i={};return me.runKernel(tg,a,i)}const uD=de({squaredDifference_:dae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pae(t,e){const n=Q(t,"x","squeeze","string_or_numeric");return be(n,bl(n.shape,e).newShape)}const jc=de({squeeze_:pae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t,e=0){const n=M0(t,"tensors","stack","string_or_numeric");Y(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Y(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,a={axis:e};return me.runKernel(Eb,r,a)}const wi=de({stack_:hae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mae(t,e=0){const r={x:Q(t,"x","step")},a={alpha:e};return me.runKernel(sg,r,a)}const Qd=de({step_:mae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t,e,n,r,a=0,i=0,s=0,o=0,u=0){const c={x:Q(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:u};return me.runKernel(ET,c,f)}const yz=de({stridedSlice_:gae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(t){const n={x:Q(t,"x","tan","float32")};return me.runKernel(rg,n)}const bz=de({tan_:vae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t,e){jd(t);const n=xl(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Nl(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ld(t,e,n){if(jd(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=xl(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t,e,n){if(jd(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=xl(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Nl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bae(t,e,n){if(jd(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=xl(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Nl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(t,e,n){if(jd(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=xl(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Nl(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xae(t,e,n){if(jd(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=xl(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Nl(t,e,r,n)}function wz(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(t.length<r+(n.rank-a))throw new Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+t.length-r)throw new Error(i+` update.rank != ${a+t.length-r}`);for(let s=0;s<a;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==t[s+r])throw new Error(i+` updates.shape[${s+a}] (${n.shape[s+a]}) != shape[${s+a}] (${t[s+a]})`)}function lD(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}wz(n,e,t)}function Gc(t,e,n){const r=e.shape.length,a=r>1?e.shape[r-1]:1,i=n.length;let s=1;for(let f=a;f<i;++f)s*=n[f];const o=a<1?1:a,u=Oe(e.shape)/o,l=[...Nt(n.slice(0,a)),1],c=Oe(n);return{sliceRank:a,numUpdates:u,sliceSize:s,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nae(t,e,n){const r=Q(t,"tensor","tensorScatterupdate"),a=Q(e,"indices","tensorScatterupdate","int32"),i=Q(n,"updates","tensorScatterupdate");if(lD(i,a,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const s={tensor:r,indices:a,updates:i},o={};return me.runKernel(vT,s,o)}const Sae=de({tensorScatterUpdate_:Nae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(t,e=1,n=!0){const r=Q(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${e}`);const i={x:r},s={k:e,sorted:n},[o,u]=me.runKernel(AT,i,s);return{values:o,indices:u}}const xz=de({topk_:Cae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eae(t,e=0,n=1,r,a){if(Li(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new ZT(e,n,r,!0,a),s=en(t,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}const cD=de({truncatedNormal_:Eae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tae(t,e=0){const n=Q(t,"x","unique","string_or_numeric");Y(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},a={axis:e},[i,s]=me.runKernel(kT,r,a);return{values:i,indices:s}}const Nz=de({unique_:Tae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dae(t,e,n){const r=Q(t,"x","unsortedSegmentSum"),a=Q(e,"segmentIds","unsortedSegmentSum","int32");Y(Nd(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:a},s={numSegments:n};return me.runKernel(Ub,i,s)}const fD=de({unsortedSegmentSum_:Dae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ae(t,e=0){const n=Q(t,"x","unstack","string_or_numeric");Y(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},a={axis:e};return me.runKernel(zb,r,a)}const bs=de({unstack_:$ae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aae(t,e){return KT(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sz(t,e=!0,n,r){return me.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dD(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=en(t,"int32"),a=en([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const s=r.indexToLoc(n[i]),o=i*t.length;a.values.set(s,o)}return a.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Iae(t){const e=Q(t,"condition","whereAsync","bool"),n=await e.data(),r=dD(e.shape,n);return t!==e&&e.dispose(),r}const Cz=Iae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kae(t,e,n){const r=Q(t,"tensor","boolMask"),a=Q(e,"mask","boolMask","bool"),i=n??0,s=a.rank,o=r.shape;Y(s>0,()=>"mask cannot be scalar"),Ei(o.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let v=i;v<i+s;v++)u*=o[v];const l=o.slice(0,i).concat([u],o.slice(i+s)),c=be(r,l),f=be(a,[-1]),d=await Cz(f),h=jc(d,[1]),m=hg(c,h,i);return t!==r&&r.dispose(),e!==a&&a.dispose(),h.dispose(),c.dispose(),f.dispose(),d.dispose(),m}const _ae=kae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oae(t,e,n){const r=Q(t,"x","transpose");if(e==null&&(e=r.shape.map((s,o)=>o).reverse()),Y(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{Y(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const a={x:r},i={perm:e};return r.dtype==="complex64"?Te(()=>{let s=qh(r),o=Gb(r);return s=me.runKernel(id,{x:s},i),o=me.runKernel(id,{x:o},i),n&&(o=Hn(o)),sl(s,o)}):me.runKernel(id,a,i)}const pn=de({transpose_:Oae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fae(t,e,n,r,a=!0){const i=Q(t,"v","movingAverage"),s=Q(e,"x","movingAverage"),o=Q(n,"decay","movingAverage");yJ(i,s),Y(fn(i.shape,s.shape),()=>"Shape mismatch in v and x");const u=Ct(1),l=ft(u,o);let c=ge(ft(s,i),l);if(a){Y(r!=null,()=>"When using zeroDebias: true, step is required.");const f=Q(r,"step","movingAverage");c=bt(c,ft(u,iu(o,f)))}return qe(i,c)}const Rae=de({movingAverage_:Fae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mae(t,e,n){Li(n);const r=Q(t,"indices","scatterND","int32"),a=Q(e,"updates","scatterND");lD(a,r,n);const i={indices:r,updates:a},s={shape:n};return me.runKernel(gT,i,s)}const Pae=de({scatterND_:Mae});function Bae(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const s=e.size;if(!(e.rank===0||e.rank===1&&s===a))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${a}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t,e,n,r=0){Li(n);const a=Q(t,"sparseIndices","sparseToDense","int32"),i=Q(e,"sparseValues","sparseToDense","string_or_numeric"),s=Q(r,"defaultValue","sparseToDense",i.dtype);Bae(a,i,n,s);const o={sparseIndices:a,sparseValues:i,defaultValue:s},u={outputShape:n};return me.runKernel(ST,o,u)}const zae=de({sparseToDense_:Lae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uae(t,e){const n=Q(e,"indices","gatherND","int32"),a={params:Q(t,"x","gatherND","string_or_numeric"),indices:n};return me.runKernel(ZE,a)}const Vae=de({gatherND_:Uae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wae(t,e){if(e==null)return t.shape.slice();if(fn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qae(t,e,n,r){const a=Q(t,"x","dropout");if(Y(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),Y(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof er?a.clone():a;const i=Wae(a,n),s=1-e,o=bt(pg(qe(Hc(i,0,1,"float32",r),s)),s);return ge(a,o)}const Ez=de({dropout_:qae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function pD(t,e,n){const r=1-t%2,a=new Float32Array(t);for(let i=0;i<t;++i){const s=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(s)}return ca(a,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hae(t,e,n=1){const r=Q(t,"predictions","inTopK"),a=Q(e,"targets","inTopK");Y(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Y(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),Ei(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];Y(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const s=await r.data(),o=await a.data(),[u,l]=[s.length/i,i],c=ta("bool",u);for(let f=0;f<u;f++){const d=f*l,h=s.subarray(d,d+l),m=[];for(let v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((v,y)=>y.value-v.value),c[f]=0;for(let v=0;v<n;v++)if(m[v].index===o[f]){c[f]=1;break}}return t!==r&&r.dispose(),e!==a&&a.dispose(),zs(c,a.shape,"bool")}const jae=Hae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(t,e,n,r,a,i="NHWC",s){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Y(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),Y(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),Y(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=i==="NHWC"?o.shape[3]:o.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];Y(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),Y(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ma("conv2dDerFilter",a,s);const f={x:o,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return me.runKernel(ME,f,d)}const hD=de({conv2DBackpropFilter_:Gae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ow(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ge(t,Qd(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function uw(t,e){let n=e;const r=_r(t.shape,e.shape);return r.length>0&&(n=ht(n,r)),be(n,t.shape)}function lw(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ao(t);if(e==="elu")return fg(t);if(e==="relu6")return JT(t);if(e==="prelu")return tw(t,n);if(e==="leakyrelu")return Xb(t,r);if(e==="sigmoid")return bo(t);throw new Error(`Unknown fused activation ${e}.`)}const cw=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xae({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",cw(me.state.gradientDepth,u)===!1){Y(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=ll(t,e,n,r,a,i,s);return o!=null&&(E=qe(E,o)),lw(E,u,l,c)}const f=Q(t,"x","conv2d","float32"),d=Q(e,"filter","conv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Ma("fused conv2d",r,s);const v=a==="NHWC"?h.shape[3]:h.shape[1];Y(d.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${d.shape[2]}.`),Y(aa(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=Vr(h.shape,d.shape,n,i,r,s);let b;o!=null&&(b=Q(o,"bias","fused conv2d"),[b]=ur(b,f),a==="NHWC"?Ht(y.outShape,b.shape):(Y(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),Y(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let x;if(l!=null){const E=l.shape;if(Y(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)Y(E[0]===1||E[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${y.outChannels}).`);else if(E.length===3)try{Ht(E,y.outShape)}catch{const k=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(k)}x=Q(l,"prelu weights","fused conv2d")}const w=(E,A)=>{Y(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[k,D,I,$]=A,O=ow(E,I,u);Y(ul(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const B=zT(D.shape,O,k,n,r),z=hD(D,O,k.shape,n,r),L=[B,z];if($!=null){const F=uw($,O);L.push(F)}return L},S={x:h,filter:d,bias:b,preluActivationWeights:x},C={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:c};return o==null?su((A,k,D)=>{let I=me.runKernel(_0,S,C);return D([k,A,I]),m&&(I=be(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:w}})(h,d):su((A,k,D,I)=>{let $=me.runKernel(_0,S,C);return I([k,A,$,D]),m&&($=be($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:w}})(h,d,b)}const Dz=de({fusedConv2d_:Xae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kae(t,e,n,r,a,i=[1,1],s){let o=t;t.rank===3&&(o=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:o,dy:u},c={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return me.runKernel(WE,l,c)}const $z=de({depthwiseConv2dNativeBackpropFilter_:Kae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yae(t,e,n,r,a,i=[1,1],s){let o=e,u=!1;e.rank===3&&(u=!0,o=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:o,filter:n},c={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:t},f=me.runKernel(qE,l,c);return u?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Az=de({depthwiseConv2dNativeBackpropInput_:Yae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zae({x:t,filter:e,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:o,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(cw(me.state.gradientDepth,u)===!1){let C=cg(t,e,n,r,a,i,s);return o!=null&&(C=qe(C,o)),lw(C,u,l,c)}const f=Q(t,"x","depthwiseConv2d","float32"),d=Q(e,"filter","depthwiseConv2d","float32");let h=f,m=!1;f.rank===3&&(m=!0,h=be(f,[1,f.shape[0],f.shape[1],f.shape[2]])),Y(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),Y(d.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),Y(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),i==null&&(i=[1,1]),Y(aa(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ma("fused depthwiseConv2d",r,s);const v=Vr(h.shape,d.shape,n,i,r,s,!0);let y;o!=null&&(y=Q(o,"bias","fused conv2d"),[y]=ur(y,f),Ht(v.outShape,y.shape));let b;l!=null&&(b=Q(l,"prelu weights","fused depthwiseConv2d"));const x=(C,E)=>{Y(ul(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[A,k,D,I]=E,$=ow(C,D,u),O=Az(k.shape,$,A,n,r,i,s),B=$z(k,$,A.shape,n,r,i,s);if(I!=null){const z=uw(y,$);return[O,B,z]}return[O,B]},w={x:h,filter:d,bias:y,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s,activation:u,leakyreluAlpha:c};return o==null?su((E,A,k)=>{let D=me.runKernel(O0,w,S);return k([A,E,D]),m&&(D=be(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:x}})(h,d):su((E,A,k,D)=>{let I=me.runKernel(O0,w,S);return D([A,E,I,k]),m&&(I=be(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:x}})(h,d,y)}const Qae=de({fusedDepthwiseConv2d_:Zae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jae({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(cw(me.state.gradientDepth,i)===!1){let $=nn(t,e,n,r);return a!=null&&($=qe($,a)),lw($,i,s,o)}let u=Q(t,"a","fused matMul"),l=Q(e,"b","fused matMul");[u,l]=ur(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],m=u.shape.slice(0,-2),v=l.shape.slice(0,-2),y=Oe(m),b=Oe(v);Y(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=Ht(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([d,h]),S=n?be(u,[y,c,d]):be(u,[y,d,c]),C=r?be(l,[b,h,f]):be(l,[b,f,h]);let E;a!=null&&(E=Q(a,"bias","fused matMul"),[E]=ur(E,u),Ht(w,E.shape));let A;s!=null&&(A=Q(s,"prelu weights","fused matMul"));const k=($,O)=>{const[B,z,L,F]=O,R=ow(be($,L.shape),L,i);let W,M;if(!n&&!r?(W=nn(R,z,!1,!0),M=nn(B,R,!0,!1)):!n&&r?(W=nn(R,z,!1,!1),M=nn(R,B,!0,!1)):n&&!r?(W=nn(z,R,!1,!0),M=nn(B,R,!1,!1)):(W=nn(z,R,!0,!0),M=nn(R,B,!0,!0)),a!=null){const G=uw(F,R);return[W,M,G]}else return[W,M]},D={a:S,b:C,bias:E,preluActivationWeights:A},I={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return a==null?su((O,B,z)=>{const L=me.runKernel(k0,D,I);return z([O,B,L]),{value:be(L,w),gradFunc:k}})(S,C):su((O,B,z,L)=>{const F=me.runKernel(k0,D,I);return L([O,B,F,z]),{value:be(F,w),gradFunc:k}})(S,C,E)}const lC=de({fusedMatMul_:Jae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eie=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Dz,depthwiseConv2d:Qae,matMul:lC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tie(t){return pD(t,.54,.46)}const nie=de({hammingWindow_:tie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(t){return pD(t,.5,.5)}const Iz=de({hannWindow_:rie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aie(t,e,n,r=!1,a=0){let i=0;const s=[];for(;i+e<=t.size;)s.push(dn(t,i,e)),i+=n;if(r)for(;i<t.size;){const o=i+e-t.size,u=wr([dn(t,i,e-o),Yd([o],a)]);s.push(u),i+=n}return s.length===0?ld([],[0,e]):be(wr(s),[s.length,e])}const kz=de({frame_:aie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iie(t,e,n,r,a=Iz){r==null&&(r=Tz(e));const i=kz(t,e,n),s=ge(i,a(e));return sw(s,r)}const sie=de({stft_:iie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oie(t,e,n,r,a="bilinear",i=0){const s=Q(t,"image","cropAndResize"),o=Q(e,"boxes","cropAndResize","float32"),u=Q(n,"boxInd","cropAndResize","int32"),l=o.shape[0];Y(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),Y(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${o.shape}.`),Y(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${o.shape}.`),Y(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Y(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Y(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const c={image:s,boxes:o,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r};return me.runKernel(zE,c,f)}const uie=de({cropAndResize_:oie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(t){const e=Q(t,"image","flipLeftRight","float32");Y(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return me.runKernel(YE,n,{})}const cie=de({flipLeftRight_:lie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(t){const e=Q(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const a=new Array(e.rank);return a.fill(1,0,n),a[n]=3,us(e,a)}const die=de({grayscaleToRGB_:fie});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pie(t){const e=Q(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];Y(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Y(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const a=e.dtype,i=ot(e,"float32"),s=ca([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Zf("ij,j->i",i,s);break;case 3:o=Zf("ijk,k->ij",i,s);break;case 4:o=Zf("ijkl,l->ijk",i,s);break;case 5:o=Zf("ijklm,m->ijkl",i,s);break;case 6:o=Zf("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return o=Aa(o,-1),ot(o,a)}const hie=de({rgbToGrayscale_:pie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t,e,n=0,r=.5){const a=Q(t,"image","rotateWithOffset","float32");Y(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},s={radians:e,fillValue:n,center:r};return me.runKernel(_T,i,s)}const gie=de({rotateWithOffset_:mie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jd(t,e,n,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const s=t.shape[0];return n=Math.min(n,s),Y(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Y(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),Y(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),Y(e.rank===1,()=>"scores must be a 1D tensor"),Y(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),Y(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vie(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppression","float32"),s=Q(e,"scores","nonMaxSuppression","float32"),o=Jd(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return me.runKernel(sT,{boxes:i,scores:s},u)}const yie=de({nonMaxSuppression_:vie});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bie(t,e,n){const r=wie(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function wie(t,e,n){return Nie(t,e,n||xie)}function xie(t,e){return t>e?1:t<e?-1:0}function Nie(t,e,n){let r=0,a=t.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(t,e,n,r,a){return yD(t,e,n,r,a,0)}function gD(t,e,n,r,a,i){return yD(t,e,n,r,a,0,!1,i,!0)}function vD(t,e,n,r,a,i){return yD(t,e,n,r,a,i,!0)}function yD(t,e,n,r,a,i,s=!1,o=!1,u=!1){const l=[];for(let y=0;y<e.length;y++)e[y]>a&&l.push({score:e[y],boxIndex:y,suppressBeginIndex:0});l.sort(_O);const c=i>0?-.5/i:0,f=[],d=[];for(;f.length<n&&l.length>0;){const y=l.pop(),{score:b,boxIndex:x,suppressBeginIndex:w}=y;if(b<a)break;let S=!1;for(let C=f.length-1;C>=w;--C){const E=Sie(t,x,f[C]);if(E>=r){S=!0;break}if(y.score=y.score*Cie(r,c,E),y.score<=a)break}y.suppressBeginIndex=f.length,S||(y.score===b?(f.push(x),d.push(y.score)):y.score>a&&bie(l,y,_O))}const h=f.length,m=n-h;o&&m>0&&(f.push(...new Array(m).fill(0)),d.push(...new Array(m).fill(0)));const v={selectedIndices:f};return s&&(v.selectedScores=d),u&&(v.validOutputs=h),v}function Sie(t,e,n){const r=t.subarray(e*4,e*4+4),a=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(o-i)*(u-s),m=(f-l)*(d-c);if(h<=0||m<=0)return 0;const v=Math.max(i,l),y=Math.max(s,c),b=Math.min(o,f),x=Math.min(u,d),w=Math.max(b-v,0)*Math.max(x-y,0);return w/(h+m-w)}function Cie(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function _O(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Eie(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY){const i=Q(t,"boxes","nonMaxSuppressionAsync"),s=Q(e,"scores","nonMaxSuppressionAsync"),o=Jd(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const u=await Promise.all([i.data(),s.data()]),l=u[0],c=u[1],{selectedIndices:f}=mD(l,c,n,r,a);return i!==t&&i.dispose(),s!==e&&s.dispose(),ca(f,"int32")}const Tie=Eie;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Die(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=Q(t,"boxes","nonMaxSuppression"),o=Q(e,"scores","nonMaxSuppression"),u=Jd(s,o,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;const l={boxes:s,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},f=me.runKernel(uT,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const $ie=de({nonMaxSuppressionWithScore_:Die});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Aie(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){const s=Q(t,"boxes","nonMaxSuppressionAsync"),o=Q(e,"scores","nonMaxSuppressionAsync"),u=Jd(s,o,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;const l=await Promise.all([s.data(),o.data()]),c=l[0],f=l[1],{selectedIndices:d,selectedScores:h}=vD(c,f,n,r,a,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(d,"int32"),selectedScores:ca(h)}}const Iie=Aie;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=Q(t,"boxes","nonMaxSuppression"),o=Q(e,"scores","nonMaxSuppression"),u=Jd(s,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:s,scores:o},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},m=me.runKernel(oT,d,h);return{selectedIndices:m[0],validOutputs:m[1]}}const _ie=de({nonMaxSuppressionPadded_:kie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Oie(t,e,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){const s=Q(t,"boxes","nonMaxSuppressionAsync"),o=Q(e,"scores","nonMaxSuppressionAsync"),u=Jd(s,o,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[d,h]=await Promise.all([s.data(),o.data()]),{selectedIndices:m,validOutputs:v}=gD(d,h,l,c,f,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(m,"int32"),validOutputs:Ct(v,"int32")}}const Fie=Oie;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(t,e,n=!1,r=!1){const a=Q(t,"images","resizeBilinear");Y(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Y(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(kb,o,u);return s?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const _z=de({resizeBilinear_:Rie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(t,e,n=!1,r=!1){const a=Q(t,"images","resizeNearestNeighbor");Y(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),Y(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Y(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Y(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;a.rank===3&&(s=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const o={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},l=me.runKernel(Ib,o,u);return s?be(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Oz=de({resizeNearestNeighbor_:Mie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pie(t,e="binary",n=!1,r=.5){const a=Q(t,"image","threshold"),i=.2989,s=.587,o=.114,u=a.shape[0]*a.shape[1];let l=ge(ca([r]),255),c,f,d,h;if(Y(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),Y(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),Y(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),Y(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),a.shape[2]===3){[c,f,d]=hi(a,[1,1,1],-1);const y=ge(c,i),b=ge(f,s),x=ge(d,o);h=qe(qe(y,b),x)}else h=t;if(e==="otsu"){const y=UL(ot(eD(h),"int32"),zs([]),256);l=Bie(y,u)}const m=n?qc(h,l):Ti(h,l);return ot(ge(m,255),"int32")}function Bie(t,e){let n=ca([-1]),r=ca([0]),a=ca([0]),i,s,o,u,l,c;for(let f=0;f<t.size-1;f++){i=dn(t,0,f+1),s=dn(t,f+1),l=bt(ht(i),e),c=bt(ht(s),e);const d=ht(ge(i,Dd(0,i.size)));o=bt(d,ht(i));const h=Yd(s.shape,i.size),m=qe(Dd(0,s.size),h),v=ge(s,m);u=bt(ht(v),ht(s));const y=ft(o,u),b=ft(o,u),x=ge(l,c);a=ge(ge(x,y),b);const w=Ti(a,r);r=pa(w,a,r),n=pa(w,ca([f]),n)}return n}const Lie=de({threshold_:Pie});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zie(t,e,n="nearest",r="constant",a=0,i){const s=Q(t,"image","transform","float32"),o=Q(e,"transforms","transform","float32");Y(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),Y(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Y(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const u={image:s,transforms:o},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return me.runKernel(IT,u,l)}const Uie=de({transform_:zie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vie(t,e,n){const r=Q(t,"a","bandPart");Y(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const a=r.shape,[i,s]=r.shape.slice(-2);let o,u;typeof e=="number"?(Y(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Y(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=Q(e<0?i:e,"numLower","bandPart")):(Y(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=pa(Wh(e,0),i,_c(e,i))),typeof n=="number"?(Y(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Y(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),u=Q(n<0?s:n,"numUpper","bandPart")):(Y(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=pa(Wh(n,0),s,_c(n,s)));const l=be(Dd(0,i,1,"int32"),[-1,1]),c=Dd(0,s,1,"int32"),f=ft(l,c),d=So(qc(f,o),El(f,Hn(u))),h=Tr([i,s],r.dtype);return be(wi(bs(be(r,[-1,i,s])).map(m=>pa(d,m,h))),a)}const Wie=de({bandPart_:Vie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(t){let e;if(Array.isArray(t)){e=!1,Y(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=t[0].shape[0];for(let i=1;i<t.length;++i)Y(t[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${a})`)}else e=!0,t=hi(t,t.shape[0],0).map(a=>jc(a,[0]));Y(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let a=0;a<t.length;++a)n.push(me.tidy(()=>{let i=r[a];if(a>0)for(let s=0;s<a;++s){const o=ge(ht(ge(n[s],i)),n[s]);i=ft(i,o)}return bt(i,dg(i,"euclidean"))}));return e?wi(n,0):n}const Hie=de({gramSchmidt_:qie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(t,e=!1){if(Y(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return OO(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=bs(be(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach(u=>{const[l,c]=OO(u,e);a.push(l),i.push(c)});const s=be(wi(a,0),t.shape),o=be(wi(i,0),t.shape);return[s,o]}}function OO(t,e=!1){return me.tidy(()=>{Y(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let a=jT(n),i=Qo(t);const s=ld([[1]],[1,1]);let o=Qo(s);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=i,f=o,d=a;[o,i,a]=me.tidy(()=>{const h=dn(i,[l,l],[n-l,1]),m=dg(h),v=dn(i,[l,l],[1,1]),y=pa(Ti(v,0),ld([[-1]]),ld([[1]])),b=ft(v,ge(y,m)),x=bt(h,b);x.shape[0]===1?o=Qo(s):o=wr([s,dn(x,[1,0],[x.shape[0]-1,x.shape[1]])],0);const w=Hn(bt(nn(y,b),m)),S=dn(i,[l,0],[n-l,r]),C=ge(w,o),E=pn(o);if(l===0)i=ft(S,nn(C,nn(E,S)));else{const D=ft(S,nn(C,nn(E,S)));i=wr([dn(i,[0,0],[l,r]),D],0)}const A=pn(C),k=dn(a,[0,l],[n,a.shape[1]-l]);if(l===0)a=ft(k,nn(nn(k,o),A));else{const D=ft(k,nn(nn(k,o),A));a=wr([dn(a,[0,0],[n,l]),D],1)}return[o,i,a]}),rn([c,f,d])}return!e&&n>r&&(a=dn(a,[0,0],[n,r]),i=dn(i,[0,0],[r,r])),[a,i]})}const Gie=de({qr_:jie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qa;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(qa||(qa={}));function Xie(t,e,n=qa.SUM_BY_NONZERO_WEIGHTS){const r=Q(t,"losses","computeWeightedLoss");let a=null;e!=null&&(a=Q(e,"weights","computeWeightedLoss"));const i=a==null?r:ge(r,a);if(n===qa.NONE)return i;if(n===qa.SUM)return ht(i);if(n===qa.MEAN){if(a==null)return or(i);{const s=r.size/a.size,o=bt(ht(i),ht(a));return s>1?bt(o,Ct(s)):o}}if(n===qa.SUM_BY_NONZERO_WEIGHTS){if(a==null)return bt(ht(i),Ct(r.size));{const s=ge(a,pi(r.shape)),o=ot(ht(Td(s,Ct(0))),"float32");return bt(ht(i),o)}}throw Error(`Unknown reduction: ${n}`)}const mu=de({computeWeightedLoss_:Xie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t,e,n,r=qa.SUM_BY_NONZERO_WEIGHTS){const a=Q(t,"labels","absoluteDifference"),i=Q(e,"predictions","absoluteDifference");let s=null;n!=null&&(s=Q(n,"weights","absoluteDifference")),Ei(a.shape,i.shape,"Error in absoluteDifference: ");const o=Er(ft(a,i));return mu(o,s,r)}const Yie=de({absoluteDifference_:Kie});function Zie(t,e,n,r,a=qa.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","cosineDistance"),s=Q(e,"predictions","cosineDistance");let o=null;r!=null&&(o=Q(r,"weights","cosineDistance")),Ei(i.shape,s.shape,"Error in cosineDistance: ");const u=Ct(1),l=ft(u,ht(ge(i,s),n,!0));return mu(l,o,a)}const Qie=de({cosineDistance_:Zie});function Jie(t,e,n,r=qa.SUM_BY_NONZERO_WEIGHTS){let a=Q(t,"labels","hingeLoss");const i=Q(e,"predictions","hingeLoss");let s=null;n!=null&&(s=Q(n,"weights","hingeLoss")),Ei(a.shape,i.shape,"Error in hingeLoss: ");const o=Ct(1);a=ft(ge(Ct(2),a),o);const u=Ao(ft(o,ge(a,i)));return mu(u,s,r)}const ese=de({hingeLoss_:Jie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tse(t,e,n,r=1,a=qa.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","huberLoss"),s=Q(e,"predictions","huberLoss");let o=null;n!=null&&(o=Q(n,"weights","huberLoss")),Ei(i.shape,s.shape,"Error in huberLoss: ");const u=Ct(r),l=Er(ft(s,i)),c=_c(l,u),f=ft(l,c),d=qe(ge(Ct(.5),Pn(c)),ge(u,f));return mu(d,o,a)}const nse=de({huberLoss_:tse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rse(t,e,n,r=1e-7,a=qa.SUM_BY_NONZERO_WEIGHTS){const i=Q(t,"labels","logLoss"),s=Q(e,"predictions","logLoss");let o=null;n!=null&&(o=Q(n,"weights","logLoss")),Ei(i.shape,s.shape,"Error in logLoss: ");const u=Ct(1),l=Ct(r),c=Hn(ge(i,Mi(qe(s,l)))),f=ge(ft(u,i),Mi(qe(ft(u,s),l))),d=ft(c,f);return mu(d,o,a)}const ase=de({logLoss_:rse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t,e,n,r=qa.SUM_BY_NONZERO_WEIGHTS){const a=Q(t,"labels","meanSquaredError"),i=Q(e,"predictions","meanSquaredError");let s=null;n!=null&&(s=Q(n,"weights","meanSquaredError")),Ei(a.shape,i.shape,"Error in meanSquaredError: ");const o=uD(a,i);return mu(o,s,r)}const sse=de({meanSquaredError_:ise});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ose(t,e){const n=Q(t,"labels","sigmoidCrossEntropyWithLogits"),r=Q(e,"logits","sigmoidCrossEntropyWithLogits");Ei(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Ao(r),i=ge(r,n),s=Kb(bi(Hn(Er(r))));return qe(ft(a,i),s)}function use(t,e,n,r=0,a=qa.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"multiClassLabels","sigmoidCrossEntropy");const s=Q(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=Q(n,"weights","sigmoidCrossEntropy")),Ei(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=Ct(r),c=Ct(1),f=Ct(.5);i=qe(ge(i,ft(c,l)),ge(f,l))}const u=ose(i,s);return mu(u,o,a)}const lse=de({sigmoidCrossEntropy_:use});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cse(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return su((a,i,s)=>{const u=Yb(i,[n],!0),l=ft(ot(i,"float32"),u);s([a,l]);const c=Hn(ge(l,a));return{value:ht(c,[n]),gradFunc:(h,m)=>{const[v,y]=m,b=dr(h.shape,[n]);return[ge(be(h,b),ft(ot(v,"float32"),bi(y))),ge(be(h,b),ft(bi(y),ot(v,"float32")))]}}})(t,e)}function fse(t,e,n,r=0,a=qa.SUM_BY_NONZERO_WEIGHTS){let i=Q(t,"onehotLabels","softmaxCrossEntropy");const s=Q(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=Q(n,"weights","softmaxCrossEntropy")),Ei(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){const l=Ct(r),c=Ct(1),f=Ct(i.shape[1]);i=qe(ge(i,ft(c,l)),bt(l,f))}const u=cse(i,s);return mu(u,o,a)}const dse=de({softmaxCrossEntropy_:fse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(t,e,n,r){const a=Q(t,"indices","sparseFillEmptyRows","int32"),i=Q(e,"values","sparseFillEmptyRows"),s=Q(n,"denseShape","sparseFillEmptyRows","int32"),o=Q(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(a.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const u={indices:a,values:i,denseShape:s,defaultValue:o},l=me.runKernel(bT,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const hse=de({sparseFillEmptyRows_:pse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mse(t,e,n){const r=Q(t,"inputIndices","sparseReshape","int32"),a=Q(e,"inputShape","sparseReshape","int32"),i=Q(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(a.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const s={inputIndices:r,inputShape:a,newShape:i},o=me.runKernel(wT,s);return{outputIndices:o[0],outputShape:o[1]}}const gse=de({sparseReshape_:mse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t,e,n){const r=Q(t,"data","sparseSegmentMean"),a=Q(e,"indices","sparseSegmentMean","int32"),i=Q(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const s={data:r,indices:a,segmentIds:i};return me.runKernel(xT,s)}const yse=de({sparseSegmentMean_:vse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(t,e,n){const r=Q(t,"data","sparseSegmentSum"),a=Q(e,"indices","sparseSegmentSum","int32"),i=Q(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const s={data:r,indices:a,segmentIds:i};return me.runKernel(NT,s)}const wse=de({sparseSegmentSum_:bse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(t,e,n,r,a,i,s,o){const u=Q(t,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=Q(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:s,preserveShortSequences:o},f={data:u,dataSplits:l},d=me.runKernel(TT,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}const Nse=de({stringNGrams_:xse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t,e,n=!0){const r=Q(t,"input","stringSplit","string"),a=Q(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(a.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const i={skipEmpty:n},s={input:r,delimiter:a},o=me.runKernel(DT,s,i);return{indices:o[0],values:o[1],shape:o[2]}}const Cse=de({stringSplit_:Sse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e){const n=Q(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return me.runKernel($T,a,r)}const Tse=de({stringToHashBucketFast_:Ese});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dse(t,e,n,r=!0){const a=Q(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return me.runKernel(Lb,{x:a},i)}const $se=de({staticRegexReplace_:Dse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase={fft:iw,ifft:jh,rfft:sw,irfft:oD},Ise={hammingWindow:nie,hannWindow:Iz,frame:kz,stft:sie},go={flipLeftRight:cie,grayscaleToRGB:die,resizeNearestNeighbor:Oz,resizeBilinear:_z,rgbToGrayscale:hie,rotateWithOffset:gie,cropAndResize:uie,nonMaxSuppression:yie,nonMaxSuppressionAsync:Tie,nonMaxSuppressionWithScore:$ie,nonMaxSuppressionWithScoreAsync:Iie,nonMaxSuppressionPadded:_ie,nonMaxSuppressionPaddedAsync:Fie,threshold:Lie,transform:Uie},Fz={bandPart:Wie,gramSchmidt:Hie,qr:Gie},kse={absoluteDifference:Yie,computeWeightedLoss:mu,cosineDistance:Qie,hingeLoss:ese,huberLoss:nse,logLoss:ase,meanSquaredError:sse,sigmoidCrossEntropy:lse,softmaxCrossEntropy:dse},_se={sparseFillEmptyRows:hse,sparseReshape:gse,sparseSegmentMean:yse,sparseSegmentSum:wse},Ose={stringNGrams:Nse,stringSplit:Cse,stringToHashBucketFast:Tse,staticRegexReplace:$se};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fse=new Map,Rse=new Map;class ep{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class ss{constructor(){this.classNameMap={}}static getMap(){return ss.instance==null&&(ss.instance=new ss),ss.instance}static register(e){ss.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Xe(t,e,n){Y(t.className!=null,()=>"Class being registered does not have the static className property defined."),Y(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),Y(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,a=e+">"+r;return ss.register(t),Fse.set(a,t),Rse.set(t,a),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dl extends ep{minimize(e,n=!1,r){const{value:a,grads:i}=this.computeGradients(e,r);if(r!=null){const s=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(s)}else this.applyGradients(i);return rn(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return ane(e,n)}dispose(){this.iterations_!=null&&rn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ct(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Dl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rz extends Dl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r],s=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accum_grad`,variable:Te(()=>mn(i).variable(s))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${r}/accum_var`,variable:Te(()=>mn(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedGrads[a].variable,l=this.accumulatedUpdates[a].variable;Te(()=>{const c=qe(ge(u,this.rho),ge(Pn(o),1-this.rho)),f=ge(bt(na(qe(l,this.epsilon)),na(qe(u,this.epsilon))),o),d=qe(ge(l,this.rho),ge(Pn(f),1-this.rho));u.assign(c),l.assign(d);const h=qe(ge(f,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(rn(this.accumulatedGrads.map(e=>e.variable)),rn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mz extends Dl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${r}/accumulator`,variable:Te(()=>Yd(i.shape,this.initialAccumulatorValue).variable(!1))});const s=Array.isArray(e)?e[a].tensor:e[r];if(s==null)return;const o=this.accumulatedGrads[a].variable;Te(()=>{const u=qe(o,Pn(s));o.assign(u);const l=qe(ge(bt(s,na(qe(u,me.backend.epsilon()))),-this.learningRate),i);i.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&rn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pz extends Dl{static get className(){return"Adam"}constructor(e,n,r,a=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Te(()=>{this.accBeta1=Ct(n).variable(),this.accBeta2=Ct(r).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=ft(1,this.accBeta1),a=ft(1,this.accBeta2);n.forEach((i,s)=>{const o=me.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:Te(()=>mn(o).variable(u))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:Te(()=>mn(o).variable(u))});const l=Array.isArray(e)?e[s].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,d=qe(ge(c,this.beta1),ge(l,1-this.beta1)),h=qe(ge(f,this.beta2),ge(Pn(l),1-this.beta2)),m=bt(d,r),v=bt(h,a);c.assign(d),f.assign(h);const y=qe(ge(bt(m,qe(na(v),this.epsilon)),-this.learningRate),o);o.assign(y)}),this.accBeta1.assign(ge(this.accBeta1,this.beta1)),this.accBeta2.assign(ge(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&rn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Te(()=>{this.accBeta1.assign(iu(this.beta1,this.iterations_+1)),this.accBeta2.assign(iu(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bz extends Dl{static get className(){return"Adamax"}constructor(e,n,r,a=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Te(()=>{this.iteration=Ct(0).variable(),this.accBeta1=Ct(n).variable()}),a==null&&(this.epsilon=me.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=ft(1,this.accBeta1),a=bt(-this.learningRate,qe(ge(this.iteration,this.decay),1));n.forEach((i,s)=>{const o=me.registeredVariables[i],u=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:mn(o).variable(u)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:mn(o).variable(u)});const l=Array.isArray(e)?e[s].tensor:e[i];if(l==null)return;const c=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,d=qe(ge(c,this.beta1),ge(l,1-this.beta1)),h=ge(f,this.beta2),m=Er(l),v=hu(h,m);c.assign(d),f.assign(v);const y=qe(ge(bt(a,r),bt(d,qe(v,this.epsilon))),o);o.assign(y)}),this.iteration.assign(qe(this.iteration,1)),this.accBeta1.assign(ge(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&rn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bD extends Dl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=Array.isArray(e)?e[a].tensor:e[r];if(i==null)return;const s=me.registeredVariables[r];Te(()=>{const o=qe(ge(this.c,i),s);s.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Lr(Ct(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lz extends bD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Ct(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${r}/momentum`,variable:Te(()=>mn(i).variable(!1))});const s=this.accumulations[a].variable,o=Array.isArray(e)?e[a].tensor:e[r];o!=null&&Te(()=>{let u;const l=qe(ge(this.m,s),o);this.useNesterov?u=qe(ge(this.c,qe(o,ge(l,this.m))),i):u=qe(ge(this.c,l),i),s.assign(l),i.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&rn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zz extends Dl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,a=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=me.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,a)=>{const i=me.registeredVariables[r],s=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${r}/rms`,variable:Te(()=>mn(i).variable(s))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${r}/momentum`,variable:Te(()=>mn(i).variable(s))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${r}/mg`,variable:Te(()=>mn(i).variable(s))});const o=Array.isArray(e)?e[a].tensor:e[r];if(o==null)return;const u=this.accumulatedMeanSquares[a].variable,l=this.accumulatedMoments[a].variable;Te(()=>{const c=qe(ge(u,this.decay),ge(Pn(o),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[a].variable,d=qe(ge(f,this.decay),ge(o,1-this.decay)),h=bt(ge(o,this.learningRate),na(ft(c,qe(Pn(d),this.epsilon)))),m=qe(ge(l,this.momentum),h);u.assign(c),f.assign(d),l.assign(m);const v=ft(i,m);i.assign(v)}else{const f=qe(ge(u,this.decay),ge(Pn(o),1-this.decay)),d=qe(ge(l,this.momentum),bt(ge(o,this.learningRate),na(qe(f,this.epsilon))));u.assign(f),l.assign(d);const h=ft(i,d);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&rn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&rn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&rn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mse=[Rz,Mz,Pz,Bz,Lz,zz,bD];function Pse(){for(const t of Mse)Xe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bse="model",Lse=".json",zse=".weights.bin";function FO(t){return new Promise(e=>setTimeout(e)).then(t)}class Oc{constructor(e){if(!Ae().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Oc.URL_SCHEME)&&(e=e.slice(Oc.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Bse),this.modelJsonFileName=e+Lse,this.weightDataFileName=e+zse}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Gs.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const a=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=yL(e,a),s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=s,await FO(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await FO(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:og(e)}}}}Oc.URL_SCHEME="downloads://";class Use{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=a=>{const i=JSON.parse(a.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}const u=RT(i,l=>this.loadWeights(l));e(u)},r.onerror=a=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const s of e)n.push(...s.weights),r.push(...s.paths);const a=this.checkManifestAndWeightFiles(e),i=r.map(s=>this.loadWeightsFile(s,a[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(e,n){return new Promise((r,a)=>{const i=new FileReader;i.onload=s=>{const o=s.target.result;r(o)},i.onerror=s=>a(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>SO(i.name)),a={};for(const i of e)i.paths.forEach(s=>{const o=SO(s);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);a[s]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return a}}const Vse=t=>Ae().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Oc.URL_SCHEME)?Wse(t.slice(Oc.URL_SCHEME.length)):null;Jn.registerSaveRouter(Vse);function Wse(t="model"){return new Oc(t)}function qse(t){return new Use(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(t,e,n,r){s(t),n=n??0,r=r??1,o(n,r);let a=0;const i=u=>(u.then(l=>{const c=n+ ++a/t.length*(r-n);return e(c),l}),u);function s(u){Y(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function o(u,l){Y(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),Y(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),Y(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Uz(t,e){e==null&&(e={});const n=e.fetchFunc==null?Ae().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await RO(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(o):await RO(o,e.onProgress,.5,1)}function Hse(t,e){var n;const r=e.fetchFunc==null?Ae().platform.fetch:e.fetchFunc;let a=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async s=>{for(var o;a<t.length;){i||(i=(await r(t[a],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await i.read();if(u){a++,i=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,a/t.length);continue}s.enqueue(l);return}s.close()}})}async function jse(t,e="",n,r){return Vz(s=>Uz(s,{requestInit:r}))(t,e,n)}function Vz(t){return async(e,n="",r)=>{const a=e.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((h,m)=>{let v=0;h.weights.forEach(y=>{const b="quantization"in y?y.quantization.dtype:y.dtype,x=Dc[b]*Oe(y.shape),w=()=>{a[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:y,groupOffset:v,sizeBytes:x})};r!=null?r.forEach((S,C)=>{S===y.name&&(w(),s[C]=!0)}):w(),o.push(y.name),v+=x})}),!s.every(h=>h)){const h=r.filter((m,v)=>!s[v]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const u=a.reduce((h,m,v)=>(m&&h.push(v),h),[]),l=[];u.forEach(h=>{e[h].paths.forEach(m=>{const v=n+(n.endsWith("/")?"":"/")+m;l.push(v)})});const c=await t(l),f={};let d=0;return u.forEach(h=>{const m=e[h].paths.length,v=new Gs(c.slice(d,d+m));i[h].forEach(b=>{const x=v.slice(b.groupOffset,b.groupOffset+b.sizeBytes),w=hL(x,[b.manifestEntry]);for(const S in w)f[S]=w[S]}),d+=m}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse="application/octet-stream",Xse="application/json";class wD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(Y(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ae().platform.fetch,Y(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Y(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a=yL(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:Xse}),"model.json"),e.weightData!=null){const s=Gs.join(e.weightData);n.body.append("model.weights.bin",new Blob([s],{type:Gse}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:og(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let s=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?s+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":s+=" Please make sure the server is serving valid JSON for this request.",new Error(s)}const r=n.modelTopology,a=n.weightsManifest;if(r==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return RT(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=rC(e.weightsManifest),a=()=>Hse(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:a})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,a]=Kse(n),i=this.weightPathPrefix||r,s=[],o=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(l)):s.push(i+l+a);return this.weightUrlConverter&&s.push(...await Promise.all(o)),s}async loadWeights(e){const n=await this.getWeightUrls(e),r=rC(e),a=await Uz(n,this.loadOptions);return[r,a]}}wD.URL_SCHEME_REGEX=/^https?:\/\//;function Kse(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),a=n>e?t.substring(n):"";return[r+"/",a]}function cC(t){return t.match(wD.URL_SCHEME_REGEX)!=null}const Wz=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>cC(r)):n=cC(t),n)return xD(t,e)}return null};Jn.registerSaveRouter(Wz);Jn.registerLoadRouter(Wz);function xD(t,e){return new wD(t,e)}function Yse(t,e){return xD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class qz{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Zse{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Qse(t,e,n,r){const a=arguments;return new Zse(Hz(...a))}function Hz(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new NN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new NN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new NN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Jse(t){return new qz(t)}function eoe(t){return new qz(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jz=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Gs,browserFiles:qse,browserHTTPRequest:Yse,concatenateArrayBuffers:vL,copyModel:JJ,decodeWeights:hL,decodeWeightsStream:gL,encodeWeights:nC,fromMemory:Qse,fromMemorySync:Hz,getLoadHandlers:LJ,getModelArtifactsForJSON:RT,getModelArtifactsForJSONSync:bL,getModelArtifactsInfoForJSON:og,getSaveHandlers:wL,getWeightSpecs:rC,http:xD,isHTTPScheme:cC,listModels:ZJ,loadWeights:jse,moveModel:eee,registerLoadRouter:BJ,registerSaveRouter:PJ,removeModel:QJ,weightsLoaderFactory:Vz,withSaveHandler:Jse,withSaveHandlerSync:eoe},Symbol.toStringTag,{value:"Module"}));function ND(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Oe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const a=e.shape,i=a[a.length-1];let s=1;for(let f=0;f<a.length-1;++f)s*=a[f];const o=t.shape,u=a.slice();u.pop();let l=1;for(let f=i;f<n;++f)l*=o[f],u.push(o[f]);const c=[...Nt(t.shape).map(f=>f/l),1].slice(0,i);return[u,s,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fC=-2,toe=-1;function SD(t,e,n){const r=t.shape.length;Y(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Y(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let a=0;a<r;++a)Y(e[a]+n[a]<=t.shape[a],()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function noe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function CD(t,e,n){const r=[];for(let a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function Gz(t,e,n,r){const a=[...t];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[e]=1:(a.splice(e,0,1),a.pop());return a}function Xz(t,e,n){return n<=t?n:n-(e-1)}function Kz(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function roe(t,e,n,r,a,i,s,o,u){const l=t.length;let c=new Array(l),f=new Array(l),d=new Array(l);if(e.length&&n>0){const h=e[0],m=n+1;c=Yz(s,h,m,r,t),f=Zz(o,h,m,a,t),d=Gz(i,h,m,t)}else for(let h=0;h<l;h++)c[h]=Jz(s,r,i,t,h,u),f[h]=e5(o,a,i,t,h,u),d[h]=Qz(i,h,u);return{begin:c,end:f,strides:d}}function Yz(t,e,n,r,a){const i=[...a],s=Kz(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{const u=Xz(e,n,o);let l=r[u];t&1<<u&&(l=0),i[o]=l}return i}function Zz(t,e,n,r,a){const i=[...a],s=Kz(n,e);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const u=Xz(e,n,o);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[o]=l}for(let o=0;o<i.length;o++){const u=a[o];i[o]<0&&(i[o]+=u),i[o]=Ec(0,i[o],a[o])}return i}function Qz(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function Jz(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);const u=r[a];return s<0&&(s+=u),s=Ec(0,s,u-1),s}function e5(t,e,n,r,a,i){let s=e[a];const o=n[a]||1;(t&1<<a||i&1<<a||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);const u=r[a];return s<0&&(s+=u),o>0?s=Ec(0,s,u):s=Ec(-1,s,u-1),s}function ED(t,e,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(e[a]>0||n[a]!==t[a])return!1;return!0}function TD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function fw(t,e,n){let r;const a=t.shape.length;typeof e=="number"?r=[e,...new Array(a-1).fill(0)]:e.length<a?r=e.concat(new Array(a-e.length).fill(0)):r=e.slice(),r.forEach(s=>{Y(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((s,o)=>s>=0?s:(Y(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function DD(t,e,n,r,a,i,s,o,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:u};for(let w=0;w<f.dims;w++)c&&1<<w&o&&f.numAddAxisAfterEllipsis++,1<<w&s&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const d={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};aoe(f,d);let h=!0,m=!0,v=!0;const y=[],b=[];for(let w=0;w<t.length;++w){if(d.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const S=!!(d.shrinkAxisMask&1<<w),C=t[w];if(C===-1){y.push(S?1:-1);continue}const E=[d.beginMask&1<<w,d.endMask&1<<w],A=[d.strides[w]>0?0:-1,d.strides[w]>0?C:C-1];if(S&&d.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&d.strides[w]===1;const k=!!(d.beginMask&1<<w&&d.endMask&1<<w);if(d.beginValid&&d.endValid){if(S){const O=d.begin[w]<0?C+d.begin[w]:d.begin[w];if(d.begin[w]=O,d.end[w]=d.begin[w]+1,O<0||O>=C)throw Error(`slice index ${d.begin[w]} of dimension ${w} out of bounds.`)}else d.begin[w]=MO(d.begin[w],0,d.strides[w],C,E,A),d.end[w]=MO(d.end[w],1,d.strides[w],C,E,A);const $=d.strides[w]===1&&d.begin[w]===0&&d.end[w]===C;h=h&&$,m=m&&(w===0&&d.strides[w]===1||$)}else h=h&&d.strides[w]===1&&k,m=m&&(w===0&&d.strides[w]===1||k);let D,I=!1;if(d.beginValid&&d.endValid?(D=d.end[w]-d.begin[w],I=!0):S?(D=1,I=!0):k&&C>=0&&(d.strides[w]<0?D=-C:D=C,I=!0),I){let $;D===0||D<0!=d.strides[w]<0?$=0:$=Math.trunc(D/d.strides[w])+(D%d.strides[w]!==0?1:0),y.push($)}else y.push(-1)}for(let w=0;w<d.finalShapeGatherIndices.length;++w){const S=d.finalShapeGatherIndices[w];S>=0?b.push(y[S]):S===fC&&b.push(1)}return{finalShapeSparse:b.filter((w,S)=>d.finalShapeGatherIndices[S]!==fC),finalShape:b,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:d.begin,end:d.end,strides:d.strides}}function aoe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const a=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<a;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(fC),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(toe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function MO(t,e,n,r,a,i){if(a[e])return n>0?i[e]:i[e+1&1];{const s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}const ioe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:SD,computeFlatOffset:TD,computeOutShape:CD,getNormalizedAxes:roe,isSliceContinous:ED,maskToAxes:noe,parseSliceParams:fw,sliceInfo:DD,startForAxis:Jz,startIndicesWithElidedDims:Yz,stopForAxis:e5,stopIndicesWithElidedDims:Zz,stridesForAxis:Qz,stridesWithElidedDims:Gz},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class soe{static sgd(e){return new bD(e)}static momentum(e,n,r=!1){return new Lz(e,n,r)}static rmsprop(e,n=.9,r=0,a=null,i=!1){return new zz(e,n,r,a,i)}static adam(e=.001,n=.9,r=.999,a=null){return new Pz(e,n,r,a)}static adadelta(e=.001,n=.95,r=null){return new Rz(e,n,r)}static adamax(e=.002,n=.9,r=.999,a=null,i=0){return new Bz(e,n,r,a,i)}static adagrad(e,n=.1){return new Mz(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bf=soe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ooe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function t5(){return new Promise(t=>ooe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $D(t,e){const n=t[0].length;t.forEach((a,i)=>{Y(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),Y(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((a,i)=>{for(let s=0;s<n;s++)Y(s===e||a[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function wo(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ps;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Ps||(Ps={}));function n5(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${a+t}] = ${i} but shape[${a+t}] = ${o}`)}else r[s]=i}return r}function r5(t){const e={FIRST_DIM_SIZE:Ps.FIRST_DIM_SIZE,VALUE_ROWIDS:Ps.VALUE_ROWIDS,ROW_LENGTHS:Ps.ROW_LENGTHS,ROW_SPLITS:Ps.ROW_SPLITS,ROW_LIMITS:Ps.ROW_LIMITS,ROW_STARTS:Ps.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function a5(t){return t.length===0?0:t[0]===Ps.FIRST_DIM_SIZE?t.length-1:t.length}function i5(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const i=t[a],s=e[a+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${a-t.length}] = ${i} but ragged tensor input.flatValues.shape[${a-t.length}] = ${s}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AD=30;function dw(t){return t<=AD?t:GS(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ID(t,e,n){const r=n*(typeof t=="number"?t:t[0]),a=e*(typeof t=="number"?t:t[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(t,e,n,r=!0){let a=[];if(r)a=a.concat(e.slice(0)),a.push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);const i=e.length;for(let s=0;s<i;++s)a=a.concat([t[s+1]/e[s],e[s]]);a=a.concat(t.slice(i+1))}return a}function vg(t,e,n=!0){const r=[];if(n){r.push(e);for(let a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{const a=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):a.push(s);r.push(...a),r.push(0),r.push(...i)}return r}function yg(t,e,n,r=!0){const a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function kD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function _D(t,e,n){const r=t.slice(0,1);for(let a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pw=1.7580993408473768,hw=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=.3275911,FD=.254829592,RD=-.284496736,MD=1.421413741,PD=-1.453152027,BD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ou(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function s5(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function o5(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function u5(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function LD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function l5(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function c5(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let a=0;a<Math.ceil(t/2);a++){const i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function f5(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SN="->",uoe=/->/g,PO=",",BO="...";function zD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(uoe,"").length)/SN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${SN}").`);const[r,a]=t.split(SN);Y(r.indexOf(BO)===-1,()=>`The ellipsis notation ("${BO}") is not supported yet.`);const i=r.split(PO),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let d=0;d<a.length;++d){const h=a[d];if(!i.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let d=0;d<r.length;++d){const h=r[d];o.indexOf(h)===-1&&h!==PO&&o.push(h)}const u=new Array(i.length);for(let d=0;d<s;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);u[d]=[];for(let h=0;h<i[d].length;++h)u[d].push(o.indexOf(i[d][h]))}const l=o.length,c=a.length,f=[];for(let d=c;d<l;++d)f.push(d);return{allDims:o,summedDims:f,idDims:u}}function UD(t,e){let n=new Array(t);n.fill(-1);for(let a=0;a<e.length;++a)n[e[a]]=a;const r=[];for(let a=0;a<t;++a)n[a]===-1&&r.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:r}}function VD(t,e,n){const r=new Array(t);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let s=0;s<e[a].length;++s)r[e[a][s]]===void 0?r[e[a][s]]=i[s]:Y(r[e[a][s]]===i[s],()=>`Expected dimension ${r[e[a][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function WD(t,e){const n=t,r=[];let a=0;t.length===0&&n.push(-1),a=t.length+1;for(let s=0;s<a;++s)r.push([]);const i=[];for(let s=0;s<n.length;++s){const o=n[s],u=loe(e,o);for(const l of u)i.indexOf(l)===-1&&(r[s].push(l),i.push(l))}return{path:n,steps:r}}function qD(t){return t.every((e,n)=>e===n)}function loe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function HD(t,e,n=0){let r=[];if(typeof e=="number")Y(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((s,o)=>(o===-1&&(s+=1),s),0);Y(a<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const s=e.reduce((o,u)=>u>0?o+u:o);e[i]=t.shape[n]-s}Y(t.shape[n]===e.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function p5(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function h5(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function g5(t,e){return`size ${t} must be non-negative, not ${e}`}function v5(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function y5(t,e){const n=Oe(t),r=Oe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function b5(t,e){const n=Oe(t),r=Oe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(){return"segment ids must be >= 0"}function w5(){return"segment ids are not increasing"}function x5(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function N5(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5(t,e){let n=!1,r;for(t<=AD?(r=t,n=!0):r=GS(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=GS(t,r+1);return r}function C5(t,e,n){const r=[],a=t.length;for(let i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function jD(t,e,n,r){const a=e.shape.length,i=t.shape.length;if(r!==0&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const s=t.shape[n],o=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)o.push(t.shape[f]),u*=t.shape[f];for(let f=r;f<n;f++)o.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<a;f++)o.push(e.shape[f]);for(let f=n+1;f<i;f++)o.push(t.shape[f]),c*=t.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:s,outputShape:o}}const coe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:jD,computeOutShape:C5,segOpComputeOptimalWindowSize:S5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(t){try{return t.map(e=>al(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function E5(t){return t.map(e=>Ju(e))}const foe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:FD,ERF_A2:RD,ERF_A3:MD,ERF_A4:PD,ERF_A5:BD,ERF_P:OD,PARALLELIZE_THRESHOLD:AD,get RowPartitionType(){return Ps},SELU_SCALE:hw,SELU_SCALEALPHA:pw,applyActivation:lw,assertAndGetBroadcastShape:Ht,assertAxesAreInnerMostDims:ia,assertParamsConsistent:$D,assignToTypedArray:l5,axesAreInnerMostDims:HT,calculateShapes:Gc,checkEinsumDimSizes:VD,checkPadOnDimRoundingMode:Ma,combineLocations:ez,combineRaggedTensorToTensorShapes:n5,complexWithEvenIndex:o5,complexWithOddIndex:u5,computeConv2DInfo:Vr,computeConv3DInfo:Sl,computeDefaultPad:BT,computeDilation2DInfo:ug,computeOptimalWindowSize:dw,computeOutAndReduceShapes:Wr,computeOutShape:wo,computePool2DInfo:xs,computePool3DInfo:du,convertConv2DDataFormat:pu,decodeEinsumEquation:zD,eitherStridesOrDilationsAreOne:aa,expandShapeToKeepDim:dr,exponent:f5,exponents:c5,fromStringArrayToUint8:E5,fromUint8ToStringArray:uu,getAxesPermutation:nr,getBroadcastDims:Ed,getComplexWithIndex:LD,getEinsumComputePath:WD,getEinsumPermutation:UD,getFusedBiasGradient:uw,getFusedDyActivation:ow,getImageCenter:ID,getInnerMostAxes:pr,getPermuted:vg,getRaggedRank:a5,getReductionAxes:_r,getReshaped:gg,getReshapedPermuted:yg,getRowPartitionTypesHelper:r5,getSliceBeginCoords:kD,getSliceSize:_D,getSparseFillEmptyRowsIndicesDenseShapeMismatch:d5,getSparseFillEmptyRowsNegativeIndexErrorMessage:p5,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:h5,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:v5,getSparseReshapeInputOutputMismatchErrorMessage:b5,getSparseReshapeInputOutputMultipleErrorMessage:y5,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:m5,getSparseReshapeNegativeOutputDimErrorMessage:g5,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:N5,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:dC,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:w5,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:x5,getUndoAxesPermutation:Cl,isIdentityPermutation:qD,log:ZQ,mergeRealAndImagArrays:ou,prepareAndValidate:ND,prepareSplitSize:HD,segment_util:coe,shouldFuse:cw,slice_util:ioe,splitRealAndImagArrays:s5,stridesOrDilationsArePositive:Ic,tupleValuesAreOne:ul,upcastType:vi,validateDefaultValueShape:i5,validateInput:lD,validateUpdateShape:wz,warn:Oi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pse();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe=Ae();doe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ui;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(ui||(ui={}));var LO;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(LO||(LO={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const poe={};function T5(t){return poe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U(t,e,n,r,a){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const o=i.inputIndexStart,u=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,l=o<0?e.inputNames.length+o:o;if(i.type==="tensor")return Qr(e.inputNames[l],n,r,a);if(i.type==="tensors"){const d=e.inputs.slice(o,u);return e.inputNames.slice(o,u).filter((m,v)=>{var y;return((y=d[v])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(m=>Qr(m,n,r,a))}const c=Qr(e.inputNames[l],n,r,a),f=c.dataSync();return i.type==="number"?f[0]:ds(c.shape,f)}const s=e.attrParams[t];return s&&s.value}function Qr(t,e,n,r){const[a,i]=li(t,n);if(r!=null){const o=r.getHashTableHandleByName(a);if(o!=null)return o}const s=n.currentContextIds.find(o=>!!e[L0(a,o)]);return s!==void 0?e[L0(a,s)][i]:void 0}function zO(t,e,n){return e[L0(t,n.currentContextId)]}function jo(t,e){const[n,r,a]=li(t,e);return[L0(n,e&&e.currentContextId),r,a]}function L0(t,e){return e?`${t}-${e}`:t}function li(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let a;if(r.length===1)a=[t,0,void 0];else{const i=r[0],s=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);a=[i,o,s]}return n&&e.parseNodeNameCache.set(t,a),a}function d0(t,e,n){let r=U("pad",t,e,n);if(r==="explicit"){r=U("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)a[i][0]=r[i*2],a[i][1]=r[i*2+1];return a}return r}function Go(t){return t.kept?t:Qo(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hoe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],moe=Object.freeze(Object.defineProperty({__proto__:null,json:hoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const goe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],voe=Object.freeze(Object.defineProperty({__proto__:null,json:goe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yoe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],boe=Object.freeze(Object.defineProperty({__proto__:null,json:yoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const woe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],xoe=Object.freeze(Object.defineProperty({__proto__:null,json:woe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Noe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Soe=Object.freeze(Object.defineProperty({__proto__:null,json:Noe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Coe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Eoe=Object.freeze(Object.defineProperty({__proto__:null,json:Coe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Toe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Doe=Object.freeze(Object.defineProperty({__proto__:null,json:Toe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $oe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Aoe=Object.freeze(Object.defineProperty({__proto__:null,json:$oe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ioe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],koe=Object.freeze(Object.defineProperty({__proto__:null,json:Ioe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _oe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Ooe=Object.freeze(Object.defineProperty({__proto__:null,json:_oe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Foe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Roe=Object.freeze(Object.defineProperty({__proto__:null,json:Foe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Moe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Poe=Object.freeze(Object.defineProperty({__proto__:null,json:Moe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Boe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Loe=Object.freeze(Object.defineProperty({__proto__:null,json:Boe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zoe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Uoe=Object.freeze(Object.defineProperty({__proto__:null,json:zoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Voe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Woe=Object.freeze(Object.defineProperty({__proto__:null,json:Voe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qoe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Hoe=Object.freeze(Object.defineProperty({__proto__:null,json:qoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const joe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Goe=Object.freeze(Object.defineProperty({__proto__:null,json:joe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xoe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Koe=Object.freeze(Object.defineProperty({__proto__:null,json:Xoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yoe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Zoe=Object.freeze(Object.defineProperty({__proto__:null,json:Yoe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UO{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[moe,voe,boe,xoe,Soe,Eoe,Doe,Aoe,koe,Ooe,Roe,Poe,Loe,Uoe,Woe,Hoe,Goe,Koe,Zoe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,a)=>(r[a.tfOpName]=a,r),{})}transformGraph(e,n={}){const r=e.node,a=[],i=[],s=[],o=r.reduce((v,y)=>(v[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?a.push(v[y.name]):y.op==="Const"?i.push(v[y.name]):(y.input==null||y.input.length===0)&&s.push(v[y.name]),v),{});let u=[];const l=[];let c={},f={};n!=null&&(c=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));const d=Object.keys(o);d.forEach(v=>{const y=o[v];y.inputNames.forEach((b,x)=>{const[w,,S]=jo(b),C=o[w];if(C.outputs!=null){const E=C.outputs.indexOf(S);if(E!==-1){const A=`${w}:${E}`;y.inputNames[x]=A}}y.inputs.push(C),C.children.push(y)})}),Object.keys(f).length===0?d.forEach(v=>{const y=o[v];y.children.length===0&&l.push(y)}):Object.keys(f).forEach(v=>{const[y]=jo(v),b=o[y];b!=null&&(b.signatureKey=f[v],l.push(b))}),Object.keys(c).length>0?Object.keys(c).forEach(v=>{const[y]=jo(v),b=o[y];b&&(b.signatureKey=c[v],u.push(b))}):u=a;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((v,y)=>(v[y.signature.name]=this.mapFunction(y),v),{}));const m={nodes:o,inputs:u,outputs:l,weights:i,placeholders:a,signature:n,functions:h};return s.length>0&&(m.initNodes=s),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=T5(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(a=>a.startsWith("^")?a.slice(1):a),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((a,i)=>(a[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},a),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((a,i)=>{const s=i.type;let o;switch(i.type){case"string":o=pC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=pC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":o=wC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=wC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":o=mC(e.attr,i.tfName,i.defaultValue||0),o===void 0&&i.tfDeprecatedName&&(o=mC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":o=bC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=bC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":o=hC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=hC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":o=NC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=NC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":o=yC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=yC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":o=xC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=xC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":o=gC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=gC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":o=vC(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=vC(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":o=VO(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=VO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return a[i.name]={value:o,type:s},a},{})),r}mapFunction(e){const n=e.nodeDef,r=[],a=[];let i={};n!=null&&(i=n.reduce((f,d)=>(f[d.name]=this.mapNode(d),d.op==="Const"&&a.push(f[d.name]),f),{}));const s=[],o=[];e.signature.inputArg.forEach(f=>{const[d]=jo(f.name),h={name:d,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:GD(f.type),type:"dtype"}},children:[]};h.signatureKey=f.name,s.push(h),i[d]=h}),Object.keys(i).forEach(f=>{const d=i[f];d.inputNames.forEach((h,m)=>{const[v,,y]=jo(h),b=i[v];if(b.outputs!=null){const x=b.outputs.indexOf(y);if(x!==-1){const w=`${v}:${x}`;d.inputNames[m]=w}}d.inputs.push(b),b.children.push(d)})});const l=e.ret;e.signature.outputArg.forEach(f=>{const[d,h]=jo(l[f.name]),m=i[d];m!=null&&(m.defaultOutput=h,o.push(m))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:o,weights:a,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function Qoe(t){const e=Ae().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function D5(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):Qoe(t);return e?n:n.toLowerCase()}function pC(t,e,n,r=!1){const a=t[e];return a!=null?D5(a.s,r):n}function hC(t,e,n){const r=t[e];return r?r.b:n}function mC(t,e,n){const r=t[e]||{},a=r.i!=null?r.i:r.f!=null?r.f:n;return typeof a=="number"?a:parseInt(a,10)}function GD(t){switch(typeof t=="string"&&(t=ui[t]),t){case ui.DT_FLOAT:case ui.DT_HALF:return"float32";case ui.DT_INT32:case ui.DT_INT64:case ui.DT_INT8:case ui.DT_UINT8:return"int32";case ui.DT_BOOL:return"bool";case ui.DT_DOUBLE:return"float32";case ui.DT_STRING:return"string";case ui.DT_COMPLEX64:case ui.DT_COMPLEX128:return"complex64";default:return null}}function VO(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function gC(t,e,n){const r=t[e];return r&&r.type?GD(r.type):n}function vC(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(a=>GD(a)):n}function $5(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yC(t,e,n){const r=t[e];return r&&r.shape?$5(r.shape):n}function bC(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(a=>typeof a=="number"?a:parseInt(a,10)):n}function wC(t,e,n,r=!1){const a=t[e];return a&&a.list&&a.list.s?a.list.s.map(i=>D5(i,r)):n}function xC(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(a=>$5(a)):n}function NC(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Joe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(a=>this.getInput(a)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((a,i)=>(a[i]=this.getAttr(i),a),{}))}getInput(e){return Qr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Qr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return mC(this.node.rawAttrs,e,n);if(r.s!=null)return pC(this.node.rawAttrs,e,n);if(r.b!=null)return hC(this.node.rawAttrs,e,n);if(r.shape!=null)return yC(this.node.rawAttrs,e,n);if(r.type!=null)return gC(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bC(this.node.rawAttrs,e,n);if(r.list.s!=null)return wC(this.node.rawAttrs,e,n);if(r.list.shape!=null)return xC(this.node.rawAttrs,e,n);if(r.list.b!=null)return NC(this.node.rawAttrs,e,n);if(r.list.type!=null)return vC(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sa=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:fL,abs:Er,acos:AL,acosh:IL,add:qe,addN:mee,all:PT,any:P0,argMax:Cd,argMin:kL,asin:_L,asinh:OL,atan:FL,atan2:RL,atanh:ML,avgPool:qb,avgPool3d:PL,basicLSTMCell:Bee,batchNorm:lg,batchNorm2d:BL,batchNorm3d:LL,batchNorm4d:zL,batchToSpaceND:Hb,bincount:UL,bitwiseAnd:Gee,booleanMaskAsync:_ae,broadcastArgs:Kee,broadcastTo:ud,buffer:en,cast:ot,ceil:VL,clipByValue:yi,clone:Qo,complex:sl,concat:wr,concat1d:WL,concat2d:qL,concat3d:HL,concat4d:jL,conv1d:LT,conv2d:ll,conv2dTranspose:UT,conv3d:GL,conv3dTranspose:KL,cos:jb,cosh:VT,cosineWindow:pD,cumprod:B0,cumsum:WT,denseBincount:uC,depthToSpace:YL,depthwiseConv2d:cg,diag:yte,dilation2d:ZL,div:bt,divNoNan:QL,dot:JL,dropout:Ez,einsum:Zf,elu:fg,enclosingPowerOfTwo:Tz,ensureShape:$te,equal:Ws,erf:qT,euclideanNorm:nz,exp:bi,expandDims:Aa,expm1:rz,eye:jT,fft:iw,fill:Yd,floor:pg,floorDiv:MT,fused:eie,gather:hg,gatherND:Vae,greater:Ti,greaterEqual:El,ifft:jh,imag:Gb,image:go,inTopKAsync:jae,irfft:oD,isFinite:az,isInf:iz,isNaN:sz,leakyRelu:Xb,less:Wh,lessEqual:qc,linalg:Fz,linspace:ene,localResponseNormalization:oz,log:Mi,log1p:Kb,logSigmoid:uz,logSoftmax:GT,logSumExp:Yb,logicalAnd:So,logicalNot:Zb,logicalOr:XT,logicalXor:lz,losses:kse,lowerBound:gne,matMul:nn,max:ps,maxPool:Qb,maxPool3d:cz,maxPoolWithArgmax:wne,maximum:hu,mean:or,meshgrid:Sne,min:Vh,minimum:_c,mirrorPad:fz,mod:dz,moments:Jb,movingAverage:Rae,mul:ge,multiRNNCell:Ane,multinomial:kne,neg:Hn,norm:dg,notEqual:Td,oneHot:YT,ones:pi,onesLike:Pi,op:de,outerProduct:Mne,pad:Tl,pad1d:Lne,pad2d:Une,pad3d:Wne,pad4d:Hne,pool:pz,pow:iu,prelu:tw,print:$L,prod:hz,raggedGather:Jne,raggedRange:tre,raggedTensorToTensor:rre,rand:ire,randomGamma:Dre,randomNormal:QT,randomStandardNormal:Ire,randomUniform:Hc,randomUniformInt:Ore,range:Dd,real:qh,reciprocal:gz,relu:Ao,relu6:JT,reshape:be,reverse:ys,reverse1d:zre,reverse2d:Vre,reverse3d:qre,reverse4d:jre,rfft:sw,round:eD,rsqrt:tD,scalar:Ct,scatterND:Pae,searchSorted:KT,selu:nD,separableConv2d:rD,setdiff1dAsync:Qre,sigmoid:bo,sign:vz,signal:Ise,sin:aD,sinh:iD,slice:dn,slice1d:nw,slice2d:sD,slice3d:rw,slice4d:Hh,softmax:aw,softplus:Zd,spaceToBatchND:ew,sparse:_se,sparseToDense:zae,spectral:Ase,split:hi,sqrt:na,square:Pn,squaredDifference:uD,squeeze:jc,stack:wi,step:Qd,stridedSlice:yz,string:Ose,sub:ft,sum:ht,tan:bz,tanh:kc,tensor:zs,tensor1d:ca,tensor2d:ld,tensor3d:yae,tensor4d:bae,tensor5d:wae,tensor6d:xae,tensorScatterUpdate:Sae,tile:us,topk:xz,transpose:pn,truncatedNormal:cD,unique:Nz,unsortedSegmentSum:fD,unstack:bs,upperBound:Aae,variable:Sz,where:pa,whereAsync:Cz,zeros:Tr,zerosLike:mn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eue=(t,e,n,r=sa)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(U("a",t,e,n),U("b",t,e,n))];case"AddN":return[r.addN(U("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(U("a",t,e,n),U("b",t,e,n))];case"Mul":return[r.mul(U("a",t,e,n),U("b",t,e,n))];case"RealDiv":case"Div":return[r.div(U("a",t,e,n),U("b",t,e,n))];case"DivNoNan":return[r.divNoNan(U("a",t,e,n),U("b",t,e,n))];case"FloorDiv":return[r.floorDiv(U("a",t,e,n),U("b",t,e,n))];case"Sub":return[r.sub(U("a",t,e,n),U("b",t,e,n))];case"Minimum":return[r.minimum(U("a",t,e,n),U("b",t,e,n))];case"Maximum":return[r.maximum(U("a",t,e,n),U("b",t,e,n))];case"Pow":return[r.pow(U("a",t,e,n),U("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(U("a",t,e,n),U("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tue=(t,e,n,r=sa)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(U("x",t,e,n))];case"Acos":return[r.acos(U("x",t,e,n))];case"Acosh":return[r.acosh(U("x",t,e,n))];case"Asin":return[r.asin(U("x",t,e,n))];case"Asinh":return[r.asinh(U("x",t,e,n))];case"Atan":return[r.atan(U("x",t,e,n))];case"Atan2":return[r.atan2(U("x",t,e,n),U("y",t,e,n))];case"Atanh":return[r.atanh(U("x",t,e,n))];case"Ceil":return[r.ceil(U("x",t,e,n))];case"Complex":return[r.complex(U("real",t,e,n),U("imag",t,e,n))];case"Cos":return[r.cos(U("x",t,e,n))];case"Cosh":return[r.cosh(U("x",t,e,n))];case"Elu":return[r.elu(U("x",t,e,n))];case"Erf":return[r.erf(U("x",t,e,n))];case"Exp":return[r.exp(U("x",t,e,n))];case"Expm1":return[r.expm1(U("x",t,e,n))];case"Floor":return[r.floor(U("x",t,e,n))];case"Log":return[r.log(U("x",t,e,n))];case"Log1p":return[r.log1p(U("x",t,e,n))];case"Imag":return[r.imag(U("x",t,e,n))];case"Neg":return[r.neg(U("x",t,e,n))];case"Reciprocal":return[r.reciprocal(U("x",t,e,n))];case"Real":return[r.real(U("x",t,e,n))];case"Relu":return[r.relu(U("x",t,e,n))];case"Round":return[r.round(U("x",t,e,n))];case"Selu":return[r.selu(U("x",t,e,n))];case"Sigmoid":return[r.sigmoid(U("x",t,e,n))];case"Sin":return[r.sin(U("x",t,e,n))];case"Sign":return[r.sign(U("x",t,e,n))];case"Sinh":return[r.sinh(U("x",t,e,n))];case"Softplus":return[r.softplus(U("x",t,e,n))];case"Sqrt":return[r.sqrt(U("x",t,e,n))];case"Square":return[r.square(U("x",t,e,n))];case"Tanh":return[r.tanh(U("x",t,e,n))];case"Tan":return[r.tan(U("x",t,e,n))];case"ClipByValue":return[r.clipByValue(U("x",t,e,n),U("clipValueMin",t,e,n),U("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(U("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Qr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(U("x",t,e,n),U("alpha",t,e,n))];case"Prelu":return[r.prelu(U("x",t,e,n),U("alpha",t,e,n))];case"IsNan":return[r.isNaN(Qr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Qr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Qr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rs(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){Y(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const a=t[r],i=e[r];Y(a<0||i<0||a===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function WO(t){return!(typeof t=="number"||t.some(e=>e<0))}function ch(t,e,n){let r=SC(t,n);const a=!WO(r);if(a&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&e.forEach(i=>{r=SC(i.shape,r)}),!WO(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function SC(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=a>=0?a:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nue{constructor(e,n,r,a,i,s,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Ct(0),Lr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),rs(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Lr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,a)=>this.write(r,n[a]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let a=0;a<this.size();a++)e.push(a)}if(e.length===0)return zs([],[0].concat(this.elementShape));const r=this.readMany(e);return rs(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),wi(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return zs([],[0].concat(this.elementShape));const n=[];for(let a=0;a<this.size();a++)n.push(a);const r=this.readMany(n);return rs(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),wr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,bs(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const a=e.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,s=[];Te(()=>{n=be(n,[1,r,i]);for(let u=0;u<e.length;++u){const c=[0,u===0?0:a[u-1],0],f=[1,e[u],i];s[u]=be(dn(n,c,f),this.elementShape)}return s});const o=[];for(let u=0;u<e.length;u++)o[u]=u;this.writeMany(o,s)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fc{get id(){return this.idTensor.id}constructor(e,n,r,a=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);rs(n,i.shape,"TensorList shape mismatch: "),Lr(i)}),this.idTensor=Ct(0),this.maxNumElements=a,Lr(this.idTensor)}copy(){return new Fc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);rs(e,this.elementShape,"TensorList shape mismatch: ");const a=ch(this.elementShape,this.tensors,e);return Te(()=>{const i=this.tensors.map(s=>be(s,a));return wi(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=ch(this.elementShape,this.tensors,e),a=this.tensors.pop();return a.kept=!1,rs(a.shape,e,"TensorList shape mismatch: "),be(a,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(rs(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Lr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Fc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);rs(this.tensors[e].shape,n,"TensorList shape mismatch: ");const a=ch(this.elementShape,this.tensors,n);return be(this.tensors[e],a)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);rs(this.elementShape,n.shape,"TensorList shape mismatch: "),Lr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);rs(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const a=ch(this.elementShape,this.tensors,r);return e.length===0?zs([],[0].concat(a)):Te(()=>{const i=e.map(s=>be(this.tensors[s],a));return wi(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);rs(this.elementShape,n,"TensorList shape mismatch: ");const r=ch(this.elementShape,this.tensors,n);return this.size()===0?zs([],[0].concat(r)):Te(()=>{const a=this.tensors.map(i=>be(i,r));return wr(a,0)})}}function rue(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const a=t.shape.slice(1);rs(a,e,"TensorList shape mismatch: ");const i=bs(t);return new Fc(i,e,r)}function aue(t,e,n,r){return new Fc([],t,e,r)}function iue(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const a=Math.max(...e);if(r!=null&&r!==-1&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const i=new Fc([],n,t.dtype,r),s=bs(t,0);return e.forEach((o,u)=>{i.setItem(o,s[u])}),i}function sue(t,e,n){let r=0;const a=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),s=SC(i,n),o=r===0?0:t.size/r,u=Te(()=>{const c=[];t=be(t,[1,r,o]);for(let f=0;f<e.length;++f){const h=[0,f===0?0:a[f-1],0],m=[1,e[f],o];c[f]=be(dn(t,h,m),s)}return t.dispose(),c}),l=new Fc([],n,t.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oue=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=U("thenBranch",t,e,n),a=U("elseBranch",t,e,n),i=U("cond",t,e,n),s=U("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=U("body",t,e,n),a=U("cond",t,e,n),i=U("args",t,e,n),s=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(c=>c.id);let u=await s[0].data();s.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let l=i;for(;u[0];){const c=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const f=l.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()});const d=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await d[0].data(),d.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&f.indexOf(h.id)===-1&&h.dispose()})}return l}case"LoopCond":{const r=U("pred",t,e,n);return[Go(r)]}case"Switch":{const r=U("pred",t,e,n);let a=U("data",t,e,n);return a.kept||(a=Go(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=t.inputNames.find(a=>Qr(a,e,n)!==void 0);if(r){const a=Qr(r,e,n);return[Go(a)]}return}case"Enter":{const r=U("frameName",t,e,n),a=U("tensor",t,e,n);return n.enterFrame(r),[Go(a)]}case"Exit":{const r=U("tensor",t,e,n);return n.exitFrame(),[Go(r)]}case"NextIteration":{const r=U("tensor",t,e,n);return n.nextIteration(),[Go(r)]}case"TensorArrayV3":{const r=U("size",t,e,n),a=U("dtype",t,e,n),i=U("elementShape",t,e,n),s=U("dynamicSize",t,e,n),o=U("clearAfterRead",t,e,n),u=U("identicalElementShapes",t,e,n),l=U("name",t,e,n),c=new nue(l,a,r,i,u,s,o);return n.addTensorArray(c),[c.idTensor,Ct(1)]}case"TensorArrayWriteV3":{const r=U("tensorArrayId",t,e,n),a=U("index",t,e,n),i=U("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(a,i),[s.idTensor]}case"TensorArrayReadV3":{const r=U("tensorArrayId",t,e,n),a=U("index",t,e,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=U("tensorArrayId",t,e,n),a=U("indices",t,e,n),i=U("dtype",t,e,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{const r=U("tensorArrayId",t,e,n),a=U("indices",t,e,n),i=U("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(a,i),[s.idTensor]}case"TensorArrayConcatV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id),i=U("dtype",t,e,n);return[a.concat(i)]}case"TensorArraySplitV3":{const r=U("tensorArrayId",t,e,n),a=U("tensor",t,e,n),i=U("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(i,a),[s.idTensor]}case"TensorArraySizeV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return[Ct(a.size(),"int32")]}case"TensorArrayCloseV3":{const r=U("tensorArrayId",t,e,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=U("tensorListId",t,e,n),a=U("index",t,e,n),i=U("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(a,i),[s.idTensor]}case"TensorListGetItem":{const r=U("tensorListId",t,e,n),a=U("index",t,e,n),i=U("elementShape",t,e,n),s=U("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(a,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{const r=U("indices",t,e,n),a=U("tensor",t,e,n),i=U("elementShape",t,e,n),s=U("numElements",t,e,n),o=iue(a,r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=U("elementShape",t,e,n),a=U("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const s=U(i,t,e,n),o=t.op==="TensorListReserve"?-1:s,u=aue(r,a,s,o);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=U("tensorListId",t,e,n),a=U("indices",t,e,n),i=U("elementShape",t,e,n),s=U("elementDType",t,e,n);return[n.getTensorList(r.id).gather(a,s,i)]}case"TensorListStack":{const r=U("tensorListId",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n),s=U("numElements",t,e,n);return[n.getTensorList(r.id).stack(a,i,s)]}case"TensorListFromTensor":{const r=U("tensor",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n),s=rue(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=U("tensorListId",t,e,n),a=n.getTensorList(r.id),i=U("dtype",t,e,n),s=U("elementShape",t,e,n);return[a.concat(i,s)]}case"TensorListPushBack":{const r=U("tensorListId",t,e,n),a=U("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{const r=U("tensorListId",t,e,n),a=U("elementShape",t,e,n),i=U("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{const r=U("tensor",t,e,n),a=U("elementShape",t,e,n),i=U("lengths",t,e,n),s=sue(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{const r=U("tensorListId",t,e,n),a=n.getTensorList(r.id);return[Ct(a.size(),"int32")]}case"TensorListResize":{const r=U("tensorListId",t,e,n),a=U("size",t,e,n),s=n.getTensorList(r.id).resize(a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qO(t,e,n){const[r,a]=U("fusedOps",t,e,n),i=r==="biasadd",s=!i,o=a==="prelu",u=r==="fusedbatchnorm",l=U("numArgs",t,e,n);if(i){if(o&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=U("strides",t,e,n),f=d0(t,e,n),d=U("dataFormat",t,e,n).toUpperCase(),h=U("dilations",t,e,n);let[m,v]=U("args",t,e,n);s&&(v=m,m=void 0);const y=U("leakyreluAlpha",t,e,n);return{stride:c,pad:f,dataFormat:d,dilations:h,biasArg:m,preluArg:v,activationFunc:a,leakyreluAlpha:y}}const uue=(t,e,n,r=sa)=>{switch(t.op){case"Conv1D":{const a=U("stride",t,e,n),i=U("pad",t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilation",t,e,n);return[r.conv1d(U("x",t,e,n),U("filter",t,e,n),a,i,s,o)]}case"Conv2D":{const a=U("strides",t,e,n),i=d0(t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilations",t,e,n);return[r.conv2d(U("x",t,e,n),U("filter",t,e,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=qO(t,e,n);return[r.fused.conv2d({x:U("x",t,e,n),filter:U("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=qO(t,e,n);return[r.fused.depthwiseConv2d({x:U("x",t,e,n),filter:U("filter",t,e,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=U("outputShape",t,e,n),i=U("strides",t,e,n),s=d0(t,e,n);return[r.conv2dTranspose(U("x",t,e,n),U("filter",t,e,n),a,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=U("strides",t,e,n),i=d0(t,e,n),s=U("dilations",t,e,n),o=U("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(U("input",t,e,n),U("filter",t,e,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"Conv3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("dataFormat",t,e,n).toUpperCase(),o=U("dilations",t,e,n);return[r.conv3d(U("x",t,e,n),U("filter",t,e,n),[a[1],a[2],a[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.avgPool(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPool":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.maxPool(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n),o=U("includeBatchInIndex",t,e,n),{result:u,indexes:l}=r.maxPoolWithArgmax(U("x",t,e,n),[s[1],s[2]],[a[1],a[2]],i,o);return[u,l]}case"AvgPool3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.avgPool3d(U("x",t,e,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("kernelSize",t,e,n);return[r.maxPool3d(U("x",t,e,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{const a=U("strides",t,e,n),i=U("pad",t,e,n),s=U("dilations",t,e,n),o=a[1],u=a[2],l=s[1],c=s[2];return[r.dilation2d(U("x",t,e,n),U("filter",t,e,n),[o,u],i,[l,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lue=(t,e,n,r=sa)=>{switch(t.op){case"Fill":{const a=U("shape",t,e,n),i=U("dtype",t,e,n),s=U("value",t,e,n);return[r.fill(a,s,i)]}case"LinSpace":{const a=U("start",t,e,n),i=U("stop",t,e,n),s=U("num",t,e,n);return[r.linspace(a,i,s)]}case"Multinomial":{const a=U("logits",t,e,n),i=U("numSamples",t,e,n),s=U("seed",t,e,n);return[r.multinomial(a,i,s)]}case"OneHot":{const a=U("indices",t,e,n),i=U("depth",t,e,n),s=U("onValue",t,e,n),o=U("offValue",t,e,n),u=U("dtype",t,e,n);return[r.oneHot(a,i,s,o,u)]}case"Ones":return[r.ones(U("shape",t,e,n),U("dtype",t,e,n))];case"OnesLike":return[r.onesLike(U("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(U("shape",t,e,n),U("dtype",t,e,n),U("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(U("shape",t,e,n),U("minval",t,e,n),U("maxval",t,e,n),U("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(U("shape",t,e,n),U("minval",t,e,n),U("maxval",t,e,n),U("seed",t,e,n))];case"Range":{const a=U("start",t,e,n),i=U("stop",t,e,n),s=U("step",t,e,n);return[r.range(a,i,s,U("dtype",t,e,n))]}case"TruncatedNormal":{const a=U("shape",t,e,n),i=U("mean",t,e,n),s=U("stdDev",t,e,n),o=U("seed",t,e,n);return[r.truncatedNormal(a,i,s,U("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(U("shape",t,e,n),U("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CN(t,e,n){const r=U("boxes",t,e,n),a=U("scores",t,e,n),i=U("maxOutputSize",t,e,n),s=U("iouThreshold",t,e,n),o=U("scoreThreshold",t,e,n),u=U("softNmsSigma",t,e,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:o,softNmsSigma:u}}const cue=async(t,e,n,r,a=sa)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=CN(t,e,n),f=await a.image.nonMaxSuppressionWithScoreAsync(i,s,o,u,l,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=CN(t,e,n),c=U("padToMaxOutputSize",t,e,n),f=await a.image.nonMaxSuppressionPaddedAsync(i,s,o,u,l,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:s,maxOutputSize:o,iouThreshold:u,scoreThreshold:l}=CN(t,e,n);return[await a.image.nonMaxSuppressionAsync(i,s,o,u,l)]}case"Where":{const i=a.cast(U("condition",t,e,n),"bool"),s=[await a.whereAsync(i)];return i.dispose(),s}case"ListDiff":return a.setdiff1dAsync(U("x",t,e,n),U("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fue=(t,e,n,r=sa)=>{switch(t.op){case"LowerBound":{const a=U("sortedSequence",t,e,n),i=U("values",t,e,n);return[r.lowerBound(a,i)]}case"TopKV2":{const a=U("x",t,e,n),i=U("k",t,e,n),s=U("sorted",t,e,n),o=r.topk(a,i,s);return[o.values,o.indices]}case"UpperBound":{const a=U("sortedSequence",t,e,n),i=U("values",t,e,n);return[r.upperBound(a,i)]}case"Unique":{const a=U("x",t,e,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{const a=U("x",t,e,n),i=U("axis",t,e,n),s=r.unique(a,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const due=(t,e,n,r=sa)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const a=U("default",t,e,n);return[Qr(t.name,e,n)||a];case"Placeholder":return[Qr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=U("x",t,e,n);return[Go(c)]}case"IdentityN":return U("x",t,e,n).map(c=>Go(c));case"Snapshot":const i=U("x",t,e,n);return[Go(i)];case"Shape":return[r.tensor1d(U("x",t,e,n).shape,"int32")];case"ShapeN":return U("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(U("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(U("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const s=U("x",t,e,n),o=U("data",t,e,n),u=U("message",t,e,n),l=U("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,l));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pue{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=Ct(0),this.tensorMap=new Map,Lr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ct(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(a=>a.dispose()),this.tensorMap.clear(),Te(()=>{const a=bs(n),i=r.length,s=a.length;Y(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let o=0;o<i;o++){const u=r[o],l=a[o];Lr(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Te(()=>{const a=[];for(let i=0;i<r.length;i++){const s=r[i],o=this.findWithDefault(s,n);a.push(o)}return wi(a)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hue=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(t.name);if(a!=null)return[a];{const i=U("keyDType",t,e,n),s=U("valueDType",t,e,n),o=new pue(i,s);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=U("tableHandle",t,e,n,r),i=U("keys",t,e,n),s=U("values",t,e,n);return[await r.getHashTableById(a.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{const a=U("tableHandle",t,e,n,r),i=U("keys",t,e,n),s=U("defaultValue",t,e,n);return[await r.getHashTableById(a.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=U("tableHandle",t,e,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mue=(t,e,n,r=sa)=>{switch(t.op){case"ResizeBilinear":{const a=U("images",t,e,n),i=U("size",t,e,n),s=U("alignCorners",t,e,n),o=U("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(a,[i[0],i[1]],s,o)]}case"ResizeNearestNeighbor":{const a=U("images",t,e,n),i=U("size",t,e,n),s=U("alignCorners",t,e,n),o=U("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],s,o)]}case"CropAndResize":{const a=U("image",t,e,n),i=U("boxes",t,e,n),s=U("boxInd",t,e,n),o=U("cropSize",t,e,n),u=U("method",t,e,n),l=U("extrapolationValue",t,e,n);return[r.image.cropAndResize(a,i,s,o,u,l)]}case"ImageProjectiveTransformV3":{const a=U("images",t,e,n),i=U("transforms",t,e,n),s=U("outputShape",t,e,n),o=U("fillValue",t,e,n),u=U("interpolation",t,e,n),l=U("fillMode",t,e,n);return[r.image.transform(a,i,u.toLowerCase(),l.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gue=(t,e,n,r=sa)=>{switch(t.op){case"Equal":return[r.equal(U("a",t,e,n),U("b",t,e,n))];case"NotEqual":return[r.notEqual(U("a",t,e,n),U("b",t,e,n))];case"Greater":return[r.greater(U("a",t,e,n),U("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(U("a",t,e,n),U("b",t,e,n))];case"Less":return[r.less(U("a",t,e,n),U("b",t,e,n))];case"LessEqual":return[r.lessEqual(U("a",t,e,n),U("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(U("a",t,e,n),U("b",t,e,n))];case"LogicalNot":return[r.logicalNot(U("a",t,e,n))];case"LogicalOr":return[r.logicalOr(U("a",t,e,n),U("b",t,e,n))];case"Select":case"SelectV2":return[r.where(U("condition",t,e,n),U("a",t,e,n),U("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(U("a",t,e,n),U("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=(t,e,n,r=sa)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(U("a",t,e,n),U("b",t,e,n),U("transposeA",t,e,n),U("transposeB",t,e,n))];case"Einsum":return[r.einsum(U("equation",t,e,n),...U("tensors",t,e,n))];case"Transpose":return[r.transpose(U("x",t,e,n),U("perm",t,e,n))];case"_FusedMatMul":const[a,i]=U("fusedOps",t,e,n),s=a==="biasadd",o=i==="prelu",u=U("numArgs",t,e,n),l=U("leakyreluAlpha",t,e,n);if(s){if(o&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=U("args",t,e,n);return[r.fused.matMul({a:U("a",t,e,n),b:U("b",t,e,n),transposeA:U("transposeA",t,e,n),transposeB:U("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:f,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(U("a",t,e,n),U("numLower",t,e,n),U("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yue=(t,e,n,r=sa)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(U("x",t,e,n),U("axis",t,e,n),U("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(U("x",t,e,n),U("mean",t,e,n),U("variance",t,e,n),U("offset",t,e,n),U("scale",t,e,n),U("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(U("x",t,e,n),U("mean",t,e,n),U("variance",t,e,n),U("offset",t,e,n),U("scale",t,e,n),U("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(U("x",t,e,n),U("radius",t,e,n),U("bias",t,e,n),U("alpha",t,e,n),U("beta",t,e,n))];case"Softmax":return[r.softmax(U("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bue=(t,e,n,r=sa)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(U("paramsNestedSplits",t,e,n),U("paramsDenseValues",t,e,n),U("indices",t,e,n),U("outputRaggedRank",t,e,n));return a.concat(i)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(U("starts",t,e,n),U("limits",t,e,n),U("splits",t,e,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(U("shape",t,e,n),U("values",t,e,n),U("defaultValue",t,e,n),U("rowPartitionTensors",t,e,n),U("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wue=(t,e,n,r=sa)=>{switch(t.op){case"Max":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.max(U("x",t,e,n),o,u)]}case"Mean":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.mean(U("x",t,e,n),o,u)]}case"Min":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.min(U("x",t,e,n),o,u)]}case"Sum":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.sum(U("x",t,e,n),o,u)]}case"All":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.all(U("x",t,e,n),o,u)]}case"Any":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.any(U("x",t,e,n),o,u)]}case"ArgMax":{const o=U("axis",t,e,n);return[r.argMax(U("x",t,e,n),o)]}case"ArgMin":{const o=U("axis",t,e,n);return[r.argMin(U("x",t,e,n),o)]}case"Prod":{const o=U("axis",t,e,n),u=U("keepDims",t,e,n);return[r.prod(U("x",t,e,n),o,u)]}case"Cumprod":{const o=U("axis",t,e,n),u=U("exclusive",t,e,n),l=U("reverse",t,e,n);return[r.cumprod(U("x",t,e,n),o,u,l)]}case"Cumsum":{const o=U("axis",t,e,n),u=U("exclusive",t,e,n),l=U("reverse",t,e,n);return[r.cumsum(U("x",t,e,n),o,u,l)]}case"Bincount":const a=U("x",t,e,n),i=U("weights",t,e,n),s=U("size",t,e,n);return[r.bincount(a,i,s)];case"DenseBincount":{const o=U("x",t,e,n),u=U("weights",t,e,n),l=U("size",t,e,n),c=U("binaryOutput",t,e,n);return[r.denseBincount(o,u,l,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xue=(t,e,n,r=sa)=>{switch(t.op){case"ConcatV2":case"Concat":{const a=U("n",t,e,n),i=U("axis",t,e,n);let s=U("tensors",t,e,n);return s=s.slice(0,a),[r.concat(s,i)]}case"Gather":{const a=U("x",t,e,n),i=U("indices",t,e,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{const a=U("axis",t,e,n),i=U("batchDims",t,e,n),s=U("x",t,e,n),o=U("indices",t,e,n);return[r.gather(s,r.cast(o,"int32"),a,i)]}case"Reverse":{const a=U("dims",t,e,n),i=[];for(let o=0;o<a.length;o++)a[o]&&i.push(o);const s=U("x",t,e,n);return[r.reverse(s,i)]}case"ReverseV2":{const a=U("axis",t,e,n),i=U("x",t,e,n);return[r.reverse(i,a)]}case"Slice":{const a=U("begin",t,e,n),i=U("size",t,e,n);return[r.slice(U("x",t,e,n),a,i)]}case"StridedSlice":{const a=U("begin",t,e,n),i=U("end",t,e,n),s=U("strides",t,e,n),o=U("beginMask",t,e,n),u=U("endMask",t,e,n),l=U("ellipsisMask",t,e,n),c=U("newAxisMask",t,e,n),f=U("shrinkAxisMask",t,e,n),d=U("x",t,e,n);return[r.stridedSlice(d,a,i,s,o,u,l,c,f)]}case"Pack":return Te(()=>{const a=U("axis",t,e,n),i=U("tensors",t,e,n),s=i[0].shape,o=r.squeeze(i[0]).shape,u=i.map(l=>{const c=fn(l.shape,s);if(!c&&!fn(r.squeeze(l).shape,o))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,s)});return[r.stack(u,a)]});case"Unpack":{const a=U("axis",t,e,n),i=U("tensor",t,e,n);return r.unstack(i,a)}case"Tile":{const a=U("reps",t,e,n);return[r.tile(U("x",t,e,n),a)]}case"Split":case"SplitV":{const a=U("axis",t,e,n),i=U("numOrSizeSplits",t,e,n),s=U("x",t,e,n);return r.split(s,i,a)}case"ScatterNd":{const a=U("indices",t,e,n),i=U("values",t,e,n),s=U("shape",t,e,n);return[r.scatterND(a,i,s)]}case"GatherNd":{const a=U("x",t,e,n),i=U("indices",t,e,n);return[r.gatherND(a,i)]}case"SparseToDense":{const a=U("sparseIndices",t,e,n),i=U("outputShape",t,e,n),s=U("sparseValues",t,e,n),o=U("defaultValue",t,e,n);return[r.sparseToDense(a,s,i,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{const a=U("indices",t,e,n),i=U("values",t,e,n),s=U("tensor",t,e,n);return[r.tensorScatterUpdate(s,a,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue=(t,e,n,r=sa)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:i,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(U("indices",t,e,n),U("values",t,e,n),U("denseShape",t,e,n),U("defaultValue",t,e,n));return[a,i,s,o]}case"SparseReshape":{const{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(U("inputIndices",t,e,n),U("inputShape",t,e,n),U("newShape",t,e,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(U("data",t,e,n),U("indices",t,e,n),U("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(U("data",t,e,n),U("indices",t,e,n),U("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sue=(t,e,n,r=sa)=>{switch(t.op){case"FFT":return[r.fft(U("x",t,e,n))];case"IFFT":return[r.ifft(U("x",t,e,n))];case"RFFT":return[r.rfft(U("x",t,e,n))];case"IRFFT":return[r.irfft(U("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cue=(t,e,n,r=sa)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(U("input",t,e,n),U("pattern",t,e,n),U("rewrite",t,e,n),U("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(U("data",t,e,n),U("dataSplits",t,e,n),U("separator",t,e,n),U("nGramWidths",t,e,n),U("leftPad",t,e,n),U("rightPad",t,e,n),U("padWidth",t,e,n),U("preserveShortSequences",t,e,n));return[a,i]}case"StringSplit":{const{indices:a,values:i,shape:s}=r.string.stringSplit(U("input",t,e,n),U("delimiter",t,e,n),U("skipEmpty",t,e,n));return[a,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(U("input",t,e,n),U("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eue=(t,e,n,r=sa)=>{switch(t.op){case"Cast":return[r.cast(U("x",t,e,n),U("dtype",t,e,n))];case"ExpandDims":{const a=U("axis",t,e,n);return[r.expandDims(U("x",t,e,n),a)]}case"Squeeze":{const a=U("axis",t,e,n);return[r.squeeze(U("x",t,e,n),a)]}case"Reshape":return[r.reshape(U("x",t,e,n),U("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(U("x",t,e,n),U("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(U("x",t,e,n),U("padding",t,e,n),U("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(U("x",t,e,n),U("padding",t,e,n),U("constantValue",t,e,n))];case"SpaceToBatchND":{const a=U("blockShape",t,e,n),i=U("paddings",t,e,n);return[r.spaceToBatchND(U("x",t,e,n),a,i)]}case"BatchToSpaceND":{const a=U("blockShape",t,e,n),i=U("crops",t,e,n);return[r.batchToSpaceND(U("x",t,e,n),a,i)]}case"DepthToSpace":{const a=U("blockSize",t,e,n),i=U("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(U("x",t,e,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(U("x",t,e,n),U("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(U("s0",t,e,n),U("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(t,e,n,r,a=Te){const i=((s,o,u)=>{switch(s.category){case"arithmetic":return a(()=>eue(s,o,u));case"basic_math":return a(()=>tue(s,o,u));case"control":return oue(s,o,u);case"convolution":return a(()=>uue(s,o,u));case"creation":return a(()=>lue(s,o,u));case"dynamic":return cue(s,o,u);case"evaluation":return a(()=>fue(s,o,u));case"image":return a(()=>mue(s,o,u));case"graph":return a(()=>due(s,o,u));case"logical":return a(()=>gue(s,o,u));case"matrices":return a(()=>vue(s,o,u));case"normalization":return a(()=>yue(s,o,u));case"ragged":return a(()=>bue(s,o,u));case"reduction":return a(()=>wue(s,o,u));case"slice_join":return a(()=>xue(s,o,u));case"sparse":return a(()=>Nue(s,o,u));case"spectral":return a(()=>Sue(s,o,u));case"string":return a(()=>Cue(s,o,u));case"transformation":return a(()=>Eue(s,o,u));case"hash_table":return hue(s,o,u,r);case"custom":const l=T5(s.op);if(l&&l.customExecutor)return l.customExecutor(new Joe(s,o,u));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Tc(i)?i.then(s=>[].concat(s)):[].concat(i)}class jO{constructor(e={},n={},r={},a={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GO(t,e,n,r){const a=new Set,i=[];let s=null,o=null;const u=new Set,l=new Set(Object.keys(t).map(d=>li(d)[0]));r=r||[];const c=new Set(r.map(d=>li(d.name)[0])),f=[...e];for(;f.length>0;){const d=f.pop();if((fc(d)||Oue(d)||Fue(d))&&s==null&&(s=d,o=s.children.map(h=>h.name).filter(h=>a.has(h))),a.add(d.name),n[d.name]==null&&!l.has(d.name)&&!c.has(d.name)){if(d.inputs.length===0){i.push(d.name);continue}d.inputs.forEach(h=>{u.has(h.name)||(u.add(h.name),f.push(h))})}}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:s,syncInputs:o}}function Tue(t,e){const{usedNodes:n,inputs:r}=e,a=Object.keys(r).map(y=>li(y)[0]).map(y=>t.nodes[y]),i=t.initNodes||[],s=y=>n.has(typeof y=="string"?y:y.name);function o(y){return[...new Map(y.map(b=>[b.name,b])).values()]}const u=o([...a,...t.weights,...i]).filter(s),l=o([...u,...Object.values(t.nodes)]).filter(s),c=new Map(l.map(y=>[y.name,y])),f={};for(const y of l){f[y.name]=f[y.name]||0;for(const b of y.children)s(b)||(f[b.name]=Number.POSITIVE_INFINITY),f[b.name]=(f[b.name]||0)+1}const d=Object.entries(f).filter(([,y])=>y===0).map(([y])=>y),h=[...d];for(;d.length>0;){const y=d.pop(),b=c.get(y);for(const x of b.children.filter(s))--f[x.name]===0&&(h.push(x.name),d.push(x.name))}const m=h.map(y=>c.get(y)),v=Due(m,u);return $ue(v,u),v}function Due(t,e){const n=new Map(t.map(s=>[s.name,s])),r=e.map(s=>s.name),a=new Set(r);for(;r.length>0;){const s=r.pop(),o=n.get(s);for(const u of o.children)!n.has(u.name)||a.has(u.name)||(a.add(u.name),r.push(u.name))}return t.filter(s=>a.has(s.name))}class xy extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function $ue(t,e){const n=new Map(t.map((o,u)=>[o.name,u])),r=new Set(e.map(o=>o.name)),a=o=>r.has(typeof o=="string"?o:o.name),i=new Set(t.map(o=>o.name)),s=o=>i.has(typeof o=="string"?o:o.name);for(const o of t){for(const u of o.children.filter(s)){if(!n.has(u.name))throw new xy(`Child ${u.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(u.name))throw new xy(`Node ${o.name} is scheduled to run after its child ${u.name}.`)}if(!a(o))for(const u of o.inputs){if(!n.has(u.name))throw new xy(`Input ${u.name} of node ${o.name} is unreachable.`);if(n.get(u.name)>n.get(o.name))throw new xy(`Node ${o.name} is scheduled to run before its input ${u.name}.`)}}}function Aue(t){const e=new Map(t.map((o,u)=>[o.name,u])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,u)=>fc(o)?n:u),a=o=>{const u=r[e.get(o.name)];return u??-1},i=t.map((o,u)=>o.children.map(a).reduce((l,c)=>Math.max(l,c),r[u])),s=new Map;for(let o=0;o<t.length;++o){const u=i[o];if(u===n)continue;const l=t[o],c=t[u];s.has(c.name)||s.set(c.name,[]),s.get(c.name).push(l)}return s}const Iue=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),kue=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),_ue=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function fc(t){return Iue.has(t.op)}function Oue(t){return kue.has(t.op)}function Fue(t){return _ue.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z0{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(a=>a.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new z0(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),a=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+a.join(this.SEPARATOR)}compile(e,n){const r=GO(e,n,this.weightMap,this._initNodes),{missingInputs:a,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(a.length>0){const l=n.map(f=>f.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${c}]. Missing the following inputs: [${a}]`)}const o=Tue(this.graph,r),u=Aue(o);return{orderedNodes:o,nodeLiveUntilMap:u}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Lr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const a=r.map(d=>this.graph.nodes[li(d)[0]]),i=n.map(d=>li(d)[0]),s=new Set(i);let o=i.map(d=>this.graph.nodes[d]);o.length===0&&(o=this._outputs);const u=this.getCompilationKey(a,o);let l=this.compiledMap.get(u);l==null&&(l=this.compile(e,o),this.compiledMap.set(u,l));try{this.keepIntermediateTensors=Ae().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const c={},f={};return Te(()=>{const d=new jO(this.weightMap,c,f,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(b=>{const[x,w]=li(b,d),S=[];S[w]=e[b],h[x]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[x]=this.cloneTensorList(S))});const m=this.getFrozenTensorIds(h),{orderedNodes:v,nodeLiveUntilMap:y}=l;for(const b of v){if(h[b.name])continue;const x=HO(b,h,d,this._resourceManager);if(Tc(x))throw new Error(`The execution of the op '${b.op}' returned a promise. Please use model.executeAsync() instead.`);h[b.name]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[b.name]=this.cloneTensorList(x)),this.checkTensorForDisposalWithNodeLiveUntilInfo(b,h,d,m,s,y.get(b.name))}return this.parent==null&&d.dispose(m),n.map(b=>Qr(b,h,d))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(a=>a.id)));return new Set(n)}checkTensorForDisposal(e,n,r,a,i,s,o){if(!(fc(n)||s.has(e))){for(const u of r[e])u!=null&&(o[u.id]=(o[u.id]||0)+n.children.length);for(const u of n.inputs){if(fc(u))continue;const l=zO(u.name,r,a);if(l!=null)for(const c of l){if(!c||c.kept||i.has(c.id))continue;const f=o[c.id];f===1?(c.dispose(),delete o[c.id]):f!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,a,i,s){function o(u){return fc(u)||i.has(u.name)}if(!(fc(e)||s==null))for(const u of s){if(o(u))continue;const l=zO(u.name,n,r);for(const c of l)!c||c.kept||a.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,a={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ae().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}const s=new jO(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,s,n,r),u=n.map(d=>Qr(d,o,s)),l=u.map(d=>d.id),c=Object.keys(e).map(d=>e[d].id),f=new Set([...l,...c,...this.weightIds]);return Object.values(o).forEach(d=>{d.forEach(h=>{h&&!h.isDisposed&&!f.has(h.id)&&h.dispose()})}),this.parent==null&&s.dispose(f),u}async executeFunctionAsync(e,n,r){const a=e.reduce((i,s,o)=>(i[this.inputs[o].name]=s,i),{});return this._executeAsync(a,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,a){const i=Object.keys(e),s=i.map(S=>this.graph.nodes[li(S)[0]]),o=r.map(S=>li(S)[0]),u=new Set(o);let l=o.map(S=>this.graph.nodes[S]);l.length===0&&(l=this._outputs);const{usedNodes:c,missingInputs:f,dynamicNode:d,syncInputs:h}=GO(e,l,this.weightMap,this._initNodes),m=[...s,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),v=Object.assign({},this.weightMap);Object.keys(e).forEach(S=>{const[C,E]=li(S),A=[];A[E]=e[S],v[C]=A});const y={},b=this.getFrozenTensorIds(v),x={};for(;m.length>0;){const S=this.processStack(s,m,n,v,x,b,u,y,c);await Promise.all(S)}d==null&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=l.filter(S=>!fc(S)&&!Qr(S.name,v,n)).map(S=>S.name);if(w.length>0){let S="";throw d!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${S}`)}return v}processStack(e,n,r,a,i,s,o,u,l){const c=[];for(;n.length>0;){const f=n.pop();r.currentContext=f.contexts;let d="";if(f.node.op==="Enter"&&U("isConstant",f.node,a,r)&&([d]=jo(f.node.name,r)),a[f.node.name]==null){const h=HO(f.node,a,r,this._resourceManager);d||([d]=jo(f.node.name,r));const m=r.currentContext;Tc(h)?c.push(h.then(v=>(a[d]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(v)),r.currentContext=m,this.checkTensorForDisposal(d,f.node,a,r,s,o,u),this.processChildNodes(f.node,n,r,a,i,l),v))):(a[d]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(h)),this.checkTensorForDisposal(d,f.node,a,r,s,o,u),this.processChildNodes(f.node,n,r,a,i,l))}else this.processChildNodes(f.node,n,r,a,i,l)}return c}processChildNodes(e,n,r,a,i,s){e.children.forEach(o=>{const[u]=jo(o.name,r);i[u]||!s.has(o.name)||(o.op==="Merge"?o.inputNames.some(l=>!!Qr(l,a,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(l=>!!Qr(l,a,r))&&(i[u]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[a]=li(n),i=this.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){const s=i.attrParams.shape.value,o=s.length===r.shape.length&&r.shape.every((u,l)=>s[l]===-1||s[l]===u);Y(o,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&Y(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const a={};for(const i in e){const s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?a[s.name]=e[i]:a[i]=e[i]}return a}checkInputs(e){const n=Object.keys(e).filter(r=>{const[a]=li(r);return this.graph.nodes[a]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,a;const i=(a=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||a===void 0?void 0:a[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=li(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Rue{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mue="?tfjs-format=file",Pue="model.json";class Bue{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=jz){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Rue}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Tc(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await gL(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let a=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(a=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=a,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new z0(UO.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=UO.Instance.transformGraph(e.modelInitializer);this.initializer=new z0(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof er?[e]:e,r={};return n.forEach((a,i)=>r[this.structuredOutputKeys[i]]=a),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof er)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const s in i){const o=i[s];o.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let a=0;return this.inputNodes.reduce((i,s)=>{var o,u,l;const c=(l=(u=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||u===void 0?void 0:u[s])===null||l===void 0?void 0:l.resourceId;return c!=null?i[s]=this.resourceIdToCapturedInput[c]:i[s]=e[a++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let a=0;a<r.length;a++){const i=r[a],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=e[a]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&rn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function XO(t,e={},n=jz){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Lue(t));const r=new Bue(t,e,n);return await r.load(),r}function Lue(t){return t.endsWith("/")||(t=t+"/"),`${t}${Pue}${Mue}`}/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function Th(t,e,n,r){return new(n||(n=Promise))(function(a,i){function s(l){try{u(r.next(l))}catch(c){i(c)}}function o(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){var c;l.done?a(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,o)}u((r=r.apply(t,[])).next())})}function Dh(t,e){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){s.label=c[1];break}if(c[0]===6&&s.label<a[1]){s.label=a[1],a=c;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(c);break}a[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(f){c=[6,f],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var A5=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var a=r[n];e.push(a)}return e},KO=function(){return function(){this.parent=null,this.children={},this.end=!1,this.word=[[],0,0]}}(),zue=function(){function t(){this.root=new KO}return t.prototype.insert=function(e,n,r){for(var a=this.root,i=A5(e),s=0;s<i.length;s++)a.children[i[s]]||(a.children[i[s]]=new KO,a.children[i[s]].parent=a,a.children[i[s]].word[0]=a.word[0].concat(i[s])),a=a.children[i[s]],s===i.length-1&&(a.end=!0,a.word[1]=n,a.word[2]=r)},t.prototype.commonPrefixSearch=function(e){for(var n=[],r=this.root.children[e[0]],a=0;a<e.length&&r;a++)r.end&&n.push(r.word),r=r.children[e[a+1]];return n.length||n.push([[e[0]],0,0]),n},t}(),YO="";function Uue(t){var e=t.normalize("NFKC");return e.length>0?YO+e.replace(/ /g,YO):e}var Vue=6,Wue=function(){function t(e,n){n===void 0&&(n=Vue),this.vocabulary=e,this.reservedSymbolsCount=n,this.trie=new zue;for(var r=this.reservedSymbolsCount;r<this.vocabulary.length;r++)this.trie.insert(this.vocabulary[r][0],this.vocabulary[r][1],r)}return t.prototype.encode=function(e){var n=[],r=[],a=[];e=Uue(e);for(var i=A5(e),s=0;s<=i.length;s++)n.push({}),r.push(0),a.push(0);for(s=0;s<i.length;s++)for(var o=this.trie.commonPrefixSearch(i.slice(s)),u=0;u<o.length;u++){var l=o[u],c={key:l[0],score:l[1],index:l[2]};n[s+(f=l[0].length)][s]==null&&(n[s+f][s]=[]),n[s+f][s].push(c)}for(var f=0;f<=i.length;f++)for(var d in n[f]){var h=n[f][d];for(u=0;u<h.length;u++){var m=h[u],v=m.score+a[f-m.key.length];(a[f]===0||v>=a[f])&&(a[f]=v,r[f]=h[u].index)}}for(var y=[],b=r.length-1;b>0;)y.push(r[b]),b-=this.vocabulary[r[b]][0].length;var x=[],w=!1;for(s=0;s<y.length;s++){var S=y[s];w&&S===0||x.push(S),w=S===0}return x.reverse()},t}();function que(t){return Th(this,void 0,void 0,function(){return Dh(this,function(e){switch(e.label){case 0:return[4,oJ(t)];case 1:return[2,e.sent().json()]}})})}var Hue="https://storage.googleapis.com/tfjs-models/savedmodel/universal_sentence_encoder";function jue(t){return Th(this,void 0,void 0,function(){var e;return Dh(this,function(n){switch(n.label){case 0:return[4,(e=new Gue).load(t)];case 1:return n.sent(),[2,e]}})})}var Gue=function(){function t(){}return t.prototype.loadModel=function(e){return Th(this,void 0,void 0,function(){return Dh(this,function(n){return[2,e?XO(e):XO("https://tfhub.dev/tensorflow/tfjs-model/universal-sentence-encoder-lite/1/default/1",{fromTFHub:!0})]})})},t.prototype.load=function(e){return e===void 0&&(e={}),Th(this,void 0,void 0,function(){var n,r,a;return Dh(this,function(i){switch(i.label){case 0:return[4,Promise.all([this.loadModel(e.modelUrl),que(e.vocabUrl||Hue+"/vocab.json")])];case 1:return n=i.sent(),r=n[0],a=n[1],this.model=r,this.tokenizer=new Wue(a),[2]}})})},t.prototype.embed=function(e){return Th(this,void 0,void 0,function(){var n,r,a,i,s,o,u,l,c=this;return Dh(this,function(f){switch(f.label){case 0:for(typeof e=="string"&&(e=[e]),n=e.map(function(d){return c.tokenizer.encode(d)}),r=n.map(function(d,h){return d.map(function(m,v){return[h,v]})}),a=[],i=0;i<r.length;i++)a=a.concat(r[i]);return s=ld(a,[a.length,2],"int32"),o=ca(il(n),"int32"),u={indices:s,values:o},[4,this.model.executeAsync(u)];case 1:return l=f.sent(),s.dispose(),o.dispose(),[2,l]}})})},t}();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5={kernelName:z1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,Qd(ot(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xue={kernelName:dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Pn(ot(n,"float32")),a=na(ft(Ct(1),r));return Hn(bt(t,a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kue={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=na(ft(Pn(ot(n,"float32")),1));return bt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yue={kernelName:Kd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{let o=t;const u=_r(n.shape,a);return u.length>0&&(o=ht(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=_r(r.shape,a);return u.length>0&&(o=ht(o,u)),be(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zue={kernelName:U1,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,a)=>{n[a]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Que={kernelName:V1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jue={kernelName:W1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ele={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,na(ft(Ct(1),Pn(ot(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tle={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=na(qe(Ct(1),Pn(ot(n,"float32"))));return bt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nle={kernelName:ym,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=qe(Pn(n),Pn(r));let u=ge(t,bt(r,o));const l=_r(n.shape,a);return l.length>0&&(u=ht(u,l)),be(u,n.shape)},b:()=>{const o=qe(Pn(n),Pn(r));let u=Hn(ge(t,bt(n,o)));const l=_r(r.shape,a);return l.length>0&&(u=ht(u,l)),be(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rle={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,qe(Pn(ot(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ale={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ft(Ct(1),Pn(ot(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ile(t,e,n,r,a,i){const s=Q(t,"dy","avgPool3dGrad"),o=Q(e,"input","avgPool3dGrad");let u=s,l=o,c=!1;o.rank===4&&(c=!0,u=be(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),l=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Y(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),Y(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Ma("avgPool3dGrad",a,i);const f={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=me.runKernel(_E,f,d);return c?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const sle=de({avgPool3dGrad_:ile});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ole={kernelName:H1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>sle(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ule(t,e,n,r,a){const i=Q(t,"dy","avgPoolGrad"),s=Q(e,"input","avgPoolGrad");Y(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let o=s,u=i,l=!1;s.rank===3&&(l=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Y(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),Y(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:u,input:o},f={filterSize:n,strides:r,pad:a},d=me.runKernel(kE,c,f);return l?be(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const lle=de({avgPoolGrad_:ule});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cle={kernelName:q1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:a,strides:i,pad:s}=n;return{x:()=>lle(t,r,a,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fle={kernelName:j1,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,a]=e,{transposeA:i,transposeB:s}=n;return!i&&!s?{a:()=>nn(t,a,!1,!0),b:()=>nn(r,t,!0,!1)}:!i&&s?{a:()=>nn(t,a,!1,!1),b:()=>nn(t,r,!0,!1)}:i&&!s?{a:()=>nn(a,t,!1,!0),b:()=>nn(r,t,!1,!1)}:{a:()=>nn(a,t,!0,!0),b:()=>nn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dle={kernelName:G1,gradFunc:(t,e,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>ew(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ple={kernelName:GQ,gradFunc:(t,e,n)=>{const r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let u=a.length-1;u>=0;u--)if(a[u]===i[u])s[u]=1;else if(a[u]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${i}].`);const o=[];for(let u=0;u<s.length;u++)s[u]>1&&o.push(u);return{x:()=>ht(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hle={kernelName:bm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mle={kernelName:wm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gle={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>pa(So(El(r,a),qc(r,i)),t,mn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vle={kernelName:K1,inputsToSave:["x"],gradFunc:I5.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yle={kernelName:Y1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:a}=n,i=an(a,e[0].shape)[0],s=r.map(u=>u[i]);return hi(t,s,i).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ble={kernelName:Z1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{dilations:i,strides:s,pad:o,dataFormat:u}=n;return Y(ul(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>zT(r.shape,t,a,s,o,u),filter:()=>hD(r,t,a.shape,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wle={kernelName:Q1,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,{strides:i,pad:s,dataFormat:o,dimRoundingMode:u}=n;return{dy:()=>ll(t,a,i,s,o,1,u),filter:()=>hD(t,r,a.shape,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xle(t,e,n,r,a){let i=t;t.rank===4&&(i=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=e;s.rank===4&&(s=be(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Y(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),Y(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),Y(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Y(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),Y(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:s},u={strides:r,pad:a,filterShape:n};return me.runKernel(PE,o,u)}const Nle=de({conv3DBackpropFilter_:xle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sle={kernelName:J1,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i}=n;Y(ul(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[s,o]=e;return{x:()=>XL(s.shape,t,o,a,i),filter:()=>Nle(s,t,o.shape,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cle={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(Hn(aD(ot(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ele={kernelName:Sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(iD(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tle={kernelName:eb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{const o=nr([a],r.rank);let u=WT(t,a,i,!s);return o!=null&&(u=pn(u,o)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dle={kernelName:tb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=r??[1,1];Y(ul(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[u,l]=e;return Y(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),Y(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),Y(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),Y(aa(a,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`),Ma("depthwiseConv2d",i,s),{x:()=>Az(u.shape,t,l,a,i,o,s),filter:()=>$z(u,t,l.shape,a,i,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $le={kernelName:nb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,a]=e,i={x:r,filter:a,dy:t},s={x:r,filter:a,dy:t};return{x:()=>me.runKernel(XS,i,n),filter:()=>me.runKernel(KS,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ale={kernelName:Em,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>me.runKernel(GE,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ile={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(bi(Hn(Pn(n))),2/Math.sqrt(Math.PI));return{x:()=>ge(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kle={kernelName:Dm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _le={kernelName:ab,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ole={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,bi(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fle={kernelName:Am,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rle={kernelName:Im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=bt(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{let o=ge(t,ot(n,"float32"));const u=_r(r.shape,a);u.length>0&&(o=be(ht(o,u),r.shape));const l=Pn(r);return Hn(bt(o,ot(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mle={kernelName:ib,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[a,i,s,o]=e,u=o??Ct(1),l=_r(i.shape,a.shape),c=[];if(i.rank===1){for(let S=0;S<a.shape.length-1;++S)c.push(a.shape[S]);c.push(1)}const f=ft(a,i),d=ge(t,u),h=tD(qe(s,Ct(r))),m=ge(ge(ge(h,h),h),Ct(-.5));return{x:()=>i.rank===1?be(ge(ge(t,us(be(h,[1,1,1,i.shape[0]]),c)),u),a.shape):be(ge(ge(t,h),u),a.shape),mean:()=>{let S=ge(ge(h,Ct(-1)),d);return i.rank===1&&(S=ht(S,l)),be(S,i.shape)},variance:()=>{let S=ge(ge(m,f),d);return i.rank===1&&(S=ht(S,l)),be(S,i.shape)},scale:()=>{const S=ge(f,h);let C=ge(t,S);return i.rank===1&&(C=ht(C,l)),be(C,i.shape)},offset:()=>{let S=t;return i.rank===1&&(S=ht(S,l)),be(S,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ple={kernelName:sb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,a]=e,{axis:i,batchDims:s}=n,o=an(i,r.shape)[0],u=(l,c,f)=>()=>{const d=l.shape,h=c.size,m=d.slice(0,o),v=m.length,y=d.slice(i,d.length).slice(1),b=y.length,x=ZO(0,v),w=ZO(v+1,v+1+b),S=QO([m,[h],y]),C=be(f,S),E=be(c,[h]),A=QO([[v],x,w]),k=pn(C,A);let D=fD(k,E,l.shape[o]);const I=Cl(A);return D=pn(D,I),D};if(s===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>wi(c.map((h,m)=>u(h,a.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>a}}else return{x:u(r,a,t),indices:()=>a}}};function ZO(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function QO(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ble={kernelName:km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>mn(n),b:()=>mn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lle={kernelName:_m,gradFunc:t=>({x:()=>ot(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zle={kernelName:Om,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ule={kernelName:Fm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vle={kernelName:Rm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wle={kernelName:ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:a}=n,i=Ti(r,0);return{x:()=>pa(i,t,ge(t,a))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qle={kernelName:Pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,qe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hle={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ot(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jle={kernelName:KQ,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;return{logits:()=>{const s=bi(r);return ft(t,ge(ht(t,a,!0),s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gle(t,e,n,r=5,a=1,i=1,s=.5){const o={x:t,y:e,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:s};return me.runKernel(tT,o,u)}const Xle=de({localResponseNormalizationBackprop_:Gle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kle={kernelName:hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{depthRadius:i,bias:s,alpha:o,beta:u}=n;return{x:()=>Xle(r,a,t,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n,r){return e.rank<n.rank&&(e=be(e,dr(e.shape,r))),t.rank<n.rank&&(t=be(t,dr(t.shape,r))),{x:()=>ge(t,ot(Ws(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JO={kernelName:mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:a}=r,i=e[0],s=e[1],o=an(a,i.shape),u=k5(t,s,i,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yle={kernelName:Bm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,ot(El(n,r),"float32")),b:()=>ge(t,ot(Wh(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zle(t,e,n,r,a,i,s){const o=Q(t,"dy","maxPool3dGrad"),u=Q(e,"input","maxPool3dGrad"),l=Q(n,"output","maxPool3dGrad");let c=o,f=u,d=l,h=!1;u.rank===4&&(h=!0,c=be(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),f=be(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=be(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),Y(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),Y(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),Y(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Ma("maxPool3dGrad",i,s);const m={dy:c,input:f,output:d},v={filterSize:r,strides:a,pad:i,dimRoundingMode:s},y=me.runKernel(rT,m,v);return h?be(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const Qle=de({maxPool3dGrad_:Zle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jle={kernelName:vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=n;return{x:()=>Qle(t,r,a,i,s,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ece(t,e,n,r,a,i,s){const o=Q(t,"dy","maxPoolGrad"),u=Q(e,"input","maxPoolGrad"),l=Q(n,"output","maxPoolGrad");Y(u.rank===o.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${o.rank})`),Y(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),Y(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Ma("maxPoolGrad",i,s);const c={dy:o,input:u,output:l},f={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return me.runKernel(nT,c,f)}const tce=de({maxPoolGrad_:ece});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nce={kernelName:gb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,a]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>tce(t,r,a,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rce={kernelName:yb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n,i=an(a,r.shape),o=Wr(r.shape,i)[1],u=Oe(o);return{x:()=>{const c=r.shape.slice();i.forEach(h=>{c[h]=1});const f=be(t,c);return bt(ge(f,pi(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ace={kernelName:bb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:a}=r,[i,s]=e,o=an(a,i.shape),u=k5(t,s,i,o);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ice={kernelName:Lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ge(t,ot(qc(n,r),"float32")),b:()=>ge(t,ot(Ti(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sce={kernelName:wb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>dn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oce={kernelName:zm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=_r(n.shape,a);return o.length>0?be(ht(t,o),n.shape):t},b:()=>{const o=ge(t,Hn(pg(bt(n,r)))),u=_r(r.shape,a);return u.length>0?be(ht(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uce={kernelName:Um,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=ge(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{const o=ge(t,ot(n,"float32")),u=_r(r.shape,a);return u.length>0?be(ht(o,u),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lce={kernelName:xb,gradFunc:t=>({x:()=>Hn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cce={kernelName:Cb,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Tr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fce={kernelName:Sb,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dce={kernelName:Eb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return bs(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3={kernelName:Tb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:a}=n,i=a.map(s=>s[0]);return{x:()=>dn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pce={kernelName:Vm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,a]=e,i=n,s=r,o=Ht(i.shape,s.shape);return{a:()=>{const c=ot(s,"float32");let f=ge(t,ge(c,iu(i,ft(c,Ct(1)))));const d=_r(i.shape,o);return d.length>0&&(f=ht(f,d)),be(f,i.shape)},b:()=>{const c=Ti(i,0),f=pa(c,Mi(i),mn(i));let d=ge(t,ge(a,f));const h=_r(s.shape,o);return h.length>0&&(d=ht(d,h)),be(d,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hce={kernelName:Db,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,a=Ti(n,0);return{x:()=>pa(a,t,ge(t,r)),alpha:()=>{let i=pa(a,mn(t),ge(t,n));const s=_r(r.shape,t.shape);return s.length>0&&(i=ht(i,s)),be(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mce(t,e,n){const r=t.shape.slice();r[n]=1;const a=be(e,r),i=B0(t,n,!0,!1),s=B0(t,n,!0,!0),o=ge(i,s);return ge(a,o)}function gce(t,e,n){const r=t.shape.length,a=r-n.length,i=nr(n,r);let s=t;i!=null&&(s=pn(t,i));const o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((d,h)=>d*h,1);o.push(l);const c=s.reshape(o);let f=mce(c,e,a);if(f=f.reshape(s.shape),i!=null){const d=Cl(i);f=pn(f,d)}return f}const vce={kernelName:$b,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:a}=n;let i=[];return a==null?i=r.shape.map((s,o)=>o):typeof a=="number"?i=[a]:i=a,{x:()=>gce(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yce={kernelName:Cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{const o=bt(t,ot(r,"float32")),u=_r(n.shape,a);return u.length>0?be(ht(o,u),n.shape):o},b:()=>{let o=ge(t,ot(n,"float32"));const u=_r(r.shape,a);u.length>0&&(o=be(ht(o,u),r.shape));const l=Pn(r);return Hn(bt(o,ot(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bce={kernelName:Wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,Hn(Pn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wce={kernelName:Hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ge(qc(n,6),Qd(n));return{x:()=>ge(t,ot(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xce={kernelName:qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ot(Qd(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nce={kernelName:Ab,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>be(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sce={kernelName:kb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(mT,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cce={kernelName:Ib,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,a={dy:t,images:r};return{images:()=>me.runKernel(hT,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ece={kernelName:_b,gradFunc:(t,e,n)=>{const{dims:r}=n,a=an(r,t.shape);return{x:()=>ys(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tce={kernelName:jm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dce={kernelName:Gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Hn(bt(t,ge(iu(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce={kernelName:Ob,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>ot(mn(n),"float32"),t:()=>ge(t,ot(n,t.dtype)),e:()=>ge(t,ot(Zb(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ace={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Ti(n,Ct(0)),a=Ct(pw),i=Ct(hw),s=ge(t,i),o=ge(ge(t,a),bi(ot(n,"float32")));return pa(r,s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ice={kernelName:Qm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(n,ft(Ct(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kce={kernelName:Zm,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ce={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(jb(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oce={kernelName:Ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(VT(ot(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fce={kernelName:Fb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:a,size:i}=n,s=r.shape,[o,u]=fw(r,a,i),l=[];for(let c=0;c<t.rank;c++)l.push([o[c],s[c]-o[c]-u[c]]);return{x:()=>Tl(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rce={kernelName:Bb,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:a}=n,i=!0,s=ge(t,r);return{logits:()=>ft(s,ge(ht(s,[a],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mce={kernelName:Jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,bo(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3={kernelName:Mb,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>Hb(t,r,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3={kernelName:Pb,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>wr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pce={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,ge(na(ot(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bce={kernelName:CT,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(t,ge(ot(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lce={kernelName:tg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ct(2);return{a:()=>ge(t,ge(a,ft(n,r))),b:()=>ge(t,ge(a,ft(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zce={kernelName:sg,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uce={kernelName:ng,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,a=Ht(n.shape,r.shape);return{a:()=>{let o=t;const u=_r(n.shape,a);return u.length>0&&(o=ht(o,u)),be(o,n.shape)},b:()=>{let o=t;const u=_r(r.shape,a);return u.length>0&&(o=ht(o,u)),be(Hn(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vce={kernelName:Rb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,a=r.shape.slice(),{axis:i}=n;an(i,r.shape).forEach(l=>{a[l]=1});const o=be(t,a),u=ge(o,pi(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wce={kernelName:rg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bt(t,Pn(jb(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qce={kernelName:ag,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ge(ft(Ct(1),Pn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hce={kernelName:ig,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:a}=n;return{x:()=>{let s=mn(r);if(r.rank===1)for(let o=0;o<a[0];++o)s=qe(s,dn(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)s=qe(s,dn(t,[o*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)s=qe(s,dn(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<a[0];++o)for(let u=0;u<a[1];++u)for(let l=0;l<a[2];++l)for(let c=0;c<a[3];++c)s=qe(s,dn(t,[o*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jce={kernelName:id,gradFunc:(t,e,n)=>{const r=n,{perm:a}=r,i=Cl(a);return{x:()=>pn(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gce={kernelName:zb,gradFunc:(t,e,n)=>{const r=n,{axis:a}=r;return{value:()=>wi(t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xce={kernelName:Ub,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Kce(t,n)}}};function Kce(t,e){const n=hu(e,mn(e)),r=hg(t,n);let a=El(e,Ct(0,"int32"));const i=r.rank-a.rank;for(let o=0;o<i;++o)a=Aa(a,o+1);a=So(a,pi(r.shape,"bool"));const s=mn(r);return pa(a,r,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yce={kernelName:Vb,gradFunc:t=>({x:()=>mn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zce=[I5,Xue,Kue,Yue,Zue,Que,Jue,ele,tle,nle,rle,ale,ole,cle,fle,dle,ple,hle,mle,gle,vle,yle,wle,ble,Sle,Cle,Ele,Tle,Dle,$le,yce,Ale,Ile,kle,_le,Ole,Rle,Fle,Mle,Ple,Ble,Lle,zle,Ule,Vle,Wle,qle,Hle,jle,Kle,JO,JO,Yle,Jle,nce,rce,ace,ice,sce,oce,uce,lce,cce,fce,dce,e3,e3,pce,hce,vce,bce,wce,xce,Nce,Sce,Cce,Ece,Tce,Dce,$ce,Ace,Ice,kce,_ce,Oce,Fce,Rce,Mce,t3,t3,n3,n3,Pce,Lce,Bce,zce,Uce,Vce,Wce,qce,Hce,jce,Gce,Xce,Yce];for(const t of Zce)QQ(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.abs=function(){return this.throwIfDisposed(),Er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acos=function(){return this.throwIfDisposed(),AL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.acosh=function(){return this.throwIfDisposed(),IL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.add=function(t){return this.throwIfDisposed(),qe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.all=function(t,e){return this.throwIfDisposed(),PT(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.any=function(t,e){return this.throwIfDisposed(),P0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMax=function(t){return this.throwIfDisposed(),Cd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.argMin=function(t){return this.throwIfDisposed(),kL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asScalar=function(){return this.throwIfDisposed(),Y(this.size===1,()=>"The array must have only 1 element."),be(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asType=function(t){return this.throwIfDisposed(),ot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as1D=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as2D=function(t,e){return this.throwIfDisposed(),be(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),be(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),be(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.as5D=function(t,e,n,r,a){return this.throwIfDisposed(),be(this,[t,e,n,r,a])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asin=function(){return this.throwIfDisposed(),_L(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.asinh=function(){return this.throwIfDisposed(),OL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan=function(){return this.throwIfDisposed(),FL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atan2=function(t){return this.throwIfDisposed(),RL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.atanh=function(){return this.throwIfDisposed(),ML(this)};Be().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),qb(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Hb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.batchNorm=function(t,e,n,r,a){return this.throwIfDisposed(),lg(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.broadcastTo=function(t){return this.throwIfDisposed(),ud(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cast=function(t){return this.throwIfDisposed(),ot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ceil=function(){return this.throwIfDisposed(),VL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),yi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof er&&(t=[t]),wr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv1d=function(t,e,n,r,a,i){return this.throwIfDisposed(),LT(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2dTranspose=function(t,e,n,r,a){return this.throwIfDisposed(),UT(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.conv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),ll(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cos=function(){return this.throwIfDisposed(),jb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cosh=function(){return this.throwIfDisposed(),VT(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),B0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),WT(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),YL(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.depthwiseConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),cg(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dilation2d=function(t,e,n,r,a){return this.throwIfDisposed(),ZL(this,t,e,n,r,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.divNoNan=function(t){return this.throwIfDisposed(),QL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.div=function(t){return this.throwIfDisposed(),bt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.dot=function(t){return this.throwIfDisposed(),JL(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.elu=function(){return this.throwIfDisposed(),fg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.equal=function(t){return this.throwIfDisposed(),Ws(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.erf=function(){return this.throwIfDisposed(),qT(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),nz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.exp=function(){return this.throwIfDisposed(),bi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expandDims=function(t){return this.throwIfDisposed(),Aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.expm1=function(){return this.throwIfDisposed(),rz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.fft=function(){return this.throwIfDisposed(),iw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.flatten=function(){return this.throwIfDisposed(),be(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floor=function(){return this.throwIfDisposed(),pg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.floorDiv=function(t){return this.throwIfDisposed(),MT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.gather=function(t,e,n){return this.throwIfDisposed(),hg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greaterEqual=function(t){return this.throwIfDisposed(),El(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.greater=function(t){return this.throwIfDisposed(),Ti(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.ifft=function(){return this.throwIfDisposed(),jh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.irfft=function(){return this.throwIfDisposed(),oD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isFinite=function(){return this.throwIfDisposed(),az(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isInf=function(){return this.throwIfDisposed(),iz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.isNaN=function(){return this.throwIfDisposed(),sz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Xb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.lessEqual=function(t){return this.throwIfDisposed(),qc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.less=function(t){return this.throwIfDisposed(),Wh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),oz(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSigmoid=function(){return this.throwIfDisposed(),uz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSoftmax=function(t){return this.throwIfDisposed(),GT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Yb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log=function(){return this.throwIfDisposed(),Mi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.log1p=function(){return this.throwIfDisposed(),Kb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalAnd=function(t){return this.throwIfDisposed(),So(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalNot=function(){return this.throwIfDisposed(),Zb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalOr=function(t){return this.throwIfDisposed(),XT(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.logicalXor=function(t){return this.throwIfDisposed(),lz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),nn(this,t,e,n)};Be().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Qb(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.max=function(t,e){return this.throwIfDisposed(),ps(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.maximum=function(t){return this.throwIfDisposed(),hu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mean=function(t,e){return this.throwIfDisposed(),or(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.min=function(t,e){return this.throwIfDisposed(),Vh(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.minimum=function(t){return this.throwIfDisposed(),_c(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),fz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mod=function(t){return this.throwIfDisposed(),dz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.mul=function(t){return this.throwIfDisposed(),ge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.neg=function(){return this.throwIfDisposed(),Hn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.norm=function(t,e,n){return this.throwIfDisposed(),dg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.notEqual=function(t){return this.throwIfDisposed(),Td(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),YT(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.onesLike=function(){return this.throwIfDisposed(),Pi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pad=function(t,e){return this.throwIfDisposed(),Tl(this,t,e)};Be().prototype.pool=function(t,e,n,r,a,i){return this.throwIfDisposed(),pz(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.pow=function(t){return this.throwIfDisposed(),iu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prelu=function(t){return this.throwIfDisposed(),tw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.prod=function(t,e){return this.throwIfDisposed(),hz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reciprocal=function(){return this.throwIfDisposed(),gz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu=function(){return this.throwIfDisposed(),Ao(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.relu6=function(){return this.throwIfDisposed(),JT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshapeAs=function(t){return this.throwIfDisposed(),be(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reshape=function(t){return this.throwIfDisposed(),be(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),_z(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Oz(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.reverse=function(t){return this.throwIfDisposed(),ys(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rfft=function(){return this.throwIfDisposed(),sw(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.round=function(){return this.throwIfDisposed(),eD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.rsqrt=function(){return this.throwIfDisposed(),tD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.selu=function(){return this.throwIfDisposed(),nD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.separableConv2d=function(t,e,n,r,a,i){return this.throwIfDisposed(),rD(this,t,e,n,r,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sigmoid=function(){return this.throwIfDisposed(),bo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sign=function(){return this.throwIfDisposed(),vz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sin=function(){return this.throwIfDisposed(),aD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sinh=function(){return this.throwIfDisposed(),iD(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.slice=function(t,e){return this.throwIfDisposed(),dn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softmax=function(t){return this.throwIfDisposed(),aw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.softplus=function(){return this.throwIfDisposed(),Zd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ew(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.split=function(t,e){return this.throwIfDisposed(),hi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sqrt=function(){return this.throwIfDisposed(),na(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.square=function(){return this.throwIfDisposed(),Pn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squaredDifference=function(t){return this.throwIfDisposed(),uD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.squeeze=function(t){return this.throwIfDisposed(),jc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof er?[this,t]:[this,...t];return wi(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.step=function(t){return this.throwIfDisposed(),Qd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.stridedSlice=function(t,e,n,r,a,i,s,o){return this.throwIfDisposed(),yz(this,t,e,n,r,a,i,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sub=function(t){return this.throwIfDisposed(),ft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.sum=function(t,e){return this.throwIfDisposed(),ht(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tan=function(){return this.throwIfDisposed(),bz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tanh=function(){return this.throwIfDisposed(),kc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.tile=function(t){return this.throwIfDisposed(),us(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toBool=function(){return this.throwIfDisposed(),ot(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toFloat=function(){return this.throwIfDisposed(),ot(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.toInt=function(){return this.throwIfDisposed(),ot(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.topk=function(t,e){return this.throwIfDisposed(),xz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.transpose=function(t){return this.throwIfDisposed(),pn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unique=function(t){return this.throwIfDisposed(),Nz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),fD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.unstack=function(t){return this.throwIfDisposed(),bs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.where=function(t,e){return this.throwIfDisposed(),pa(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Be().prototype.zerosLike=function(){return this.throwIfDisposed(),mn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class co extends Error{constructor(e){super(e),Object.setPrototypeOf(this,co.prototype)}}class ls extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ls.prototype)}}class we extends Error{constructor(e){super(e),Object.setPrototypeOf(this,we.prototype)}}class Zt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zt.prototype)}}class XD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,XD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _5{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function fo(t,e){if(!t)throw new XD(e)}function r3(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Wa(t){return t.length===1?t[0]:t}function Dn(t){return Array.isArray(t)?t:[t]}function Xo(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function dc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Zi={};function KD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function CC(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>CC(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:CC(r))}}}function bg(t,e={},n={},r="object",a=!1){if(typeof t=="string"){const i=t;let s;if(i in n)s=n[i];else if(i in Zi)s=Zi[i];else if(s=e[i],s==null)throw new we(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{const i=t;if(i.className==null||i.config==null)throw new we(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const s=i.className;let o,u;if(s in n?[o,u]=n[s]:s in Zi?[o,u]=Zi.className:s in e&&([o,u]=e[s]),o==null)throw new we(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const h of Object.keys(Zi))l[h]=Zi[h];for(const h of Object.keys(n))l[h]=n[h];const c=i.config;c.customObjects=l;const f=Object.assign({},Zi);for(const h of Object.keys(n))Zi[h]=n[h];CC(i.config);const d=u(o,i.config,n,a);return Zi=Object.assign({},f),d}else{const l=Object.assign({},Zi);for(const f of Object.keys(n))Zi[f]=n[f];const c=new o(i.config);return Zi=Object.assign({},l),c}}}function Qce(t,e){return t<e?-1:t>e?1:0}function Ny(t,e){return-1*Qce(t,e)}function el(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function Jce(t){if(t==null)throw new we(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Xc(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new we(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function YD(t,e,n=0,r=1/0){return fo(n>=0),fo(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(a=>typeof a===e)}function zr(t,e){Array.isArray(t)?(Y(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>zr(n,`element ${r+1} of ${e}`))):Y(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${O5(t)}.`)}function O5(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>O5(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function efe(t,e,n){let r=n!=null?n():Va(),a;return(...s)=>{const o=n!=null?n():Va();return o-r<e||(r=o,a=t(...s)),a}}function F5(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let tfe=0;function R5(){return tfe++}const Sy={};function mw(t=""){return t in Sy||(Sy[t]=0),Sy[t]+=1,t+Sy[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nfe=["channelsFirst","channelsLast"],rfe=["nearest","bilinear"],afe=["valid","same","causal"],ife=["max","avg"],sfe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Lf=new Map;function hr(t){Xc(nfe,"DataFormat",t)}function ofe(t){Xc(rfe,"InterpolationFormat",t)}function zi(t){Xc(afe,"PaddingMode",t)}function M5(t){Xc(ife,"PoolMode",t)}const $h=[],a3="/";function wc(t,e){$h.push(t);try{const n=e();return $h.pop(),n}catch(n){throw $h.pop(),n}}function ufe(){return $h.length===0?"":$h.join(a3)+a3}function P5(t){if(!L5(t))throw new Error("Not a valid tensor name: '"+t+"'");return ufe()+t}function B5(t){if(!L5(t))throw new Error("Not a valid tensor name: '"+t+"'");Lf.has(t)||Lf.set(t,0);const e=Lf.get(t);if(Lf.set(t,Lf.get(t)+1),e>0){const n=`${t}_${e}`;return Lf.set(n,1),n}else return t}const lfe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function L5(t){return!!t.match(lfe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cfe(t){return t===parseInt(t.toString(),10)}function tl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let a=e;a<n;++a)r*=t[a];return r}function $d(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function cl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function qs(t,e){if(e<t)throw new we(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let EN;function Dr(){return EN==null&&(EN=pL().epsilon()),EN}function Hs(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xo(t,e){return ot(t,e)}function wg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),be(t,n)}function ffe(t,e){return Te(()=>{if(t.shape.length!==2)throw new we(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=wg(t,1);return EC(n,[1,e,1])})}function dfe(t){const e=[tl(t.shape)];return be(t,e)}function pfe(t){if(t.rank<=1)throw new we(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],tl(t.shape,1)];return be(t,e)}function xc(t,e,n){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:return sD(t,[e,0],[n,t.shape[1]]);case 3:return rw(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Hh(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return dn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return dn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new we(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function TN(t,e,n){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:return sD(t,[0,e],[t.shape[0],n]);case 3:return rw(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Hh(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Cy(t,e,n,r){return Te(()=>{switch(t.rank){case 1:return nw(t,e,n);case 2:switch(r){case 1:return xc(t,e,n);case 2:return TN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return xc(t,e,n);case 2:return rw(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return TN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return xc(t,e,n);case 2:return Hh(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Hh(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return TN(t,e,n);default:throw new we(`The axis is not within the rank of the tensor ${r}`)}default:throw new we(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ZD(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),wr(t,e)}function i3(t,e){switch(t.rank){case 1:return WL([t,e]);case 2:return qL([t,e],0);case 3:return HL([t,e],0);case 4:return jL([t,e],0);default:throw new we(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function EC(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new we(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return us(t,e)}function gw(t,e=0,n=1,r,a){return QT(t,e,n,r,a)}function No(t,e,n,r){if(t.rank<2||e.rank<2)throw new Zt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const a=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(a!==i)throw new Zt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return lC({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?TC(t.rank,r,Hs()):null,activation:n});{const a=t.shape.slice(),i=a.pop();t=be(t,[-1,i]);const s=e.shape.slice(),o=s.pop(),u=s.pop(),l=[...s,o],c=Array.from({length:e.rank},(m,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=be(pn(e,c),[u,-1]);const f=[...a,...l];return be(lC({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?TC(t.rank,r,Hs()):null,activation:n}),f)}}function z5(t,e,n){return Te(()=>(Array.isArray(e)?e=ca(e,"int32"):e=ot(e,"int32"),hg(t,e,n)))}function xg(t){return ge(t,t)}function TC(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new we(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1,1]):be(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1,1]):be(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,1,r[0]]):be(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?be(e,[1,r[0],1]):be(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?be(e,[1,1,r[0]]):be(e,[1].concat(r))}else if(t<3)return e;throw new we(`Unsupported input rank by biasAdd: ${e.rank}`)}function Xs(t,e,n){return Te(()=>(n==null&&(n=Hs()),hr(n),qe(t,TC(t.rank,e,n))))}function hfe(t,e=1){if(e!==1)throw new Zt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return fg(t)}function mfe(t){return Te(()=>bt(t,qe(Er(t),1)))}function U5(t,e,n,r){return Te(()=>Ez(t,e,n,r))}function gfe(t){return Te(()=>{const e=qe(.5,ge(.2,t));return yi(e,0,1)})}function Ng(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const vfe=["fanIn","fanOut","fanAvg"],yfe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bfe(t){Xc(vfe,"FanMode",t)}function wfe(t){Xc(yfe,"Distribution",t)}class Ns extends ep{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class V5 extends Ns{apply(e,n){return Tr(e,n)}}V5.className="Zeros";Xe(V5);class QD extends Ns{apply(e,n){return pi(e,n)}}QD.className="Ones";Xe(QD);class W5 extends Ns{constructor(e){if(super(),typeof e!="object")throw new we(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new we(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Te(()=>ge(Ct(this.value),pi(e,n)))}getConfig(){return{value:this.value}}}W5.className="Constant";Xe(W5);class q5 extends Ns{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Hc(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}q5.className="RandomUniform";Xe(q5);class H5 extends Ns{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`randomNormal does not support dType ${n}.`);return gw(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}H5.className="RandomNormal";Xe(H5);class j5 extends Ns{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`truncatedNormal does not support dType ${n}.`);return cD(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}j5.className="TruncatedNormal";Xe(j5);class G5 extends Ns{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Te(()=>{if(e.length!==2||e[0]!==e[1])throw new we("Identity matrix initializer can only be used for 2D square matrices.");return ge(this.gain,jT(e[0]))})}getConfig(){return{gain:this.gain}}}G5.className="Identity";Xe(G5);function xfe(t,e="channelsLast"){let n,r;if(hr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const a=tl(t,2);n=t[1]*a,r=t[0]*a}else if(e==="channelsLast"){const a=tl(t,0,t.length-2);n=t[t.length-2]*a,r=t[t.length-1]*a}}else{const a=tl(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}class xi extends Ns{constructor(e){if(super(),e.scale<0)throw new we(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,bfe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,wfe(this.distribution),this.seed=e.seed}apply(e,n){const r=xfe(e),a=r[0],i=r[1];let s=this.scale;if(this.mode==="fanIn"?s/=Math.max(1,a):this.mode==="fanOut"?s/=Math.max(1,i):s/=Math.max(1,(a+i)/2),this.distribution==="normal"){const o=Math.sqrt(s);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`${this.getClassName()} does not support dType ${n}.`);return cD(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*s);return Hc(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}xi.className="VarianceScaling";Xe(xi);class JD extends xi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xi.className}}JD.className="GlorotUniform";Xe(JD);class e$ extends xi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xi.className}}e$.className="GlorotNormal";Xe(e$);class t$ extends xi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xi.className}}t$.className="HeNormal";Xe(t$);class n$ extends xi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xi.className}}n$.className="HeUniform";Xe(n$);class r$ extends xi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return xi.className}}r$.className="LeCunNormal";Xe(r$);class a$ extends xi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return xi.className}}a$.className="LeCunUniform";Xe(a$);class X5 extends Ns{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Te(()=>{if(e.length<2)throw new Zt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Oe(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const s=[Math.max(a,r),Math.min(a,r)],o=gw(s,0,1,n,this.seed),u=Fz.qr(o,!1);let l=u[0];const f=u[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return l=ge(l,f.sign()),r<a&&(l=l.transpose()),ge(Ct(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}X5.className="Orthogonal";Xe(X5);const s3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function o3(t,e={}){return bg(t,ss.getMap().classNameMap,e,"initializer")}function tr(t){return KD(t)}function Kn(t){if(typeof t=="string"){const e=t in s3?s3[t]:t;if(e==="GlorotNormal")return new e$;if(e==="GlorotUniform")return new JD;if(e==="HeNormal")return new t$;if(e==="HeUniform")return new n$;if(e==="LeCunNormal")return new r$;if(e==="LeCunUniform")return new a$;{const n={};return n.className=e,n.config={},o3(n)}}else return t instanceof Ns?t:o3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DC(t){return Array.isArray(t)&&Array.isArray(t[0])}function U0(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Mt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new we(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function bn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new we(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V0(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,a)=>r*a);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const u3="Variable";class Nfe{constructor(e,n="float32",r=u3,a=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=R5(),r=r??u3,this.originalName=P5(r),this.name=B5(this.originalName),this.trainable_=a,this.constraint=i,this.val=Sz(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Sfe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Sfe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function $C(t){return t.map(e=>e.read())}function i$(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $r{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Co{constructor(e,n,r,a,i,s,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=o,this.id=R5(),s!=null&&(this.originalName=P5(s),this.name=B5(this.originalName)),this.rank=n.length}}let Cfe=0,vw=class{constructor(e,n){this.callArgs=n,this.id=Cfe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Efe=0;class sn extends ep{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Efe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Xo(r)+"_"+mw(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let a=e.dtype;a==null&&(a=e.inputDType),a==null&&(a="float32"),this.dtype=a}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new ls(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new we(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Wa(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Wa(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new co(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new co(`Layer ${this.name} is not connected, no input to return.`);return Wa(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new co(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new co(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Wa(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Dn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Dn(this.inputSpec);if(n.length!==r.length)throw new we(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let a=0;a<n.length;a++){const i=n[a],s=r[a];if(s==null)continue;const o=i.rank;if(s.ndim!=null&&o!==s.ndim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${o}`);if(s.maxNDim!=null&&o>s.maxNDim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${o}`);if(s.minNDim!=null&&o<s.minNDim)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${o}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new we(`Input ${a} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){const u=i.shape;for(const l in s.axes){const c=Number(l),f=s.axes[l],d=c>=0?u[c]:u[u.length+c];if(f!=null&&[f,null].indexOf(d)===-1)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${f} but got shape ${u}.`)}}if(s.shape!=null)for(let u=0;u<s.shape.length;++u){const l=s.shape[u],c=i.shape[u];if(l!=null&&c!=null&&l!==c)throw new we(`Input ${a} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Dn(e),a=$fe(e),i=Afe(e);if(a===i)throw new we("Arguments to apply() must be all SymbolicTensors or all Tensors");return wc(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const s=[];for(const o of Dn(e))s.push(o.shape);this.build(Wa(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let s=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,s);const o=Dn(s),u=[];for(let l of o)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(s=Wa(u),this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{const s=Tfe(e),o=this.computeOutputShape(s);let u;const l=Dfe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?s[0]:s),o!=null&&o.length>0&&Array.isArray(o[0])?u=o.map((c,f)=>new Co(l,c,this,Dn(e),n,this.name,f)):u=new Co(l,o,this,Dn(e),n,this.name),this.addInboundNode(e,u,null,null,s,o,n),this._refCount++,this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,a)=>{r!=null&&e[a]!=null&&e[a]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new co(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new co(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ls(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return V0(this.weights)}build(e){this.built=!0}getWeights(e=!1){return $C(e?this.trainableWeights:this.weights)}setWeights(e){Te(()=>{const n=this.weights;if(n.length!==e.length)throw new we(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],a=$C(n);for(let i=0;i<a.length;++i){const s=a[i],o=n[i],u=e[i];if(!fn(s.shape,u.shape))throw new we(`Layer weight shape ${s.shape} not compatible with provided weight shape ${u.shape}`);r.push([o,u])}i$(r)})}addWeight(e,n,r,a,i,s,o,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new we(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(a=u!=null?u():Kn("zeros"));const l=a.apply(n,r),c=new Nfe(l,r,e,s,o);return l.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),s==null&&(s=!0),s?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Dn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const a=this.computeMask(e,r),i=Dn(n),s=Dn(a);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=s[o]}addInboundNode(e,n,r,a,i,s,o=null){const u=Dn(e);n=Dn(n),r=Dn(r),a=Dn(a),i=U0(i),s=U0(s);const l=[],c=[],f=[];for(const d of u)l.push(d.sourceLayer),c.push(d.nodeIndex),f.push(d.tensorIndex);new vw({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:a,inputShapes:i,outputShapes:s},o);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Tfe(t){t=Dn(t);const e=[];for(const n of t)e.push(n.shape);return Wa(e)}function Dfe(t){return"float32"}function K5(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const a=[];for(let i=0;i<r.inboundLayers.length;i++){const s=r.inputTensors[i],o=r.inboundLayers[i],u=r.nodeIndices[i],l=K5(s,o,u);for(const c of l)a.indexOf(c)===-1&&a.push(c)}return a}}}function $fe(t){let e=!0;for(const n of Dn(t))if(!(n instanceof Co)){e=!1;break}return e}function Afe(t){let e=!0;for(const n of Dn(t))if(n instanceof Co){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sg extends sn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:mw("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new we("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new we("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new we("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const a=new Co(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new we(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Sg.className="InputLayer";Xe(Sg);function Ife(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new we("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Sg({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kfe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return ot(e,t.dtype)}catch{throw new we(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Hu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Hu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=kfe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new we(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Co){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Co){if(this.id2Value[e.id]==null)throw new we(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new we(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&rn(this.id2Mask)}}const W0=new _5,q0=new _5;function _fe(t){W0!=null&&W0.setMaxEntries(t),q0!=null&&q0.setMaxEntries(t)}function bh(t,e,n,r){const a=n==null?!1:n.training,i=Array.isArray(t),s=i?t:[t],o=s.map(m=>m.name),u=[],l=e.names();for(const m of o)l.indexOf(m)!==-1?u.push(e.getValue(m)):u.push(null);const c=o.join(",")+"|"+e.names().sort().join(",");let f=W0.get(c),d;if(f==null){const m=Ofe(s,e);f=m.sorted,d=m.recipientCounts,W0.put(c,f),q0.put(c,d)}d={},a||Object.assign(d,q0.get(c));const h=new Hu(e);for(let m=0;m<f.length;++m){const v=f[m],y=v.sourceLayer;if(y instanceof Sg)continue;const b=[],x=[],w=[];let S=!1;for(const D of v.inputs){const I=h.getValue(D),$=h.getMask(D);b.push(I),x.push($),$!=null&&(S=!0),a||(d[D.name]--,d[D.name]===0&&!e.hasKey(D)&&o.indexOf(D.name)===-1&&!I.isDisposed&&D.sourceLayer.stateful!==!0&&w.push(I))}S&&(n=n||{},n.mask=x[0]);const C=Dn(y.apply(b,n));let E=null;y.supportsMasking&&(E=y.computeMask(b,x));const A=Rfe(v),k=Array.isArray(A)?A:[A];for(let D=0;D<k.length;++D){h.hasKey(k[D])||h.add(k[D],C[D],Array.isArray(E)?E[0]:E);const I=o.indexOf(k[D].name);I!==-1&&(u[I]=C[D])}a||rn(w)}return h.disposeMasks(),i?u:u[0]}function Ofe(t,e){Y(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const a=l3(t[0],e);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const i of t){const{sorted:s,recipientMap:o}=l3(i,e);for(const u of s)a.has(u.name)||(n.push(u),a.add(u.name));for(const u in o)r[u]==null&&(r[u]=new Set),o[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:Ffe(r)}}function Ffe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function l3(t,e){const n=new Set,r=[],a={};for(const o of e.names())n.add(o);const i=[],s=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const u=s[s.length-1]===i.length-1;if(o.inputs.length===0||u)i.pop(),r.push(o),n.add(o.name),u&&s.pop();else{s.push(i.length-1);for(const l of o.inputs)a[l.name]==null&&(a[l.name]=new Set),a[l.name].add(o.name),!n.has(l.name)&&i.push(l)}}return{sorted:r,recipientMap:a}}function Rfe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const a of t.sourceLayer.inboundNodes[r].outputTensors)if(a.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mfe=Ae();Mfe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,_fe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s$(t,e){return Te(()=>na(ht(ge(t,t),e,!0)))}class Cg extends ep{getConfig(){return{}}}class Y5 extends Cg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const n=s$(e,this.axis),r=yi(n,0,this.maxValue);return ge(e,bt(r,qe(Dr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Y5.className="MaxNorm";Xe(Y5);class Z5 extends Cg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>bt(e,qe(Dr(),s$(e,this.axis))))}getConfig(){return{axis:this.axis}}}Z5.className="UnitNorm";Xe(Z5);class Q5 extends Cg{apply(e){return Ao(e)}}Q5.className="NonNeg";Xe(Q5);class J5 extends Cg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const n=s$(e,this.axis),r=qe(ge(this.rate,yi(n,this.minValue,this.maxValue)),ge(1-this.rate,n));return ge(e,bt(r,qe(Dr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}J5.className="MinMaxNorm";Xe(J5);const c3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ir(t){return KD(t)}function f3(t,e={}){return bg(t,ss.getMap().classNameMap,e,"constraint")}function kr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in c3?c3[t]:t,config:{}};return f3(n)}else return t instanceof Cg?t:f3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ac(t){if(t==null)return;const e=[],n=[],r=[];for(const a in t){const i=t[a];if(typeof i!="number"){const s=i;e.push(s.data()),n.push(a),r.push(s)}}if(e.length>0){const a=await Promise.all(e);for(let i=0;i<a.length;++i)t[n[i]]=a[i][0];rn(r)}}function e6(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var d3;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(d3||(d3={}));const Pfe=125;class Gh{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Bfe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Lfe extends Gh{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const a in n){const i=n[a];if(typeof i=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+i*r;else{let s;a in this.totals?s=this.totals[a]:this.totals[a]=0;const o=Te(()=>qe(this.totals[a],ge(i,r)));this.totals[a]=o,s!=null&&s.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Te(()=>{const a=ge(bt(1,this.seen),this.totals[r]);n[r]=a,this.totals[r].dispose(),Lr(n[r])}))}}class zfe extends Gh{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const s=this.history[i];for(let o=0;o<s.length;++o)if(typeof s[o]!="number"){const u=s[o];e.push(u.data()),n.push(i),r.push(o)}}const a=await Promise.all(e);for(let i=0;i<a.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=a[i][0]}}class Ufe extends Gh{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||t5,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Pfe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");HS(this.yieldEvery)&&(this.maybeWait=efe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const a=[];this.yield!=null&&(await ac(r),a.push(this.yield(e,n,r))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ac(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ac(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ac(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ac(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):HS(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ac(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ac(e),await this.trainEnd(e))}}function t6(t,e){return t==null&&(t={}),t instanceof Gh?[t]:Array.isArray(t)&&t[0]instanceof Gh?t:Dn(t).map(r=>new Ufe(r,e))}class ts{constructor(){}static registerCallbackConstructor(e,n){Y(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ts.checkForDuplicate(n),ts.constructors[e]==null&&(ts.constructors[e]=[]),ts.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ts.constructors)ts.constructors[+n].forEach(a=>{if(a===e)throw new we("Duplicate callback constructor.")})}static clear(){ts.constructors={}}static createCallbacks(e){const n=[];for(const r in ts.constructors){const a=+r;e>=a&&n.push(...ts.constructors[a])}return n.map(r=>new r)}}ts.constructors={};function n6(t,e,n,r,a,i,s,o,u){const l=new zfe,c=[new Lfe,...ts.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const f=new Bfe(c);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:e,doValidation:o,metrics:u}),{callbackList:f,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jo(t,e={},n=!1){return bg(t,ss.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function H0(t,e){return Te(()=>{t.dtype!=="float32"&&(t=ot(t,"float32"));const n=ht(xg(t),e,!0),r=Yd(n.shape,Dr()),a=na(hu(n,r));return bt(t,a)})}function yw(t,e){return Te(()=>or(xg(ft(e,t)),-1))}function o$(t,e){return Te(()=>or(Er(ft(e,t)),-1))}function u$(t,e){return Te(()=>{const n=ft(t,e),r=yi(Er(t),Dr(),Number.MAX_VALUE),a=Er(bt(n,r));return ge(100,or(a,-1))})}function Vfe(t,e){return Te(()=>{const n=yi(e,Dr(),Number.MAX_VALUE),r=Mi(qe(1,n)),a=yi(t,Dr(),Number.MAX_VALUE),i=Mi(qe(1,a));return or(xg(ft(r,i)),-1)})}function Wfe(t,e){return Te(()=>{const n=hu(0,ft(1,ge(t,e)));return or(xg(n),-1)})}function qfe(t,e){return Te(()=>{const n=hu(0,ft(1,ge(t,e)));return or(n,-1)})}function Hfe(t,e){return Te(()=>{const n=ht(ge(t,e),-1),r=ps(ge(ft(1,t),e),-1);return hu(0,qe(1,ft(r,n)))})}function jfe(t,e){return Te(()=>{const n=Math.log(2),r=ft(e,t),a=ft(qe(r,Zd(ge(-2,r))),n);return or(a,-1)})}function Xh(t,e,n=!1){return Te(()=>{if(n)e=aw(e);else{const r=ht(e,e.shape.length-1,!0);e=bt(e,r)}return e=yi(e,Dr(),1-Dr()),Hn(ht(ge(ot(t,"float32"),Mi(e)),e.shape.length-1))})}function j0(t,e,n=!1){return Te(()=>{const r=ot(pg(dfe(t)),"int32");e=yi(e,Dr(),1-Dr());const a=e.shape,i=be(YT(r,a[a.length-1]),a);return Xh(i,e,n)})}function Gfe(t,e){if(!fn(t.shape,e.shape))throw new we(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Te(()=>{const n=Ao(e),r=Hn(Er(e));return qe(ft(n,ge(e,t)),Kb(bi(r)))})}function bw(t,e){return Te(()=>{let n;return n=yi(e,Dr(),1-Dr()),n=Mi(bt(n,ft(1,n))),or(Gfe(t,n),-1)})}function Xfe(t,e){return Te(()=>{const n=yi(t,Dr(),1),r=yi(e,Dr(),1);return ht(ge(t,Mi(bt(n,r))),-1)})}function Kfe(t,e){return Te(()=>{const n=Mi(qe(Dr(),e));return or(ft(e,ge(t,n)),-1)})}function r6(t,e){return Te(()=>{const n=H0(t,-1),r=H0(e,-1),a=ge(n,r);return Hn(ht(a,-1))})}const G0={meanSquaredError:yw,meanAbsoluteError:o$,meanAbsolutePercentageError:u$,meanSquaredLogarithmicError:Vfe,squaredHinge:Wfe,hinge:qfe,categoricalHinge:Hfe,logcosh:jfe,categoricalCrossentropy:Xh,sparseCategoricalCrossentropy:j0,binaryCrossentropy:bw,kullbackLeiblerDivergence:Xfe,poisson:Kfe,cosineProximity:r6};function DN(t){if(typeof t=="string"){if(t in G0)return G0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new we(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a6(t,e){return Te(()=>{const n=ge(.5,Pi(e)),r=xo(Ti(e,n),t.dtype);return or(Ws(t,r),-1)})}function i6(t,e){return Te(()=>xo(Ws(Cd(t,-1),Cd(e,-1)),"float32"))}function Yfe(t,e){return Te(()=>ot(ht(So(Ws(t,1),Ws(e,1))),"float32"))}function Zfe(t,e){return Te(()=>ot(ht(So(Ws(t,0),Ws(e,1))),"float32"))}function Qfe(t,e){return Te(()=>{const n=Yfe(t,e),r=Zfe(t,e),a=qe(n,r);return ot(pa(Ti(a,0),bt(n,a),0),"float32")})}function Jfe(t,e){return bw(t,e)}function ede(t,e){return t.rank===e.rank&&(t=jc(t,[t.rank-1])),e=Cd(e,-1),e.dtype!==t.dtype&&(e=ot(e,t.dtype)),ot(Ws(t,e),"float32")}const tde=yw,nde=yw,rde=o$,ade=o$,ide=u$,sde=u$,s6=Xh,ode=r6,o6=j0,X0={binaryAccuracy:a6,categoricalAccuracy:i6,precision:Qfe,categoricalCrossentropy:s6,sparseCategoricalCrossentropy:o6,mse:tde,MSE:nde,mae:rde,MAE:ade,mape:ide,MAPE:sde,cosine:ode};function ude(t){if(typeof t=="string"&&t in X0)return X0[t];if(typeof t!="string"&&t!=null)return t;throw new we(`Unknown metric ${t}`)}function Ey(t){if(fo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(G0))if(G0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(X0))if(X0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lde(t){const e={Adagrad:()=>Bf.adagrad(.01),Adadelta:()=>Bf.adadelta(1,.95,Dr()),Adam:()=>Bf.adam(.001,.9,.999,Dr()),Adamax:()=>Bf.adamax(.002,.9,.999,Dr(),0),RMSProp:()=>Bf.rmsprop(.001,.9,0,Dr()),SGD:()=>Bf.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new we(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const p3=1*1024*1024;function h3(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!AC(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>p3&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${p3}.`)}}function AC(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!AC(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!AC(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cde(t,e,n,r=console.log){const a=dde(t),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let s;if(!a){i.push("Receives inputs"),s=[];for(const c in t.nodesByDepth)s.push(...t.nodesByDepth[c])}r("_".repeat(e)),K0(i,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)a?pde(o[c],n,r):hde(o[c],n,s,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=fde(t),l=V0(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function fde(t){let e;return t.collectedTrainableWeights!=null?e=V0(t.collectedTrainableWeights):e=V0(t.trainableWeights),e}function dde(t){let e=!0;const n=[],r=[];for(const a in t.nodesByDepth)n.push(t.nodesByDepth[a]);for(const a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){e=!1;break}r.push(...a)}if(e)for(const a of t.layers){let i=!1;for(const s of a.inboundNodes)if(r.indexOf(s)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function K0(t,e,n=console.log){let r="";for(let a=0;a<t.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=t[a],r=r.slice(0,e[a]),r+=" ".repeat(e[a]-r.length);n(r)}function pde(t,e,n){let r,a;try{a=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{a="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,s=t.getClassName(),o=[`${i} (${s})`,a,r,t.countParams().toString()];K0(o,e,n)}function hde(t,e,n,r){let a,i;try{i=t.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{i="multiple"}try{a=JSON.stringify(t.outputShape)}catch{a="multiple"}const s=[];for(const f of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(f)===-1))for(let d=0;d<f.inboundLayers.length;++d){const h=f.inboundLayers[d].name,m=f.nodeIndices[d],v=f.tensorIndices[d];s.push(`${h}[${m}][${v}]`)}const o=t.name,u=t.getClassName(),l=s.length===0?"":s[0],c=[`${o} (${u})`,i,a,t.countParams().toString(),l];K0(c,e,r);for(let f=1;f<s.length;++f)K0(["","","","",s[f]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u6(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function IC(t,e){if(t===null)return null;if(typeof t=="string")return dc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];u6(e,a,i)?n.push(i):n.push(IC(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r];if(r==="name"&&typeof a=="string")n[r]=a;else{const i=dc(r);n[i]=IC(a,i)}}return n}}function kC(t,e){if(t==null)return null;if(typeof t=="string")return Xo(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let a=0;a<r;++a){const i=t[a];u6(e,a,i)?n.push(i):n.push(kC(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const a=t[r],i=Xo(r);(r==="name"||r==="className")&&typeof a=="string"?n[i]=a:n[i]=kC(a,r)}return n}}/** @license See the LICENSE file. */const l6="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const mde=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Rs extends sn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const x=this.getClassName().toLowerCase();this.name=mw(x)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],el(this.inputs).length!==this.inputs.length)throw new we(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(x=>x.name)}`);el(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(x=>x.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const x of this.outputs){const w=x.sourceLayer,S=x.nodeIndex,C=x.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(C)}for(const x of this.inputs){const w=x.sourceLayer,S=x.nodeIndex,C=x.tensorIndex;fo(S===0,"input layer has >1 nodes"),fo(C===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let x=0;x<this.inputLayers.length;x++){const w=this.inputLayers[x];if(!(w instanceof Sg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${x} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const x of this.outputLayers)this.outputNames.push(x.name);this.internalInputShapes=this.inputs.map(x=>x.shape),this.internalOutputShapes=this.outputs.map(x=>x.shape);const n={},r={},a={},i={},s={},o=[],u=(x,w,S,C,E,A)=>{(C==null||E==null||A==null)&&(C=x.sourceLayer,E=x.nodeIndex,A=x.tensorIndex);const k=C.inboundNodes[E];if(S.indexOf(k)!==-1)throw new ls(`The tensor ${x.name} at layer "${C.name}" is part of a cycle.`);if(w.indexOf(k)!==-1)return;this.containerNodes.add(Rs.nodeKey(C,E)),C.id in s||(s[C.id]=Object.keys(s).length),S.indexOf(k)===-1&&S.push(k);const D=k.inboundLayers.length;for(let I=0;I<D;I++){const $=k.inputTensors[I],O=k.inboundLayers[I],B=k.nodeIndices[I],z=k.tensorIndices[I];u($,w,S,O,B,z)}for(w.push(k);S.indexOf(k)>=0;)S.splice(S.indexOf(k),1);o.push(k)},l=[],c=[];for(const x of this.outputs)u(x,l,c);const f=o.slice().reverse();for(const x of f){r[x.id]=x,x.id in n||(n[x.id]=0);let w=n[x.id];const S=a[x.outboundLayer.id]==null?0:a[x.outboundLayer.id];w=Math.max(w,S),a[x.outboundLayer.id]=w,i[x.outboundLayer.id]=x.outboundLayer,n[x.id]=w;for(let C=0;C<x.inboundLayers.length;C++){const E=x.inboundLayers[C],A=x.nodeIndices[C],k=E.inboundNodes[A],D=n[k.id]==null?0:n[k.id];n[k.id]=Math.max(w+1,D),r[k.id]=k}}const d={};for(const x in n){const w=n[x];w in d||(d[w]=[]),d[w].push(r[x])}const h={};for(const x in a){const w=a[x];w in h||(h[w]=[]),h[w].push(i[x])}let m=Object.keys(h).map(x=>parseInt(x,10)).sort(Ny);this.layers=[];for(const x of m){const w=h[x];w.sort((S,C)=>{const E=s[S.id],A=s[C.id];return E<A?-1:E>A?1:0});for(const S of w)S instanceof Rs&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=h,m=Object.keys(d).map(x=>parseInt(x,10)).sort(Ny);const v=this.inputs.slice(),y=[];for(const x of m)for(const w of d[x]){const S=w.outboundLayer;if(S!=null){for(const C of w.inputTensors)if(v.indexOf(C)===-1)throw new ls(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${S.name}". The following previous layers were accessed without issue: ${y}`);for(const C of w.outputTensors)v.push(C);y.push(S.name)}}this.nodesByDepth=d;const b=this.layers.map(x=>x.name);for(const x of b){const w=b.filter(S=>S===x).length;if(w!==1)throw new ls(`The name "${x}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(x=>null),outputMasks:this.outputs.map(x=>null),inputShapes:this.inputs.map(x=>x.shape),outputShapes:this.outputs.map(x=>x.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new we("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let a=0;const i=mde(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[u,l]of o.weights.entries()){const c=i?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new we(`Duplicate weight name: ${c}`);r[c]=l,a++}const s=[];for(const o in e){let u=o;if(r[o]==null){const l=o.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)s.push([r[u],e[o]]);else if(n)throw new we(`Provided weight data has no target variable: ${o}`);delete r[u]}if(n){const o=[];for(const u in r)o.push(u);if(o.length>0)throw new we(`${o.length} of ${a} weights are not set: ${o}`)}i$(s)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),a=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!a.includes(s)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${l6}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=kC(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Te(()=>{e=Dn(e);const r=new Hu;for(let a=0;a<this.inputs.length;++a)r.add(this.inputs[a],e[a]);return bh(this.outputs,r,n)})}computeMask(e,n){return Te(()=>{e=Dn(e);let r;return n==null?r=Rc(null,e.length):r=Dn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=U0(e);if(n.length!==this.inputLayers.length)throw new we(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const u=this.inputLayers[o],l=n[o],c=u.name+"_0_0";r[c]=l}const a=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Ny);if(a.length>1)for(const o of a){const u=this.nodesByDepth[o];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(c.id)!==-1)continue;const f=[];for(let v=0;v<l.inboundLayers.length;v++){const y=l.inboundLayers[v],b=l.nodeIndices[v],x=l.tensorIndices[v],w=`${y.name}_${b}_${x}`,S=r[w];f.push(S)}const d=c.computeOutputShape(Wa(f)),h=U0(d),m=c.inboundNodes.indexOf(l);for(let v=0;v<h.length;v++){const y=`${c.name}_${m}_${v}`;r[y]=h[v]}}}const i=[],s=[];for(let o=0;o<this.outputLayers.length;o++){const u=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],f=`${u.name}_${l}_${c}`;s.push(f)}for(let o=0;o<s.length;o++){const u=s[o];fo(u in r),i.push(r[u])}return Wa(i)}runInternalGraph(e,n){n==null&&(n=Rc(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],f=n[u];r[l.id]=[c,f]}const a=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Ny);for(const u of a){const l=this.nodesByDepth[u];for(const c of l){const f=c.outboundLayer,d=c.inputTensors,h=c.outputTensors,m=new Array;for(const v of d)v.id in r&&m.push(r[v.id]);if(m.length===d.length){let v={},y,b,x,w;if(c.callArgs!=null&&(v=c.callArgs),m.length===1){const[S,C]=m[0];v.mask==null&&(v.mask=C),x=Dn(f.call(S,v)),w=Dn(f.computeMask(S,C)),y=[S],b=[C]}else y=m.map(S=>S[0]),b=m.map(S=>S[1]),v.mask==null&&(v.mask=b),x=Dn(f.call(y,v)),w=Dn(f.computeMask(y,b));if(f.activityRegularizer)throw new Zt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<h.length;++S){const C=h[S],E=x[S],A=w[S];r[C.id]=[E,A]}}}}const i=[],s=[],o=[];for(const u of this.outputs){fo(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];o.push(l.shape),i.push(l),s.push(c)}return[i,s,o]}buildNodeConversionMap(e){const n={};let r;for(const a of this.layers){r=a instanceof Rs?1:0;for(let i=0;i<a.inboundNodes.length;i++){const s=Rs.nodeKey(a,i);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new we("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new we(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new we(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Te(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const a=Rs.nodeKey(n,r);this.containerNodes.has(a)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const s of this.layers){const o=s.getClassName(),u=s.getConfig(),l=[];for(let f=0;f<s.inboundNodes.length;f++){const d=s.inboundNodes[f],h=Rs.nodeKey(s,f);let m={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),m=d.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(d.inboundLayers.length>0){const v=[];for(let y=0;y<d.inboundLayers.length;y++){const b=d.inboundLayers[y],x=d.nodeIndices[y],w=d.tensorIndices[y],S=Rs.nodeKey(b,x);let C=n[S];C==null&&(C=0),v.push([b.name,C,w,m])}l.push(v)}}}const c={};c.name=s.name,c.className=o,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const a=[];for(let s=0;s<this.inputLayers.length;s++){const o=this.inputLayers[s],u=this.inputLayersNodeIndices[s],l=Rs.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.inputLayersTensorIndices[s];a.push([o.name,c,f])}e.inputLayers=a;const i=[];for(let s=0;s<this.outputLayers.length;s++){const o=this.outputLayers[s],u=this.outputLayersNodeIndices[s],l=Rs.nodeKey(o,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const f=this.outputLayersTensorIndices[s];i.push([o.name,c,f])}return e.outputLayers=i,e}static fromConfig(e,n,r={},a=!1){const i={},s={};function o(y,b){y.name in s?s[y.name].push(b):s[y.name]=[b]}function u(y,b){const x=[];let w;for(const S of b){const C=S[0],E=S[1],A=S[2];if(w=S[3]==null?{}:S[3],!(C in i)){o(y,b);return}const k=i[C];if(k.inboundNodes.length<=E){o(y,b);return}const D=k.inboundNodes[E];x.push(D.outputTensors[A])}x.length>0&&y.apply(Wa(x),w)}function l(y){const b=y.name,x=Jo(y,n.customObjects!=null?n.customObjects:{});x.setFastWeightInitDuringBuild(a),i[b]=x,y.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new we(`Corrupted configuration, expected array for nodeData: ${S}`);o(x,S)})}const c=n.name,f=n.layers;for(const y of f)l(y);for(;!Jce(s);)for(const y of f){const b=i[y.name];if(b.name in s){const x=s[b.name];delete s[b.name];for(const w of x)u(b,w)}}const d=[],h=[],m=n.inputLayers;for(const y of m){const b=y[0],x=y[1],w=y[2];fo(b in i);const C=i[b].inboundNodes[x].outputTensors;d.push(C[w])}const v=n.outputLayers;for(const y of v){const b=y[0],x=y[1],w=y[2];fo(b in i);const C=i[b].inboundNodes[x].outputTensors;h.push(C[w])}return new e({inputs:d,outputs:h,name:c})}get stateful(){if(this._stateful)throw new we("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Te(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gde(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(a=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const a=[];return e.forEach(i=>{i in t?a.push(t[i]):a.push(null)}),a}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function c6(t,e){return gde(t,e,"classWeight")}async function f6(t,e,n,r){if(n!=null){const a=Te(()=>{if(t.shape.length===1)return Qo(t);if(t.shape.length===2){if(t.shape[1]>1)return Cd(t,1);if(t.shape[1]===1)return be(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await a.data());rn(a);const s=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(n[o])}),ca(s,"float32")}else return null}function vde(t,e){return ge(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yde=32;function d6(t,e){let n,r;const a=e;n=a.xs,r=a.ys,Y(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=m3("input",t.inputNames,n),s=m3("output",t.outputNames,r),o=i[0].shape[0];Y(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),Y(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<i.length;u++)Y(i[u].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${i[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let u=0;u<s.length;u++)Y(s[u].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${s[u].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function m3(t,e,n){if(n instanceof er)return[n];if(Array.isArray(n))return Y(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const a of e){if(n[a]==null)throw new we(`The feature data generated by the dataset lacks the required ${t} key '${a}'.`);r.push(n[a])}return r}}function bde(t){if(t.length===3)throw new Zt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function wde(t,e,n){const r=n.batchesPerEpoch!=null;if(Y(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Y(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Y(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),Y(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),Y(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const a=n.validationData!=null;let i,s;if(a)if(g3(n.validationData))Y(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=bde(n.validationData);i=y.xs,s=y.ys}const o=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;a?l=u.slice().concat(u.map(y=>"val_"+y)):l=u.slice();const c=t6(n.callbacks,n.yieldEvery),f=n.verbose==null?1:n.verbose,{callbackList:d,history:h}=n6(c,f,n.epochs,null,null,xde(e,n),null,a,l);d.setModel(t),t.history=h,await d.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;m<n.epochs;){const y={};await d.onEpochBegin(m);let b=0,x=0;for(r||(v=await e.iterator());!r||b<n.batchesPerEpoch;){const w=await v.next();if(r&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:S,ys:C}=d6(t,w.value),E={};E.batch=x,E.size=S[0].shape[0],await d.onBatchBegin(x,E);const A=[];if(n.classWeight!=null){const I=c6(n.classWeight,t.outputNames);for(let $=0;$<I.length;++$)A.push(await f6(C[$],null,I[$]))}const k=S.concat(C).concat(A),D=o(k);rn(k);for(let I=0;I<u.length;++I){const $=u[I],O=D[I];E[$]=O,Lr(O)}await d.onBatchEnd(x,E),e6(E),x++,b++}if(r?b>=n.batchesPerEpoch:w.done){if(a){let S;g3(n.validationData)?S=Dn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=Dn(t.evaluate(i,s,{batchSize:n.validationBatchSize==null?yde:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)y[`val_${t.metricsNames[C]}`]=S[C]}break}if(t.stopTraining_)break}if(await d.onEpochEnd(m,y),m++,t.stopTraining_)break}return await d.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function xde(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function g3(t){return typeof t.iterator=="function"}function Nde(t){return typeof t.next=="function"}async function Sde(t,e,n){n=n||{};const r=n.batches!=null,a=t.testFunction;let i=[];if(n.verbose>0)throw new Zt("Verbose mode is not implemented yet.");Y(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const s=Nde(e)?e:await e.iterator();let o=0,u=0;for(;!r||u<n.batches;){const l=await s.next();if(i=Te(()=>{if(l.value){const{xs:c,ys:f}=d6(t,l.value),d=c.concat(f),h=Te(()=>a(d));if(rn(d),u===0)for(let v=0;v<h.length;++v)i.push(Ct(0));const m=d[0].shape[0];for(let v=0;v<h.length;++v){const y=h[v],b=i[v];i[v]=Te(()=>qe(i[v],ge(m,y))),u>0&&rn(b)}rn(h),o+=m,++u}return i}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<i.length;++l){const c=i[l];i[l]=bt(i[l],o),rn(c)}return Wa(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $N(t){Y(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function fh(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>xc(r,e,n-e)):xc(t,e,n-e)}function _C(t,e){return Te(()=>t==null?null:Array.isArray(t)?t.map(n=>_C(n,e)):z5(t,e.dtype==="int32"?e:ot(e,"int32")))}function AN(t,e){const n=[];let r=0,a=null;for(;r<t;)a=r+e,a>=t&&(a=t),n.push([r,a]),r=a;return n}function p6(t){const e=[];t instanceof er&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(wg(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Os(t,e){if(t==null)return;const n=[];if(e instanceof er)n.push(e.id);else if(Array.isArray(e))e.forEach(a=>n.push(a.id));else if(e!=null)for(const a in e){const i=e[a];n.push(i.id)}const r=[];if(t instanceof er)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(a=>{n.indexOf(a.id)===-1&&r.push(a)});else if(t!=null)for(const a in t){const i=t[a];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(a=>{a.isDisposed||a.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cde(t){return t instanceof er}function OC(t){return Array.isArray(t)}function v3(t){return!Cde(t)&&!OC(t)}function y3(t,e,n,r=!0,a=""){if(e==null||e.length===0){if(t!=null){let s=!1;if(OC(t)&&t.length>0)s=!0;else if(v3(t)){for(const o in t)if(t.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new we(`Error when checking model ${a} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(s=>null);let i;if(v3(t)){t=t,i=[];for(const s of e){if(t[s]==null)throw new we(`No data provided for "${s}". Need data for each key in: ${e}`);i.push(t[s])}}else if(OC(t)){if(t=t,t.length!==e.length)throw new we(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new we(`The model ${a} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=p6(i),n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new we(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s). but got array with shape ${o.shape}`);for(let u=0;u<n[s].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[s][u];if(c!=null&&c>=0&&l!==c)throw new we(`${a} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${a} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function Ede(t,e,n){const r=el(t.map(i=>i.shape[0]));r.sort();const a=el(e.map(i=>i.shape[0]));if(a.sort(),r.length>1)throw new we(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(a.length>1)throw new we(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&a.length>0&&!fn(r,a))throw new we(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${a[0]} target sample(s).`)}function Tde(t,e,n){const r=[yw,bw,Xh];for(let a=0;a<t.length;++a){const i=t[a],s=e[a],o=n[a];if(s!=null){if(s===Xh&&i.shape[i.shape.length-1]===1)throw new we(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){const u=i.shape.slice(1),l=o.slice(1);for(let c=0;c<u.length;++c){const f=u[c],d=l[c];if(d!=null&&f!==d)throw new we(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function b3(t,e,n,r=!0,a=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new we(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new we(`The model expects ${e.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let s=0;s<e.length;++s){if(n[s]==null)continue;const o=i[s];if(o.shape.length!==n[s].length)throw new we(`Error when checking ${a}: expected ${e[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let u=0;u<n[s].length;++u){if(u===0&&!r)continue;const l=o.shape[u],c=n[s][u];if(c!=null&&c!==l)throw new we(`Error when checking ${a}: expected ${e[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function Dde(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const a of e){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const $de="layers-model";class cd extends Rs{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new we("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");cde(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=lde(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Dl))throw new we("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const s in e.loss)if(this.outputNames.indexOf(s)===-1)throw new we(`Unknown entry in loss dictionary: "${s}". Only expected the following keys: ${this.outputNames}`);for(const s of this.outputNames)e.loss[s]==null&&console.warn(`Output "${s}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${s} during training`),n.push(DN(e.loss[s]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new we(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>DN(o))}else{const s=DN(e.loss);this.outputs.forEach(o=>{n.push(s)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const o=this.internalOutputShapes[s],u=this.outputNames[s];this.feedOutputNames.push(u),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[s])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],wc("loss",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=this.lossFunctions[s];this.outputs.length>1&&(this.metricsTensors.push([o,s]),this.metricsNames.push(this.outputNames[s]+"_loss"))}});const a=Dde(e.metrics,this.outputNames),i=(s,o,u)=>{this.outputNames.length>1&&(o=this.outputNames[s]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([u,s])};wc("metric",()=>{for(let s=0;s<this.outputs.length;++s){if(r.indexOf(s)!==-1)continue;const o=a[s];(l=>{const c="";let f,d,h;for(const m of l){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const y=this.internalOutputShapes[s];y[y.length-1]===1||this.lossFunctions[s]===bw?["accuracy","acc"].indexOf(m)!==-1?d=a6:["crossentropy","ce"].indexOf(m)!==-1&&(d=Jfe):this.lossFunctions[s]===j0?["accuracy","acc"].indexOf(m)!==-1?d=ede:["crossentropy","ce"].indexOf(m)!==-1&&(d=o6):["accuracy","acc"].indexOf(m)!==-1?d=i6:["crossentropy","ce"].indexOf(m)!==-1&&(d=s6);let b;["accuracy","acc"].indexOf(m)!==-1?b="acc":["crossentropy","ce"].indexOf(m)!==-1&&(b="ce"),h=d,f=c+b}else h=ude(m),f=c+Ey(m);let v;wc(f,()=>{v=h}),i(s,f,v)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const a=r.batchSize==null?32:r.batchSize;$N(a);const s=this.standardizeUserDataXY(e,n,!0,a);try{const o=s[0].concat(s[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,o,a,r.verbose,r.steps);return Wa(l)}finally{Os(s[0],e),Os(s[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Sde(this,e,n)}checkNumSamples(e,n,r,a="steps"){let i;if(r!=null){if(i=null,n!=null)throw new we(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new we(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new we("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),a=r?n:[n],i=this.retrieveSymbolicTensors(a),s=new Hu;if(e instanceof er&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new we(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)s.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new we(`No value is provided for the model's input ${u.name}`);s.add(u,l)}const o=bh(i,s);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Rc(null,e.length);let r=e.length;for(const a of this.layers){const i=Array.isArray(a.output)?a.output:[a.output],s=i.map(o=>o.name);for(let o=0;o<e.length;++o){const u=s.indexOf(e[o]);if(u!==-1&&(n[o]=i[u],r--),r===0)break}if(r===0)break}if(r>0){const a=[];throw n.forEach((i,s)=>{i==null&&a.push(e[s])}),new we(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return n}predictLoop(e,n=32,r=!1){return Te(()=>{const a=this.checkNumSamples(e);if(r)throw new Zt("Verbose predictLoop() is not implemented yet.");const i=AN(a,n),s=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)Te(()=>{const l=i[o][0],c=i[o][1],f=fh(e,l,c),d=[];if(Array.isArray(f))for(let m=0;m<f.length;++m)d.push({key:this.inputs[m],value:f[m]});else d.push({key:this.inputs[0],value:f});const h=new Hu(d);return bh(this.outputs,h)}).forEach((l,c)=>s[c].push(l));return Wa(s.map(o=>wr(o,0)))})}predict(e,n={}){const r=p6(e);b3(r,this.inputNames,this.feedInputShapes,!1);try{const a=n.batchSize==null?32:n.batchSize;return $N(a),this.predictLoop(r,a)}finally{Os(r,e)}}predictOnBatch(e){b3(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,a){if(this.optimizer_==null)throw new ls("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let s=0;s<this.feedOutputShapes.length;++s){const o=this.feedOutputShapes[s];this.feedLossFns[s]===j0?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=y3(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=y3(n,this.feedOutputNames,i,!1,"target"),Ede(e,n),Tde(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&e[0].shape[0]%a!==0)throw new we(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,a,i=!0,s){const[o,u]=this.standardizeUserDataXY(e,n,i,s);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(a!=null){const c=c6(a,this.outputNames);l=[];for(let f=0;f<c.length;++f)l.push(await f6(u[f],null,c[f]))}return[o,u,l]}testLoop(e,n,r,a=0,i){return Te(()=>{const s=this.checkNumSamples(n,r,i,"steps"),o=[];if(a>0)throw new Zt("Verbose mode is not implemented yet.");if(i!=null)throw new Zt("steps mode in testLoop() is not implemented yet");{const u=AN(s,r),l=ca(qs(0,s));for(let c=0;c<u.length;++c){const f=u[c][0],d=u[c][1],h=xc(l,f,d-f),m=_C(n,h),v=e(m);if(c===0)for(let y=0;y<v.length;++y)o.push(Ct(0));for(let y=0;y<v.length;++y){const b=v[y];o[y]=qe(o[y],ge(d-f,b))}}for(let c=0;c<o.length;++c)o[c]=bt(o[c],s)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const a=e[r];let i=a;if(r3(e,a)>1){const s=r3(e.slice(0,r),a);i+=`_${s}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),s=[],o=()=>{const f=[];for(let v=0;v<this.inputs.length;++v)f.push({key:this.inputs[v],value:r[v]});const d=new Hu(f),h=bh(this.outputs,d,{training:!0});let m;for(let v=0;v<this.lossFunctions.length;++v){const y=this.lossFunctions[v];let b=y(a[v],h[v]);i[v]!=null&&(b=vde(b,i[v]));const x=or(b);n.push(x),v===0?m=b:m=qe(m,b)}for(let v=0;v<this.metricsTensors.length;++v){let y;if(this.outputs.length>1&&v<this.outputs.length)y=n[v];else{const b=this.metricsTensors[v][0],x=this.metricsTensors[v][1];y=or(b(a[x],h[x]))}Lr(y),s.push(y)}return m=or(m),this.calculateLosses().forEach(v=>{m=qe(m,v)}),m},u=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(o,!0,u)].concat(s)}}makeTestFunction(){this.testFunction=e=>Te(()=>{const n=[];let r;const a=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let l=0;l<this.inputs.length;++l)s.push({key:this.inputs[l],value:a[l]});const o=new Hu(s),u=bh(this.outputs,o);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],f=or(c(i[l],u[l]));l===0?r=f:r=qe(r,f),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],f=this.metricsTensors[l][1],d=or(c(i[f],u[f]));n.push(d)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,i,s,o,u,l,c,f,d;try{const h=r.batchSize==null?32:r.batchSize;$N(h);const v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);a=v[0],i=v[1],d=v[2];let y=!1,b;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new Zt("validationData including sample weights is not supported yet."):new we(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(u,l,null,null,!0,h);c=I[0],f=I[1],b=c.concat(f)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const D=Math.floor(a[0].shape[0]*(1-r.validationSplit)),I=a[0].shape[0];c=fh(a,D,I),s=a,a=fh(a,0,D),f=fh(i,D,I),o=i,i=fh(i,0,D),b=c.concat(f)}else r.validationSteps!=null&&(y=!0);const x=a.concat(i).concat(d);this.checkTrainableWeightsConsistency();const w=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let C,E;y?(this.makeTestFunction(),C=this.testFunction,E=S.slice().concat(S.map(D=>"val_"+D))):(C=null,b=[],E=S.slice());const A=t6(r.callbacks,r.yieldEvery);return await this.fitLoop(w,x,S,h,r.epochs,r.verbose,A,C,b,r.shuffle,E,r.initialEpoch,null,null)}finally{this.isTraining=!1,Os(a,e),Os(i,n),Os(s,e),Os(o,n),Os(c,u),Os(f,l),d!=null&&rn(d)}}async fitLoop(e,n,r,a,i,s,o,u,l,c,f,d,h,m){a==null&&(a=32),i==null&&(i=1),c==null&&(c=!0),d==null&&(d=0);let v=!1;if(u!=null&&l!=null&&(v=!0),m!=null&&(v=!0,h==null))throw new we("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,a,h,"steps_per_epoch");let b;y!=null&&(b=qs(0,y)),s==null&&(s=1);const{callbackList:x,history:w}=n6(o,s,i,d,y,h,a,v,f);x.setModel(this),this.history=w,await x.onTrainBegin(),this.stopTraining_=!1;for(let S=d;S<i;++S){await x.onEpochBegin(S);const C={};if(h!=null)throw new Zt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Zt("batch shuffling is not implemneted yet");c&&OQ(b);const E=ca(b),A=AN(y,a);for(let k=0;k<A.length;++k){const D={};if(await x.onBatchBegin(k,D),Te(()=>{const I=A[k][0],$=A[k][1],O=xc(E,I,$-I);D.batch=k,D.size=$-I;const B=_C(n,O),z=e(B);for(let L=0;L<r.length;++L){const F=r[L],R=z[L];D[F]=R,Lr(R)}if(k===A.length-1&&v){const L=this.testLoop(u,l,a);for(let F=0;F<r.length;++F){const R=r[F],W=L[F];Lr(W),C["val_"+R]=W}}}),await x.onBatchEnd(k,D),e6(D),this.stopTraining_)break}E.dispose()}if(await x.onEpochEnd(S,C),this.stopTraining_)break}return await x.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return wde(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),u=[];for(const l of o){const c=await l.data();u.push(c[0])}return rn(o),Os(r[0],e),Os(r[1],n),Wa(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,a=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let s=0;s<a.length;++s)r&&!a[s].trainable||n.push({name:a[s].originalName,tensor:i[s]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=wO().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-wO().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Xo(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Xo(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const a of n)if(typeof r[a]=="string")e[a]=Xo(r[a]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Xo(Ey(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Xo(Ey(e)));{const e={};for(const n in this.metrics)e[n]=Xo(Ey(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=IC(e.optimizer_config),r=Jo(n);let a;if(typeof e.loss=="string")a=dc(e.loss);else if(Array.isArray(e.loss))a=e.loss.map(s=>dc(s));else if(e.loss!=null){a={};for(const s in e.loss)a[s]=dc(e.loss[s])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(s=>dc(s));else if(e.metrics!=null){i={};for(const s in e.metrics)i[s]=dc(e.metrics[s])}this.compile({loss:a,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=wL(e);if(l.length===0)throw new we(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new we(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new we("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await nC(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:$de,generatedBy:`TensorFlow.js tfjs-layers v${l6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:f}=await nC(await this.optimizer.getWeights(),l);r.specs.push(...f),r.data=vL([r.data,c])}return this.userDefinedMetadata!=null&&(h3(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){h3(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}cd.className="Model";Xe(cd);class h6 extends cd{}h6.className="Functional";Xe(h6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Kh extends cd{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:mw("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new we(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Kh||e instanceof cd;let r;if(n){if(r=e,r.outputs.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new we("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new we("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const a=Ife({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new we(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new we("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=K5(this.outputs[0])}this.inboundNodes=[],new vw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Rc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{const a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(bn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cd({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new ls("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new ls("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new ls("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new ls("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},a=!1){let i,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new we("Legacy serialization format not supported yet.");i=n}else Y(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,s=n;const o=new e(s);if(!(o instanceof Kh))throw new Zt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const u of i){const c=Jo(u,void 0,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new we("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new we("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Kh.className="Sequential";Xe(Kh);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let va=class extends ep{getConfig(){return{}}};class m6 extends va{apply(e,n=1){return hfe(e,n)}}m6.className="elu";Xe(m6);class g6 extends va{apply(e){return nD(e)}}g6.className="selu";Xe(g6);class v6 extends va{apply(e){return Ao(e)}}v6.className="relu";Xe(v6);class y6 extends va{apply(e){return Te(()=>_c(6,Ao(e)))}}y6.className="relu6";Xe(y6);class b6 extends va{apply(e){return e}}b6.className="linear";Xe(b6);class w6 extends va{apply(e){return bo(e)}}w6.className="sigmoid";Xe(w6);class x6 extends va{apply(e){return gfe(e)}}x6.className="hardSigmoid";Xe(x6);class N6 extends va{apply(e){return Zd(e)}}N6.className="softplus";Xe(N6);class S6 extends va{apply(e){return mfe(e)}}S6.className="softsign";Xe(S6);class C6 extends va{apply(e){return kc(e)}}C6.className="tanh";Xe(C6);let l$=class extends va{apply(e,n=-1){return aw(e,n)}};l$.className="softmax";Xe(l$);class E6 extends va{apply(e,n=-1){return GT(e,n)}}E6.className="logSoftmax";Xe(E6);class T6 extends va{apply(e){return Te(()=>Te(()=>{const n=Math.sqrt(2),r=ge(.5,qe(1,qT(bt(e,n))));return ge(e,r)}))}}T6.className="gelu";Xe(T6);class D6 extends va{apply(e){return Te(()=>ge(.5,ge(e,qe(1,kc(ge(na(bt(2,Math.PI)),qe(e,ge(.044715,iu(e,3)))))))))}}D6.className="gelu_new";Xe(D6);class $6 extends va{apply(e){return Te(()=>ge(e,kc(Zd(e))))}}$6.className="mish";Xe($6);class A6 extends va{apply(e,n=1){return Te(()=>ge(bo(ge(e,n)),e))}}A6.className="swish";Xe(A6);function fl(t){return t.getClassName()}function IN(t,e={}){return bg(t,ss.getMap().classNameMap,e,"activation")}function dl(t){if(t==null){const e={};return e.className="linear",e.config={},IN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},IN(e)}else return t instanceof va?t:IN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ade(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class I6 extends ep{}class k6 extends I6{constructor(e){super(),Ade(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Te(()=>{let n=Tr([1]);return this.hasL1&&(n=qe(n,ht(ge(this.l1,Er(e))))),this.hasL2&&(n=qe(n,ht(ge(this.l2,xg(e))))),be(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}k6.className="L1L2";Xe(k6);const w3={l1l2:"L1L2"};function Bn(t){return KD(t)}function x3(t,e={}){return bg(t,ss.getMap().classNameMap,e,"regularizer")}function Yn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in w3?w3[t]:t,config:{}};return x3(n)}else return t instanceof I6?t:x3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _6 extends sn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Mt(e);let r=Ao(e);return this.maxValue!=null&&(r=yi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}_6.className="ReLU";Xe(_6);class O6 extends sn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Mt(e);return Xb(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}O6.className="LeakyReLU";Xe(O6);class F6 extends sn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Kn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Yn(e.alphaRegularizer),this.alphaConstraint=kr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new we(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=bn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const a of this.sharedAxes)n[a-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let a=1;a<e.length;++a)r[a]=e[a];this.inputSpec=[new $r({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Mt(e),tw(e,this.alpha.read())}getConfig(){const e={alphaInitializer:tr(this.alphaInitializer),alphaRegularizer:Bn(this.alphaRegularizer),alphaConstraint:Ir(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}F6.className="PReLU";Xe(F6);let R6=class extends sn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Zt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Mt(e);return fg(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};R6.className="ELU";Xe(R6);class M6 extends sn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Mt(e);return ge(r,ot(Ti(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}M6.className="ThresholdedReLU";Xe(M6);class P6 extends sn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new l$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Te(()=>{let r=Mt(e);const a=n.mask;if(a!=null){const i=ge(ft(pi(r.shape),ot(a,r.dtype)),Ct(-1e9));r=qe(r,i)}return this.axis instanceof Array?this.axis.length>1?bi(ft(r,Yb(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}P6.className="Softmax";Xe(P6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fd(t,e,n){if(typeof t=="number")return Rc(t,e);if(t.length!==e)throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const a=t[r];if(!cfe(a))throw new we(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${a}`)}return t}function Us(t,e,n,r,a=1){if(t==null)return t;const i=e+(e-1)*(a-1);let s;return n==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function po(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+cl([n-e,0]);else if(r==="same")t=t*e;else throw new we(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c$(t,e){return Te(()=>(hr(e),e==="channelsFirst"?pn(t,[0,2,3,1]):t))}function B6(t,e){return Te(()=>(hr(e),e==="channelsFirst"?pn(t,[0,2,3,4,1]):t))}function Ide(t,e,n,r=1,a="valid",i,s=1){return Te(()=>{if(i==null&&(i=Hs()),hr(i),t.shape.length!==3)throw new we(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new we(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new we(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=pn(t,[0,2,1])),a==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=LT(t,e,r,a==="same"?"same":"valid","NWC",s);return n!=null&&(o=Xs(o,n)),o})}function N3(t,e,n,r=[1,1],a="valid",i,s,o=null){return Te(()=>{if(i==null&&(i=Hs()),hr(i),t.rank!==3&&t.rank!==4)throw new we(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new we(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=c$(t,i);if(a==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Dz({x:u,filter:e,strides:r,pad:a==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(u=pn(u,[0,3,1,2])),u})}function kde(t,e,n,r=[1,1,1],a="valid",i,s){return Te(()=>{if(i==null&&(i=Hs()),hr(i),t.rank!==4&&t.rank!==5)throw new we(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new we(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=B6(t,i);if(a==="causal")throw new Zt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=GL(o,e,r,a==="same"?"same":"valid","NDHWC",s),n!=null&&(o=Xs(o,n)),i==="channelsFirst"&&(o=pn(o,[0,4,1,2,3])),o})}class ww extends sn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ww.verifyArgs(n),this.rank=e,zr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Zt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=fd(n.kernelSize,e,"kernelSize"),this.strides=fd(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,zi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,hr(this.dataFormat),this.activation=dl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Kn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=kr(n.biasConstraint),this.biasRegularizer=Yn(n.biasRegularizer),this.activityRegularizer=Yn(n.activityRegularizer),this.dilationRate=fd(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new we(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new we(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new we(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(fo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,3))throw new we(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:fl(this.activation),useBias:this.useBias,biasInitializer:tr(this.biasInitializer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class tp extends ww{constructor(e,n){super(e,n),this.kernel=null,tp.verifyArgs(n),this.filters=n.filters,zr(this.filters,"filters"),this.kernelInitializer=Kn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=kr(n.kernelConstraint),this.kernelRegularizer=Yn(n.kernelRegularizer)}build(e){e=bn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Te(()=>{e=Mt(e);let r;const a=this.bias==null?null:this.bias.read(),i=F5(this.activation.getClassName());if(i!=null&&this.rank===2)r=N3(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=Ide(e,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=N3(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=kde(e,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Zt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=bn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const s=Us(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(s)}let a=[e[0]];return this.dataFormat==="channelsLast"?(a=a.concat(n),a.push(this.filters)):(a.push(this.filters),a=a.concat(n)),a}getConfig(){const e={filters:this.filters,kernelInitializer:tr(this.kernelInitializer),kernelRegularizer:Bn(this.kernelRegularizer),kernelConstraint:Ir(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new we(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Eg extends tp{constructor(e){super(2,e),Eg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,2))throw new we(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Eg.className="Conv2D";Xe(Eg);class Tg extends tp{constructor(e){super(3,e),Tg.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new we(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Tg.className="Conv3D";Xe(Tg);class L6 extends Eg{constructor(e){if(super(e),this.inputSpec=[new $r({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==4)throw new we("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new $r({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{let r=Mt(e);if(r.shape.length!==4)throw new we(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o;this.dataFormat==="channelsFirst"?(s=2,o=3):(s=1,o=2);const u=a[s],l=a[o],c=this.kernelSize[0],f=this.kernelSize[1],d=this.strides[0],h=this.strides[1],m=po(u,d,c,this.padding),v=po(l,h,f,this.padding),y=[i,m,v,this.filters];this.dataFormat!=="channelsLast"&&(r=pn(r,[0,2,3,1]));let b=UT(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=pn(b,[0,3,1,2])),this.bias!=null&&(b=Xs(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=bn(e);const n=e.slice();let r,a,i;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3):(r=3,a=1,i=2);const s=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[a]=po(n[a],u,s,this.padding),n[i]=po(n[i],l,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}L6.className="Conv2DTranspose";Xe(L6);class z6 extends Tg{constructor(e){if(super(e),this.inputSpec=[new $r({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new we(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==5)throw new we("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new we("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new $r({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{let r=Mt(e);if(r.shape.length!==5)throw new we(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const a=r.shape,i=a[0];let s,o,u;this.dataFormat==="channelsFirst"?(u=2,s=3,o=4):(u=1,s=2,o=3);const l=a[u],c=a[s],f=a[o],d=this.kernelSize[0],h=this.kernelSize[1],m=this.kernelSize[2],v=this.strides[0],y=this.strides[1],b=this.strides[2],x=po(l,v,d,this.padding),w=po(c,y,h,this.padding),S=po(f,b,m,this.padding),C=[i,x,w,S,this.filters];this.dataFormat!=="channelsLast"&&(r=pn(r,[0,2,3,4,1]));let E=KL(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=pn(E,[0,4,1,2,3])),this.bias!==null&&(E=Xs(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=bn(e);const n=e.slice();let r,a,i,s;this.dataFormat==="channelsFirst"?(r=1,a=2,i=3,s=4):(r=4,a=1,i=2,s=3);const o=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],f=this.strides[1],d=this.strides[2];return n[r]=this.filters,n[a]=po(n[a],c,o,this.padding),n[i]=po(n[i],f,u,this.padding),n[s]=po(n[s],d,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}z6.className="Conv3DTranspose";Xe(z6);class U6 extends tp{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new we("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new we("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new we(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Kn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Yn(n.depthwiseRegularizer),this.depthwiseConstraint=kr(n.depthwiseConstraint),this.pointwiseInitializer=Kn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Yn(n.pointwiseRegularizer),this.pointwiseConstraint=kr(n.pointwiseConstraint)}build(e){if(e=bn(e),e.length<this.rank+2)throw new we(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new $r({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Te(()=>{e=Mt(e);let r;if(this.rank===1)throw new Zt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=pn(e,[0,2,3,1])),r=rD(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Xs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=pn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=tr(this.depthwiseInitializer),e.pointwiseInitializer=tr(this.pointwiseInitializer),e.depthwiseRegularizer=Bn(this.depthwiseRegularizer),e.pointwiseRegularizer=Bn(this.pointwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseConstraint),e.pointwiseConstraint=Ir(this.pointwiseConstraint),e}}U6.className="SeparableConv";class V6 extends U6{constructor(e){super(2,e)}}V6.className="SeparableConv2D";Xe(V6);class xw extends tp{constructor(e){super(1,e),xw.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YD(e.kernelSize,"number",1,1))throw new we(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}xw.className="Conv1D";Xe(xw);class W6 extends sn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Te(()=>{if(e=Mt(e),this.dataFormat==="channelsLast"){const r=Cy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Cy(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Cy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Cy(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}W6.className="Cropping2D";Xe(W6);class q6 extends sn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ofe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Te(()=>{let r=Mt(e);const a=r.shape;if(this.dataFormat==="channelsFirst"){r=pn(r,[0,2,3,1]);const i=this.size[0]*a[2],s=this.size[1]*a[3],o=this.interpolation==="nearest"?go.resizeNearestNeighbor(r,[i,s]):go.resizeBilinear(r,[i,s]);return pn(o,[0,3,1,2])}else{const i=this.size[0]*a[1],s=this.size[1]*a[2];return this.interpolation==="nearest"?go.resizeNearestNeighbor(r,[i,s]):go.resizeBilinear(r,[i,s])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}q6.className="UpSampling2D";Xe(q6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _de(t,e,n=[1,1],r="valid",a,i){return Te(()=>{a==null&&(a=Hs()),hr(a);let s=c$(t,a);if(t.rank!==4)throw new we(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new we(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return s=cg(s,e,n,r==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(s=pn(s,[0,3,1,2])),s})}class H6 extends ww{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Kn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=kr(e.depthwiseConstraint),this.depthwiseRegularizer=Yn(e.depthwiseRegularizer)}build(e){if(e=bn(e),e.length<4)throw new we(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new we(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],a=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{e=Mt(e);let r=_de(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Xs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=bn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Us(n,this.kernelSize[0],this.padding,this.strides[0]),s=Us(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],a,i,s]:[e[0],i,s,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=tr(this.depthwiseInitializer),e.depthwiseRegularizer=Bn(this.depthwiseRegularizer),e.depthwiseConstraint=Ir(this.depthwiseRegularizer),e}}H6.className="DepthwiseConv2D";Xe(H6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j6(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new we("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return e=a(e),n=a(n),{inputs:t,initialState:e,constants:n}}function G6(t,e,n,r=!1,a,i,s=!1,o=!1){return Te(()=>{const u=e.shape.length;if(u<3)throw new we(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(qs(2,u));e=pn(e,l),s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=ot(ot(a,"bool"),"float32"),a.rank===u-1&&(a=Aa(a,-1)),a=pn(a,l)),r&&(e=ys(e,0),a!=null&&(a=ys(a,0)));const c=[];let f,d=n;const h=e.shape[0],m=bs(e);let v;a!=null&&(v=bs(a));for(let b=0;b<h;++b){const x=m[b],w=Te(()=>t(x,d));if(a==null)f=w[0],d=w[1];else{const S=Te(()=>{const C=v[b],E=ft(Pi(C),C),A=qe(ge(w[0],C),ge(d[0],E)),k=d.map((D,I)=>qe(ge(w[1][I],C),ge(D,E)));return{output:A,newStates:k}});f=S.output,d=S.newStates}o&&c.push(f)}let y;return o&&(y=wi(c,1)),[f,y,d]})}class $l extends sn{constructor(e){super(e);let n;if(e.cell==null)throw new we("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new p$({cells:e.cell}):n=e.cell,n.stateSize==null)throw new we("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new $r({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return qs(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){DC(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let a;if(this.returnSequences?a=[e[0],e[1],r]:a=[e[0],r],this.returnState){const i=[];for(const s of n)i.push([e[0],s]);return[a].concat(i)}else return a}computeMask(e,n){return Te(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const a=this.states.map(i=>null);return[r].concat(a)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Zt("Constants support is not implemented in RNN yet.");DC(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new $r({shape:[n,null,...r]});const a=[e[0]].concat(e.slice(2));this.cell.build(a);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!fn(this.stateSpec.map(s=>s.shape[s.shape.length-1]),i))throw new we(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(s=>new $r({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Te(()=>{if(!this.stateful)throw new co("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Tr([r,a])):this.states_=[Tr([r,this.cell.stateSize])];else if(e==null)rn(this.states_),this.keptStates!=null&&(rn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>Tr([r,a])):this.states_[0]=Tr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):rn(this.states_);for(let a=0;a<this.states_.length;++a){const i=e[a],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,o=[r,s];if(!fn(i.shape,o))throw new we(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[a]=i}}this.states_=this.states_.map(a=>Lr(a.clone()))})}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=j6(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;let s=[],o=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new $r({shape:l.shape}));o=o.concat(this.stateSpec)}if(a!=null&&(n.constants=a,s=s.concat(a),this.numConstants=a.length),s[0]instanceof Co){const l=[e].concat(s),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return Te(()=>{const r=n==null?null:n.mask,a=n==null?null:n.training;let i=n==null?null:n.initialState;e=Mt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new we(`RNN Layer has ${s} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:a},l=G6((m,v)=>{const y=this.cell.call([m].concat(v),o);return[y[0],y.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],f=l[1],d=l[2];this.stateful&&this.resetStates(d,a);const h=this.returnSequences?f:c;return this.returnState?[h].concat(d):h})}getInitialState(e){return Te(()=>{let n=Tr(e.shape);return n=ht(n,[1,2]),n=wg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?EC(n,[1,r]):n):this.cell.stateSize>1?[EC(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===$l.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const a=n.cell,i=Jo(a,r);return new e(Object.assign(n,{cell:i}))}}$l.className="RNN";Xe($l);class Nw extends sn{}class f$ extends Nw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=$d([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{if(e=e,e.length!==2)throw new we(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const a=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Pi(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Pi(r),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let i;const s=this.dropoutMask,o=this.recurrentDropoutMask;s!=null?i=No(ge(e,s),this.kernel.read()):i=No(e,this.kernel.read()),this.bias!=null&&(i=Xs(i,this.bias.read())),o!=null&&(r=ge(r,o));let u=qe(i,No(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}f$.className="SimpleRNNCell";Xe(f$);class X6 extends $l{constructor(e){e.cell=new f$(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return new e(n)}}X6.className="SimpleRNN";Xe(X6);class d$ extends Nw{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new we("GRUCell does not support reset_after parameter set to true.");this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=dl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=$d([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Te(()=>{if(e=e,e.length!==2)throw new we(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Pi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Pi(a),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=this.recurrentDropoutMask;let o,u,l;0<this.dropout&&this.dropout<1&&(e=ge(e,i[0]));let c=No(e,this.kernel.read());this.useBias&&(c=Xs(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,s[0]));const f=this.recurrentKernel.read(),[d,h]=hi(f,[2*this.units,this.units],f.rank-1),m=No(a,d),[v,y,b]=hi(c,3,c.rank-1),[x,w]=hi(m,2,m.rank-1);o=this.recurrentActivation.apply(qe(v,x)),u=this.recurrentActivation.apply(qe(y,w));const S=No(ge(u,a),h);l=this.activation.apply(qe(b,S));const C=qe(ge(o,a),ge(qe(1,Hn(o)),l));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),recurrentActivation:fl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}d$.className="GRUCell";Xe(d$);class K6 extends $l{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new d$(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}K6.className="GRU";Xe(K6);class Sw extends Nw{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=dl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Kn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Kn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Kn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Yn(e.kernelRegularizer),this.recurrentRegularizer=Yn(e.recurrentRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.kernelConstraint=kr(e.kernelConstraint),this.recurrentConstraint=kr(e.recurrentConstraint),this.biasConstraint=kr(e.biasConstraint),this.dropout=$d([1,cl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=$d([1,cl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=bn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,s=this.units;a=new(n=class extends Ns{apply(u,l){const c=i.apply([s]),f=new QD().apply([s]),d=i.apply([s*2]);return i3(i3(c,f),d)}},n.className="CustomInit",n)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Te(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new we(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Pi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Pi(a),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let u,l,c,f;0<this.dropout&&this.dropout<1&&(e=ge(e,s[0]));let d=No(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=ge(a,o[0])),d=qe(d,No(a,this.recurrentKernel.read())),this.useBias&&(d=Xs(d,this.bias.read()));const[h,m,v,y]=hi(d,4,d.rank-1);u=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(m),c=qe(ge(l,i),ge(u,this.activation.apply(v))),f=this.recurrentActivation.apply(y);const b=ge(f,this.activation.apply(c));return[b,b,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:fl(this.activation),recurrentActivation:fl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),recurrentInitializer:tr(this.recurrentInitializer),biasInitializer:tr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Bn(this.kernelRegularizer),recurrentRegularizer:Bn(this.recurrentRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),recurrentConstraint:Ir(this.recurrentConstraint),biasConstraint:Ir(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}Sw.className="LSTMCell";Xe(Sw);class Y6 extends $l{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Sw(e),super(e)}call(e,n){return Te(()=>{this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Y6.className="LSTM";Xe(Y6);class p$ extends Nw{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Te(()=>{e=e;let r=e.slice(1);const a=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?a.push(r.splice(0,o.stateSize.length)):a.push(r.splice(0,1));a.reverse();const i=[];let s;for(let o=0;o<this.cells.length;++o){const u=this.cells[o];r=a[o],o===0?s=[e[0]].concat(r):s=[s[0]].concat(r),s=u.call(s,n),i.push(s.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[s[0]].concat(r)})}build(e){DC(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,a)=>{wc(`RNNCell_${a}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),a={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),a)}static fromConfig(e,n,r={}){const a=[];for(const i of n.cells)a.push(Jo(i,r));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return $C(e)}setWeights(e){const n=[];for(const r of this.cells){const a=r.weights.length,i=e.splice(a);for(let s=0;s<r.weights.length;++s)n.push([r.weights[s],i[s]])}i$(n)}}p$.className="StackedRNNCells";Xe(p$);function pl(t){const{ones:e,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=t,s=()=>i!=null?i(e(),n):U5(e(),n),o=()=>Ng(s,e,r);return!a||a<=1?Lr(o().clone()):Array(a).fill(void 0).map(o).map(l=>Lr(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Ode=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class Z6 extends $l{constructor(e){if(e.unroll)throw new Zt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Zt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new $r({ndim:5})]}call(e,n){return Te(()=>{if(this.cell.dropoutMask!=null&&(rn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(rn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new we("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:a,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Te(()=>{const{stateSize:n}=this.cell,r=e.shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)],s=Tr(i);return Array.isArray(n)?Array(n.length).fill(s):[s]})}resetStates(e,n=!1){Te(()=>{if(!this.stateful)throw new co("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,a=this.computeSingleOutputShape(r),i=[a[0],...a.slice(2)];if(r[0]==null)throw new we("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(i)):this.states_=[Tr(i)];else if(e==null)rn(this.states_),this.keptStates!=null&&(rn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Tr(i)):this.states_[0]=Tr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new we(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):rn(this.states_);for(let o=0;o<this.states_.length;++o){const u=e[o],l=i;if(!fn(u.shape,l))throw new we(`State ${o} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[o]=u}}this.states_=this.states_.map(o=>Lr(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:a,padding:i,strides:s,dilationRate:o}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],f=Us(l,a[0],i,s[0],o[0]),d=Us(c,a[1],i,s[1],o[1]);return[...e.slice(0,2),...u?[r,f,d]:[f,d,r]]}}Z6.className="ConvRNN2D";class h$ extends Sw{constructor(e){const{filters:n,kernelSize:r,strides:a,padding:i,dataFormat:s,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,zr(this.filters,"filters"),this.kernelSize=fd(r,2,"kernelSize"),this.kernelSize.forEach(u=>zr(u,"kernelSize")),this.strides=fd(a||1,2,"strides"),this.strides.forEach(u=>zr(u,"strides")),this.padding=i||"valid",zi(this.padding),this.dataFormat=s||"channelsLast",hr(this.dataFormat),this.dilationRate=fd(o||1,2,"dilationRate"),this.dilationRate.forEach(u=>zr(u,"dilationRate"))}build(e){var n;e=bn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new we(`The channel dimension of the input should be defined. Found ${e[r]}`);const a=e[r],i=4,s=this.kernelSize.concat([a,this.filters*i]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends Ns{apply(d,h){const m=l.apply([c]),v=pi([c]),y=l.apply([c*2]);return ZD([m,v,y])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Te(()=>{if(e.length!==3)throw new we(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,a=e[0],i=e[1],s=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=pl({ones:()=>Pi(a),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(G,q,j)=>!q||!q[j]?G:ge(q[j],G);let c=l(a,u,0),f=l(a,u,1),d=l(a,u,2),h=l(a,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=pl({ones:()=>Pi(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let v=l(i,m,0),y=l(i,m,1),b=l(i,m,2),x=l(i,m,3);const w=3,[S,C,E,A]=hi(this.kernel.read(),o,w),[k,D,I,$]=this.useBias?hi(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,S,k,this.padding),f=this.inputConv(f,C,D,this.padding),d=this.inputConv(d,E,I,this.padding),h=this.inputConv(h,A,$,this.padding);const[O,B,z,L]=hi(this.recurrentKernel.read(),o,w);v=this.recurrentConv(v,O),y=this.recurrentConv(y,B),b=this.recurrentConv(b,z),x=this.recurrentConv(x,L);const F=this.recurrentActivation.apply(qe(c,v)),R=this.recurrentActivation.apply(qe(f,y)),W=qe(ge(R,s),ge(F,this.activation.apply(qe(d,b)))),M=ge(this.recurrentActivation.apply(qe(h,x)),this.activation.apply(W));return[M,M,W]})}getConfig(){const e=super.getConfig(),n=Ode(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,a){const i=ll(e,n,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Xs(i,r,this.dataFormat):i}recurrentConv(e,n){return ll(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}h$.className="ConvLSTM2DCell";Xe(h$);class Q6 extends Z6{constructor(e){const n=new h$(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Q6.className="ConvLSTM2D";Xe(Q6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m$ extends sn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let a=0;a<this.noiseShape.length;++a)r.push(this.noiseShape[a]==null?n[a]:this.noiseShape[a]);return r}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e);if(0<this.rate&&this.rate<1){const a=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Ng(()=>U5(r,this.rate,i,this.seed),()=>r,a)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}m$.className="Dropout";Xe(m$);class J6 extends m${constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}J6.className="SpatialDropout1D";Xe(J6);class e8 extends sn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,zr(this.units,"units"),this.activation=dl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Kn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Kn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=kr(e.kernelConstraint),this.biasConstraint=kr(e.biasConstraint),this.kernelRegularizer=Yn(e.kernelRegularizer),this.biasRegularizer=Yn(e.biasRegularizer),this.activityRegularizer=Yn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=bn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=bn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e),a=F5(this.activation.getClassName());let i;return a!=null?i=No(r,this.kernel.read(),a,this.bias?this.bias.read():null):(i=No(r,this.kernel.read()),this.bias!=null&&(i=Xs(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:fl(this.activation),useBias:this.useBias,kernelInitializer:tr(this.kernelInitializer),biasInitializer:tr(this.biasInitializer),kernelRegularizer:Bn(this.kernelRegularizer),biasRegularizer:Bn(this.biasRegularizer),activityRegularizer:Bn(this.activityRegularizer),kernelConstraint:Ir(this.kernelConstraint),biasConstraint:Ir(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}e8.className="Dense";Xe(e8);class t8 extends sn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=bn(e);for(const n of e.slice(1))if(n==null)throw new we(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],tl(e,1)]}call(e,n){return Te(()=>{this.invokeCallHook(e,n);let r=Mt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const a=[0];for(let i=2;i<r.rank;++i)a.push(i);a.push(1),r=pn(r,a)}return pfe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}t8.className="Flatten";Xe(t8);class n8 extends sn{constructor(e){super(e),this.supportsMasking=!0,this.activation=dl(e.activation)}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e);return this.activation.apply(r)})}getConfig(){const e={activation:fl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}n8.className="Activation";Xe(n8);class r8 extends sn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Te(()=>(e=Mt(e),ffe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}r8.className="RepeatVector";Xe(r8);class a8 extends sn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",a=n.slice();let i=1,s=null;for(let u=0;u<a.length;++u){const l=a[u];if(this.isUnknown(l))if(s===null)s=u;else throw new we("Can only specifiy one unknown dimension.");else i*=l}const o=tl(e);if(s!==null){if(i===0||o%i!==0)throw new we(r);a[s]=o/i}else if(o!==i)throw new we(r);return a}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e),a=r.shape,i=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return be(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}a8.className="Reshape";Xe(a8);class i8 extends sn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=qs(1,e.dims.length+1);if(!fn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new $r({ndim:this.dims.length+1})]}computeOutputShape(e){e=bn(e);const n=e.slice();return this.dims.forEach((r,a)=>{n[a+1]=e[r]}),n}call(e,n){return pn(Mt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}i8.className="Permute";Xe(i8);class s8 extends sn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Mt(e);return P0(Td(r,this.maskValue),-1)}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e),s=P0(Td(r,this.maskValue),-1,!0);return ge(r,ot(s,r.dtype))})}}s8.className="Masking";Xe(s8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o8 extends sn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Dn(e.inputLength))}this.inputDim=e.inputDim,zr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,zr(this.outputDim,"outputDim"),this.embeddingsInitializer=Kn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Yn(e.embeddingsRegularizer),this.activityRegularizer=Yn(e.activityRegularizer),this.embeddingsConstraint=kr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Te(()=>this.maskZero?(e=Mt(e),Td(e,mn(e))):null)}computeOutputShape(e){if(e=bn(e),this.inputLength==null)return[...e,this.outputDim];const n=Dn(this.inputLength);if(n.length!==e.length-1)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let a=0;a<n.length;++a){const i=n[a],s=e[a+1];if(i!=null&&s!=null&&i!==s)throw new we(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=s),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Te(()=>{this.invokeCallHook(e,n);let r=Mt(e);r.dtype!=="int32"&&(r=xo(r,"int32"));const a=z5(this.embeddings.read(),be(r,[r.size]));return be(a,bn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:tr(this.embeddingsInitializer),embeddingsRegularizer:Bn(this.embeddingsRegularizer),activityRegularizer:Bn(this.activityRegularizer),embeddingsConstraint:Ir(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}o8.className="Embedding";Xe(o8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Kc extends sn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Zt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let a=0;a<n.length;++a){const i=e[e.length-n.length+a],s=n[a];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new we("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[bn(e)]),e=e,e.length<2)throw new we(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=el(n),n.length>1)throw new we(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}const a=e.map(i=>i.length);e.indexOf(null)===-1&&el(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Te(()=>{if(e=e,this.reshapeRequired){const r=[],a=e.map(i=>i.rank);if(a.indexOf(null)===-1){const i=cl(a);for(let s of e){const o=s.rank;for(let u=0;u<i-o;++u)s=wg(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,f=c[0],d=c.slice(1).concat([f]);let h=be(u,[f].concat(tl(c.slice(1))));h=pn(h,[1,0]),h=be(h,d),r.push(h),i=!0}else if(l>1){const c=qs(1,l).concat([0]);r.push(pn(u,c)),i=!0}else r.push(u)}let s=this.mergeFunction(r);const o=s.rank;if(i){if(o==null){const u=s.shape,l=u.length,c=u[l-1],f=[c].concat(u.slice(0,u.length-1));s=be(pn(be(s,[-1,c]),[1,0]),f)}else if(o>1){const u=[o-1].concat(qs(0,o-1));s=pn(s,u)}}return s}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const a of e)a!=null&&a[0]!==null&&r.push(a[0]);return r=el(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Te(()=>{if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an Array");if(!Array.isArray(e))throw new we("`inputs` should be an Array");if(n.length!==e.length)throw new we(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(a=>a==null))return null;n=n.map(a=>a==null?a:Aa(a,0));let r=n[0];for(let a=1;a<n.length-1;++a)r=So(r,n[a]);return r})}}class u8 extends Kc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=qe(n,e[r]);return n})}}u8.className="Add";Xe(u8);class l8 extends Kc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ge(n,e[r]);return n})}}l8.className="Multiply";Xe(l8);class c8 extends Kc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=qe(n,e[r]);return ge(1/e.length,n)})}}c8.className="Average";Xe(c8);class f8 extends Kc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=hu(n,e[r]);return n})}}f8.className="Maximum";Xe(f8);class d8 extends Kc{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=_c(n,e[r]);return n})}}d8.className="Minimum";Xe(d8);class p8 extends Kc{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new we("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const a of e)if(a!=null){n=!1;break}if(n)return;const r=[];for(let a=0;a<e.length;++a){const i=e[a].slice();i.splice(this.axis,1);let s=!1;for(const o of r)if(fn(o,i)){s=!0;break}s||r.push(i)}if(r.length>1)throw new we("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Te(()=>ZD(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new we("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[a]==null||i[a]==null){r[a]=null;break}r[a]+=i[a]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new we("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new we("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new we(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Te(()=>{let r=!0;if(n.forEach(s=>{if(s!=null){r=!1;return}}),r)return null;const a=[];for(let s=0;s<e.length;++s)n[s]==null?a.push(ot(Pi(e[s]),"bool")):n[s].rank<e[s].rank?a.push(Aa(n[s],-1)):a.push(n[s]);const i=wr(a,this.axis);return PT(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}p8.className="Concatenate";Xe(p8);function dh(t,e){for(;t<0;)t+=e;return t}function Fde(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Zt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Y(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),Y(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Zt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,a=e.shape.length;n==null&&(n=[r-1,a-2]);const i=n;return Te(()=>{let s;if(r>a){s=r-a;const u=[];for(let l=0;l<s;++l)u.push(1);e=be(e,e.shape.concat(u))}else if(a>r){s=a-r;const u=[];for(let l=0;l<s;++l)u.push(1);t=be(t,t.shape.concat(u))}else s=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=ht(ge(t,e),i[0]):o=ht(ge(pn(t,[1,0]),e),i[1]);else{const u=i[0]!==t.shape.length-1,l=i[1]===e.shape.length-1;o=nn(t,e,u,l)}if(s>0){let u;r>a?u=r+a-3:u=r-1;const l=[];for(let c=u;c<u+s;++c)l.push(c);o=jc(o,l)}return o.shape.length===1&&(o=Aa(o,1)),o})}class h8 extends Kc{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);if(n[a[0]]!==r[a[1]])throw new we(`Dimension incompatibility: ${n[a[0]]} !== ${r[a[1]]}`)}mergeFunction(e){if(e.length!==2)throw new we(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],a;return Array.isArray(this.axes)?a=this.axes.map((i,s)=>dh(i,e[s].shape.length)):a=[dh(this.axes,n.shape.length),dh(this.axes,r.shape.length)],this.normalize&&(n=H0(n,a[0]),r=H0(r,a[1])),Fde(n,r,a)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[dh(this.axes,e.length),dh(this.axes,n.length)],r}computeOutputShape(e){Y(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,r);n.splice(a[0],1),r.splice(a[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}h8.className="Dot";Xe(h8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m8 extends sn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e);return Ng(()=>qe(gw(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}m8.className="GaussianNoise";Xe(m8);class g8 extends sn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Te(()=>{this.invokeCallHook(e,n);const r=Mt(e);return this.rate>0&&this.rate<1?Ng(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return ge(r,gw(r.shape,1,i))},()=>r,n.training||!1):r})}}g8.className="GaussianDropout";Xe(g8);class v8 extends sn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Mt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Te(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Ng(()=>{const i=Mt(e),u=-1.6732632423543772*1.0507009873554805;let l=El(Hc(r),this.rate);l=xo(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,f=-c*u*this.rate,d=qe(ge(i,l),ge(qe(l,-1),u));return qe(ge(d,c),f)},()=>Mt(e),n.training||!1)}return e})}}v8.className="AlphaDropout";Xe(v8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yh(t,e,n,r,a,i=.001){let s;if(t.rank===2)s=BL(t,e,n,r,a,i);else if(t.rank===3)s=LL(t,e,n,r,a,i);else if(t.rank===4)s=zL(t,e,n,r,a,i);else throw new Zt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function Rde(t,e,n,r,a=.001){return Te(()=>{const i=Jb(t,r),s=i.mean,o=i.variance;return[Yh(t,s,o,n,e,a),s,o]})}function Mde(t,e,n,r,a=.001){return Te(()=>{const i=Jb(t,r),s=i.mean,o=i.variance,u=[];for(const m of qs(0,t.rank))r.indexOf(m)!==-1?u.push(1):u.push(t.shape[m]);const l=be(s,u),c=be(o,u),f=e==null?null:be(e,u),d=n==null?null:be(n,u);return[Yh(t,l,c,d,f,a),s,o]})}function Pde(t,e,n,r,a=.001){return fn(r.slice().sort(),qs(0,t.rank-1))?Rde(t,e,n,r,a):Mde(t,e,n,r,a)}class y8 extends sn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Kn(e.betaInitializer||"zeros"),this.gammaInitializer=Kn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Kn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Kn(e.movingVarianceInitializer||"ones"),this.betaConstraint=kr(e.betaConstraint),this.gammaConstraint=kr(e.gammaConstraint),this.betaRegularizer=Yn(e.betaRegularizer),this.gammaRegularizer=Yn(e.gammaRegularizer)}build(e){e=bn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new we(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new $r({ndim:e.length,axes:{[n]:r}})];const a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Te(()=>{const r=n.training==null?!1:n.training,a=Mt(e),i=a.shape,s=i.length,o=qs(0,s),u=this.axis>=0?this.axis:this.axis+s;o.splice(u,1);const l=Rc(1,s);l[u]=i[u];const c=o.slice();c.sort();const f=!fn(c,qs(0,s).slice(0,s-1)),d=()=>{if(f){const x=be(this.movingMean.read(),l),w=be(this.movingVariance.read(),l),S=this.center?be(this.beta.read(),l):null,C=this.scale?be(this.gamma.read(),l):null;return Yh(a,x,w,S,C,this.epsilon)}else return Yh(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return d();const[h,m,v]=Pde(a,this.gamma.read(),this.beta.read(),o,this.epsilon),y=(x,w,S)=>{Te(()=>{const C=1-S,E=x.read(),A=ge(ft(E,w),C);x.write(ft(E,A))})};return(()=>{y(this.movingMean,m,this.momentum),y(this.movingVariance,v,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tr(this.betaInitializer),gammaInitializer:tr(this.gammaInitializer),movingMeanInitializer:tr(this.movingMeanInitializer),movingVarianceInitializer:tr(this.movingVarianceInitializer),betaRegularizer:Bn(this.betaRegularizer),gammaRegularizer:Bn(this.gammaRegularizer),betaConstraint:Ir(this.betaConstraint),gammaConstraint:Ir(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}y8.className="BatchNormalization";Xe(y8);class b8 extends sn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Kn(e.betaInitializer||"zeros"),this.gammaInitializer=Kn(e.gammaInitializer||"ones"),this.betaRegularizer=Yn(e.betaRegularizer),this.gammaRegularizer=Yn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=bn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==el(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),a=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(e,n){const r=Mt(e),a=r.shape,i=a.length;return Te(()=>{let{mean:o,variance:u}=Jb(r,this.axis,!0);const l=Rc(1,i);for(const v of this.axis)l[v]=a[v];const c=v=>v!=null&&v.shape.length!==i?be(v,l):v;let f=this.scale?c(this.gamma.read()):null,d=this.center?c(this.beta.read()):null;const h=[],m=[];for(let v=0;v<i;++v)this.axis.indexOf(v)!==-1?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return o=us(o,h),u=us(u,h),f!=null&&(f=us(f,m)),d!=null&&(d=us(d,m)),Yh(r,o,u,d,f,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:tr(this.betaInitializer),gammaInitializer:tr(this.gammaInitializer),betaRegularizer:Bn(this.betaRegularizer),gammaRegularizer:Bn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}b8.className="LayerNormalization";Xe(b8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bde(t,e,n){return Te(()=>{if(t.rank!==4)throw new we(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new we("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Hs()),n!=="channelsLast"&&n!=="channelsFirst")throw new we(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Tl(t,r)})}class w8 extends sn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Hs():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new we(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new we(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new we(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new $r({ndim:4})]}computeOutputShape(e){e=bn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Te(()=>Bde(Mt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}w8.className="ZeroPadding2D";Xe(w8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cw(t,e,n,r,a,i){return Te(()=>{hr(a),M5(i),zi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),a==null&&(a=Hs()),i==null&&(i="max"),t=c$(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=Qb(t,e,n,o):s=qb(t,e,n,o),a==="channelsFirst"&&(s=pn(s,[0,3,1,2])),s})}function x8(t,e,n,r,a,i){return Te(()=>{hr(a),M5(i),zi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),a==null&&(a=Hs()),i==null&&(i="max"),t=B6(t,a);let s;const o=r==="same"?"same":"valid";return i==="max"?s=cz(t,e,n,o):s=PL(t,e,n,o),a==="channelsFirst"&&(s=pn(s,[0,4,1,2,3])),s})}class N8 extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new we(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(zr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new we(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,zi(this.padding),this.inputSpec=[new $r({ndim:3})]}computeOutputShape(e){e=bn(e);const n=Us(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Te(()=>{this.invokeCallHook(e,n),e=wg(Mt(e),2);const r=this.poolingFunction(Mt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return jc(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class S8 extends N8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),Cw(e,n,r,a,i,"max")}}S8.className="MaxPooling1D";Xe(S8);class C8 extends N8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),Cw(e,n,r,a,i,"avg")}}C8.className="AveragePooling1D";Xe(C8);class E8 extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new we(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];zr(this.poolSize,"poolSize"),zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),zi(this.padding),this.inputSpec=[new $r({ndim:4})]}computeOutputShape(e){e=bn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Us(n,this.poolSize[0],this.padding,this.strides[0]),r=Us(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Te(()=>(this.invokeCallHook(e,n),this.poolingFunction(Mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class T8 extends E8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),Cw(e,n,r,a,i,"max")}}T8.className="MaxPooling2D";Xe(T8);class D8 extends E8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),Cw(e,n,r,a,i,"avg")}}D8.className="AveragePooling2D";Xe(D8);class $8 extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new we(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];zr(this.poolSize,"poolSize"),zr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),zi(this.padding),this.inputSpec=[new $r({ndim:5})]}computeOutputShape(e){e=bn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],a=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Us(n,this.poolSize[0],this.padding,this.strides[0]),r=Us(r,this.poolSize[1],this.padding,this.strides[1]),a=Us(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,a]:[e[0],n,r,a,e[4]]}call(e,n){return Te(()=>(this.invokeCallHook(e,n),this.poolingFunction(Mt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class A8 extends $8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),x8(e,n,r,a,i,"max")}}A8.className="MaxPooling3D";Xe(A8);class I8 extends $8{constructor(e){super(e)}poolingFunction(e,n,r,a,i){return hr(i),zi(a),x8(e,n,r,a,i,"avg")}}I8.className="AveragePooling3D";Xe(I8);class k8 extends sn{constructor(e){super(e),this.inputSpec=[new $r({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Zt}}class _8 extends k8{constructor(e){super(e||{})}call(e,n){return Te(()=>{const r=Mt(e);return or(r,1)})}}_8.className="GlobalAveragePooling1D";Xe(_8);class O8 extends k8{constructor(e){super(e||{})}call(e,n){return Te(()=>{const r=Mt(e);return ps(r,1)})}}O8.className="GlobalMaxPooling1D";Xe(O8);class F8 extends sn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,hr(this.dataFormat),this.inputSpec=[new $r({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Zt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class R8 extends F8{call(e,n){return Te(()=>{const r=Mt(e);return this.dataFormat==="channelsLast"?or(r,[1,2]):or(r,[2,3])})}}R8.className="GlobalAveragePooling2D";Xe(R8);class M8 extends F8{call(e,n){return Te(()=>{const r=Mt(e);return this.dataFormat==="channelsLast"?ps(r,[1,2]):ps(r,[2,3])})}}M8.className="GlobalMaxPooling2D";Xe(M8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P8 extends sn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const a=n.layer,i=Jo(a,r);delete n.layer;const s={layer:i};return Object.assign(s,n),new e(s)}}class B8 extends P8{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=bn(e),e.length<3)throw new we(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=bn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),a=e[1];return[r[0],a].concat(r.slice(1))}call(e,n){return Te(()=>(e=Mt(e),G6((s,o)=>[Mt(this.layer.call(s,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}B8.className="TimeDistributed";Xe(B8);function Lde(t){Xc(sfe,"BidirectionalMergeMode",t)}const zde="concat";class L8 extends P8{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Jo(r),n.goBackwards=n.goBackwards!==!0;const a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=Jo(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?zde:e.mergeMode,Lde(this.mergeMode),e.weights)throw new Zt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,a,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,a=[r]):this.mergeMode==null?a=[r,r.slice()]:a=[r],this.returnState?this.mergeMode==null?a.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Wa(a)}apply(e,n){let r=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=j6(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&a==null)return super.apply(e,n);const s=[],o=[];if(r!=null){const l=r.length;if(l%2>0)throw new we("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push(...r);const c=r.map(f=>new $r({shape:f.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),o.push(...c)}if(a!=null)throw new Zt("Support for constants in Bidirectional layers is not implemented yet.");const u=s[0]instanceof Co;for(const l of s)if(l instanceof Co!==u)throw new we("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(s),c=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=c;const d=super.apply(l,n);return this.inputSpec=f,d}else return super.apply(e,n)}call(e,n){return Te(()=>{const r=n.initialState;let a,i;if(r==null)a=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);a=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let s;this.returnState&&(Array.isArray(a)&&(s=a.slice(1).concat(i.slice(1))),a=a[0],i=i[0]),this.returnSequences&&(i=ys(i,1));let o;return this.mergeMode==="concat"?o=ZD([a,i]):this.mergeMode==="sum"?o=qe(a,i):this.mergeMode==="ave"?o=ge(.5,qe(a,i)):this.mergeMode==="mul"?o=ge(a,i):this.mergeMode==null&&(o=[a,i]),this.returnState?this.mergeMode==null?o.concat(s):[o].concat(s):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){wc(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),wc(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(s=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Jo(n.layer);if(delete n.layer,n.numConstants!=null)throw new Zt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=n;return a.layer=r,new e(a)}}L8.className="Bidirectional";Xe(L8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z8 extends sn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Te(()=>(e=Mt(e),e.dtype!=="float32"&&(e=xo(e,"float32")),qe(ge(e,this.scale),this.offset)))}}z8.className="Rescaling";Xe(z8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:Ude,cropAndResize:Vde}=go;class U8 extends sn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,a,i,s,o,u){return Te(()=>{let l,c=!1;const f=n/s,d=r/o,h=(a+n)/s,m=(i+r)/o,v=[f,d,h,m],y=[];e.rank===3?(c=!0,l=wi([e])):l=e;for(let C=0;C<l.shape[0];C++)y.push(v);const b=zs(y,[y.length,4]),x=Dd(0,y.length,1,"int32"),S=Vde(l,b,x,[a,i],"nearest");return xo(c?Mt(bs(S)):S,u)})}upsize(e,n,r,a){return Te(()=>{const i=Ude(e,[n,r]);return xo(i,a)})}call(e,n){return Te(()=>{const r=Mt(e),a=r.dtype,i=r.shape,s=i[i.length-3],o=i[i.length-2];let u=0;s!==this.height&&(u=Math.floor((s-this.height)/2));let l=0;return o!==this.width&&(l=Math.floor((o-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,s,o,a):this.upsize(e,this.height,this.width,a)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=bn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}U8.className="CenterCrop";Xe(U8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wde(t,e,n,r){let a=Mt(t);if(a.dtype!=="int32"&&(a=xo(a,"int32")),e==="int")return a;const i=a.shape;if(a.rank===0&&(a=Aa(a,-1)),e==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=Aa(a,-1)),a.rank>2)throw new we(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${a.rank}.`);const s=["multiHot","oneHot"].includes(e),o=a;let u;if(typeof r<"u"&&e==="count"?u=uC(o,r,n,s):u=uC(o,[],n,s),e!=="tfIdf")return u;if(r)return ge(u,r);throw new we("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class V8 extends sn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=bn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Te(()=>{e=Mt(e),e.dtype!=="int32"&&(e=xo(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new we(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Mt(n.countWeights)}const a=ps(e),i=Vh(e),s=Ti(this.numTokens,a).bufferSync().get(0),o=El(i,0).bufferSync().get(0);if(!(s&&o))throw new we(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Wde(e,this.outputMode,this.numTokens,r)})}}V8.className="CategoryEncoding";Xe(V8);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qde=["bilinear","nearest"],S3=new Set(qde);class W8 extends sn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(S3.has(e.interpolation))this.interpolation=e.interpolation;else throw new we(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=bn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Te(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return go.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return go.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...S3]} are supported`)})}}W8.className="Resizing";Xe(W8);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class q8{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}q8.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class H8 extends sn{constructor(e){super(e),this.randomGenerator=new q8(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}H8.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Hde=["bilinear","nearest"],C3=new Set(Hde);class j8 extends H8{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new we(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new we(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new we(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(C3.has(r))this.interpolation=r;else throw new we(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=bn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Te(()=>{const r=Mt(e);this.imgHeight=r.shape[r.shape.length-3];const a=r.shape[r.shape.length-2];this.widthFactor=Hc([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*a;i=Math.round(i);const s=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return go.resizeBilinear(e,s);case"nearest":return go.resizeNearestNeighbor(e,s);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...C3]} are supported`)}})}}j8.className="RandomWidth";Xe(j8);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var E3;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(E3||(E3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jde=dD;class Ew extends EE{nextDataId(){return Ew.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new VB(this,uo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Ae().get("IS_NODE")&&Oi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:r,refCount:1}),a}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&fm(r[0])){const i=r.map(s=>Ju(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return{dataId:a,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,a,i){this.data.set(e,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return ou(a,i)}return zQ(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>al(a));return en(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return en(e.shape,e.dtype,n)}makeOutput(e,n,r){return uo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Va();return e(),{kernelMs:Va()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){mt([e],"where");const n=this.readSync(e.dataId);return jde(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Ew.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const Gde=t=>{const{x:e}=t.inputs,n=t.backend;mt(e,"abs");let r=new Float32Array(Oe(e.shape));const a=n.data.get(e.dataId).values;return r=G8(a),n.makeOutput(r,e.shape,e.dtype)},Xde={kernelName:z1,backendName:"cpu",kernelFunc:Gde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(t){return(e,n,r,a,i)=>{const s=Ht(e,n),o=s.length,u=Nt(s),l=Oe(s),c=ta(i,l),f=e.length,d=n.length,h=Nt(e),m=Nt(n),v=Ed(e,s),y=Ed(n,s);if(v.length+y.length===0)for(let b=0;b<c.length;++b)c[b]=t(r[b%r.length],a[b%a.length]);else for(let b=0;b<c.length;++b){const x=Xd(b,o,u),w=x.slice(-f);v.forEach(A=>w[A]=0);const S=yo(w,f,h),C=x.slice(-d);y.forEach(A=>C[A]=0);const E=yo(C,d,m);c[b]=t(r[S],a[E])}return[c,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function di(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(o.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}const Kde={kernelName:RE,backendName:"cpu",kernelFunc:di};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0(t,e,n="float32"){if(n==="complex64"){const a=Y0(t,e,"float32"),i=Y0(t,e,"float32");return di({inputs:{real:a,imag:i},backend:t})}const r=ma(Oe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Yde={kernelName:_m,backendName:"cpu",kernelFunc:Eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const Zde={kernelName:pT,backendName:"cpu",kernelFunc:Mc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(t,e,n,r){if(r==="int32"){const a=Int32Array.from(t);return[e,"int32",a]}if(r==="bool"){const a=Wc([0],n),[i,s]=mr((o,u)=>o!==u?1:0)(e,[],t,a,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function hl(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Eo({inputs:{x:a},backend:n});const c=Y0(n,a.shape,a.dtype),f=hl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),d=di({inputs:{real:f,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),d}if(a.dtype==="complex64"){const c=Mc({inputs:{input:a},backend:n}),f=hl({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),f}if(!qB(a.dtype,i)){const c=Eo({inputs:{x:a},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const s=n.data.get(a.dataId).values,[o,u,l]=X8(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,u,l)}const Qde={kernelName:bm,backendName:"cpu",kernelFunc:hl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Or(t,e,n,r){return n==null?({inputs:a,backend:i})=>{const{a:s,b:o}=a,u=i;mt([s,o],t);const l=u.data.get(s.dataId).values,c=u.data.get(o.dataId).values,f=s.dtype==="string"?uu(l):l,d=s.dtype==="string"?uu(c):c,h=r||s.dtype,[m,v]=e(s.shape,o.shape,f,d,h);return u.makeTensorInfo(v,h,m)}:({inputs:a,backend:i})=>{const{a:s,b:o}=a,u=i;if(s.dtype==="complex64"||o.dtype==="complex64"){const l=hl({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,m=u.data.get(d.dataId).values,v=hl({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(v.dataId),b=y.complexTensorInfos.real,x=y.complexTensorInfos.imag,w=u.data.get(b.dataId).values,S=u.data.get(x.dataId).values,[C,E,A]=n(s.shape,o.shape,h,m,w,S),k=u.makeTensorInfo(A,"float32",C),D=u.makeTensorInfo(A,"float32",E),I=di({inputs:{real:k,imag:D},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(k),u.disposeIntermediateTensorInfo(D),I}else{const l=u.data.get(s.dataId).values,c=u.data.get(o.dataId).values,f=r||s.dtype,[d,h]=e(s.shape,o.shape,l,c,f);return u.makeTensorInfo(h,f,d)}}}function g$(t){return(e,n,r,a,i,s)=>{const o=Ht(e,n),u=Oe(o),l=o.length,c=Nt(o),f=ta("float32",u),d=ta("float32",u),h=Ed(e,o),m=Ed(n,o),v=ou(r,a),y=ou(i,s),b=e.length,x=Nt(e),w=n.length,S=Nt(n);if(h.length+m.length===0)for(let C=0;C<f.length;C++){const E=C%v.length,A=C%y.length,k=t(v[E*2],v[E*2+1],y[A*2],y[A*2+1]);f[C]=k.real,d[C]=k.imag}else for(let C=0;C<f.length;C++){const E=Xd(C,l,c),A=E.slice(-b);h.forEach(O=>A[O]=0);const k=yo(A,b,x),D=E.slice(-w);m.forEach(O=>D[O]=0);const I=yo(D,w,S),$=t(v[k*2],v[k*2+1],y[I*2],y[I*2+1]);f[C]=$.real,d[C]=$.imag}return[f,d,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K8=mr((t,e)=>t+e),Jde=g$((t,e,n,r)=>({real:t+n,imag:e+r})),Ad=Or(Kd,K8,Jde),epe={kernelName:Kd,backendName:"cpu",kernelFunc:Ad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$(t,e,n,r,a){const i=Oe(r),s=ma(a,n);for(let o=0;o<t.length;o++){const u=t[o];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i>0?s[u]+=e[o]:s[u]+=1)}return s}function Y8(t,e,n,r=!1){const a=t.shape[0],i=t.shape[1],s=en([a,n],e.dtype);for(let o=0;o<a;o++)for(let u=0;u<i;u++){const l=t.get(o,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?s.set(1,o,l):e.size>0?s.set(s.get(o,l)+e.get(o,u),o,l):s.set(s.get(o,l)+1,o,l))}return s}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8=mr((t,e)=>t&e),tpe=Or(X1,Z8),npe={kernelName:X1,backendName:"cpu",kernelFunc:tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Io(t){return(e,n,r)=>{const a=fr(n,e.length);for(let i=0;i<e.length;++i)a[i]=t(e[i],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function In(t,e,n){const r=Io(e);return Al(t,r,n)}function Al(t,e,n){return({inputs:r,attrs:a,backend:i})=>{const{x:s}=r;mt(s,t);const o=i,u=o.data.get(s.dataId).values;let l;if(s.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=uu(u)}else l=u;const c=n||s.dtype,f=e(l,c,a);return o.makeTensorInfo(s.shape,c,f)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8=Io(t=>Math.ceil(t)),rpe=Al(wm,Q8),ape={kernelName:wm,backendName:"cpu",kernelFunc:rpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8(t,e,n,r){const a=fr(n,Oe(e));if(r&&n!=="string"){let i=0;t.forEach(s=>{const o=Oe(s.shape);a.set(s.vals,i),i+=o})}else{let i=0;t.forEach(s=>{const o=n==="string"?uu(s.vals):s.vals;let u=0;for(let l=0;l<s.shape[0];++l){const c=l*e[1]+i;for(let f=0;f<s.shape[1];++f)a[c+f]=o[u++]}i+=s.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eU=mr((t,e)=>t===e?1:0),tU=Or(rb,eU,null,"bool"),ipe={kernelName:rb,backendName:"cpu",kernelFunc:tU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nU=Io(t=>Math.exp(t)),rU=Al(Dm,nU,"float32"),spe={kernelName:Dm,backendName:"cpu",kernelFunc:rU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aU=Io(t=>Math.expm1(t)),ope=Al($m,aU),upe={kernelName:$m,backendName:"cpu",kernelFunc:ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iU=Io(t=>Math.floor(t)),lpe=Al(Am,iU),cpe={kernelName:Am,backendName:"cpu",kernelFunc:lpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sU=mr((t,e)=>Math.floor(t/e)),fpe=Or(Im,sU,null,"int32"),dpe={kernelName:Im,backendName:"cpu",kernelFunc:fpe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oU(t,e,n,r,a,i,s,o,u){const l=en([r,i],n);for(let c=0;c<r;c++){const f=[];let d=0;for(let h=0;h<a;h++){const m=t[c*a+h];d+=m*s[h],f.push(m)}if(d<0||d>=u/i)throw new Error(`Invalid indices: ${f} does not index into ${o}`);for(let h=0;h<i;h++)l.values[c*i+h]=e.get(...e.indexToLoc(d*i+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uU(t,e,n){const r=en(n,t.dtype);for(let a=0;a<r.size;++a){const s=r.indexToLoc(a).slice(),o=s[0],u=s[2],l=e.locToIndex([o,u]);s[2]=e.values[l];const c=t.locToIndex(s);0<=c&&c<t.values.length&&(r.values[a]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lU=mr((t,e)=>t>e?1:0),ppe=Or(ob,lU,null,"bool"),hpe={kernelName:ob,backendName:"cpu",kernelFunc:ppe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cU=mr((t,e)=>t>=e?1:0),mpe=Or(km,cU,null,"bool"),gpe={kernelName:km,backendName:"cpu",kernelFunc:mpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fU=mr((t,e)=>t<e?1:0),vpe=Or(lb,fU,null,"bool"),ype={kernelName:lb,backendName:"cpu",kernelFunc:vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU=mr((t,e)=>t<=e?1:0),bpe=Or(cb,dU,null,"bool"),wpe={kernelName:cb,backendName:"cpu",kernelFunc:bpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pU(t,e,n){const r=(e-t)/(n-1),a=ma(n,"float32");a[0]=t;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hU=Io(t=>Math.log(t)),xpe=Al(Mm,hU),Npe={kernelName:Mm,backendName:"cpu",kernelFunc:xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mU(t,e,n,r){const a=ta(r,Oe(n));for(let i=0;i<a.length;++i){const s=i*e;let o=t[s];for(let u=0;u<e;++u){const l=t[s+u];(Number.isNaN(l)||l>o)&&(o=l)}a[i]=o}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gU=mr((t,e)=>Math.max(t,e)),Spe=Or(Bm,gU),Cpe={kernelName:Bm,backendName:"cpu",kernelFunc:Spe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU=mr((t,e)=>Math.min(t,e)),Epe=Or(Lm,vU),Tpe={kernelName:Lm,backendName:"cpu",kernelFunc:Epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$=mr((t,e)=>t*e),Dpe=g$((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Tw=Or(Um,y$,Dpe),$pe={kernelName:Um,backendName:"cpu",kernelFunc:Tw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yU(t,e,n){const r=wl(-1,n);return y$([],e,r,t,n)}function Ape(t){const{inputs:e,backend:n}=t,{x:r}=e;mt(r,"neg");const a=n.data.get(r.dataId).values,[i,s]=yU(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}const Ipe={kernelName:xb,backendName:"cpu",kernelFunc:Ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bU=mr((t,e)=>t!==e?1:0),kpe=Or(Nb,bU,null,"bool"),_pe={kernelName:Nb,backendName:"cpu",kernelFunc:kpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(t,e,n,r,a){const i=e.length,s=Oe(e),o=Nt(e),u=Nt(a),l=ta(n,Oe(a));for(let c=0;c<s;++c){const f=Xd(c,i,o),d=new Array(f.length);for(let m=0;m<d.length;m++)d[m]=f[r[m]];const h=yo(d,i,u);l[h]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(t){const{inputs:e,attrs:n,backend:r}=t,{x:a}=e,{perm:i}=n;mt(a,"transpose");const s=a.shape.length,o=new Array(s);for(let f=0;f<o.length;f++)o[f]=a.shape[i[f]];const u=r.data.get(a.dataId).values,l=b$(u,a.shape,a.dtype,i,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}const Ope={kernelName:id,backendName:"cpu",kernelFunc:Ya};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wU(t,e,n,r){const[a,i]=Wr(t,r),s=vi(e,"int32"),o=ma(Oe(a),s),u=Oe(i);for(let l=0;l<o.length;++l){const c=l*u;let f=1;for(let d=0;d<u;++d)f*=n[c+d];o[l]=f}return{outVals:o,outShape:a,outDtype:s}}function Fpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;mt(a,"prod");const o=a.shape.length,u=an(i,a.shape),l=nr(u,o);let c=u,f=a;const d=[];l!=null&&(f=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(f),c=pr(c.length,o));const h=n.data.get(f.dataId).values,{outVals:m,outShape:v,outDtype:y}=wU(f.shape,f.dtype,h,c);let b=v;return s&&(b=dr(v,u)),d.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(b,y,m)}const Rpe={kernelName:$b,backendName:"cpu",kernelFunc:Fpe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpe(t,e,n){t.forEach((r,a)=>{if(r<0||r>=n){const i=Xd(a,e.length,Nt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function Ppe(t,e){for(let n=0;n<t.length;++n){const r=t[n],a=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function Bpe(t,e,n,r){const a=[];let i=0;const s=e.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);Ppe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let f=1;f<u+1;++f)o[l].push(f*c)}for(let l=0;l<t.length;++l){let c=t[l],f=t[l]+1;for(let d=0;d<n.length;++d){const h=n[d],m=d+e.length-1;if(m>=0){const v=o[m],y=v[v.length-1]-h[c];for(let b=c;b<f;++b)o[m].push(h[b+1]+y)}c=h[c],f=h[f]}f!==c&&(a.push([c,f]),i+=f-c)}return{outSplits:o,valueSlices:a,numValues:i}}function Lpe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,a=fr("int32",r);e.push(a),t[n].forEach((i,s)=>a[s]=i)}return e}function T3(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function zpe(t,e,n,r,a,i){const s=T3(e,2)[1],o=T3(i,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)a[u*o+f]=t[c*s+f];++u}}function Upe(t,e,n,r,a){const i=e.slice();i[0]=a;const s=fr(n,Oe(i)),o=t.length,u=o===0?0:o/e[0];return zpe(t,e,r,u,s,i),[s,i]}function xU(t,e,n,r,a,i,s,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(Mpe(i,s,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:d}=Bpe(i,s,t,l),h=Lpe(c),m=Upe(n,r,a,f,d);return[h,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3=2147483647;function NU(t,e,n,r,a,i,s){if(e.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,u=a.length===0,l=s.length===0,c=[];o||c.push(e[0]),u||c.push(a[0]),l||c.push(s[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],d=fr("int32",f+1);d[0]=0;for(let y=0;y<f;++y){const b=o?t[0]:t[y],x=u?r[0]:r[y],w=l?i[0]:i[y];if(w===0)throw new Error("Requires delta != 0");let S;if(w>0&&x<b||w<0&&x>b)S=0;else if(S=Math.ceil(Math.abs((x-b)/w)),S>D3)throw new Error(`Requires ((limit - start) / delta) <= ${D3}`);d[y+1]=d[y]+S}const h=d[f],m=fr(n,h);let v=0;for(let y=0;y<f;++y){const b=d[y+1]-d[y];let x=o?t[0]:t[y];const w=l?i[0]:i[y];for(let S=0;S<b;++S)m[v++]=x,x+=w}return[d,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qi=Ps;class Z0{constructor(e,n,r,a,i,s,o,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=r5(c),this.raggedRank=a5(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Qi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Qi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Qi.VALUE_ROWIDS:return Z0.getMaxWidthValueRowID(n);case Qi.ROW_SPLITS:return Z0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Qi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let a=0;a<n-1;++a){const i=e[a+1]-e[a];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,a=e[0],i=0;for(let s=1;s<n;++s){const o=e[s];o!==a&&(a=o,i=Math.max(s-r,i),r=s)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return A3(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;i5(r,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=n5(this.raggedRank,a,n);s[0]<0&&(s[0]=e);for(let o=1;o<=this.raggedRank;++o)s[o]<0&&(s[o]=this.getMaxWidth(o));return s}calculateFirstParentOutputIndex(e,n,r){const a=Math.min(e,r),i=[];let s=0;for(let o=0;o<a;++o,s+=n)i.push(s);for(let o=a;o<e;++o)i.push(-1);return Y(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,a){const i=e.length,s=[];for(let o=0;o<i-1;++o){const u=e[o+1]-e[o];let l=Math.min(a,u),c=n[o];c===-1&&(l=0);for(let f=0;f<l;++f)s.push(c),c+=r;for(let f=0;f<u-l;++f)s.push(-1)}if(i>0&&s.length!==e[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,n,r,a){const i=e.length,s=[];if(i===0)return[];let o=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];s.push(l);for(let c=1;c<i;++c){const f=e[c];if(f===u)l>=0&&(++o,o<a?l+=r:l=-1);else{if(o=0,u=f,f>=n.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${n.length}`);l=n[f]}s.push(l)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,n,r,a){const i=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case Qi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,a);case Qi.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,a);default:throw new Error(`Unsupported partition type: ${Qi[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Qi.FIRST_DIM_SIZE:return e[0];case Qi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Qi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Qi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let u=a.length-2;u>=0;--u)a[u]=a[u+1]*r[u+1];const i=A3(r,!1),s=fr(this.valuesDType,Oe(i));if(a[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,a[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,a[l],r[l]);this.setOutput(this.raggedRank,u,s,i)}return[i,s]}setOutput(e,n,r,a){if(r.length===0)return;const i=this.values,s=r;let o=a.slice();o=o.slice(e+1);const u=Oe(o),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const m=this.defaultValueShape;Te(()=>{const v=be(c,m);c=ud(v,o).dataSync()})}let f=0,d=0,h=0;for(let m=0;m<=l;++m){let v=m<l?n[m]:-1;if(v===h){++h;continue}if(d<h){const y=i.subarray(f*u),b=s.subarray(d*u),x=(h-d)*u;$3(b,y,x)}if(m>=l){const y=r.length;v=Math.floor(y/u)}if(v>h)if(this.defaultValue.length===1)s.subarray(h*u,v*u).fill(this.defaultValue[0]),h=v;else for(;v>h;){const y=s.slice(h*u);$3(y,c,u),++h}v<0?(f=m+1,d=h):(f=m,d=h,h=d+1)}}}function $3(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function A3(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function SU(t,e,n,r,a,i,s,o,u,l){return new Z0(t,e,n,r,a,i,s,o,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CU(t,e,n,r){const a=t===e,i=t<e&&n<0,s=e<t&&n>1;if(a||i||s)return ma(0,r);const o=Math.abs(Math.ceil((e-t)/n)),u=ma(o,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EU=Io(t=>1/Math.sqrt(t)),Vpe=Al(Gm,EU),Wpe={kernelName:Gm,backendName:"cpu",kernelFunc:Vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n,r,a,i,s,o,u,l){const c=[r/a,a],f=t.values,d=e.values;if(r===0)return en(n,e.dtype);const h=u instanceof Ar?u:en(c,e.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let m=0;m<i;m++){const v=[];let y=0;for(let b=0;b<s;b++){const x=f[m*s+b];v.push(x),y+=x*o[b]}if(y<0||y>=r/a)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let b=0;b<a;b++)l?h.values[y*a+b]+=d[m*a+b]:h.values[y*a+b]=e.rank===0?d[0]:d[m*a+b]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe=Io(t=>1/(1+Math.exp(-t))),TU=In(Qm,t=>1/(1+Math.exp(-t))),Hpe={kernelName:Qm,backendName:"cpu",kernelFunc:TU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DU(t,e,n,r,a){const i=ED(r,e,n),s=Oe(n),o=Nt(r);if(i){const f=TD(e,o);return a==="string"?t.slice(f,f+s):t.subarray(f,f+s)}const u=a==="string"?uu(t):t,l=en(r,a,u),c=en(n,a);for(let f=0;f<c.size;++f){const d=c.indexToLoc(f),h=d.map((m,v)=>m+e[v]);c.set(l.get(...h),...d)}return a==="string"?E5(c.values):c.values}function Pc(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r;mt(a,"slice");const[o,u]=fw(a,i,s);SD(a,o,u);const l=n.data.get(a.dataId).values,c=DU(l,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,c)}const jpe={kernelName:Fb,backendName:"cpu",kernelFunc:Pc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $U(t,e,n,r,a,i,s){const o=e[0],u=i[0],l=new Array(u),c=new Array(o),f=e[1];if(u===0){if(o!==0)throw new Error(d5(o));const y=fr(n,0),b=fr(a,0);return[y,[0,f],b,l,c]}let d=!0,h=0;const m=new Array(u).fill(0);for(let y=0;y<o;++y){const b=t[y*f];if(b<0)throw new Error(p5(y,b));if(b>=u)throw new Error(h5(y,b,u));++m[b],d=d&&b>=h,h=b}let v=!0;for(let y=0;y<u;++y){const b=m[y]===0;l[y]=b,v=v&&!b,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(v&&d){const y=t,b=r;for(let x=0;x<o;++x)c[x]=x;return[y,[o,f],b,l,c]}else{const y=m[u-1],b=fr(n,y*f),x=fr(a,y),w=new Array(u).fill(0);for(let S=0;S<o;++S){const C=t[S*f],E=w[C],A=(C===0?0:m[C-1])+E;w[C]++;for(let k=0;k<f;++k)b[A*f+k]=t[S*f+k];x[A]=r[S],c[S]=A}for(let S=0;S<u;++S)if(w[S]===0){const E=S===0?0:m[S-1];b[E*f+0]=S;for(let A=1;A<f;++A)b[E*f+A]=0;x[E]=s}return[b,[y,f],x,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AU(t,e,n,r,a){const i=Oe(r),s=e[0],o=a.length,u=[];let l=1,c=-1;for(let y=0;y<o;++y){const b=a[y];if(b===-1){if(c!==-1)throw new Error(m5(c,y));c=y,u.push(1)}else{if(b<0)throw new Error(g5(y,b));l*=b,u.push(b)}}if(c!==-1){if(l<=0)throw new Error(v5());const y=Math.trunc(i/l);if(l*y!==i)throw new Error(y5(r,u));u[c]=y}if(Oe(u)!==i)throw new Error(b5(r,u));const d=r.length,h=[];if(d>0){h[d-1]=1;for(let y=d-2;y>=0;--y)h[y]=h[y+1]*r[y+1]}const m=[];if(o>0){m[o-1]=1;for(let y=o-2;y>=0;--y)m[y]=m[y+1]*u[y+1]}const v=fr(n,s*o);for(let y=0;y<s;++y){let b=0;for(let x=0;x<d;++x)b+=t[y*d+x]*h[x];for(let x=0;x<o;++x)v[y*o+x]=Math.trunc(b/m[x]),b%=m[x]}return[v,[s,o],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(t,e,n,r,a,i=!1,s=0){const o=r.length,u=[e[0],t.length/e[0]],l=u[1],f=o>0?a[o-1]+1:0;if(f<0)throw new Error(dC());const d=e.slice();d[0]=f;const h=d.reduce((w,S)=>w*S,1),m=fr(n,h);if(o===0)return f>0&&m.fill(s),[m,d];if(f<=0)throw new Error(dC());let v=0,y=1,b=0,x=a[v];for(;;){let w=0;if(y<o){if(w=a[y],x===w){++y;continue}if(x>=w)throw new Error(w5())}if(x<0||x>=f)throw new Error(x5(x,f));x>b&&m.fill(s,b*l,x*l);for(let S=v;S<y;++S){const C=r[S];if(C<0||C>=u[0])throw new Error(N5(S,r[S],u[0]));for(let E=0;E<l;E++)m[x*l+E]+=t[C*l+E]}if(i)for(let S=0;S<l;S++)m[x*l+S]/=y-v;if(v=y,++y,b=x+1,x=w,y>o)break}return b<f&&m.fill(s,b*l,f*l),[m,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe=Io(t=>Math.sqrt(t)),Xpe=In(eg,t=>Math.sqrt(t)),Kpe={kernelName:eg,backendName:"cpu",kernelFunc:Xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IU=mr((t,e)=>{const n=t-e;return n*n}),Ype=Or(tg,IU),Zpe={kernelName:tg,backendName:"cpu",kernelFunc:Ype};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kU=Io((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=e;return t.replace(new RegExp(n,r?"g":""),a)}),Qpe=Al(Lb,kU),Jpe={kernelName:Lb,backendName:"cpu",kernelFunc:Qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _U(t,e,n,r){const a=en(t,e.dtype);for(let i=0;i<a.size;i++){const s=a.indexToLoc(i),o=new Array(s.length);for(let u=0;u<o.length;u++)o[u]=s[u]*n[u]+r[u];a.set(e.get(...o),...s)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ehe{constructor(e,n,r,a,i,s){this.separator=Ju(e),this.nGramWidths=n,this.leftPad=Ju(r),this.rightPad=Ju(a),this.padWidth=i,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,a,i,s){for(let o=0;o<i;++o){const u=this.getPadWidth(s),l=Math.max(0,u-o),c=Math.max(0,u-(i-(o+1))),f=s-(l+c),d=n+(l>0?0:o-u);let h=0;h+=l*this.leftPad.length;for(let x=0;x<f;++x)h+=e[d+x].length;h+=c*this.rightPad.length;const m=l+c+f-1;h+=m*this.separator.length,r[a+o]=new Uint8Array(h);const v=r[a+o];let y=0;const b=x=>x.forEach(w=>v[y++]=w);for(let x=0;x<l;++x)b(this.leftPad),b(this.separator);for(let x=0;x<f-1;++x)b(e[d+x]),b(this.separator);if(f>0){b(e[d+f-1]);for(let x=0;x<c;++x)b(this.separator),b(this.rightPad)}else{for(let x=0;x<c-1;++x)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(e,n){const r=e.length,a=n.length;if(a>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<a;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const i=a-1,s=fr("int32",a);if(r===0||a===0){const u=new Array(r);for(let l=0;l<=i;++l)s[l]=0;return[u,s]}s[0]=0;for(let u=1;u<=i;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),s[u]=s[u-1]+c}const o=new Array(s[i]);for(let u=0;u<i;++u){const l=n[u];let c=s[u];if(this.nGramWidths.forEach(f=>{const d=n[u+1]-n[u],h=this.getNumNGrams(d,f);this.createNGrams(e,l,o,c,h,f),c+=h}),this.preserveShort&&c===s[u]){const f=n[u+1]-n[u];if(f===0)continue;const d=f+2*this.padWidth;this.createNGrams(e,l,o,c,1,d)}}return[o,s]}}function OU(t,e,n,r,a,i,s,o){return new ehe(n,r,a,i,s,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function the(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let s=t.indexOf(i);for(;s!==-1;){const o=t.subarray(0,s);(!n||o.length!==0)&&r.push(o),t=t.subarray(s+1),s=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let a=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const s=t.subarray(a,i);(!n||s.length!==0)&&r.push(s),a=i+1}}function FU(t,e,n){const r=t.length,a=[];let i=0,s=0;const o=new Array(r);for(let d=0;d<r;++d){const h=a.length;the(t[d],e,n,a);const m=a.length-h;o[d]=m,i+=m,s=Math.max(s,m)}const u=fr("int32",i*2),l=new Array(i),c=[r,s];let f=0;for(let d=0;d<r;++d)for(let h=0;h<o[d];++h)u[f*2]=d,u[f*2+1]=h,l[f]=a[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RU(t,e){const n=fr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=iJ(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MU=mr((t,e)=>t-e),nhe=g$((t,e,n,r)=>({real:t-n,imag:e-r})),x$=Or(ng,MU,nhe),rhe={kernelName:ng,backendName:"cpu",kernelFunc:x$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t,e){const n=new Array(t.rank);for(let a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];const r=en(n,t.dtype);for(let a=0;a<r.values.length;++a){const i=r.indexToLoc(a),s=new Array(t.rank);for(let u=0;u<s.length;u++)s[u]=i[u]%t.shape[u];const o=t.locToIndex(s);r.values[a]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function BU(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,u=e-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(o-c)/o)*Math.sign(u-o/2),d=Math.max(n,Math.floor(e-u*c/o+f)),h=Math.min(r,Math.floor(e+(o-u)*c/o+f));BU(t,e,d,h)}const a=t[e];let i=n,s=r;for(Xf(t,n,e),wh(t[r],a)>0&&Xf(t,n,r);i<s;){for(Xf(t,i,s),i++,s--;wh(t[i],a)<0;)i=i+1;for(;wh(t[s],a)>0;)s=s-1}wh(t[n],a)===0?Xf(t,n,s):(s=s+1,Xf(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}}function LU(t,e,n,r,a){const i=e[e.length-1],[s,o]=[t.length/i,i],u=ta(n,s*r),l=ta("int32",s*r);for(let f=0;f<s;f++){const d=f*o,h=t.subarray(d,d+o);let m=new Array(h.length);h.forEach((x,w)=>m[w]={value:x,index:w}),r<m.length&&(BU(m,r),m=m.slice(0,r)),a&&m.sort(wh);const v=f*r,y=u.subarray(v,v+r),b=l.subarray(v,v+r);for(let x=0;x<r;x++)y[x]=m[x].value,b[x]=m[x].index}const c=e.slice();return c[c.length-1]=r,[en(c,n,u),en(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zU(t,e,n,r){const a=an(e,n)[0],i=[1,n[0],1];for(let m=0;m<a;m++)i[0]*=n[m];i[1]=n[a];for(let m=a+1;m<n.length;m++)i[2]*=n[m];const s=new Map,o=new Int32Array(n[a]),u=new Ar(i,r,t),l=[],c=i[0]===1&&i[2]===1;for(let m=0;m<n[a];m++){let v;if(c)v=t[m].toString();else{const b=[];for(let x=0;x<i[0];x++)for(let w=0;w<i[2];w++)b.push(u.get(x,m,w));v=b.join(",")}const y=s.get(v);if(y!=null)o[m]=y;else{const b=s.size;s.set(v,b),o[m]=b,l.push(m)}}const f=i.slice();f[1]=s.size;const d=new Ar(f,r);l.forEach((m,v)=>{for(let y=0;y<i[0];y++)for(let b=0;b<i[2];b++)d.set(u.get(y,m,b),y,v,b)});const h=n.slice();return h[a]=f[1],{outputValues:d.values,outputShape:h,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ahe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:K8,bincountImpl:v$,bincountReduceImpl:Y8,bitwiseAndImpl:Z8,castImpl:X8,ceilImpl:Q8,concatImpl:J8,equalImpl:eU,expImpl:nU,expm1Impl:aU,floorDivImpl:sU,floorImpl:iU,gatherNdImpl:oU,gatherV2Impl:uU,greaterEqualImpl:cU,greaterImpl:lU,lessEqualImpl:dU,lessImpl:fU,linSpaceImpl:pU,logImpl:hU,maxImpl:mU,maximumImpl:gU,minimumImpl:vU,multiplyImpl:y$,negImpl:yU,notEqualImpl:bU,prodImpl:wU,raggedGatherImpl:xU,raggedRangeImpl:NU,raggedTensorToTensorImpl:SU,rangeImpl:CU,rsqrtImpl:EU,scatterImpl:gc,sigmoidImpl:qpe,simpleAbsImpl:G8,sliceImpl:DU,sparseFillEmptyRowsImpl:$U,sparseReshapeImpl:AU,sparseSegmentReductionImpl:w$,sqrtImpl:Gpe,squaredDifferenceImpl:IU,staticRegexReplaceImpl:kU,stridedSliceImpl:_U,stringNGramsImpl:OU,stringSplitImpl:FU,stringToHashBucketFastImpl:RU,subImpl:MU,tileImpl:PU,topKImpl:LU,transposeImpl:b$,uniqueImpl:zU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dL("cpu",()=>new Ew,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UU=In(Em,t=>t>=0?t:Math.exp(t)-1),ihe={kernelName:Em,backendName:"cpu",kernelFunc:UU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r;mt([a],"leakyRelu");const s=Oe(a.shape),o=n.data.get(a.dataId).values,u=ta("float32",s);for(let l=0;l<o.length;l++)u[l]=o[l]<0?i*o[l]:o[l];return n.makeTensorInfo(a.shape,"float32",u)}const she={kernelName:ub,backendName:"cpu",kernelFunc:VU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ohe=mr((t,e)=>t<0?e*t:t);function WU(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e;mt([r,a],"prelu");const i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,u]=ohe(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(u,"float32",o)}const uhe={kernelName:Db,backendName:"cpu",kernelFunc:WU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qU=In(qm,t=>Math.max(0,t)),lhe={kernelName:qm,backendName:"cpu",kernelFunc:qU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HU=In(Hm,t=>Math.min(Math.max(0,t),6)),che={kernelName:Hm,backendName:"cpu",kernelFunc:HU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0(t,e,n,r,a){if(n==="linear")return Eo({inputs:{x:e},backend:t});if(n==="relu")return qU({inputs:{x:e},backend:t});if(n==="elu")return UU({inputs:{x:e},backend:t});if(n==="relu6")return HU({inputs:{x:e},backend:t});if(n==="prelu")return WU({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return VU({inputs:{x:e},backend:t,attrs:{alpha:a}});if(n==="sigmoid")return TU({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=Oe(a.shape),o=WB(i,s),u=Oe(o);Y(s===u,()=>`The new shape (${o}) has ${u} elements and the old shape (${a.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const l=n.data.get(a.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=o,f.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const fhe={kernelName:Ab,backendName:"cpu",kernelFunc:Wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jU(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;mt([a,i],"matMul");const u=a.shape.length,l=i.shape.length,c=s?a.shape[u-2]:a.shape[u-1],f=o?i.shape[l-1]:i.shape[l-2],d=s?a.shape[u-1]:a.shape[u-2],h=o?i.shape[l-2]:i.shape[l-1],m=a.shape.slice(0,-2),v=i.shape.slice(0,-2),y=Oe(m),b=Oe(v),w=Ht(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);Y(c===f,()=>`Error in matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${s} and transposeB=${o} must match.`);const S=s?[y,c,d]:[y,d,c],C=o?[b,h,f]:[b,f,h],E=Wn({inputs:{x:a},backend:n,attrs:{shape:S}}),A=Wn({inputs:{x:i},backend:n,attrs:{shape:C}}),k=s?E.shape[1]:E.shape[2],D=s?E.shape[2]:E.shape[1],I=o?A.shape[1]:A.shape[2],$=Math.max(y,b),O=n.data.get(E.dataId).values,B=n.data.get(A.dataId).values,z=Nt(E.shape),L=Nt(A.shape),[F,R,W]=s?[z[0],1,z[1]]:[z[0],z[1],1],[M,G,q]=o?[1,L[1],L[0]]:[L[1],1,L[0]],j=D*I,H=en([$,D,I],E.dtype),ne=H.values,ue=n.blockSize;for(let te=0;te<$;te++){const se=te%y,J=te%b;for(let K=0;K<D;K+=ue){const ae=Math.min(K+ue,D);for(let pe=0;pe<I;pe+=ue){const he=Math.min(pe+ue,I);for(let Se=0;Se<k;Se+=ue){const Ee=Math.min(Se+ue,k);for(let Z=K;Z<ae;Z++)for(let ie=pe;ie<he;ie++){let ve=0;for(let xe=Se;xe<Ee;xe++){const Re=O[se*F+Z*R+xe*W],Me=B[xe*M+ie*G+J*q];ve+=Re*Me}ne[te*j+(Z*I+ie)]+=ve}}}}}return n.disposeIntermediateTensorInfo(E),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(w,H.dtype,H.values)}const dhe={kernelName:j1,backendName:"cpu",kernelFunc:jU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function phe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;let d,h,m;const v=[];d=jU({inputs:{a,b:i},attrs:{transposeA:u,transposeB:l},backend:n}),s&&(h=Ad({inputs:{a:d,b:s},backend:n}),v.push(d),d=h),c&&(m=Q0(n,d,c,o,f),v.push(d),d=m);for(const b of v)n.disposeIntermediateTensorInfo(b);return d}const hhe={kernelName:k0,backendName:"cpu",kernelFunc:phe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mhe=In(dm,t=>Math.acos(t)),ghe={kernelName:dm,backendName:"cpu",kernelFunc:mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vhe=In(pm,t=>Math.acosh(t)),yhe={kernelName:pm,backendName:"cpu",kernelFunc:vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t){const{inputs:e,backend:n}=t,r=e;mt(e,"addN");const a=r.map(o=>n.data.get(o.dataId).values),i=en(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){const u=a[o];for(let l=0;l<s.length;l++)s[l]+=u[l]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const whe={kernelName:U1,backendName:"cpu",kernelFunc:bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;mt(a,"all");const o=an(i,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),ia("all",u,c.shape.length);const[f,d]=Wr(c.shape,u),h=Oe(d),m=ma(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let S=0;S<h;++S){const C=v[x+S];w=w&&C}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=dr(f,o),x=Wn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const Nhe={kernelName:AE,backendName:"cpu",kernelFunc:xhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function She(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;mt(a,"any");const o=an(i,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),ia("any",u,c.shape.length);const[f,d]=Wr(c.shape,u),h=Oe(d),m=ma(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let S=0;S<h;++S){const C=v[x+S];w=w||C}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=dr(f,o),x=Wn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const Che={kernelName:IE,backendName:"cpu",kernelFunc:She};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ehe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;mt(a,"argMax");let s=an(i,a.shape);const o=nr(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=pr(s.length,u.shape.length)),s=[s[0]],ia("argMax",s,u.shape.length);const[c,f]=Wr(u.shape,s),d=Oe(c),h=ma(d,"int32"),m=Oe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let x=v[b],w=0;for(let S=0;S<m;++S){const C=v[b+S];C>x&&(x=C,w=S)}h[y]=w}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const The={kernelName:V1,backendName:"cpu",kernelFunc:Ehe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;mt(a,"argMin");let s=an(i,a.shape);const o=nr(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Ya({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=pr(s.length,u.shape.length)),s=[s[0]],ia("argMin",s,u.shape.length);const[c,f]=Wr(u.shape,s),d=Oe(c),h=ma(d,"int32"),m=Oe(f),v=n.data.get(u.dataId).values;for(let y=0;y<h.length;++y){const b=y*m;let x=v[b],w=0;for(let S=0;S<m;++S){const C=v[b+S];C<x&&(x=C,w=S)}h[y]=w}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}const $he={kernelName:W1,backendName:"cpu",kernelFunc:Dhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ahe=In(hm,t=>Math.asin(t)),Ihe={kernelName:hm,backendName:"cpu",kernelFunc:Ahe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const khe=In(mm,t=>Math.asinh(t)),_he={kernelName:mm,backendName:"cpu",kernelFunc:khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ohe=In(gm,t=>Math.atan(t)),Fhe={kernelName:gm,backendName:"cpu",kernelFunc:Ohe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe=mr((t,e)=>Math.atan2(t,e)),Mhe=Or(ym,Rhe),Phe={kernelName:ym,backendName:"cpu",kernelFunc:Mhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bhe=In(vm,t=>Math.atanh(t)),Lhe={kernelName:vm,backendName:"cpu",kernelFunc:Bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$(t,e,n,r,a,i){const s=a.strideHeight,o=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=en(a.outShape,n),y=v.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],x=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let S=0;S<a.batchSize;++S){const C=S*b,E=S*r[0];for(let A=0;A<a.inChannels;++A)for(let k=0;k<a.outHeight;++k){const D=k*s-d,I=Math.max(0,D),$=Math.min(a.inHeight,c+D),O=C+k*x;for(let B=0;B<a.outWidth;++B){const z=B*o-h,L=Math.max(0,z),F=Math.min(a.inWidth,f+z);let R=m,W=0,M=0;for(let q=I;q<$;q+=u){const j=E+q*r[1];for(let H=L;H<F;H+=l){const ne=j+H*r[2],ue=t[ne+A];i==="max"&&ue>R?R=ue:i==="avg"&&(W+=ue,M++)}if(isNaN(R))break}const G=O+B*w+A;y[G]=i==="avg"?W/M:R}}}return v}function GU(t,e,n,r,a=!1,i=!1){const s=en(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,v=en(e,n,t);for(let y=0;y<r.batchSize;++y)for(let b=0;b<r.inChannels;++b)for(let x=0;x<r.outHeight;++x){const w=x*o-h;let S=w;for(;S<0;)S+=l;const C=Math.min(r.inHeight,f+w);for(let E=0;E<r.outWidth;++E){const A=E*u-m;let k=A;for(;k<0;)k+=c;const D=Math.min(r.inWidth,d+A);let I=Number.NEGATIVE_INFINITY,$=-1;for(let O=S;O<C;O+=l){const B=O-w;for(let z=k;z<D;z+=c){const L=z-A,F=v.get(y,O,z,b);F>I&&(I=F,a?$=i?((y*r.inHeight+O)*r.inWidth+z)*r.inChannels+b:(O*r.inWidth+z)*r.inChannels+b:$=B*d+L)}}s.set($,y,x,E,b)}}return s}function XU(t,e,n,r,a,i){const s=a.strideDepth,o=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,m=a.effectiveFilterWidth,v=a.padInfo.front,y=a.padInfo.top,b=a.padInfo.left,x=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=en(a.outShape,n),S=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[2]*a.outShape[3]*a.outShape[4],A=a.outShape[3]*a.outShape[4],k=a.outShape[4];for(let D=0;D<a.batchSize;++D){const I=D*C,$=D*r[0];for(let O=0;O<a.inChannels;++O)for(let B=0;B<a.outDepth;++B){const z=B*s-v;let L=z;for(;L<0;)L+=l;const F=Math.min(a.inDepth,d+z),R=I+B*E;for(let W=0;W<a.outHeight;++W){const M=W*o-y;let G=M;for(;G<0;)G+=c;const q=Math.min(a.inHeight,h+M),j=R+W*A;for(let H=0;H<a.outWidth;++H){const ne=H*u-b;let ue=ne;for(;ue<0;)ue+=f;const te=Math.min(a.inWidth,m+ne),se=j+H*k;let J=x,K=0,ae=0;for(let he=L;he<F;he+=l){const Se=$+he*r[1];for(let Ee=G;Ee<q;Ee+=c){const Z=Se+Ee*r[2];for(let ie=ue;ie<te;ie+=f){const ve=Z+ie*r[3],xe=t[ve+O];if(i==="max"&&xe>J?J=xe:i==="avg"&&(K+=xe,ae++),isNaN(J))break}if(isNaN(J))break}if(isNaN(J))break}const pe=se+O;S[pe]=i==="avg"?K/Math.max(ae,1):J}}}}return w}function zhe(t,e){const n=en(e.outShape,"int32"),r=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,m=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let y=0;y<e.inChannels;++y)for(let b=0;b<e.outDepth;++b){const x=b*r-d;let w=x;for(;w<0;)w+=s;const S=Math.min(e.inDepth,l+x);for(let C=0;C<e.outHeight;++C){const E=C*a-h;let A=E;for(;A<0;)A+=o;const k=Math.min(e.inHeight,c+E);for(let D=0;D<e.outWidth;++D){const I=D*i-m;let $=I;for(;$<0;)$+=u;const O=Math.min(e.inWidth,f+I);let B=Number.NEGATIVE_INFINITY,z=-1;for(let L=w;L<S;L+=s){const F=L-x;for(let R=A;R<k;R+=o){const W=R-E;for(let M=$;M<O;M+=u){const G=M-I,q=t.get(v,L,R,M,y);q>=B&&(B=q,z=F*c*f+W*c+G)}}}n.set(z,v,b,C,D,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;mt(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(s,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=xs(a.shape,i,s,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))f=Eo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=Nt(a.shape),m=N$(d,a.shape,a.dtype,h,c,"avg");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const Vhe={kernelName:q1,backendName:"cpu",kernelFunc:Uhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r;mt(a,"avgPool3d");const c=du(a.shape,i,s,1,o,u,l),f=n.data.get(a.dataId).values,d=XU(f,a.shape,a.dtype,Nt(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const qhe={kernelName:H1,backendName:"cpu",kernelFunc:Whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:l}=r;mt([a,i],"avgPool3DGrad");const c=du(i.shape,s,o,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,m=c.filterDepth,v=c.filterHeight,y=c.filterWidth,b=c.dilationDepth,x=c.dilationHeight,w=c.dilationWidth,S=c.effectiveFilterDepth,C=c.effectiveFilterHeight,E=c.effectiveFilterWidth,A=S-1-c.padInfo.front,k=E-1-c.padInfo.left,D=C-1-c.padInfo.top,I=en(i.shape,"float32"),$=1/(m*v*y),O=n.bufferSync(a);for(let B=0;B<c.batchSize;++B)for(let z=0;z<c.inChannels;++z)for(let L=0;L<c.inDepth;++L)for(let F=0;F<c.inHeight;++F)for(let R=0;R<c.inWidth;++R){const W=L-A,M=F-D,G=R-k;let q=0;for(let j=0;j<S;j+=b){const H=(W+j)/f;if(!(H<0||H>=c.outDepth||Math.floor(H)!==H))for(let ne=0;ne<C;ne+=x){const ue=(M+ne)/d;if(!(ue<0||ue>=c.outHeight||Math.floor(ue)!==ue))for(let te=0;te<E;te+=w){const se=(G+te)/h;if(se<0||se>=c.outWidth||Math.floor(se)!==se)continue;const J=O.get(B,H,ue,se,z);q+=J}}}I.set(q*$,B,L,F,R,z)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const jhe={kernelName:_E,backendName:"cpu",kernelFunc:Hhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ghe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;mt([a,i],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=xs(s.shape,o,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,m=c.filterWidth,v=c.dilationHeight,y=c.dilationWidth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,C=en(s.shape,"float32"),E=1/(h*m),A=n.data.get(a.dataId).values,k=en(a.shape,"float32",A);for(let D=0;D<c.batchSize;++D)for(let I=0;I<c.inChannels;++I)for(let $=0;$<c.inHeight;++$)for(let O=0;O<c.inWidth;++O){const B=$-S,z=O-w;let L=0;for(let F=0;F<b;F+=v){const R=(B+F)/f;if(!(R<0||R>=c.outHeight||Math.floor(R)!==R))for(let W=0;W<x;W+=y){const M=(z+W)/d;if(M<0||M>=c.outWidth||Math.floor(M)!==M)continue;const G=k.get(D,R,M,I);L+=G}}C.set(L*E,D,$,O,I)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Xhe={kernelName:kE,backendName:"cpu",kernelFunc:Ghe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Khe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,scale:i,offset:s,mean:o,variance:u}=e;Y(o.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),mt([a,o,u,i,s],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(a.dataId).values,f=n.data.get(o.dataId).values,d=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),m=s?n.data.get(s.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),y=m.length,b=h.length,x=d.length,w=f.length;let S=0,C=0,E=0,A=0;for(let k=0;k<c.length;++k)v[k]=m[S++]+(c[k]-f[C++])*h[E++]/Math.sqrt(d[A++]+l),S>=y&&(S=0),C>=w&&(C=0),E>=b&&(E=0),A>=x&&(A=0);return n.makeTensorInfo(a.shape,a.dtype,v)}const Yhe={kernelName:ib,backendName:"cpu",kernelFunc:Khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;mt([a],"batchToSpaceND");const o=i.reduce((b,x)=>b*x),u=gg(a.shape,i,o),l=vg(u.length,i.length),c=yg(a.shape,i,o),f=kD(s,i.length),d=_D(c,s,i.length),h=Wn({inputs:{x:a},backend:n,attrs:{shape:u}}),m=Ya({inputs:{x:h},backend:n,attrs:{perm:l}}),v=Wn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Pc({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const Qhe={kernelName:G1,backendName:"cpu",kernelFunc:Zhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=v$(o,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,l)}const eme={kernelName:OE,backendName:"cpu",kernelFunc:Jhe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tme(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=Ht(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const nme={kernelName:FE,backendName:"cpu",kernelFunc:tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme=In(xm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),ame={kernelName:xm,backendName:"cpu",kernelFunc:rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Oe(e.shape)),a=n.data.get(e.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values;for(let l=0;l<o.length;l++){const c=o[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,e.shape,"float32")},sme={kernelName:K1,backendName:"cpu",kernelFunc:ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Id(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const ome={kernelName:JE,backendName:"cpu",kernelFunc:Id};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=an(a,e[0].shape)[0],s=e.map(v=>v.shape);$D(s,i);let o=wo(e.map(v=>v.shape),i);if(Oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(v=>Oe(v.shape)>0);if(u.length===1)return Eo({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const v=u.map(S=>Mc({inputs:{input:S},backend:n})),y=u.map(S=>Id({inputs:{input:S},backend:n})),b=kd({inputs:v,backend:n,attrs:{axis:i}}),x=kd({inputs:y,backend:n,attrs:{axis:i}}),w=di({inputs:{real:b,imag:x},backend:n});return v.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),w}const l=u.map(v=>{const b=[-1,Oe(v.shape.slice(i))];return Wn({inputs:{x:v},backend:n,attrs:{shape:b}})}),c=l.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));o=wo(l.map(v=>v.shape),1);const f=l[0].shape[0]===1,d=J8(c,o,e[0].dtype,f),h=wo(u.map(v=>v.shape),i),m=n.makeTensorInfo(h,e[0].dtype,d);return l.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const ume={kernelName:Y1,backendName:"cpu",kernelFunc:kd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r;mt([a,i],"conv2d");const f=pu(u),d=Vr(a.shape,i.shape,s,l,o,c,!1,f),h=d.filterHeight,m=d.filterWidth,v=d.dilationHeight,y=d.dilationWidth,b=d.padInfo.left,x=d.padInfo.top,w=d.dataFormat==="channelsLast",S=new Ar(d.outShape,a.dtype),C=Nt(a.shape),E=Nt(i.shape),A=C[0],k=w?C[1]:C[2],D=w?C[2]:1,I=w?1:C[1],$=S.strides[0],O=w?S.strides[1]:S.strides[2],B=w?S.strides[2]:1,z=w?1:S.strides[1],L=n.data.get(a.dataId).values,F=n.data.get(i.dataId).values,R=S.values;for(let W=0;W<d.batchSize;++W){const M=W*A,G=W*$;for(let q=0;q<d.outHeight;++q){const j=G+q*O,H=q*d.strideHeight-x;for(let ne=0;ne<h;++ne){const ue=H+ne*v;if(ue<0||ue>=d.inHeight)continue;const te=ne*E[0],se=M+ue*k;for(let J=0;J<d.outWidth;++J){const K=j+J*B,ae=J*d.strideWidth-b;for(let pe=0;pe<m;++pe){const he=ae+pe*y;if(he<0||he>=d.inWidth)continue;const Se=te+pe*E[1],Ee=se+he*D;let Z=Se;for(let ie=0;ie<d.inChannels;++ie){const ve=L[Ee+ie*I];for(let xe=0;xe<d.outChannels;++xe)R[K+xe*z]+=ve*F[Z+xe];Z+=d.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,R)}const lme={kernelName:Z1,backendName:"cpu",kernelFunc:KU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;mt([a,i],"conv2dBackpropFilter");const f=pu(u),d=Vr(a.shape,c,s,1,o,l,!1,f),{strideHeight:h,strideWidth:m,filterHeight:v,filterWidth:y}=d,b=d.dataFormat==="channelsLast",x=new Ar(d.filterShape,"float32"),w=d.padInfo.left,S=d.padInfo.top,C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,A=new Ar(a.shape,a.dtype,C),k=new Ar(i.shape,i.dtype,E);for(let D=0;D<v;++D){const I=Math.max(0,Math.ceil((S-D)/h)),$=Math.min(d.outHeight,(d.inHeight+S-D)/h);for(let O=0;O<y;++O){const B=Math.max(0,Math.ceil((w-O)/m)),z=Math.min(d.outWidth,(d.inWidth+w-O)/m);for(let L=0;L<d.inChannels;++L)for(let F=0;F<d.outChannels;++F){let R=0;for(let W=0;W<d.batchSize;++W)for(let M=I;M<$;++M){const G=D+M*h-S;for(let q=B;q<z;++q){const j=O+q*m-w;b?R+=A.get(W,G,j,L)*k.get(W,M,q,F):R+=A.get(W,L,G,j)*k.get(W,F,M,q)}}x.set(R,D,O,L,F)}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const fme={kernelName:ME,backendName:"cpu",kernelFunc:cme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r;mt([a,i],"conv2dBackpropInput");const f=Nt(i.shape),d=Nt(a.shape);let h=pu(l);const m=Vr(s,i.shape,o,1,u,c,!1,h),v=new Ar(m.inShape,"float32"),y=v.values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,[w,S,C]=f,{batchSize:E,filterHeight:A,filterWidth:k,inChannels:D,inHeight:I,inWidth:$,outChannels:O,outHeight:B,outWidth:z,strideHeight:L,strideWidth:F}=m;h=m.dataFormat;const R=A-1-m.padInfo.top,W=k-1-m.padInfo.left,M=h==="channelsLast",G=v.strides[0],q=M?v.strides[1]:v.strides[2],j=M?v.strides[2]:1,H=M?1:v.strides[1],ne=d[0],ue=M?d[1]:d[2],te=M?d[2]:1,se=M?1:d[1];for(let J=0;J<E;++J)for(let K=0;K<D;++K)for(let ae=0;ae<I;++ae){const pe=ae-R,he=Math.max(0,Math.ceil(pe/L)),Se=Math.min(B,(A+pe)/L);for(let Ee=0;Ee<$;++Ee){const Z=Ee-W,ie=Math.max(0,Math.ceil(Z/F)),ve=Math.min(z,(k+Z)/F);let xe=0;for(let Me=he;Me<Se;++Me){const je=Me*L-pe;for(let Qe=ie;Qe<ve;++Qe){const re=Qe*F-Z,ce=ne*J+ue*Me+te*Qe,Ce=w*(A-1-je)+S*(k-1-re)+C*K;for(let $e=0;$e<O;++$e){const Le=b[ce+se*$e],Pe=x[Ce+$e];xe+=Le*Pe}}}const Re=G*J+q*ae+j*Ee+H*K;y[Re]=xe}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const pme={kernelName:Q1,backendName:"cpu",kernelFunc:dme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r;mt([a,i],"conv3d");const l=Sl(a.shape,i.shape,s,u,o),{filterDepth:c,filterHeight:f,filterWidth:d,dilationDepth:h,dilationHeight:m,dilationWidth:v,padInfo:y}=l,b=y.front,x=y.left,w=y.top,S=new Ar(l.outShape,a.dtype),C=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,A=S.values,k=Nt(a.shape),D=Nt(i.shape);for(let I=0;I<l.batchSize;++I){const $=I*k[0],O=I*S.strides[0];for(let B=0;B<l.outDepth;++B){const z=O+B*S.strides[1],L=B*l.strideDepth-b;for(let F=0;F<c;++F){const R=L+F*h;if(R<0||R>=l.inDepth)continue;const W=F*D[0],M=$+R*k[1];for(let G=0;G<l.outHeight;++G){const q=z+G*S.strides[2],j=G*l.strideHeight-w;for(let H=0;H<f;++H){const ne=j+H*m;if(ne<0||ne>=l.inHeight)continue;const ue=W+H*D[1],te=M+ne*k[2];for(let se=0;se<l.outWidth;++se){const J=q+se*l.outChannels,K=se*l.strideWidth-x;for(let ae=0;ae<d;++ae){const pe=K+ae*v;if(pe<0||pe>=l.inWidth)continue;const he=ue+ae*D[2],Se=te+pe*l.inChannels;let Ee=he;for(let Z=0;Z<l.inChannels;++Z){const ie=C[Se+Z];for(let ve=0;ve<l.outChannels;++ve)A[J+ve]+=ie*E[Ee+ve];Ee+=l.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const mme={kernelName:J1,backendName:"cpu",kernelFunc:hme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:u}=r;mt([a,i],"conv3dBackpropFilterV2");const l=Nt(a.shape),c=Nt(i.shape),f=Sl(a.shape,u,s,1,o),d=f.strideDepth,h=f.strideHeight,m=f.strideWidth,v=f.filterDepth,y=f.filterHeight,b=f.filterWidth,x=new Ar(f.filterShape,"float32"),w=x.values,[S,C,E,A]=x.strides,k=n.data.get(i.dataId).values,[D,I,$,O]=c,B=n.data.get(a.dataId).values,[z,L,F,R]=l,W=f.padInfo.front,M=f.padInfo.left,G=f.padInfo.top;for(let q=0;q<v;++q){const j=Math.max(0,Math.ceil((W-q)/d)),H=Math.min(f.outDepth,(f.inDepth+W-q)/d),ne=q*S;for(let ue=0;ue<y;++ue){const te=Math.max(0,Math.ceil((G-ue)/h)),se=Math.min(f.outHeight,(f.inHeight+G-ue)/h),J=ue*C+ne;for(let K=0;K<b;++K){const ae=Math.max(0,Math.ceil((M-K)/m)),pe=Math.min(f.outWidth,(f.inWidth+M-K)/m),he=K*E+J;for(let Se=0;Se<f.inChannels;++Se){const Ee=Se*A+he;for(let Z=0;Z<f.outChannels;++Z){let ie=0;for(let ve=0;ve<f.batchSize;++ve){const xe=ve*z,Re=ve*D;for(let Me=j;Me<H;++Me){const Qe=(q+Me*d-W)*L+xe,re=Me*I+Re;for(let ce=te;ce<se;++ce){const $e=(ue+ce*h-G)*F+Qe,Le=ce*$+re;for(let Pe=ae;Pe<pe;++Pe){const He=(K+Pe*m-M)*R+$e,tt=Pe*O+Le;ie+=B[He+Se]*k[tt+Z]}}}}w[Ee+Z]=ie}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const vme={kernelName:PE,backendName:"cpu",kernelFunc:gme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:u}=r;mt([a],"conv3dBackpropInputV2");const l=Nt(a.shape),c=Nt(i.shape),f=Sl(u,i.shape,o,1,s),d=new Ar(f.inShape,"float32"),h=d.values,[m,v,y,b]=d.strides,x=n.data.get(a.dataId).values,[w,S,C,E]=l,A=n.data.get(i.dataId).values,[k,D,I,$]=c,{batchSize:O,filterDepth:B,filterHeight:z,filterWidth:L,inChannels:F,inDepth:R,inHeight:W,inWidth:M,outChannels:G,outDepth:q,outHeight:j,outWidth:H,strideDepth:ne,strideHeight:ue,strideWidth:te}=f,se=B-1-f.padInfo.front,J=z-1-f.padInfo.top,K=L-1-f.padInfo.left;for(let ae=0;ae<O;++ae)for(let pe=0;pe<F;++pe)for(let he=0;he<R;++he){const Se=he-se,Ee=Math.max(0,Math.ceil(Se/ne)),Z=Math.min(q,(B+Se)/ne);for(let ie=0;ie<W;++ie){const ve=ie-J,xe=Math.max(0,Math.ceil(ve/ue)),Re=Math.min(j,(z+ve)/ue);for(let Me=0;Me<M;++Me){const je=Me-K,Qe=Math.max(0,Math.ceil(je/te)),re=Math.min(H,(L+je)/te);let ce=0;for(let Ce=Ee;Ce<Z;++Ce){const $e=Ce*ne-Se;for(let Le=xe;Le<Re;++Le){const Pe=Le*ue-ve;for(let Je=Qe;Je<re;++Je){const He=Je*te-je,tt=w*ae+S*Ce+C*Le+E*Je,Ze=k*(B-1-$e)+D*(z-1-Pe)+I*(L-1-He)+$*pe;for(let Xt=0;Xt<G;++Xt){const St=x[tt+Xt],Cn=A[Ze+Xt];ce+=St*Cn}}}}h[m*ae+v*he+y*ie+b*Me+pe]=ce}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const bme={kernelName:BE,backendName:"cpu",kernelFunc:yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme=In(Nm,t=>Math.cos(t)),xme={kernelName:Nm,backendName:"cpu",kernelFunc:wme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nme=In(Sm,t=>Math.cosh(t)),Sme={kernelName:Sm,backendName:"cpu",kernelFunc:Nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cme(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:l}=r,[c,f,d,h]=a.shape,m=i.shape[0],[v,y]=o,b=en([m,v,y,h],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(s.dataId).values,S=n.data.get(a.dataId).values,C=Nt(a.shape),E=Nt(b.shape);for(let A=0;A<m;A++){const k=A*4,D=x[k],I=x[k+1],$=x[k+2],O=x[k+3],B=w[A];if(B>=c)continue;const z=v>1?($-D)*(f-1)/(v-1):0,L=y>1?(O-I)*(d-1)/(y-1):0;for(let F=0;F<v;F++){const R=v>1?D*(f-1)+F*z:.5*(D+$)*(f-1);if(R<0||R>f-1){for(let W=0;W<y;W++)for(let M=0;M<h;M++){const G=M+W*E[2]+F*E[1]+A*E[0];b.values[G]=l}continue}if(u==="bilinear"){const W=Math.floor(R),M=Math.ceil(R),G=R-W;for(let q=0;q<y;q++){const j=y>1?I*(d-1)+q*L:.5*(I+O)*(d-1);if(j<0||j>d-1){for(let te=0;te<h;te++){const se=te+q*E[2]+F*E[1]+A*E[0];b.values[se]=l}continue}const H=Math.floor(j),ne=Math.ceil(j),ue=j-H;for(let te=0;te<h;te++){let se=te+H*C[2]+W*C[1]+B*C[0];const J=S[se];se=te+ne*C[2]+W*C[1]+B*C[0];const K=S[se];se=te+H*C[2]+M*C[1]+B*C[0];const ae=S[se];se=te+ne*C[2]+M*C[1]+B*C[0];const pe=S[se],he=J+(K-J)*ue,Se=ae+(pe-ae)*ue;se=te+q*E[2]+F*E[1]+A*E[0],b.values[se]=he+(Se-he)*G}}}else for(let W=0;W<y;++W){const M=y>1?I*(d-1)+W*L:.5*(I+O)*(d-1);if(M<0||M>d-1){for(let j=0;j<h;j++){const H=j+W*E[2]+F*E[1]+A*E[0];b.values[H]=l}continue}const G=Math.round(M),q=Math.round(R);for(let j=0;j<h;j++){const H=j+G*C[2]+q*C[1]+B*C[0],ne=j+W*E[2]+F*E[1]+A*E[0];b.values[ne]=S[H]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Eme={kernelName:zE,backendName:"cpu",kernelFunc:Cme};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;mt(a,"cumprod");const u=nr([i],a.shape.length);let l=a;u!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=pr(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=vi(l.dtype,"int32"),d=DE(Oe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){const w=v(b,x);if(x===0)d[w]=s?1:h[w];else{const S=v(b,x-1);d[w]=s?h[S]*d[S]:h[w]*d[S]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=Cl(u),x=Ya({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),x}return y}const Dme={kernelName:LE,backendName:"cpu",kernelFunc:Tme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;mt(a,"cumsum");const u=nr([i],a.shape.length);let l=a;u!=null&&(l=Ya({inputs:{x:a},backend:n,attrs:{perm:u}}));const c=pr(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const f=vi(l.dtype,"int32"),d=ma(Oe(l.shape),f),h=n.data.get(l.dataId).values,m=l.shape[l.shape.length-1],v=o?(b,x)=>b+m-x-1:(b,x)=>b+x;for(let b=0;b<h.length;b+=m)for(let x=0;x<m;x++){const w=v(b,x);if(x===0)d[w]=s?0:h[w];else{const S=v(b,x-1);d[w]=s?h[S]+d[S]:h[w]+d[S]}}const y=n.makeTensorInfo(l.shape,f,d);if(u!=null){const b=Cl(u),x=Ya({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),x}return y}const Ame={kernelName:eb,backendName:"cpu",kernelFunc:$me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=v$(u,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(i),c=Y8(u,l,s,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const kme={kernelName:UE,backendName:"cpu",kernelFunc:Ime};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r;Y(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);const o=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],f=u*i,d=l*i,h=c/(i*i),m=n.data.get(a.dataId).values,v=new Float32Array(o*f*d*h);let y=0;for(let b=0;b<o;++b)for(let x=0;x<f;++x){const w=Math.floor(x/i),S=x%i;for(let C=0;C<d;++C){const E=Math.floor(C/i),A=C%i,k=(S*i+A)*h;for(let D=0;D<h;++D){const $=D+k+c*(E+l*(w+u*b));v[y++]=m[$]}}}return n.makeTensorInfo([o,f,d,h],a.dtype,v)}const Ome={kernelName:VE,backendName:"cpu",kernelFunc:_me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:l}=r;mt([a,i],"depthwiseConv2DNative");const c=Nt(a.shape),f=Nt(i.shape);let d=u;d==null&&(d=[1,1]),Y(aa(s,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`);const h=Vr(a.shape,i.shape,s,d,o,l,!0),{filterHeight:m,filterWidth:v,dilationHeight:y,dilationWidth:b,padInfo:x}=h,w=x.left,S=x.top,C=h.outChannels/h.inChannels,E=new Ar(h.outShape,a.dtype),A=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,D=E.values;for(let I=0;I<h.batchSize;++I){const $=I*c[0],O=I*E.strides[0];for(let B=0;B<h.outHeight;++B){const z=O+B*E.strides[1],L=B*h.strideHeight-S;for(let F=0;F<m;++F){const R=L+F*y;if(R<0||R>=h.inHeight)continue;const W=F*f[0],M=$+R*c[1];for(let G=0;G<h.outWidth;++G){const q=z+G*E.strides[2],j=G*h.strideWidth-w;for(let H=0;H<v;++H){const ne=j+H*b;if(ne<0||ne>=h.inWidth)continue;const ue=W+H*f[1],te=M+ne*h.inChannels;let se=q,J=ue;for(let K=0;K<h.inChannels;++K){const ae=A[te+K];for(let pe=0;pe<C;++pe)D[se+pe]+=ae*k[J+pe];se+=C,J+=C}}}}}}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Fme={kernelName:tb,backendName:"cpu",kernelFunc:YU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rme(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r;mt([a,i],"depthwiseConv2dNativeBackpropFilter");const f=Vr(a.shape,c,s,o,u,l,!0),{strideHeight:d,strideWidth:h,filterHeight:m,filterWidth:v}=f,y=new Ar(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=f.outChannels/f.inChannels,S=n.data.get(a.dataId).values,C=new Ar(a.shape,a.dtype,S),E=n.data.get(i.dataId).values,A=new Ar(i.shape,i.dtype,E);for(let k=0;k<m;++k){const D=Math.max(0,Math.ceil((x-k)/d)),I=Math.min(f.outHeight,(f.inHeight+x-k)/d);for(let $=0;$<v;++$){const O=Math.max(0,Math.ceil((b-$)/h)),B=Math.min(f.outWidth,(f.inWidth+b-$)/h);for(let z=0;z<f.outChannels;++z){const L=Math.trunc(z/w),F=z%w;let R=0;for(let W=0;W<f.batchSize;++W)for(let M=D;M<I;++M){const G=k+M*d-x;for(let q=O;q<B;++q){const j=$+q*h-b;R+=C.get(W,G,j,L)*A.get(W,M,q,z)}}y.set(R,k,$,L,F)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Mme={kernelName:WE,backendName:"cpu",kernelFunc:Rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pme(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r;mt([a,i],"depthwiseConv2DNativeBackpropInput");const f=Nt(a.shape),d=Nt(i.shape),h=Vr(c,i.shape,s,o,u,l,!0),m=new Ar(h.inShape,"float32"),v=m.values,[y,b,x]=m.strides,w=n.data.get(a.dataId).values,[S,C,E]=f,A=n.data.get(i.dataId).values,[k,D,I]=d,{batchSize:$,filterHeight:O,filterWidth:B,inChannels:z,inHeight:L,inWidth:F,outChannels:R,outHeight:W,outWidth:M,strideHeight:G,strideWidth:q}=h,j=O-1-h.padInfo.top,H=B-1-h.padInfo.left,ne=R/z;for(let ue=0;ue<$;++ue)for(let te=0;te<z;++te)for(let se=0;se<L;++se){const J=se-j,K=Math.max(0,Math.ceil(J/G)),ae=Math.min(W,(O+J)/G);for(let pe=0;pe<F;++pe){const he=pe-H,Se=Math.max(0,Math.ceil(he/q)),Ee=Math.min(M,(B+he)/q);let Z=0;for(let ie=K;ie<ae;++ie){const ve=ie*G-J;for(let xe=Se;xe<Ee;++xe){const Re=xe*q-he,Me=S*ue+C*ie+E*xe,je=k*(O-1-ve)+D*(B-1-Re)+I*te;for(let Qe=0;Qe<ne;++Qe){const re=te*ne+Qe,ce=w[Me+re],Ce=A[je+Qe];Z+=ce*Ce}}}v[y*ue+b*se+x*pe+te]=Z}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const Bme={kernelName:qE,backendName:"cpu",kernelFunc:Pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lme(t){const{inputs:e,backend:n}=t,{x:r}=e,a=Oe(r.shape),i=n.data.get(r.dataId).values,s=en([a,a],r.dtype),o=s.values;for(let l=0;l<i.length;l++)o[l*a+l]=i[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,s.dtype,s.values)}const zme={kernelName:HE,backendName:"cpu",kernelFunc:Lme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ume={kernelName:nb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a}=t,{strides:i,pad:s,dilations:o}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,f=u.data.get(a.dataId).values,d=a.shape.length,{batchSize:h,inHeight:m,inWidth:v,inChannels:y,outHeight:b,outWidth:x,padInfo:w,strideHeight:S,strideWidth:C,filterHeight:E,filterWidth:A,dilationHeight:k,dilationWidth:D,outShape:I}=ug(r.shape,a.shape,i,s,"NHWC",o),$=Oe(I),O=I.length,B=fr(r.dtype,$);for(let L=0;L<h;++L)for(let F=0;F<b;++F){const R=F*S-w.top;for(let W=0;W<x;++W){const M=W*C-w.left;for(let G=0;G<y;++G){let q=Number.MIN_SAFE_INTEGER;for(let H=0;H<E;++H){const ne=R+H*k;if(ne>=0&&ne<m)for(let ue=0;ue<A;++ue){const te=M+ue*D;if(te>=0&&te<v){const se=yo([L,ne,te,G],c,Nt(r.shape)),J=yo([H,ue,G],d,Nt(a.shape)),K=l[se]+f[J];K>q&&(q=K)}}}const j=yo([L,F,W,G],O,Nt(I));B[j]=q}}}return{dataId:u.write(Wc(B,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vme={kernelName:KS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:u}=n,l=e,c=ds(r.shape,l.data.get(r.dataId).values),f=ds(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:k,outShape:D}=ug(r.shape,a.shape,s,o,"NHWC",u);Y(i.rank===D.length,()=>`Error in ${KS}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);const I=ds(D,l.data.get(i.dataId).values),$=jB(a.shape,a.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*w-x.top;for(let F=0;F<b;++F){const R=F*S-x.left;for(let W=0;W<v;++W){let M=Number.MIN_SAFE_INTEGER,G=0,q=0;for(let j=0;j<C;++j){const H=L+j*A;if(H>=0&&H<h)for(let ne=0;ne<E;++ne){const ue=R+ne*k;if(ue>=0&&ue<m){const te=c[B][H][ue][W]+f[j][ne][W];te>M&&(M=te,G=j,q=ne)}}}$[G][q][W]+=I[B][z][F][W]}}}return{dataId:l.write(Wc($,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wme={kernelName:XS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:a,dy:i}=t,{strides:s,pad:o,dilations:u}=n,l=e,c=ds(r.shape,l.data.get(r.dataId).values),f=ds(a.shape,l.data.get(a.dataId).values),{batchSize:d,inHeight:h,inWidth:m,inChannels:v,outHeight:y,outWidth:b,padInfo:x,strideHeight:w,strideWidth:S,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:k,outShape:D}=ug(r.shape,a.shape,s,o,"NHWC",u);Y(i.rank===D.length,()=>`Error in ${XS}, dy must have the same rank as output ${D.length}, but got ${i.rank}`);const I=ds(D,l.data.get(i.dataId).values),$=jB(r.shape,r.dtype);for(let B=0;B<d;++B)for(let z=0;z<y;++z){const L=z*w-x.top;for(let F=0;F<b;++F){const R=F*S-x.left;for(let W=0;W<v;++W){let M=Number.MIN_SAFE_INTEGER,G=L<0?0:L,q=R<0?0:R;for(let j=0;j<C;++j){const H=L+j*A;if(H>=0&&H<h)for(let ne=0;ne<E;++ne){const ue=R+ne*k;if(ue>=0&&ue<m){const te=c[B][H][ue][W]+f[j][ne][W];te>M&&(M=te,G=H,q=ue)}}}$[B][G][q][W]+=I[B][z][F][W]}}}return{dataId:l.write(Wc($,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t){const{inputs:e,backend:n,attrs:r}=t,{image:a}=e,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:u}=s||{},l=(u==null?void 0:u.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const f=i.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(f==null)throw new Error(`Could not get the context with ${c} type.`);const[d,h]=a.shape.slice(0,2),m=a.shape.length===2?1:a.shape[2],v=n.data.get(a.dataId).values,y=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(h*d*4);for(let w=0;w<d*h;++w){const S=[0,0,0,255*l];for(let E=0;E<m;E++){const A=v[w*m+E];if(a.dtype==="float32"){if(A<0||A>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${A}.`)}else if(a.dtype==="int32"&&(A<0||A>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${A}.`);m===1?(S[0]=A*y,S[1]=A*y,S[2]=A*y):S[E]=A*y}const C=w*4;b[C+0]=Math.round(S[0]),b[C+1]=Math.round(S[1]),b[C+2]=Math.round(S[2]),b[C+3]=Math.round(S[3])}i.width=h,i.height=d;const x=new ImageData(b,h,d);return f.putImageData(x,0,0),a}const Hme={kernelName:XQ,backendName:"cpu",kernelFunc:qme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dg(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;mt(a,"sum");let o;a.dtype==="bool"?o=hl({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):o=Eo({inputs:{x:a},backend:n});const u=o.shape.length,l=an(i,o.shape),c=nr(l,u);let f=l,d=o;c!=null&&(d=Ya({inputs:{x:o},backend:n,attrs:{perm:c}}),f=pr(f.length,u)),ia("sum",f,d.shape.length);const[h,m]=Wr(d.shape,f),v=vi(d.dtype,"int32");let y=Y0(n,h,v);const b=Oe(m),x=n.data.get(y.dataId).values,w=n.data.get(d.dataId).values;for(let S=0;S<x.length;++S){const C=S*b;let E=0;for(let A=0;A<b;++A)E+=w[C+A];x[S]=E}if(s){const S=dr(y.shape,l),C=y;y=Wn({inputs:{x:y},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(d),y}const jme={kernelName:Rb,backendName:"cpu",kernelFunc:Dg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:u}=zD(a,i.length);VD(s.length,u,i);const{path:l,steps:c}=WD(o,u),f=c.length;let d=null,h=s.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:x}=UD(h,u[y]);let w;qD(b)?w=i[y]:(w=Ya({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);fn(w.shape,S)||(w=Wn({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),d===null?d=w:(d=Tw({inputs:{a:w,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=Dg({inputs:{x:d},backend:n,attrs:{axis:l[v]-(s.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const Xme={kernelName:jE,backendName:"cpu",kernelFunc:Gme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kme(t){const{inputs:e,backend:n}=t,{dy:r,y:a}=e;mt([r,a],"eluGrad");const i=new Float32Array(Oe(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let u=0;u<s.length;++u){const l=s[u];l>=0?i[u]=o[u]:i[u]=o[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}const Yme={kernelName:GE,backendName:"cpu",kernelFunc:Kme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zme=OD,Qme=FD,Jme=RD,ege=MD,tge=PD,nge=BD,rge=In(Tm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Zme*n);return e*(1-((((nge*r+tge)*r+ege)*r+Jme)*r+Qme)*r*Math.exp(-n*n))}),age={kernelName:Tm,backendName:"cpu",kernelFunc:rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0(t){const{inputs:e,backend:n,attrs:r}=t,{input:a}=e,{dim:i}=r,s=a.shape.length,o=a.shape.slice();let u=i;return i<0&&(Y(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+i+1),o.splice(u,0,1),Wn({inputs:{x:a},backend:n,attrs:{shape:o}})}const ige={kernelName:ab,backendName:"cpu",kernelFunc:J0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sge=mr((t,e)=>t/e),S$=Or(Cm,sge),FC={kernelName:Cm,backendName:"cpu",kernelFunc:S$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZU(t,e,n){const r=t.shape,a=r[0],i=r[1],s=n.data.get(t.dataId),o=s.complexTensorInfos.real,u=s.complexTensorInfos.imag,l=[a,i],c=Oe(l),f=ta("float32",c),d=ta("float32",c);for(let y=0;y<a;y++){const b=Pc({inputs:{x:o},backend:n,attrs:{begin:[y,0],size:[1,i]}}),x=Pc({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,i]}}),w=di({inputs:{real:b,imag:x},backend:n}),{real:S,imag:C}=oge(w,e,n),E=ou(S,C);for(let A=0;A<i;A++){const k=LD(E,A);f[y*i+A]=k.real,d[y*i+A]=k.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w)}const h=n.makeTensorInfo(l,"float32",f),m=n.makeTensorInfo(l,"float32",d),v=di({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}function oge(t,e,n){const r=Oe(t.shape),a=n.data.get(t.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(uge(r)){const o=RC(i,s,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",o.real),c=n.makeTensorInfo(u,"float32",o.imag),f=n.makeTensorInfo([],"float32",wl(r,"float32")),d=Eo({inputs:{x:f},backend:n}),h=FC.kernelFunc({inputs:{a:l,b:f},backend:n}),m=FC.kernelFunc({inputs:{a:c,b:d},backend:n}),v=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:v,imag:y}}return o}else{const o=ou(i,s),u=lge(o,r,e);return s5(u)}}function uge(t){return(t&t-1)===0}function RC(t,e,n,r,a){if(n===1)return{real:t,imag:e};const i=ou(t,e),s=n/2,o=o5(i),u=o.real,l=o.imag,c=[u.length],f=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),h=di({inputs:{real:f,imag:d},backend:a}),m=u5(i),v=m.real,y=m.imag,b=[v.length],x=a.makeTensorInfo(b,"float32",v),w=a.makeTensorInfo(b,"float32",y),S=di({inputs:{real:x,imag:w},backend:a}),C=RC(u,l,s,r,a),E=C.real,A=C.imag,k=[E.length],D=a.makeTensorInfo(k,"float32",E),I=a.makeTensorInfo(k,"float32",A),$=di({inputs:{real:D,imag:I},backend:a}),O=RC(v,y,s,r,a),B=O.real,z=O.imag,L=[B.length],F=a.makeTensorInfo(L,"float32",B),R=a.makeTensorInfo(L,"float32",z),W=di({inputs:{real:F,imag:R},backend:a}),M=c5(n,r),G=[M.real.length],q=a.makeTensorInfo(G,"float32",M.real),j=a.makeTensorInfo(G,"float32",M.imag),H=di({inputs:{real:q,imag:j},backend:a}),ne=Tw({inputs:{a:H,b:W},backend:a}),ue=Ad({inputs:{a:$,b:ne},backend:a}),te=x$({inputs:{a:$,b:ne},backend:a}),se=Mc({inputs:{input:ue},backend:a}),J=Mc({inputs:{input:te},backend:a}),K=Id({inputs:{input:ue},backend:a}),ae=Id({inputs:{input:te},backend:a}),pe=kd({inputs:[se,J],backend:a,attrs:{axis:0}}),he=kd({inputs:[K,ae],backend:a,attrs:{axis:0}}),Se=a.data.get(pe.dataId).values,Ee=a.data.get(he.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(ue),a.disposeIntermediateTensorInfo(te),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(ae),a.disposeIntermediateTensorInfo(pe),a.disposeIntermediateTensorInfo(he),{real:Se,imag:Ee}}function lge(t,e,n){const r=new Float32Array(e*2);for(let a=0;a<e;a++){let i=0,s=0;for(let o=0;o<e;o++){const u=f5(a*o,e,n),l=LD(t,o);i+=l.real*u.real-l.imag*u.imag,s+=l.real*u.imag+l.imag*u.real}n&&(i/=e,s/=e),l5(r,i,s,a)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Oe(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Wn({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),u=ZU(o,!1,n),l=Wn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const fge={kernelName:XE,backendName:"cpu",kernelFunc:cge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$(t){const{backend:e,attrs:n}=t,{shape:r,value:a,dtype:i}=n,s=i||Gd(a),o=fr(s,Oe(r));return pge(o,a,s),e.makeTensorInfo(r,s,o)}const dge={kernelName:KE,backendName:"cpu",kernelFunc:C$};function pge(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hge={kernelName:YE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,a=n,i=ta(r.dtype,Oe(r.shape)),[s,o,u,l]=r.shape,c=a.data.get(r.dataId).values;for(let d=0;d<s;d++){const h=d*u*o*l;for(let m=0;m<o;m++){const v=m*(u*l);for(let y=0;y<u;y++){const b=y*l;for(let x=0;x<l;x++){const w=Math.round(u-y-1),S=h+v+b+x;let C=c[S];if(w>=0&&w<u){const E=w*l,A=h+v+E+x;C=c[A]}i[S]=C}}}}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=KU({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(s){const y=v;if(c==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){const b=Wn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=Ad({inputs:{a:v,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else v=Ad({inputs:{a:v,b:s},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){const y=v;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const b=Wn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=Q0(n,v,h,b,m),n.disposeIntermediateTensorInfo(b)}else v=Q0(n,v,h,o,m);n.disposeIntermediateTensorInfo(y)}return v}const gge={kernelName:_0,backendName:"cpu",kernelFunc:mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let v=YU({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(s){const y=v;v=Ad({inputs:{a:v,b:s},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){const y=v;v=Q0(n,v,h,o,m),n.disposeIntermediateTensorInfo(y)}return v}const yge={kernelName:O0,backendName:"cpu",kernelFunc:vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bge(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=Oe(r.shape),s=a.shape,o=s[s.length-1],[u,l,c,f]=ND(r,a);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const d=n.data.get(a.dataId).values,h=n.bufferSync(r),m=oU(d,h,r.dtype,l,o,c,f,r.shape,i);return n.makeTensorInfo(u,r.dtype,m.values)}const wge={kernelName:ZE,backendName:"cpu",kernelFunc:bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r;mt([a,i],"gatherV2");const u=an(s,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u];for(let S=0;S<l.length;++S){const C=l[S];Y(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let f=o;o==null&&(f=0);const d=Oe(i.shape),h=jD(a,i,u,f),m=Wn({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=Wn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),y=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],b=n.bufferSync(v),x=n.bufferSync(m),w=uU(x,b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,w.dtype,w.values)}const Nge={kernelName:sb,backendName:"cpu",kernelFunc:xge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t){const{inputs:e,backend:n}=t,{input:r}=e,a=Oe(r.shape),i=r.shape[r.shape.length-1],s=a/i,o=Wn({inputs:{x:r},backend:n,attrs:{shape:[s,i]}}),u=ZU(o,!0,n),l=Wn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}const Cge={kernelName:QE,backendName:"cpu",kernelFunc:Sge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ege=In(Om,t=>Number.isFinite(t)?1:0,"bool"),Tge={kernelName:Om,backendName:"cpu",kernelFunc:Ege};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dge=In(Fm,t=>Math.abs(t)===1/0?1:0,"bool"),$ge={kernelName:Fm,backendName:"cpu",kernelFunc:Dge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Age=In(Rm,t=>Number.isNaN(t)?1:0,"bool"),Ige={kernelName:Rm,backendName:"cpu",kernelFunc:Age};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kge(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=pU(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const _ge={kernelName:eT,backendName:"cpu",kernelFunc:kge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oge=In(Pm,t=>Math.log1p(t)),Fge={kernelName:Pm,backendName:"cpu",kernelFunc:Oge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rge=mr((t,e)=>t&&e),Mge=Or(fb,Rge,null,"bool"),Pge={kernelName:fb,backendName:"cpu",kernelFunc:Mge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge=In(db,t=>t?0:1,"bool"),Lge={kernelName:db,backendName:"cpu",kernelFunc:Bge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=mr((t,e)=>t||e),Uge=Or(pb,zge,null,"bool"),Vge={kernelName:pb,backendName:"cpu",kernelFunc:Uge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:u}=r;mt(a,"LRN");const l=a.shape[3],c=l-1,f=n.data.get(a.dataId).values,d=Oe(a.shape),h=new Float32Array(d);function m(v){const y=v%l;let b=v-y+Math.max(0,y-i);const x=v-y+Math.min(y+i,c);let w=0;for(;b<=x;b++){const S=f[b];w+=S*S}return w}for(let v=0;v<d;v++){const y=m(v),b=f[v]*Math.pow(s+o*y,-u);h[v]=b}return n.makeTensorInfo(a.shape,a.dtype,h)}const qge={kernelName:hb,backendName:"cpu",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r;mt(s,"LRNGrad");const f=Oe(s.shape),d=s.shape[3],h=n.data.get(s.dataId).values,m=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,y=new Float32Array(f),b=f;for(let x=0;x<b;x++){const w=x%d,S=x-w+Math.max(0,w-o),C=x-w+Math.min(d,w+o+1);let E=0;for(let A=S;A<C;A++)E+=Math.pow(m[A],2);E=l*E+u;for(let A=S;A<C;A++){let k=-2*l*c*m[A]*v[x]/E;x===A&&(k+=Math.pow(E,-c)),k*=h[x],y[A]+=k}}return n.makeTensorInfo(s.shape,a.dtype,y)}const jge={kernelName:tT,backendName:"cpu",kernelFunc:Hge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QU(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=n;let u=a.shape;const l=u.length,c=an(i,u);let f=c;const d=nr(f,l);let h=o.data.get(a.dataId).values;if(d!=null){const S=new Array(l);for(let C=0;C<S.length;C++)S[C]=u[d[C]];h=b$(h,u,a.dtype,d,S),f=pr(f.length,l),u=S}mt(a,"max"),ia("max",f,l);const[m,v]=Wr(u,f),y=Oe(v),b=mU(h,y,m,a.dtype),x=o.write(b,m,a.dtype);let w=m;return s&&(w=dr(m,c)),{dataId:x,shape:w,dtype:a.dtype}}const Gge={kernelName:mb,backendName:"cpu",kernelFunc:QU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;mt(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=xs(a.shape,i,s,l,o,u);let f;if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))f=Eo({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,h=Nt(a.shape),m=N$(d,a.shape,a.dtype,h,c,"max");f=n.makeTensorInfo(c.outShape,a.dtype,m.values)}return f}const Kge={kernelName:gb,backendName:"cpu",kernelFunc:Xge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r;mt(a,"maxPool3d");const c=du(a.shape,i,s,1,o,u,l),f=n.data.get(a.dataId).values,d=XU(f,a.shape,a.dtype,Nt(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const Zge={kernelName:vb,backendName:"cpu",kernelFunc:Yge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,{filterSize:s,strides:o,pad:u,dimRoundingMode:l}=r;mt([a,i],"maxPool3DGrad");const c=du(i.shape,s,o,1,u,l),f=n.bufferSync(i),d=zhe(f,c),h=c.strideDepth,m=c.strideHeight,v=c.strideWidth,y=c.dilationDepth,b=c.dilationHeight,x=c.dilationWidth,w=c.effectiveFilterDepth,S=c.effectiveFilterHeight,C=c.effectiveFilterWidth,E=w-1-c.padInfo.front,A=C-1-c.padInfo.left,k=S-1-c.padInfo.top,D=en(i.shape,"float32"),I=n.bufferSync(a);for(let $=0;$<c.batchSize;++$)for(let O=0;O<c.inChannels;++O)for(let B=0;B<c.inDepth;++B)for(let z=0;z<c.inHeight;++z)for(let L=0;L<c.inWidth;++L){const F=B-E,R=z-k,W=L-A;let M=0;for(let G=0;G<w;G+=y){const q=(F+G)/h;if(!(q<0||q>=c.outDepth||Math.floor(q)!==q))for(let j=0;j<S;j+=b){const H=(R+j)/m;if(!(H<0||H>=c.outHeight||Math.floor(H)!==H))for(let ne=0;ne<C;ne+=x){const ue=(W+ne)/v;if(ue<0||ue>=c.outWidth||Math.floor(ue)!==ue)continue;const te=w*S*C-1-d.get($,q,H,ue,O),se=G*S*C+j*C+ne,J=te===se?1:0;if(J===0)continue;const K=I.get($,q,H,ue,O);M+=K*J}}}D.set(M,$,B,z,L,O)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const Jge={kernelName:rT,backendName:"cpu",kernelFunc:Qge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;mt([i,s],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=xs(o.shape,u,l,1,c,f),h=n.data.get(o.dataId).values,m=en(d.outShape,o.dtype,GU(h,o.shape,o.dtype,d).values),v=d.strideHeight,y=d.strideWidth,b=d.dilationHeight,x=d.dilationWidth,w=d.effectiveFilterHeight,S=d.effectiveFilterWidth,C=S-1-d.padInfo.left,E=w-1-d.padInfo.top,A=en(o.shape,"float32"),k=n.data.get(a.dataId).values,D=en(a.shape,"float32",k);for(let I=0;I<d.batchSize;++I)for(let $=0;$<d.inChannels;++$)for(let O=0;O<d.inHeight;++O)for(let B=0;B<d.inWidth;++B){const z=O-E,L=B-C;let F=0;for(let R=0;R<w;R+=b){const W=(z+R)/v;if(!(W<0||W>=d.outHeight||Math.floor(W)!==W))for(let M=0;M<S;M+=x){const G=(L+M)/y;if(G<0||G>=d.outWidth||Math.floor(G)!==G)continue;const q=w*S-1-m.get(I,W,G,$),j=R*S+M,H=q===j?1:0;if(H===0)continue;const ne=D.get(I,W,G,$);F+=ne*H}}A.set(F,I,O,B,$)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const tve={kernelName:nT,backendName:"cpu",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nve(t,e,n,r,a){const i=Nt(e),s=N$(t,e,n,i,a,"max"),o=GU(t,e,n,a,!0,r);return[s.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rve={kernelName:aT,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,u=n;mt(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=xs(r.shape,a,i,[1,1],s),[f,d]=nve(l,r.shape,r.dtype,o,c),h=u.write(f,c.outShape,r.dtype),m=u.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=an(i,a.shape),l=Wr(a.shape,o)[1],c=Oe(l),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));f.push(d);const h=hl({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});f.push(h);const m=S$({inputs:{a:h,b:d},backend:n});f.push(m);const v=Dg({inputs:{x:m},backend:n,attrs:{axis:i,keepDims:s}});return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const ive={kernelName:yb,backendName:"cpu",kernelFunc:ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;mt(a,"min");const o=an(i,a.shape);let u=o;const l=nr(u,a.shape.length);let c=a;l!=null&&(c=Ya({inputs:{x:a},backend:n,attrs:{perm:l}}),u=pr(u.length,a.shape.length)),ia("min",u,c.shape.length);const[f,d]=Wr(c.shape,u),h=Oe(d),m=ma(Oe(f),c.dtype),v=n.data.get(c.dataId).values;for(let b=0;b<m.length;++b){const x=b*h;let w=v[x];for(let S=0;S<h;++S){const C=v[x+S];(Number.isNaN(C)||C<w)&&(w=C)}m[b]=w}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(f,c.dtype,m);if(s){const b=dr(f,o),x=Wn({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),x}return y}const ove={kernelName:bb,backendName:"cpu",kernelFunc:sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,mode:s}=r;mt(a,"mirrorPad");const o=i.map((w,S)=>w[0]+a.shape[S]+w[1]),u=i.map(w=>w[0]),l=i.map((w,S)=>w[0]+a.shape[S]),c=s==="reflect"?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,h=Nt(a.shape),m=Oe(o),v=o.length,y=Nt(o),b=ta(a.dtype,m);for(let w=0;w<m;w++){let S=Xd(w,v,y);for(let E=0;E<v;E++)S[E]<u[E]?S[E]=u[E]*2-S[E]-c:S[E]>=l[E]&&(S[E]=(l[E]-1)*2-S[E]+c);S=S.map((E,A)=>E-u[A]);const C=yo(S,d,h);b[w]=f[C]}return{dataId:n.write(b,o,a.dtype),shape:o,dtype:a.dtype}}const lve={kernelName:wb,backendName:"cpu",kernelFunc:uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cve=mr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),fve=Or(zm,cve),dve={kernelName:zm,backendName:"cpu",kernelFunc:fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JU(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=a.shape.length;let o=i;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);const u=an([o],a.shape),l=QU({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=dr(l.shape,u),f=Wn({inputs:{x:l},backend:n,attrs:{shape:c}}),d=x$({inputs:{a,b:f},backend:n}),h=rU({inputs:{x:d},backend:n}),m=Dg({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=Wn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=S$({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const pve={kernelName:Bb,backendName:"cpu",kernelFunc:JU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r;mt(a,"multinomial");const u=o?a:JU({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,i],h=ma(Oe(d),"int32");for(let m=0;m<l;++m){const v=m*c,y=new Float32Array(c-1);y[0]=f[v];for(let w=1;w<y.length;++w)y[w]=y[w-1]+f[v+w];const b=mg.alea(s.toString()),x=m*i;for(let w=0;w<i;++w){const S=b();h[x+w]=y.length;for(let C=0;C<y.length;C++)if(S<y[C]){h[x+w]=C;break}}}return o||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}const mve={kernelName:iT,backendName:"cpu",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gve=mD;function vve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r;mt(a,"NonMaxSuppression");const l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:f}=gve(l,c,s,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const yve={kernelName:sT,backendName:"cpu",kernelFunc:vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bve=gD;function wve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r;mt(a,"NonMaxSuppressionPadded");const c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:h}=bve(c,f,s,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const xve={kernelName:oT,backendName:"cpu",kernelFunc:wve};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nve=vD;function Sve(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r;mt(a,"NonMaxSuppressionWithScore");const c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=s,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=Nve(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const Cve={kernelName:uT,backendName:"cpu",kernelFunc:Sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:u}=r;mt(a,"oneHot");const l=Oe(a.shape),c=new Float32Array(l*s);c.fill(u);const f=n.data.get(a.dataId).values;for(let d=0;d<l;++d)f[d]>=0&&f[d]<s&&(c[d*s+f[d]]=o);return n.makeTensorInfo([...a.shape,s],i,c)}const Tve={kernelName:Cb,backendName:"cpu",kernelFunc:Eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Mc({inputs:{input:r},backend:n}),i=e1({inputs:{x:a},backend:n}),s=Id({inputs:{input:r},backend:n}),o=e1({inputs:{x:s},backend:n}),u=di({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return C$({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Dve={kernelName:Vb,backendName:"cpu",kernelFunc:e1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eV(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const a=Mc({inputs:{input:r},backend:n}),i=eV({inputs:{x:a},backend:n}),s=Id({inputs:{input:r},backend:n}),o=e1({inputs:{x:s},backend:n}),u=di({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return C$({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const $ve={kernelName:Sb,backendName:"cpu",kernelFunc:eV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tV(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return J0({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{Ei(i,c.shape,"All tensors passed to stack must have matching shapes"),Y(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=J0({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=kd({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const Ave={kernelName:Eb,backendName:"cpu",kernelFunc:tV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;mt(a,"pad");const o=i.map((x,w)=>x[0]+a.shape[w]+x[1]),u=i.map(x=>x[0]),l=n.data.get(a.dataId).values,c=Oe(a.shape),f=a.shape.length,d=Nt(a.shape),h=Oe(o),m=o.length,v=Nt(o),y=ta(a.dtype,h);s!==0&&y.fill(s);for(let x=0;x<c;x++){const S=Xd(x,f,d).map((E,A)=>E+u[A]),C=yo(S,m,v);y[C]=l[x]}return{dataId:n.write(y,o,a.dtype),shape:o,dtype:a.dtype}}const nV={kernelName:Tb,backendName:"cpu",kernelFunc:Ive};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kve=mr((t,e)=>Math.pow(t,e)),_ve=Or(Vm,kve),Ove={kernelName:Vm,backendName:"cpu",kernelFunc:_ve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,o=a.map(y=>n.data.get(y.dataId).values),u=a.map(y=>y.shape),l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,[f,d,h]=xU(o,u,l,i.shape,i.dtype,c,s.shape),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),v=n.makeTensorInfo(h,i.dtype,d);return m.concat([v])}const Rve={kernelName:lT,backendName:"cpu",kernelFunc:Fve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mve(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=NU(s,r.shape,r.dtype,o,a.shape,u,i.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const Pve={kernelName:cT,backendName:"cpu",kernelFunc:Mve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=n.data.get(s.dataId).values,d=o.map(y=>n.data.get(y.dataId).values),h=o.map(y=>y.shape),[m,v]=SU(l,a.shape,c,i.shape,i.dtype,f,s.shape,d,h,u);return n.makeTensorInfo(m,i.dtype,v)}const Lve={kernelName:fT,backendName:"cpu",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zve(t){const{backend:e,attrs:n}=t,{start:r,stop:a,dtype:i,step:s}=n,o=CU(r,a,s,i);return e.makeTensorInfo([o.length],i,o)}const Uve={kernelName:dT,backendName:"cpu",kernelFunc:zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vve=In(Wm,t=>1/t),Wve={kernelName:Wm,backendName:"cpu",kernelFunc:Vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;mt(a,"resizeBilinear");const u=Nt(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(Oe([f,l,c,m])),b=[i&&l>1?d-1:d,i&&c>1?h-1:h],x=[i&&l>1?l-1:l,i&&c>1?c-1:c];let w=0;const S=b[0]/x[0],C=b[1]/x[1];for(let E=0;E<f;E++)for(let A=0;A<l;A++){let k;s?k=S*(A+.5)-.5:k=S*A;const D=Math.max(0,Math.floor(k)),I=k-D,$=Math.min(d-1,Math.ceil(k)),O=E*u[0]+D*u[1],B=E*u[0]+$*u[1];for(let z=0;z<c;z++){let L;s?L=C*(z+.5)-.5:L=C*z;const F=Math.max(0,Math.floor(L)),R=L-F,W=Math.min(h-1,Math.ceil(L)),M=O+F*u[2],G=B+F*u[2],q=O+W*u[2],j=B+W*u[2];for(let H=0;H<m;H++){const ne=v[M+H],ue=v[G+H],te=v[q+H],se=v[j+H],J=ne+(te-ne)*R,K=ue+(se-ue)*R,ae=J+(K-J)*I;y[w++]=ae}}}return n.makeTensorInfo([f,l,c,m],"float32",y)}const Hve={kernelName:kb,backendName:"cpu",kernelFunc:qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;mt([i,a],"resizeBilinearGrad");const o=Nt(a.shape),[u,l,c,f]=a.shape,[,d,h]=i.shape,m=new Float32Array(u*l*c*f),v=[s&&d>1?l-1:l,s&&h>1?c-1:c],y=[s&&d>1?d-1:d,s&&h>1?h-1:h],b=v[0]/y[0],x=v[1]/y[1],w=n.data.get(i.dataId).values;let S=0;for(let C=0;C<u;C++){const E=C*o[0];for(let A=0;A<d;A++){const k=A*b,D=Math.floor(k),I=Math.min(Math.ceil(k),l-1),$=E+D*o[1],O=E+I*o[1],B=k-D,z=1-B;for(let L=0;L<h;L++){const F=L*x,R=Math.floor(F),W=Math.min(Math.ceil(F),c-1),M=F-R,G=1-M,q=$+R*o[2],j=$+W*o[2],H=O+R*o[2],ne=O+W*o[2],ue=z*G,te=z*M,se=B*G,J=B*M;for(let K=0;K<f;K++){const ae=w[S++];m[q+K]+=ae*ue,m[j+K]+=ae*te,m[H+K]+=ae*se,m[ne+K]+=ae*J}}}}return n.makeTensorInfo([u,c,l,f],"float32",m)}const Gve={kernelName:mT,backendName:"cpu",kernelFunc:jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r;mt(a,"resizeNearestNeighbor");const u=Nt(a.shape),[l,c]=o,[f,d,h,m]=a.shape,v=n.data.get(a.dataId).values,y=new Float32Array(f*l*c*m),b=[i&&l>1?d-1:d,i&&c>1?h-1:h],x=[i&&l>1?l-1:l,i&&c>1?c-1:c],w=b[0]/x[0],S=b[1]/x[1];let C=0;for(let E=0;E<f;E++){const A=E*u[0];for(let k=0;k<l;k++){const D=s?w*(k+.5):w*k;let I=Math.min(d-1,i?Math.round(D):Math.floor(D));s&&(I=Math.max(0,I));const $=A+I*u[1];for(let O=0;O<c;O++){const B=s?S*(O+.5):S*O;let z=Math.min(h-1,i?Math.round(B):Math.floor(B));s&&(z=Math.max(0,z));const L=$+z*u[2];for(let F=0;F<m;F++){const R=v[L+F];y[C++]=R}}}}return n.makeTensorInfo([f,l,c,m],a.dtype,y)}const Kve={kernelName:Ib,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yve(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r;mt([i,a],"resizeNearestNeighborGrad");const o=Nt(a.shape),u=Nt(i.shape),[l,c,f,d]=a.shape,[,h,m]=i.shape,v=new Float32Array(l*c*f*d),y=n.data.get(i.dataId).values,b=[s&&h>1?c-1:c,s&&m>1?f-1:f],x=[s&&h>1?h-1:h,s&&m>1?m-1:m],w=b[0]/x[0],S=b[1]/x[1],C=1/w,E=1/S,A=Math.ceil(C)*2+2,k=Math.ceil(E)*2+2;for(let D=0;D<l;D++){const I=D*o[0];for(let $=0;$<c;$++){const O=I+$*o[1],B=Math.floor($*C),z=Math.floor(B-A/2);for(let L=0;L<f;L++){const F=O+L*o[2],R=Math.floor(L*E),W=Math.floor(R-k/2);for(let M=0;M<d;M++){let G=0;for(let q=0;q<A;q++){const j=q+z;if(j<0||j>=h)continue;const H=I+j*u[1],ne=j*w,ue=Math.min(c-1,s?Math.round(ne):Math.floor(ne));if($===ue)for(let te=0;te<k;te++){const se=te+W;if(se<0||se>=m)continue;const J=H+se*u[2],K=se*S,ae=Math.min(f-1,s?Math.round(K):Math.floor(K));L===ae&&(G+=y[J+M])}}v[F+M]=G}}}}return n.makeTensorInfo(a.shape,a.dtype,v)}const Zve={kernelName:hT,backendName:"cpu",kernelFunc:Yve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r;mt(a,"reverse");const s=a.shape.length,o=an(i,a.shape);if(s===0)return Eo({inputs:{x:a},backend:n});const u=new Ar(a.shape,a.dtype),l=n.bufferSync(a);for(let c=0;c<u.size;c++){const f=u.indexToLoc(c),d=f.slice();o.forEach(h=>d[h]=a.shape[h]-1-d[h]),u.set(l.get(...d),...f)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const Jve={kernelName:_b,backendName:"cpu",kernelFunc:Qve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eye={kernelName:_T,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,u=ta(r.dtype,Oe(r.shape)),[l,c,f,d]=r.shape,[h,m]=ID(s,c,f),v=255,y=Math.sin(a),b=Math.cos(a),x=o.data.get(r.dataId).values;for(let S=0;S<l;S++){const C=S*f*c*d;for(let E=0;E<c;E++){const A=E*(f*d);for(let k=0;k<f;k++){const D=k*d;for(let I=0;I<d;I++){const $=[l,E,k,I],O=$[2],B=$[1];let z=(O-h)*b-(B-m)*y,L=(O-h)*y+(B-m)*b;z=Math.round(z+h),L=Math.round(L+m);let F=i;if(typeof i!="number"&&(I===3?F=v:F=i[I]),z>=0&&z<f&&L>=0&&L<c){const W=L*(f*d),M=z*d,G=C+W+M+I;F=x[G]}const R=C+A+D+I;u[R]=F}}}}return{dataId:o.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tye=In(jm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),nye={kernelName:jm,backendName:"cpu",kernelFunc:tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(i,a,s),d=!0,h=n.bufferSync(a),m=n.bufferSync(i),v=gc(h,m,s,f,l,u,o,c,0,d);return n.makeTensorInfo(s,v.dtype,v.values)}const aye={kernelName:gT,backendName:"cpu",kernelFunc:rye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<e?n=a+1:r=a;return r}function sye(t,e){let n=0,r=t.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),t[a]<=e?n=a+1:r=a;return r}function oye(t,e,n,r,a,i){const s=fr("int32",n*a);for(let o=0;o<n;++o){const u=t.slice(o*r,(o+1)*r),l=o*a;for(let c=0;c<a;++c)s[l+c]=i==="left"?iye(u,e[c+l]):sye(u,e[c+l])}return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=oye(o,u,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",l)}const lye={kernelName:yT,backendName:"cpu",kernelFunc:uye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e;mt([r,a,i],"select");const s=r.shape.length,o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=vi(a.dtype,i.dtype),f=ma(Oe(a.shape),c);let d=0;const h=s===0||s>1||a.shape.length===1?1:Oe(a.shape.slice(1));for(let m=0;m<o.length;m++)for(let v=0;v<h;v++)o[m]===1?f[d++]=u[m]:f[d++]=l[m];return n.makeTensorInfo(a.shape,c,f)}const fye={kernelName:Ob,backendName:"cpu",kernelFunc:cye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dye=pw,pye=hw,hye=In(Xm,t=>t>=0?pye*t:dye*(Math.exp(t)-1)),mye={kernelName:Xm,backendName:"cpu",kernelFunc:hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gye=In(Zm,t=>t<0?-1:t>0?1:0),vye={kernelName:Zm,backendName:"cpu",kernelFunc:gye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yye=In(Km,t=>Math.sin(t)),bye={kernelName:Km,backendName:"cpu",kernelFunc:yye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wye=In(Ym,t=>Math.sinh(t)),xye={kernelName:Ym,backendName:"cpu",kernelFunc:wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nye=11920928955078125e-23,I3=Math.log(Nye)+2,Sye=In(Jm,t=>{const e=t>-I3,n=t<I3,r=Math.exp(t);let a;return n?a=r:e?a=t:a=Math.log(1+r),a}),Cye={kernelName:Jm,backendName:"cpu",kernelFunc:Sye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;mt([a],"spaceToBatchND");const o=Oe(i),u=[[0,0]];u.push(...s);for(let E=1+i.length;E<a.shape.length;++E)u.push([0,0]);const l=nV.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=gg(l.shape,i,o,!1),f=vg(c.length,i.length,!1),d=yg(l.shape,i,o,!1),v=Wn({inputs:{x:l},backend:n,attrs:{shape:c}}),x=Ya({inputs:{x:v},backend:n,attrs:{perm:f}}),C=Wn({inputs:{x},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),C}const Tye={kernelName:Mb,backendName:"cpu",kernelFunc:Eye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values[0],[f,d,h,m,v]=$U(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const $ye={kernelName:bT,backendName:"cpu",kernelFunc:Dye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),[l,c,f]=AU(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const Iye={kernelName:wT,backendName:"cpu",kernelFunc:Aye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=w$(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const _ye={kernelName:xT,backendName:"cpu",kernelFunc:kye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=w$(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const Fye={kernelName:NT,backendName:"cpu",kernelFunc:Oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Gc(i,a,o),h=!1,m=n.bufferSync(a);let v;switch(i.dtype){case"bool":{const y=n.bufferSync(i),b=!!n.data.get(s.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"float32":{const y=n.bufferSync(i),b=n.data.get(s.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"int32":{const y=n.bufferSync(i),b=n.data.get(s.dataId).values[0];v=gc(m,y,o,d,c,l,u,f,b,h);break}case"string":{const y=n.bufferSync(i),b=al(n.data.get(s.dataId).values[0]);v=gc(m,y,o,d,c,l,u,f,b,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,v.dtype,v.values)}const Mye={kernelName:ST,backendName:"cpu",kernelFunc:Rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=an(s,a.shape)[0],u=HD(a,i,o),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(f=>{const d=[...c];d[o]=f;const h=Pc({inputs:{x:a},backend:n,attrs:{begin:l,size:d}});return l[o]+=f,h})}const Bye={kernelName:Pb,backendName:"cpu",kernelFunc:Pye};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lye={kernelName:CT,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;mt(n,"square");const a=r.data.get(n.dataId).values,i=new Float32Array(a.length);for(let o=0;o<a.length;++o){const u=a[o];i[o]=u*u}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zye=In(sg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Uye={kernelName:sg,backendName:"cpu",kernelFunc:zye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r;mt(a,"stridedSlice");const{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:x,end:w,strides:S}=DD(a.shape,i,s,o,u,l,c,f,d);let C;if(v)C=Wn({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=CD(x,w,S),A=Pc({inputs:{x:a},backend:n,attrs:{begin:x,size:E}});C=Wn({inputs:{x:A},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(A)}else{const E=n.bufferSync(a),A=_U(h,E,S,x);C=n.makeTensorInfo(m,A.dtype,A.values)}return C}const Wye={kernelName:ET,backendName:"cpu",kernelFunc:Vye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.data.get(c.dataId).values,h=n.data.get(f.dataId).values,[m,v]=OU(d,h,a,i,s,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const Hye={kernelName:TT,backendName:"cpu",kernelFunc:qye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[l,c,f]=FU(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const Gye={kernelName:DT,backendName:"cpu",kernelFunc:jye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.data.get(i.dataId).values,o=RU(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const Kye={kernelName:$T,backendName:"cpu",kernelFunc:Xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yye=In(rg,t=>Math.tan(t)),Zye={kernelName:rg,backendName:"cpu",kernelFunc:Yye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qye=In(ag,t=>Math.tanh(t)),Jye={kernelName:ag,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:a,updates:i}=e,{sliceRank:s,numUpdates:o,sliceSize:u,strides:l,outputSize:c}=Gc(i,a,r.shape),f=!1,d=n.bufferSync(a),h=n.bufferSync(i),m=n.bufferSync(r),v=gc(d,h,r.shape,c,u,o,s,l,m,f);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const t0e={kernelName:vT,backendName:"cpu",kernelFunc:e0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;mt(a,"tile");const s=PU(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const r0e={kernelName:ig,backendName:"cpu",kernelFunc:n0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r;mt(a,"topk");const o=n.data.get(a.dataId).values,[u,l]=LU(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const i0e={kernelName:AT,backendName:"cpu",kernelFunc:a0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0e(t){const{inputs:e,attrs:n,backend:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:l}=n,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=Nt(a.shape),x=b[0],w=b[1],S=b[2],C=Nt(y),E=C[0],A=C[1],k=C[2],D=ta(a.dtype,Oe(y));D.fill(u);const I=r.data.get(a.dataId).values,$=r.data.get(i.dataId).values;for(let B=0;B<c;++B){const z=i.shape[0]===1?$:$.subarray(B*8,B*8+8);for(let L=0;L<m;++L)for(let F=0;F<v;++F)for(let R=0;R<h;++R){let W;const M=z[6]*F+z[7]*L+1;if(M===0)continue;const G=(z[0]*F+z[1]*L+z[2])/M,q=(z[3]*F+z[4]*L+z[5])/M,j=k3(G,d,o),H=k3(q,f,o);switch(s){case"nearest":W=d0e(I,f,d,x,w,S,B,H,j,R,u);break;case"bilinear":W=p0e(I,f,d,x,w,S,B,H,j,R,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}const ne=B*E+L*A+F*k+R;D[ne]=W}return r.makeTensorInfo(y,a.dtype,D)}return{dataId:r.write(D,y,a.dtype),shape:a.shape,dtype:a.dtype}}const o0e={kernelName:IT,backendName:"cpu",kernelFunc:s0e};function k3(t,e,n){switch(n){case"reflect":return u0e(t,e);case"wrap":return l0e(t,e);case"nearest":return f0e(t,e);case"constant":default:return c0e(t)}}function u0e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ec(0,n,e-1)}function l0e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ec(0,n,e-1)}function c0e(t,e){return t}function f0e(t,e){return Ec(0,t,e-1)}function xh(t,e,n,r,a,i,s,o,u,l,c){const f=s*r+o*a+u*i+l;return 0<=o&&o<e&&0<=u&&u<n?t[f]:c}function d0e(t,e,n,r,a,i,s,o,u,l,c){const f=Math.round(o),d=Math.round(u);return xh(t,e,n,r,a,i,s,f,d,l,c)}function p0e(t,e,n,r,a,i,s,o,u,l,c){const f=Math.floor(o),d=Math.floor(u),h=f+1,m=d+1,v=(m-u)*xh(t,e,n,r,a,i,s,f,d,l,c)+(u-d)*xh(t,e,n,r,a,i,s,f,m,l,c),y=(m-u)*xh(t,e,n,r,a,i,s,h,d,l,c)+(u-d)*xh(t,e,n,r,a,i,s,h,m,l,c);return(h-o)*v+(o-f)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;mt(i,"unique");const s=r.data.get(i.dataId).values,{outputValues:o,outputShape:u,indices:l}=zU(s,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const m0e={kernelName:kT,backendName:"cpu",kernelFunc:h0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a.shape.length,o=a.shape[i],u=new Array(s-1);let l=0;for(let h=0;h<s;h++)h!==i&&(u[l++]=a.shape[h]);const c=new Array(s).fill(0),f=a.shape.slice();f[i]=1;const d=new Array(o);for(let h=0;h<d.length;h++){c[i]=h;const m=Pc({inputs:{x:a},backend:n,attrs:{begin:c,size:f}});d[h]=Wn({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return d}const v0e={kernelName:zb,backendName:"cpu",kernelFunc:g0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r;mt(a,"unsortedSegmentSum");const o=a.shape.length,u=i.shape.length,l=[],c=[],f=o-u;let d=i;for(let m=0;m<f;++m){const v=J0({inputs:{input:d},backend:n,attrs:{dim:m+1}});d=v,c.push(v)}for(let m=0;m<s;++m){const v=wl(m,"int32"),y=n.makeTensorInfo([],"int32",v),b=tU({inputs:{a:y,b:d},backend:n}),x=hl({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=Tw({inputs:{a:x,b:a},backend:n}),S=Dg({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});l.push(S),c.push(y),c.push(b),c.push(x),c.push(w),c.push(S)}const h=tV({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const b0e={kernelName:Ub,backendName:"cpu",kernelFunc:y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0e=[hhe,Xde,ghe,yhe,epe,whe,Nhe,Che,The,$he,Ihe,_he,Fhe,Phe,Lhe,Vhe,qhe,jhe,Xhe,dhe,Yhe,Qhe,eme,npe,nme,Qde,ape,ame,Kde,sme,ume,lme,fme,pme,mme,vme,bme,xme,Sme,Eme,Dme,Ame,kme,Ome,Fme,Mme,Bme,zme,Ume,Vme,Wme,Hme,Xme,ihe,Yme,ipe,age,spe,ige,upe,fge,dge,hge,cpe,dpe,gge,yge,wge,Nge,hpe,gpe,Yde,Cge,ome,Tge,$ge,Ige,she,ype,wpe,_ge,Npe,Fge,Pge,Lge,Vge,qge,jge,Gge,Cpe,Kge,Zge,Jge,tve,rve,ive,ove,Tpe,lve,dve,mve,$pe,Ipe,yve,xve,Cve,_pe,Tve,$ve,Ave,nV,Ove,uhe,Rpe,Rve,Pve,Lve,Uve,Zde,FC,Wve,lhe,che,fhe,Hve,Gve,Kve,Zve,Jve,eye,nye,Wpe,aye,lye,fye,mye,Hpe,vye,bye,xye,jpe,pve,Cye,Tye,$ye,Iye,_ye,Fye,Mye,Bye,Kpe,Lye,Zpe,Jpe,Uye,Wye,Hye,Gye,Kye,rhe,jme,Zye,Jye,t0e,r0e,i0e,o0e,Ope,m0e,v0e,b0e,Dve];for(const t of w0e)KB(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pc={},Ty={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function x0e(t,e){pc[t]=e}function js(t,e){if(!(t in pc)||e!=null){const r=S0e(t,e);if(r!==null)pc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=pc[t];return n==null||n.isContextLost()?(delete pc[t],js(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),pc[t])}function N0e(t){if(!Ae().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function S0e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??N0e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete pc[t]},!1),Ae().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ty.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Ty)||n.getContext("experimental-webgl",Ty):n.getContext("webgl2",Ty)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zh;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Zh||(Zh={}));var Fi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Fi||(Fi={}));var Jr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Jr||(Jr={}));function $g(t,e){return[e,t]}function C0e(t,e){return t*e}function Dy(t){const e=Oe(t),n=Math.ceil(e/4);return qS(n)}function np(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function E0e(t,e){const[n,r]=np(t,e);return n*r*4}function E$(t,e){const n=t;let r,a,i,s,o,u,l,c,f,d;return Ae().getNumber("WEBGL_VERSION")===2?(r=n.R32F,a=n.R16F,i=n.RGBA16F,s=n.RGBA32F,o=n.RED,l=4,c=1,f=n.HALF_FLOAT,d=n.FLOAT,u=n.RGBA8):(r=t.RGBA,a=t.RGBA,i=t.RGBA,s=n.RGBA,o=t.RGBA,l=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(t,e){const n=e();return Ae().getBool("DEBUG")&&T0e(t),n}function T0e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+I0e(t,e))}const D0e=596e-10,$0e=65504;function A0e(t){return!!(Ae().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||D0e<Math.abs(t)&&Math.abs(t)<$0e)}function I0e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function $y(t,e){return gu(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function k0e(t,e){const n=gu(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(lt(t,()=>t.shaderSource(n,e)),lt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function _0e(t,e){const n=gu(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(lt(t,()=>t.shaderSource(n,e)),lt(t,()=>t.compileShader(n)),Ae().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rV(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const O0e=/ERROR: [0-9]+:([0-9]+):/g;function rV(t,e){const n=O0e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],a=t.split(`
`),i=a.length.toString().length+2,s=a.map((f,d)=>ad((d+1).toString(),i)+f);let o=0;for(let f=0;f<s.length;f++)o=Math.max(s[f].length,o);const u=s.slice(0,r-1),l=s.slice(r-1,r),c=s.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${ad(l[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function F0e(t){return gu(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function R0e(t,e){if(lt(t,()=>t.linkProgram(e)),!Ae().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function kN(t,e){if(lt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function M0e(t,e){const n=gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),lt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function P0e(t,e){const n=gu(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return lt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),lt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function B0e(t){return gu(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function L0e(t,e){const n=Ae().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function z0e(t){return gu(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function _3(t,e,n,r,a,i,s){const o=t.getAttribLocation(e,n);return o===-1?!1:(lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),lt(t,()=>t.vertexAttribPointer(o,a,t.FLOAT,!1,i,s)),lt(t,()=>t.enableVertexAttribArray(o)),!0)}function U0e(t,e,n){j0e(t,n),lt(t,()=>t.activeTexture(t.TEXTURE0+n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function V0e(t,e,n){return gu(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function W0e(t,e,n){return t.getUniformLocation(e,n)}function q0e(t,e,n,r){lt(t,()=>U0e(t,e,r)),lt(t,()=>t.uniform1i(n,r))}function _N(t,e,n){lt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),lt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function O3(t,e){lt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),lt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ay(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+H0e(t,e))}function H0e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function gu(t,e,n){const r=lt(t,()=>e());if(r==null)throw new Error(n);return r}function j0e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function _d(t,e=2){return Oe(t.slice(0,t.length-e))}function Od(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Iy(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[_d(t),...Od(t)]),e}function G0e(t,e=!1){let n=Ae().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ae().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ae().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,u)=>u>=t.length-2?TE(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=bl(t).newShape);let a=Oe(t),i=null;t.length<=1&&a<=n?i=[1,a]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||s)if(e){const o=_d(t);let u=2,l=2;t.length&&([u,l]=Od(t)),a=o*(u/2)*(l/2),i=qS(a).map(c=>c*2)}else i=qS(a);return i}function ky(t){return t%2===0}function t1(t,e){if(t=t.slice(-2),e=e.slice(-2),fn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||ky(n)&&ky(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&ky(t[0])&&ky(e[0])}let ON,FN;function X0e(t){if(ON==null){const e=js(t);ON=e.getParameter(e.MAX_TEXTURE_SIZE)}return ON}function K0e(t){if(FN==null){const e=js(t);FN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,FN)}function Y0e(t){if(t===0)return 0;let e;const n=js(t);return cs(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:cs(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function cs(t,e){return t.getExtension(e)!=null}function F3(t){try{if(js(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Z0e(t){if(t===0)return!1;const e=js(t);if(t===1){if(!cs(e,"OES_texture_float"))return!1}else if(!cs(e,"EXT_color_buffer_float"))return!1;return MC(e)}function Q0e(t){if(t===0)return!1;const e=js(t);if(t===1){if(!cs(e,"OES_texture_float")||!cs(e,"WEBGL_color_buffer_float"))return!1}else{if(cs(e,"EXT_color_buffer_float"))return MC(e);const r="EXT_color_buffer_half_float";if(cs(e,r)){const a=e.getExtension(r);return J0e(e,a)}return!1}return MC(e)}function MC(t){const e=E$(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),s}function J0e(t,e){const n=E$(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),o}function e1e(t){return t!==2?!1:js(t).fenceSync!=null}function Ag(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&Y(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vt=Ae();vt.registerFlag("HAS_WEBGL",()=>vt.getNumber("WEBGL_VERSION")>0);vt.registerFlag("WEBGL_VERSION",()=>F3(2)?2:F3(1)?1:0);vt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);vt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>vt.get("WEBGL_VERSION")===2);vt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);vt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);vt.registerFlag("WEBGL_PACK",()=>vt.getBool("HAS_WEBGL"));vt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CLIP",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_REDUCE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_LAZILY_UNPACK",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_CONV_IM2COL",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>vt.getBool("WEBGL_PACK"));vt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>X0e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>K0e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=vt.getNumber("WEBGL_VERSION");return t===0?0:Y0e(t)});vt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>vt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uL());vt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Z0e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>vt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:vt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));vt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Q0e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>e1e(vt.getNumber("WEBGL_VERSION")));vt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>vt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);vt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});vt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>uL()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});vt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);vt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);vt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);vt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);vt.registerFlag("WEBGL_EXP_CONV",()=>!1);vt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>vt.getBool("IS_TEST"));vt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);vt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);vt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);vt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pa(){let t,e,n,r,a,i,s,o,u,l;return Ae().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Ae().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t,e,n="index"){const r=Nt(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / ${a}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${a}`:`index -= ${t[i]} * ${a}`;return`${s}; ${o};`}).join("")}function Dw(t,e,n="index"){const r=Nt(e);return r.map((a,i)=>{const s=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${o};`}).join("")}function t1e(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${r[i+1]})`;return a}function n1e(t,e,n="index"){const r=t.map((i,s)=>s),a=t1e(r,e);return a.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${a[s]}`,u=s===a.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${a[s]}`:`index -= ${t[s]} * ${a[s]}`;return`${o}; ${u};`}).join("")}function T$(t){const e=Nt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function D$(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const aV=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:iV}=foe;function r1e(t,e,n){const r=[];if(t.forEach(h=>{const m=Oe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:v}=$$(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const a=r.join(`
`),i=t.map(h=>a1e(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=e.texShape,o=Pa(),u=o1e(o);let l,c,f=c1e(o);return e.isPacked?(l=i1e(e.logicalShape,s,n.enableShapeUniforms),c=l1e(o)):(l=s1e(e.logicalShape,s,n.enableShapeUniforms),c=u1e(o)),n.packedInputs&&(f+=h1e),[f,u,c,a,l,i,n.userCode].join(`
`)}function rp(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return T1e(t,e);case 1:return $1e(t,e);case 2:return I1e(t,e);case 3:return _1e(t,e);case 4:return F1e(t,e);case 5:return R1e(t);case 6:return M1e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function sV(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return E1e(t);case 1:return D1e(t,e);case 2:return A1e(t,e);case 3:return k1e(t,e);default:return O1e(t,e)}}function a1e(t,e,n=!1,r){let a="";n?a+=sV(t,r):a+=rp(t,r);const i=t.shapeInfo.logicalShape,s=e.logicalShape;return i.length<=s.length&&(n?a+=P1e(t,e):a+=B1e(t,e)),a}function i1e(t,e,n){switch(t.length){case 0:return oV();case 1:return m1e(t,e,n);case 2:return S1e(t,e,n);case 3:return v1e(t,e,n);default:return b1e(t,e,n)}}function s1e(t,e,n){switch(t.length){case 0:return oV();case 1:return g1e(t,e,n);case 2:return C1e(t,e,n);case 3:return y1e(t,e,n);case 4:return w1e(t,e,n);case 5:return x1e(t,e);case 6:return N1e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function o1e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function u1e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function l1e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function c1e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${f1e}
    ${d1e}
    ${p1e}
  `}const f1e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,d1e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,p1e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,h1e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function oV(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function m1e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function g1e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function v1e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[2]/2),i=a*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function y1e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Dw(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Yc(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function b1e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],a=Math.ceil(t[t.length-1]/2),i=a*Math.ceil(t[t.length-2]/2);let s=i,o="",u="b, r, c";for(let l=2;l<t.length-1;l++)s*=t[t.length-l-1],o=`
      int b${l} = index / ${s};
      index -= b${l} * ${s};
    `+o,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${t.length}(${u});
    }
  `}function w1e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Dw(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Yc(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function x1e(t,e){const n=Yc(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function N1e(t,e){const n=Yc(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function S1e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(fn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const a=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function C1e(t,e,n){return fn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Zc(t){return`offset${t}`}function E1e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Pa();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function T1e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,i]=t.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Zc(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;const[o,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${u}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function D1e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=Pa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function $1e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${ap(t)}
      }
    `;const a=t.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Zc(n);return s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function A1e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],o=i[1],u=Pa();if(i!=null&&fn(n,i))return e?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function I1e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&fn(n,i)){if(e)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const d=i[0],h=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:s,keptDims:o}=bl(n),u=s;if(u.length<n.length){const d=ip(t,u),h=["row","col"];return`
      ${rp(d,e)}
      float ${a}(int row, int col) {
        return ${a}(${sp(h,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${ap(t)}
      }
    `;const l=i[0],c=i[1],f=Zc(r);return c===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function k1e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),h=[1,2],m=ip(t,d),v=["b","row","col"];return`
        ${sV(m,e)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${sp(v,h)});
        }
      `}const o=Pa();if(e)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const u=s[0],l=s[1],c=Math.ceil(n[2]/2),f=c*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function _1e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:u}=bl(n),l=o;if(l.length<n.length){const v=ip(t,l),y=["row","col","depth"];return`
        ${rp(v,e)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${sp(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${ap(t)}
      }
    `;const c=t.shapeInfo.texShape,f=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===i&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(d===s&&h==null)return e?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=Zc(r);return e?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${m};
        vec2 uv = uvFromFlat(${f}, ${d}, index);
        return sampleTexture(${r}, uv);
      }
  `}function O1e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Pa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,s=i.length,o=t.shapeInfo.texShape,u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=u[0],c=u[1],f=Math.ceil(i[s-1]/2);let d=f*Math.ceil(i[s-2]/2),h="int b, int row, int col",m=`b * ${d} + (row / 2) * ${f} + (col / 2)`;for(let v=2;v<s-1;v++)h=`int b${v}, `+h,d*=i[s-v-1],m=`b${v} * ${d} + `+m;return`
    vec4 ${r}(${h}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${a.texture2D}(${n}, uv);
    }
  `}function F1e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:u,keptDims:l}=bl(n);if(u.length<n.length){const x=ip(t,u),w=["row","col","depth","depth2"];return`
      ${rp(x,e)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${sp(w,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${i}, 1)));
        ${ap(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1],m=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${m}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&c==null)return e?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${r}, uv);
      }
    `;const b=Zc(r);return e?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${v}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${b});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${h}, index + ${b});
      return sampleTexture(${r}, uv);
    }
  `}function R1e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,s=e[2]*i,o=e[1]*s,{newShape:u,keptDims:l}=bl(e);if(u.length<e.length){const v=ip(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${rp(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${sp(y,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${i}, ${a})) +
          depth3;
        ${ap(t)}
      }
    `;const c=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,d=f[0],h=f[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Zc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${i} +
          depth2 * ${a} + depth3 + ${m};
      vec2 uv = uvFromFlat(${d}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function M1e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=bl(e);if(a.length<e.length){const y=ip(t,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${rp(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${sp(b,i)});
      }
    `}const s=e[5],o=e[4]*s,u=e[3]*o,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${ap(t)}
      }
    `;const f=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],m=d[1];if(m===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Zc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${v};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ap(t){const e=t.name,n=Oe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function P1e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,o=iV(t.shapeInfo.logicalShape,e.logicalShape),u=Fn(s),l=s-i;let c;const f=["x","y","z","w","u","v"];i===0?c="":s<2&&o.length>=1?c="coords = 0;":c=o.map(x=>`coords.${f[x+l]} = 0;`).join(`
`);let d="";s<2&&i>0?d="coords":d=t.shapeInfo.logicalShape.map((x,w)=>`coords.${f[w+l]}`).join(", ");let h="return outputValue;";const v=Oe(t.shapeInfo.logicalShape)===1,b=Oe(e.logicalShape)===1;if(i===1&&!v&&!b)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!b)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){const x=i-2,w=i-1;o.indexOf(x)>-1&&o.indexOf(w)>-1?h="return vec4(outputValue.x);":o.indexOf(x)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(w)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${d});
      ${h}
    }
  `}function B1e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,s=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===u&&t.shapeInfo.flatOffset==null&&fn(s,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=Fn(u),c=iV(t.shapeInfo.logicalShape,e.logicalShape),f=u-o;let d;const h=["x","y","z","w","u","v"];o===0?d="":u<2&&c.length>=1?d="coords = 0;":d=c.map(v=>`coords.${h[v+f]} = 0;`).join(`
`);let m="";return u<2&&o>0?m="coords":m=t.shapeInfo.logicalShape.map((v,y)=>`coords.${h[y+f]}`).join(", "),`
    float ${a}() {
      ${l} coords = getOutputCoords();
      ${d}
      return get${r}(${m});
    }
  `}function Fn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function $$(t,e,n){const{newShape:r,keptDims:a}=bl(e),i=e.length,s=t&&i===3&&e[0]===1,o=s?e.slice(1):r,u=!t&&i>1&&!fn(e,n)&&r.length<i||s;return{useSqueezeShape:u,uniformShape:u?o:e,keptDims:a}}function ip(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function sp(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1e(t,e,n,r){const a=n.map((c,f)=>{const d={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(d.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:d}}),i=a.map(c=>c.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=r1e(a,s,e),u=_0e(t.gl,o),l=t.createProgram(u);return Ae().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:o,webGLProgram:l,inShapeInfos:i,outShapeInfo:s},uV(t,e,l)))}function uV(t,e,n){const r=[],a=[];let i,s,o,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),Ae().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const f of e.variableNames){const d={name:f,uniform:t.getUniformLocation(n,f,c),offset:t.getUniformLocation(n,`offset${f}`,c)};e.enableShapeUniforms&&(d.shape=t.getUniformLocation(n,`${f}Shape`,c),d.texShape=t.getUniformLocation(n,`${f}TexShape`,c)),r.push(d)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),o=t.getUniformLocation(n,"outShapeStrides",c),s=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const f of e.customUniforms)a.push(t.getUniformLocation(n,f.name,c));return{variablesLocations:r,customUniformLocations:a,infLoc:u,nanLoc:l,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:s}}function R3(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const a=n.logicalShape,i=e[r],s=i.shape;if(!fn(a,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${s} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!fn(o,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${u} must match`)})}function z1e(t,e,n,r,a){e.program.enableShapeUniforms||(R3(e.inShapeInfos,n),R3([e.outShapeInfo],[r]));const i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Ae().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:f,shape:d,texShape:h}=e.variablesLocations[u];if(d){const{uniformShape:m}=$$(e.program.packedInputs,l.shape,l.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(d,new Int32Array(m));break;case 2:t.gl.uniform2iv(d,new Int32Array(m));break;case 3:t.gl.uniform3iv(d,new Int32Array(m));break;case 4:t.gl.uniform4iv(d,new Int32Array(m));break}}if(h&&t.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(Oe(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let m=l.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(c,m)}continue}l.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=Nt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&a)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],f=a[u];if(l.type==="float")t.gl.uniform1fv(c,f);else if(l.type==="vec2")t.gl.uniform2fv(c,f);else if(l.type==="vec3")t.gl.uniform3fv(c,f);else if(l.type==="vec4")t.gl.uniform4fv(c,f);else if(l.type==="int")t.gl.uniform1iv(c,f);else if(l.type==="ivec2")t.gl.uniform2iv(c,f);else if(l.type==="ivec3")t.gl.uniform3iv(c,f);else if(l.type==="ivec4")t.gl.uniform4iv(c,f);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function U1e(t,e,n){let r="";e.concat(n).forEach(s=>{const o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){const u=s.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=$$(t.packedInputs,s.shape,u);let d="",h="",m="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];d=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=Nt(c);m=`${C[0]===u[1]}_${C[C.length-1]===u[1]}`}const v=s.shape.length,y=c.length===2&&fn(s.shape,u),b=Oe(s.shape)===1,x=Ed(s.shape,n.shape),w=!t.packedInputs&&v===n.shape.length&&fn(u,n.texData.texShape),S=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${v}_${w}_${l?f:""}_${c.length}_${b}_${x}_${y}_${d}_${h}_${m}_${S}_${o}`}else{const u=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${u}_${o}`}});const a=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+a+`${Ae().getNumber("WEBGL_VERSION")}`,i}function ya(t){return Ae().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V1e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Zh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Dw(["r","c","d"],e):Yc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W1e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Zh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Dw(["r","c","d"],e):Yc(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q1e{constructor(e){this.variableNames=["A"],this.outTexUsage=Fi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${aV}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H1e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Fi.DOWNLOAD;const n=Pa();this.outputShape=e,this.userCode=`
      ${aV}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1e={R:0,G:1,B:2,A:3};class M3{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let s="";for(let o=0;o<r.length;o++){const u=r[o];s+=`
          if(offset == ${o}) {
            result = values[${j1e[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?D$():T$(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${a.texture2D}(A, uv);
          ${s}
        }
        ${a.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G1e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Pa();this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){const u=s*2+o;a+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?D$():T$(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(t){const e=Pa(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return k0e(t,n)}function K1e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return M0e(t,e)}function Y1e(t){const e=new Uint16Array([0,1,2,2,1,3]);return P0e(t,e)}function Ig(t,e,n,r,a,i){L0e(e,n);const s=B0e(t),o=t.TEXTURE_2D;return lt(t,()=>t.bindTexture(o,s)),lt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),lt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),lt(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),lt(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),Ae().getNumber("WEBGL_VERSION")===1?lt(t,()=>t.texImage2D(o,0,r,e,n,0,a,i,null)):lt(t,()=>t.texStorage2D(o,1,r,e,n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[n,e]}}function lV(t){return t.internalFormatFloat}function Z1e(t,e,n,r){const[a,i]=$g(e,n);return Ig(t,a,i,lV(r),r.textureFormatFloat,t.FLOAT)}function cV(t){return t.internalFormatHalfFloat}function Q1e(t,e,n,r){const[a,i]=$g(e,n);return Ig(t,a,i,cV(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function fV(t){return t.downloadTextureFormat}function J1e(t,e,n,r){const[a,i]=$g(e,n);return Ig(t,a,i,fV(r),t.RGBA,t.UNSIGNED_BYTE)}function dV(t){return t.internalFormatPackedFloat}function ebe(t,e,n,r){const[a,i]=np(e,n);return Ig(t,a,i,dV(r),t.RGBA,t.FLOAT)}function pV(t){return t.internalFormatPackedHalfFloat}function tbe(t,e,n,r){const[a,i]=np(e,n);return Ig(t,a,i,pV(r),t.RGBA,r.textureTypeHalfFloat)}function nbe(t,e,n){return lt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),_3(t,e,"clipSpacePos",n,3,20,0)&&_3(t,e,"uv",n,2,20,12)}function rbe(t,e,n,r,a,i){lt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let s,o,u;a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,u=t.RGBA):(s=new Float32Array(n*r*4),o=t.FLOAT,u=i.internalFormatPackedFloat),s.set(a),Ae().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,s)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,o,s)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function abe(t,e,n){lt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Ae().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ae().getNumber("WEBGL_VERSION")===2?lt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):lt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),lt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ibe(t,e,n,r){const a=t.createBuffer();lt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,a));const o=4*4*e*n;return lt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),lt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),lt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),a}function sbe(t,e,n){const r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function obe(t,e,n,r){const[a,i]=$g(e,n),s=4,o=new Uint8Array(C0e(e*n,s));return lt(t,()=>t.readPixels(0,0,a,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function ube(t,e,n,r,a,i,s,o){const u=t,l=new Float32Array(E0e(i,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function lbe(t,e,n){const r=new Float32Array(e*n*4);return lt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Ae().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,x0e(n,e)):this.gl=js(n),e=this.gl,Ae().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>lt(i,()=>i.createVertexArray()),this.bindVertexArray=s=>lt(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>lt(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>lt(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>lt(e,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>lt(e,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>lt(e,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>lt(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ae().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=$y(this.gl,i),cs(this.gl,s))this.textureHalfFloatExtension=$y(this.gl,s);else if(Ae().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),cs(this.gl,a))this.colorBufferHalfFloatExtension=$y(this.gl,a);else if(Ae().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",cs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(cs(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=K1e(this.gl),this.indexBuffer=Y1e(this.gl),this.framebuffer=z0e(this.gl),this.textureConfig=E$(this.gl,this.textureHalfFloatExtension)}get debug(){return Ae().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;lt(e,()=>e.finish()),lt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),lt(e,()=>e.deleteFramebuffer(this.framebuffer)),lt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),lt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),lt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Z1e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Q1e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),J1e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),abe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,a){this.throwIfDisposed(),rbe(this.gl,e,n,r,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),tbe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),ebe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(O3(this.gl,this.framebuffer),this.outputTexture=null),lt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>obe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,a,i,s){return ube(this.gl,e,n,r,a,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return sbe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const a=ibe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Ae().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>lbe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=X1e(n));const r=F0e(n);lt(n,()=>n.attachShader(r,this.vertexShader)),lt(n,()=>n.attachShader(r,e)),R0e(n,r);const a=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&kN(n,a),a}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;lt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),nbe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(lt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&kN(this.gl,this.program),lt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?V0e(this.gl,e,n):W0e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),lt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),q0e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[a,i]=np(n,r);this.setOutputMatrixTextureDriver(e,a,i)}setOutputMatrixWriteRegion(e,n,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,n)}setOutputPackedMatrixWriteRegion(e,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&kN(this.gl,this.program),Ay(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}lt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),lt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=$y(this.gl,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(a.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await lO(()=>this.disposed||this.isQueryAvailable(e,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=cbe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ae().platform&&(r=Ae().platform.setTimeoutCustom.bind(Ae().platform)),lO(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),_N(this.gl,e,this.framebuffer),this.debug&&Ay(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_N(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ay(this.gl)):O3(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const a=this.gl;_N(a,e,this.framebuffer),this.debug&&Ay(a),this.outputTexture=e,lt(a,()=>a.viewport(0,0,n,r)),lt(a,()=>a.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,a){this.throwIfDisposed(),lt(this.gl,()=>this.gl.scissor(e,n,r,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function cbe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:fbe,bincountImpl:hV,bincountReduceImpl:dbe,bitwiseAndImpl:pbe,castImpl:hbe,ceilImpl:mbe,concatImpl:gbe,equalImpl:vbe,expImpl:ybe,expm1Impl:bbe,floorImpl:wbe,gatherNdImpl:xbe,gatherV2Impl:Nbe,greaterImpl:Sbe,greaterEqualImpl:Cbe,lessImpl:Ebe,lessEqualImpl:Tbe,linSpaceImpl:Dbe,logImpl:$be,maxImpl:Abe,maximumImpl:Ibe,minimumImpl:kbe,multiplyImpl:_be,negImpl:Obe,notEqualImpl:Fbe,prodImpl:Rbe,raggedGatherImpl:Mbe,raggedRangeImpl:Pbe,raggedTensorToTensorImpl:Bbe,rangeImpl:Lbe,rsqrtImpl:zbe,scatterImpl:Ube,sigmoidImpl:Vbe,simpleAbsImpl:mV,sliceImpl:Wbe,sparseFillEmptyRowsImpl:qbe,sparseReshapeImpl:Hbe,sparseSegmentReductionImpl:gV,sqrtImpl:jbe,staticRegexReplaceImpl:Gbe,stridedSliceImpl:Xbe,stringNGramsImpl:Kbe,stringSplitImpl:Ybe,stringToHashBucketFastImpl:Zbe,subImpl:Qbe,tileImpl:Jbe,topKImpl:ewe,transposeImpl:A$,uniqueImpl:twe}=ahe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ka(t,e){return e===1?[t]:vV(t,e)}function nwe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rwe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ya(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ka("rc",this.rank),r=Fn(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),s=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){let i=`${r===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${e[e.length-1-s]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${a};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yV{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);let r="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${awe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?D$():T$(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function awe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?n1e(["r","c","d"],"inputShape"):Yc(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iwe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const a=B3(n,r),i=L3(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const s=P3(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const u=this.freeTextures[i].pop();return this.usedTextures[i].push(u),u}let o;return a===Jr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Jr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Jr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Jr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Jr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}releaseTexture(e,n,r,a){if(this.freeTextures==null)return;const i=B3(r,a),s=L3(n,i,a);s in this.freeTextures||(this.freeTextures[s]=[]);const o=P3(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),u=Ae().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const l=this.usedTextures[s],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function swe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function P3(t,e,n,r,a){const i=owe(e,r);let s;if(a){const[u,l]=np(t[0],t[1]);s=u*l}else{const[u,l]=$g(t[0],t[1]);s=u*l}const o=swe(n,i);return s*o}function owe(t,e){switch(t){case Jr.PACKED_2X2_FLOAT32:return dV(e);case Jr.PACKED_2X2_FLOAT16:return pV(e);case Jr.UNPACKED_FLOAT32:return lV(e);case Jr.UNPACKED_FLOAT16:return cV(e);case Jr.PACKED_4X1_UNSIGNED_BYTE:return fV(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function uwe(t){return Ae().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Jr.PACKED_2X2_FLOAT32:Jr.UNPACKED_FLOAT32:t?Jr.PACKED_2X2_FLOAT16:Jr.UNPACKED_FLOAT16}function B3(t,e){if(t===Fi.UPLOAD)return Jr.PACKED_2X2_FLOAT32;if(t===Fi.RENDER||t==null)return uwe(e);if(t===Fi.DOWNLOAD||t===Fi.PIXELS)return Jr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function L3(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ss="if (isnan(x)) return x;",lwe="return x;",z3="return abs(x);",cwe="return (x >= 0.0) ? x : (exp(x) - 1.0);",fwe=Ss+`
  return (x < 0.0) ? 0.0 : x;
`,dwe=Ss+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Lu="return x;",pwe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe="return x;",mwe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,gwe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vwe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ywe="return 1.0 / (1.0 + exp(-1.0 * x));";class ju{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const n=e.length,r=ka("rc",n),a=Fn(n),i=nwe(n,r),s=r.slice(-2),o=n<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe=dD,xwe=1e-7,Nwe=1e-4,_y={};function Swe(t){return t in _y||(_y[t]={}),_y[t]}const Cwe=Ae().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Ewe=600;function Twe(){return Ae().global.screen==null?1024:Ae().global.screen.height*Ae().global.screen.width*window.devicePixelRatio*Ewe/1024/1024}class $w extends EE{nextDataId(){return $w.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ae().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof RN)n=e;else{const r=js(Ae().getNumber("WEBGL_VERSION"),e);n=new RN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=js(Ae().getNumber("WEBGL_VERSION"));n=new RN(r),this.binaryCache=Swe(Ae().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new iwe(this.gpgpu),this.numMBBeforeWarning=Twe(),this.texData=new VB(this,uo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,a,i,s){const o=this.makeTensorInfo(n,r),u=this.texData.get(o.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[a,i]},u.texShape=[a,i];const l=Iy(n),c=new M3(l,!1,s),f=this.runWebGLProgram(c,[o],r,[[a,i]]);return f.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(o),f.dataId}write(e,n,r){if((Ae().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ae().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:r,values:e,usage:Fi.UPLOAD,refCount:1}),a}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,a,i){if(Ae().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:a,values:n,usage:Fi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:a,complexTensorInfos:i,slice:s,shape:o,isPacked:u}=n;if(s!=null){let d;u?d=new ju(o,Lu):d=new vo(o,Lu);const h=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:a}],a),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(a==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Va());let f;if(a==="complex64"){const d=this.readSync(i.real.dataId),h=this.readSync(i.imag.dataId);f=ou(d,h)}else f=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Va()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(v=>m.push(v))}const n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,complexTensorInfos:o,isPacked:u}=n;if(i!=null){let m;u?m=new ju(a,Lu):m=new vo(a,Lu);const v=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:s}],s),y=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ae().getBool("DEBUG")&&!Ae().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ae().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(s!=="complex64"&&Ae().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const m=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(m.texture.texture,...Dy(a))}this.pendingRead.set(e,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(s==="complex64"){const m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),v=m[0],y=m[1];f=ou(v,y)}else if(l==null)f=this.getValuesFromTexture(e);else{const m=Oe(a);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const m=this.gpgpu.gl;lt(m,()=>m.deleteBuffer(l))}const d=this.convertAndCacheOnCPU(e,f),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(m=>m(d)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&uo().removeDataId(e,this),this.pendingDeletes--),d}readToGPU(e,n={}){const r=this.texData.get(e),{values:a,shape:i,slice:s,dtype:o,isPacked:u,texture:l}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let h;u?h=new ju(i,Lu):h=new vo(i,Lu);const m=this.runWebGLProgram(h,[{dataId:e,shape:i,dtype:o}],o),v=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),v}if(l==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),f=uo().makeTensorFromTensorInfo(c),d=this.texData.get(c.dataId);return Object.assign({tensorRef:f},d.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(a=>al(a));return en(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return en(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!A0e(r))throw Ae().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:a}=this.texData.get(e),i=Oe(n);if(Ae().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(e),h=this.texData.get(d.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Dy(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),m}const s=Ae().getBool("WEBGL_PACK")&&a===!0,o=s?Iy(n):n,u=s?new H1e(o):new q1e(o),l=this.runWebGLProgram(u,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=il(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),s=il(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(i);o.kernelMs=FQ(u),o.getExtraProfileInfo=()=>u.map((l,c)=>({name:s[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Va(),endMs:null}}endTimer(e){return Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Va(),e)}async getQueryTime(e){if(Ae().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:a,usage:i,isPacked:s,slice:o}=this.texData.get(e),u=o&&o.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,s)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Cwe){return Ae().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Oe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Oi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return wwe(e.shape,n)}packedUnaryOp(e,n,r){const a=new ju(e.shape,n),i=this.compileAndRun(a,[e],r);return uo().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const a=mV(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,a)}if(Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,z3,e.dtype);const n=new vo(e.shape,z3),r=this.compileAndRun(n,[e]);return uo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let a;if(n==="string"&&r!=null&&r.length>0&&fm(r[0])){const i=r.map(s=>Ju(s));a=this.write(i,e,n)}else a=this.write(r,e,n);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:n}}makeOutput(e,n,r){return uo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new bwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new rwe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[_d(e.shape),...Od(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[_d(n),...Od(n)],s=new yV(i,r),o=!0,u=[r],l=this.runWebGLProgram(s,[a],e.dtype,u,o);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:a,shape:i,dtype:s}=r;if(n!=null){const d=Oe(i),h=n[0]*n[1]*4;Y(d<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Iy(i);let u;a?u=new W1e(o):u=new V1e(o);const l=!0,c=[n??Dy(o)],f=this.runWebGLProgram(u,[{shape:o,dtype:s,dataId:e}],s,c,l,n);return{dtype:s,shape:i,dataId:f.dataId}}runWebGLProgram(e,n,r,a,i=!1,s){const o=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(o.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Zh.DENSE){const b=s??Dy(e.outputShape);u.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),Oe(o.shape)===0)return u.values=ta(o.dtype,0),o;const l=[],c=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&Oe(b.shape)<=Ae().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),l.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!t1(x.shape,b.shape)){const w=b,S=b.shape;b.shape=x.shape,b=this.packedReshape(b,S),l.push(b),x=this.texData.get(b.dataId),w.shape=S}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(o.dataId);const f={shape:o.shape,texData:u,isUniform:!1},d=U1e(e,c,f),h=this.getAndSaveBinary(d,()=>L1e(this.gpgpu,e,c,f)),m=this.activeTimers!=null;let v;m&&(v=this.startTimer()),Ae().get("ENGINE_COMPILE_ONLY")||z1e(this.gpgpu,h,c,f,a),l.forEach(b=>this.disposeIntermediateTensorInfo(b)),m&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const y=Ae().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const b=Va();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Ae().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&i===!1){const b=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),b}return o}compileAndRun(e,n,r,a,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,a,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ae().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(()=>{if(!Ae().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ae().getBool("DEBUG");Ae().set("DEBUG",!1);const n=this.abs(Ct(1e-8)).dataSync()[0];if(Ae().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?xwe:Nwe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:s,usage:o,isPacked:u}=n;if(s!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Va());let f=n.texShape;if(f==null&&(f=G0e(r,u),n.texShape=f),i!=null){const d=Iy(r);let h,m=f[1],v=f[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(u||!y)&&([m,v]=np(f[0],f[1])),u?h=new G1e(d,y):h=new M3(d,y);const b=y?[v,m]:f,x=this.makeTensorInfo(b,a),w=this.texData.get(x.dataId);y?w.usage=Fi.PIXELS:w.usage=Fi.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),m,v,i);const S=[[v,m]],E=this.runWebGLProgram(h,[x],a,S,!0),A=this.texData.get(E.dataId);n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,Ae().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(n.texture=A.texture,n.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(x),l&&(this.uploadWaitMs+=Va()-c)}else{const d=this.acquireTexture(f,o,a,u);n.texture=d}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:a}=r;return n!=null&&(r.values=Dwe(n,a)),r.values}acquireTexture(e,n,r,a){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,a)}computeBytes(e,n){return e[0]*e[1]*I0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await t5(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rV(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:a,nanLoc:i,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:u}=uV(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=a,e.nanLoc=i,e.outShapeLocation=s,e.outShapeStridesLocation=o,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:a,height:i,width:s,channels:o}=e,u=uo().backend;if(!u.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(a,n,r,i,s,o);return uo().makeTensorFromDataId(l,n,r,u)}}$w.nextDataId=0;function Dwe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lL()&&dL("webgl",()=>new $w,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Bc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ht(n,r),this.enableShapeUniforms=ya(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class op{constructor(e,n,r,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ht(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ya(i);let s="";if(a)if(i===0||Oe(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${Fn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=ka("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${u[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${u[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const $we={kernelName:_m,backendName:"webgl",kernelFunc:Ni};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Il(t){const{inputs:e,backend:n}=t,{real:r,imag:a}=e,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=Ni({inputs:{x:r},backend:n}),u=Ni({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:u},i}const Awe={kernelName:RE,backendName:"webgl",kernelFunc:Il};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bV="return (a < 0.) ? b * a : a;",wV=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Iwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{alpha:i}=r,s=n.makeTensorInfo([],"float32",wl(i,"float32")),o=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new op(wV,a.shape,s.shape):new Bc(bV,a.shape,s.shape),u=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),u}const kwe={kernelName:ub,backendName:"webgl",kernelFunc:Iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xV="return (a < 0.) ? b * a : a;",NV=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function _we(t){const{inputs:e,backend:n}=t,{x:r,alpha:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new op(NV,r.shape,a.shape):new Bc(xV,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}const Owe={kernelName:Db,backendName:"webgl",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const up="if (isnan(x)) return x;";function yn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{const{x:s}=a,o=i,u=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){const f=o.texData.get(s.dataId),d=n(f.values,u);return o.makeTensorInfo(s.shape,u,d)}const l=Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new ju(s.shape,e):c=new vo(s.shape,t),o.runWebGLProgram(c,[s],u)}}function oa({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:s,backend:o})=>{const{a:u,b:l}=s,c=o;if(r&&u.dtype==="complex64"){const m=c.texData.get(u.dataId),v=c.texData.get(l.dataId),[y,b]=[[m.complexTensorInfos.real,v.complexTensorInfos.real],[m.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(w=>{const[S,C]=w,E={dataId:S.dataId,dtype:S.dtype,shape:u.shape},A={dataId:C.dataId,dtype:C.dtype,shape:l.shape},k=new Bc(t,u.shape,l.shape);return c.runWebGLProgram(k,[E,A],vi(S.dtype,C.dtype))}),x=Il({inputs:{real:y,imag:b},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(b),x}const f=i||vi(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&a!=null){const m=c.texData.get(u.dataId).values,v=c.texData.get(l.dataId).values,y=u.dtype==="string"?uu(m):m,b=u.dtype==="string"?uu(v):v,[x,w]=a(u.shape,l.shape,y,b,f),S=c.makeTensorInfo(w,f),C=c.texData.get(S.dataId);return C.values=x,S}const d=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return d?h=new op(e,u.shape,l.shape,n):h=new Bc(t,u.shape,l.shape),c.runWebGLProgram(h,[u,l],f)}}function Qh(t,e=!1){if(t==="linear")return e?hwe:lwe;if(t==="relu")return e?gwe:fwe;if(t==="elu")return e?mwe:cwe;if(t==="relu6")return e?vwe:dwe;if(t==="prelu")return e?NV:xV;if(t==="leakyrelu")return e?wV:bV;if(t==="sigmoid")return e?ywe:pwe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SV{constructor(e,n,r,a=!1,i=!1,s=!1,o=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ya(this.outputShape.length);const c=a?e[1]:e[2],f=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",b="";o&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:l?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:y=`vec4 activation(vec4 x) {
          ${o}
        }`,b="result = activation(result);");const x=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let w="rc.x",S="rc.x";e[0]<n[0]?w=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${S};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${v[0]});
          result += (${m[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${x}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class V3{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ht(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3="return a * b;";function k$(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=vi(r.dtype,a.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),l=new V3(U3.REAL,r.shape,a.shape),c=new V3(U3.IMAG,r.shape,a.shape),f=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=Il({inputs:{real:d,imag:h},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([r,a])){const o=n.texData.get(r.dataId),u=n.texData.get(a.dataId),[l,c]=_be(r.shape,a.shape,o.values,u.values,i),f=n.makeTensorInfo(c,i),d=n.texData.get(f.dataId);return d.values=l,f}let s;return Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new op(W3,r.shape,a.shape):s=new Bc(W3,r.shape,a.shape),n.runWebGLProgram(s,[r,a],i)}const Fwe={kernelName:Um,backendName:"webgl",kernelFunc:k$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(t,e,n){const r=[_d(t.shape),...Od(t.shape)],a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[_d(e),...Od(e)],s=new yV(i,r),o=!0,u=[r],l=n.runWebGLProgram(s,[a],t.dtype,u,o);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function st(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{shape:i}=r,s=n,o=Oe(a.shape),u=WB(i,o),l=Oe(u);Y(o===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=s.texData.get(a.dataId);return c.isPacked&&!t1(a.shape,u)&&!(c.texture!==null&&t1(c.shape,u))?Rwe(a,u,s):(s.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype})}const Mwe={kernelName:Ab,backendName:"webgl",kernelFunc:st};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q3{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];const o=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const f=1/n;l=`sumValue += dot(values * ${Nd(f)?f.toPrecision(2):f}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${o};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pwe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:a,inSize:i,outSize:s}=e;this.outputShape=[a,s];let o="0.0",u="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",u="min"):n==="max"&&(o="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(o="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(o="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${f===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bwe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=dw(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Jc(t,e,n,r){const a=Bwe(t.shape);let i=t;for(let s=0;s<a.length;s++){const{inSize:o,windowSize:u,outSize:l}=a[s];let c,f;n==="mean"?c=s===0?new q3({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},o):new q3({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l}):c=new Pwe({windowSize:u,inSize:o,batchSize:t.shape[0],outSize:l},n),f=i,i=r.runWebGLProgram(c,[i],e),f.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(f)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lwe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.rank=r.length;const a=Fn(this.rank),i=zwe(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function zwe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uwe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=Fn(this.rank),i=vV("rc",this.rank),s=new Array(this.rank);for(let c=0;c<n.length;c++)s[n[c]]=i[c];const o=`vec2(${s.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aw(t,e,n){const r=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Uwe(t.shape,e):new Lwe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(t,e,n,r){const a=e,i=t.shape.length,s=an(a,t.shape);let o=s;const u=nr(o,i),l=u!=null;let c=t;l&&(c=Aw(t,u,r),o=pr(o.length,i)),ia("sum",o,i);const[f,d]=Wr(c.shape,o);let h=f;n&&(h=dr(f,s));const m=Oe(d),y=Oe(t.shape)/m,b=st({inputs:{x:c},attrs:{shape:[y,m]},backend:r}),x=OT(t.dtype),w=Jc(b,x,"sum",r),S=st({inputs:{x:w},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(w),l&&r.disposeIntermediateTensorInfo(c),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r;return Vwe(a,i,s,n)}const Wwe={kernelName:Rb,backendName:"webgl",kernelFunc:Iw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oa(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{perm:i}=r,s=n,o=a.shape.length,u=new Array(o);for(let c=0;c<u.length;c++)u[c]=a.shape[i[c]];let l;if(s.shouldExecuteOnCPU([a])){const f=s.texData.get(a.dataId).values,d=A$(f,a.shape,a.dtype,i,u);l=s.makeTensorInfo(u,a.dtype);const h=s.texData.get(l.dataId);h.values=d}else l=Aw(a,i,s);return l}const qwe={kernelName:id,backendName:"webgl",kernelFunc:Oa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV=1e3;function n1({a:t,b:e,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,f=n?t.shape[l-2]:t.shape[l-1],d=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[l-1]:t.shape[l-2],m=r?e.shape[c-2]:e.shape[c-1],v=t.shape.slice(0,-2),y=e.shape.slice(0,-2),b=Oe(v),x=Oe(y),S=Ht(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,m]);Y(f===d,()=>`Error in matMul: inner shapes (${f}) and (${d}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[b,f,h]:[b,h,f],E=r?[x,m,d]:[x,d,m],A=st({inputs:{x:t},backend:a,attrs:{shape:C}}),k=st({inputs:{x:e},backend:a,attrs:{shape:E}}),D=[A,k],I=Math.max(b,x),$=n?A.shape[1]:A.shape[2],O=i!=null,B=s!=null,z=u==="leakyrelu",L=u!=null?Qh(u,!0):null,F=O||B||z||L!=null;let R;if((h===1||m===1)&&$>CV&&F===!1){let M=A,G=k;n&&(M=Oa({inputs:{x:A},backend:a,attrs:{perm:[0,2,1]}}),D.push(M)),r&&(G=Oa({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),D.push(G));const q=m!==1,j=m===1;let H=M;q&&(H=st({inputs:{x:M},backend:a,attrs:{shape:[I,$,1]}}),D.push(H));const ne=m===1?2:1;let ue=G;j&&(ue=st({inputs:{x:G},backend:a,attrs:{shape:[I,1,$]}}),D.push(ue));const te=k$({inputs:{a:H,b:ue},backend:a});R=Iw({inputs:{x:te},backend:a,attrs:{axis:ne,keepDims:!0}}),D.push(te)}else{const M=vi(t.dtype,e.dtype),G=new SV(C,E,[I,h,m],n,r,O,L,B,z),q=[A,k];if(i!=null&&q.push(i),B&&q.push(s),z){const j=a.makeTensorInfo([],"float32",wl(o,"float32"));q.push(j),D.push(j)}R=a.runWebGLProgram(G,q,M)}const W=st({inputs:{x:R},backend:a,attrs:{shape:S}});D.push(R);for(const M of D)a.disposeIntermediateTensorInfo(M);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i,bias:s,preluActivationWeights:o}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return n1({a,b:i,transposeA:u,transposeB:l,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:f,activation:c})}const jwe={kernelName:k0,backendName:"webgl",kernelFunc:Hwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3="return abs(x);";function Gwe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),s=mV(i.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let a;return Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ju(r.shape,H3):a=new vo(r.shape,H3),n.runWebGLProgram(a,[r],r.dtype)}const Xwe={kernelName:z1,backendName:"webgl",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe=Ss+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ywe=yn({opSnippet:Kwe}),Zwe={kernelName:dm,backendName:"webgl",kernelFunc:Ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe=Ss+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Jwe=yn({opSnippet:Qwe}),exe={kernelName:pm,backendName:"webgl",kernelFunc:Jwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3="return a + b;",txe=oa({opSnippet:j3,packedOpSnippet:j3,supportsComplex:!0,cpuKernelImpl:fbe}),nxe={kernelName:Kd,backendName:"webgl",kernelFunc:txe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rxe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class axe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,s)=>`T${s}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ni({inputs:{x:r[0]},backend:n});if(r.length>Ae().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=p0({inputs:r.slice(0,u),backend:n}),c=p0({inputs:r.slice(u),backend:n});return p0({inputs:[l,c],backend:n})}const a=r.map(u=>u.dtype).reduce((u,l)=>vi(u,l)),i=r.map(u=>u.shape),o=Ae().getBool("WEBGL_PACK")?new axe(r[0].shape,i):new rxe(r[0].shape,i);return n.runWebGLProgram(o,r,a)}const ixe={kernelName:U1,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=an(i,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,o)),ia("all",l,o);const[d,h]=Wr(f.shape,l),m=Oe(h),v=st({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Jc(v,v.dtype,"all",n);let b;if(s){const x=dr(d,u);b=st({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=st({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const oxe={kernelName:AE,backendName:"webgl",kernelFunc:sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=an(i,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,o)),ia("any",l,o);const[d,h]=Wr(f.shape,l),m=Oe(h),v=st({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Jc(v,v.dtype,"any",n);let b;if(s){const x=dr(d,u);b=st({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=st({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const lxe={kernelName:IE,backendName:"webgl",kernelFunc:uxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cxe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:s}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];const o=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fxe{constructor(e,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Y(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],s=Math.ceil(i/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");const o=this.outputShape,u=o.length,l=Fn(u),c=ka("coords",u);let f,d;if(s===1){d=u+1;const k=Fn(d);f=`
        ${k} sourceLocR = ${k}(${c.join()}, 0);
        ++${c[u-1]};
        ${k} sourceLocG = ${k}(${c.join()}, 0);
        ++${c[u-2]};
        ${k} sourceLocA = ${k}(${c.join()}, 0);
        --${c[u-1]};
        ${k} sourceLocB = ${k}(${c.join()}, 0);
        --${c[u-2]};`}else d=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),m="."+h[d-1],v=h.map(k=>"int "+k),y=ka("sourceLocR",d-1).concat("inIdx.r"),b=ka("sourceLocG",d-1).concat("inIdx.g"),x=ka("sourceLocB",d-1).concat("inIdx.b"),w=ka("sourceLocA",d-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${w.join()})));`,E=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${x.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,A=a?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${o[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${o[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EV(t,e,n,r=null){let a=e.shape[0],i=e.shape[1];r!=null&&(a=r.shape[0],i=r.shape[1]);const s=dw(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},u=new cxe(o,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=EV(t,e,n,c);return t.disposeIntermediateTensorInfo(c),f}function TV(t,e,n,r=null){const a=r!=null?r.shape:e.shape,i=a[a.length-1],s=dw(i),o=new fxe(a,s,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(o,u,"int32");if(l.shape.length===e.shape.length){const c=TV(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function DV(t,e,n,r){const a=[n];if(ia("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!Ae().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],s=t.texData.get(e.dataId),o=s!==null&&s.isPacked;let u=e;o&&(u=t.unpackTensor(e),i.push(u));const[l,c]=Wr(u.shape,a),f=Oe(c),d=st({inputs:{x:u},backend:t,attrs:{shape:[-1,f]}});i.push(d);const h=EV(t,d,r);i.push(h);const m=st({inputs:{x:h},backend:t,attrs:{shape:l}});return i.forEach(v=>t.disposeIntermediateTensorInfo(v)),m}return TV(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=an(i,a.shape);const o=nr(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Oa({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=pr(s.length,u.shape.length)),ia("argMax",[s[0]],u.shape.length);const c=DV(n,u,s[0],"max");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const pxe={kernelName:V1,backendName:"webgl",kernelFunc:dxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i}=r;let s=an(i,a.shape);const o=nr(s,a.shape.length);let u=a;const l=[];o!=null&&(u=Oa({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(u),s=pr(s.length,u.shape.length)),ia("argMin",[s[0]],u.shape.length);const c=DV(n,u,s[0],"min");return l.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const mxe={kernelName:W1,backendName:"webgl",kernelFunc:hxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gxe=Ss+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,vxe=yn({opSnippet:gxe}),yxe={kernelName:hm,backendName:"webgl",kernelFunc:vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxe=Ss+"return log(x + sqrt(x * x + 1.0));",wxe=yn({opSnippet:bxe}),xxe={kernelName:mm,backendName:"webgl",kernelFunc:wxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nxe=Ss+`
  return atan(x);
`,Sxe=yn({opSnippet:Nxe}),Cxe={kernelName:gm,backendName:"webgl",kernelFunc:Sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Exe=I$+`
  return atan(a, b);
`,Txe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qc+`
  return result;
`,Dxe=oa({opSnippet:Exe,packedOpSnippet:Txe}),$xe={kernelName:ym,backendName:"webgl",kernelFunc:Dxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Axe=Ss+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ixe=yn({opSnippet:Axe}),kxe={kernelName:vm,backendName:"webgl",kernelFunc:Ixe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jh{constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,b=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let x="0.0";if(v||(x="-1.0 / 1e-20"),r){const k=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${u});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${k} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?y:b:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const C=Math.floor(s/4)*4,E=s%4,A=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${u});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${C};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${S});
      }
    `}}class _${constructor(e,n,r,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,o=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,m=e.effectiveFilterHeight,v=e.effectiveFilterWidth,y=e.padInfo.front,b=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const w=n==="avg";let S="0.0";if(w||(S="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${u}, ${l});
        const ivec3 pads = ivec3(${y}, ${b}, ${x});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let E=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(E="avgValue / max(count, 1.0)");const A=Math.floor(s/4)*4,k=s%4,D=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${u}, ${l});
      const ivec3 pads = ivec3(${y}, ${b}, ${x});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${D}
            }

            int xC = xCCorner + ${A};
            if (${k===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${k===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${D}
            } else if (${k===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${D}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ag(a,"avgPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(s,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=xs(a.shape,i,s,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))return Ni({inputs:{x:a},backend:n});const f=new Jh(c,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}const Oxe={kernelName:q1,backendName:"webgl",kernelFunc:_xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=du(a.shape,i,s,c,o,u,l),d=new _$(f,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const Rxe={kernelName:H1,backendName:"webgl",kernelFunc:Fxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mxe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,f=l-1-e.padInfo.left,d=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Pxe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=f-1-e.padInfo.front,v=d-1-e.padInfo.top,y=h-1-e.padInfo.left,b=1/(n*r*a);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${v}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=du(s.shape,o,u,f,l,c),h=new Pxe(d);return n.runWebGLProgram(h,[a],s.dtype)}const Lxe={kernelName:_E,backendName:"webgl",kernelFunc:Bxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i;Ag([a,i],"avgPoolGrad");const{filterSize:o,strides:u,pad:l}=r,c=xs(s.shape,o,u,1,l),f=new Mxe(c);return n.runWebGLProgram(f,[a],s.dtype)}const Uxe={kernelName:kE,backendName:"webgl",kernelFunc:zxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{a,b:i}=e,{transposeA:s,transposeB:o}=r;return n1({a,b:i,transposeA:s,transposeB:o,backend:n})}const Wxe={kernelName:j1,backendName:"webgl",kernelFunc:Vxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qxe{constructor(e,n,r,a,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],Ht(e,n),Ht(e,r);let o="0.0";a!=null&&(Ht(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="1.0";i!=null&&(Ht(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hxe{constructor(e,n,r,a,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ht(e,n),Ht(e,r);let o="vec4(0.0)";a!=null&&(Ht(e,a),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let u="vec4(1.0)";i!=null&&(Ht(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jxe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:a,variance:i,offset:s,scale:o}=t;Y(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Y(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Y(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,a,i];let c=null;s!=null&&(c=s.shape,l.push(s));let f=null;o!=null&&(f=o.shape,l.push(o));const d=Ae().getBool("WEBGL_PACK_NORMALIZATION")?new Hxe(r.shape,a.shape,i.shape,c,f,u):new qxe(r.shape,a.shape,i.shape,c,f,u);return e.runWebGLProgram(d,l,l[0].dtype)},Gxe={kernelName:ib,backendName:"webgl",kernelFunc:jxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xxe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Fn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=Kxe(this.rank);let a;const i=e.map((s,o)=>`sourceLoc.${PC[o]} = start[${o}] + coords.${PC[o]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${r}));
      }
    `}}const PC=["x","y","z","w","u","v"];function Kxe(t){if(t===1)return"sourceLoc";if(t<=6)return PC.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yxe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Fn(this.rank),r=ka("coords",this.rank),a=ka("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,s=`getChannel(getSource(${a.join()}), ${i})`,o=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${s};
        --${a[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${s};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${a[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${o}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zxe(t,e,n,r){const a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=t.dtype;let o=TD(e,Nt(t.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const u=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,u+1),i}function lp(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,size:s}=r,[o,u]=fw(a,i,s);if(SD(a,o,u),Oe(u)===0)return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const f=n.texData.get(a.dataId),d=Wbe(f.values,o,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,d)}const{isPacked:l}=n.texData.get(a.dataId),c=ED(a.shape,o,u);if(l||!c){const f=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yxe(u):new Xxe(u),d=[o];return n.runWebGLProgram(f,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),Zxe(a,o,u,n)}const Qxe={kernelName:Fb,backendName:"webgl",kernelFunc:lp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jxe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,crops:s}=r;Y(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((x,w)=>x*w),u=gg(a.shape,i,o),l=vg(u.length,i.length),c=yg(a.shape,i,o),f=kD(s,i.length),d=_D(c,s,i.length),h=[],m=st({inputs:{x:a},backend:n,attrs:{shape:u}}),v=Oa({inputs:{x:m},backend:n,attrs:{perm:l}}),y=st({inputs:{x:v},backend:n,attrs:{shape:c}}),b=lp({inputs:{x:y},backend:n,attrs:{begin:f,size:d}});return h.push(m),h.push(v),h.push(y),h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b},e2e={kernelName:G1,backendName:"webgl",kernelFunc:Jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s}=r,o=n.readSync(a.dataId),u=n.readSync(i.dataId),l=hV(o,u,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,l)}const n2e={kernelName:OE,backendName:"webgl",kernelFunc:t2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,a2e=`
  return float(int(a.r) & int(b.r));
`;function i2e(t){const{inputs:e,backend:n}=t,{a:r,b:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Ae().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||s===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(a.dataId).values,[c,f]=pbe(r.shape,a.shape,u,l,r.dtype),d=n.makeTensorInfo(f,r.dtype),h=n.texData.get(d.dataId);return h.values=c,d}let o;return i?o=new op(r2e,r.shape,a.shape,!1):o=new Bc(a2e,r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}const s2e={kernelName:X1,backendName:"webgl",kernelFunc:i2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t){const{inputs:e,backend:n}=t,{s0:r,s1:a}=e,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=Ht(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const u2e={kernelName:FE,backendName:"webgl",kernelFunc:o2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e="return float(a != b);",$V=oa({opSnippet:l2e,cpuKernelImpl:Fbe,dtype:"bool"}),c2e={kernelName:Nb,backendName:"webgl",kernelFunc:$V};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kg(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ni({inputs:{x:a.complexTensorInfos.real},backend:n})}const f2e={kernelName:pT,backendName:"webgl",kernelFunc:kg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e="return float(int(x));";function p2e(t,e){const n=new vo(t.shape,d2e),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BC(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dtype:i}=r;if(i==="complex64"){if(a.dtype==="complex64")return Ni({inputs:{x:a},backend:n});const s=Tr(a.shape),o=BC({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=Il({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),u}if(a.dtype==="complex64"){const s=kg({inputs:{input:a},backend:n}),o=BC({inputs:{x:s},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(s),o}if(!qB(a.dtype,i)){const s=Ni({inputs:{x:a},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const s=n.texData.get(a.dataId).values,[o,u,l]=hbe(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,u,l)}if(i==="int32")return p2e(a,n);if(i==="bool"){const s=n.makeTensorInfo([],"bool",ta("bool",1)),u=$V({inputs:{a,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),u}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const h2e={kernelName:bm,backendName:"webgl",kernelFunc:BC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3="return ceil(x);",m2e=yn({opSnippet:G3,packedOpSnippet:G3,cpuKernelImpl:mbe}),g2e={kernelName:wm,backendName:"webgl",kernelFunc:m2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v2e{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y2e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{clipValueMin:i,clipValueMax:s}=r;let o;Ae().getBool("WEBGL_PACK_CLIP")?o=new y2e(a.shape):o=new v2e(a.shape);const u=[[i],[s]];return n.runWebGLProgram(o,[a],a.dtype,u)}const w2e={kernelName:xm,backendName:"webgl",kernelFunc:b2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x2e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function N2e(t){const{inputs:e,backend:n}=t,{x:r}=e,a=n.texData.get(r.dataId),i=new x2e(r.shape),s=[X3(r,a.complexTensorInfos.real),X3(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}const S2e={kernelName:K1,backendName:"webgl",kernelFunc:N2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C2e{constructor(e){this.outputShape=[],this.outputShape=wo(e,1),this.variableNames=e.map((s,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let s=1;s<n.length;s++)n[s]=n[s-1]+e[s][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<n.length;s++){const o=n[s-1];r.push(`else if (yC < ${n[s]}) setOutput(getT${s}(yR, yC-${o}));`)}const a=n.length,i=n[n.length-1];r.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E2e{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wo(e,n);const r=this.outputShape,a=r.length,i=Fn(a),s=ka("coords",a),o=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((v,y)=>`T${y}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let v=1;v<u.length;v++)u[v]=u[v-1]+e[v][n];const l=o[n],c=o.slice(-2),f=o.join();let d=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let v=1;v<u.length;v++){const y=u[v-1];d+=`
        if (${l} < ${u[v]}  && ${l} >= ${u[v-1]}) {
          return getChannel(
            getT${v}(${Oy(o,l,y)}),
            vec2(${Oy(c,l,y)}));
        }`}const h=u.length,m=u[u.length-1];d+=`
        return getChannel(
          getT${h}(${Oy(o,l,m)}),
          vec2(${Oy(c,l,m)}));`,this.userCode=`
      float getValue(${o.map(v=>"int "+v)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[a-1]} = ${s[a-1]} + 1;
        if (${s[a-1]} < ${r[a-1]}) {
          result.g = getValue(${s});
        }

        ${s[a-2]} = ${s[a-2]} + 1;
        if (${s[a-2]} < ${r[a-2]}) {
          result.a = getValue(${s});
        }

        ${s[a-1]} = ${s[a-1]} - 1;
        if (${s[a-2]} < ${r[a-2]} &&
            ${s[a-1]} < ${r[a-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}}function Oy(t,e,n){const r=t.indexOf(e);return t.map((i,s)=>s===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(t){const{inputs:e,backend:n}=t,{input:r}=e,a=n.texData.get(r.dataId);return Ni({inputs:{x:a.complexTensorInfos.imag},backend:n})}const T2e={kernelName:JE,backendName:"webgl",kernelFunc:kw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(x=>kg({inputs:{input:x},backend:n})),m=t.map(x=>kw({inputs:{input:x},backend:n})),v=Nh(h,e,n),y=Nh(m,e,n),b=Il({inputs:{real:v,imag:y},backend:n});return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),m.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}let a=n.shouldExecuteOnCPU(t);if(r==="string"&&(a=!0),a){const h=t.map(S=>{const E=[-1,Oe(S.shape.slice(e))];return st({inputs:{x:S},backend:n,attrs:{shape:E}})}),m=h.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),v=wo(h.map(S=>S.shape),1),y=h[0].shape[0]===1,b=gbe(m,v,r,y),x=wo(t.map(S=>S.shape),e),w=n.makeTensorInfo(x,r,b);return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const i=t.filter(h=>Oe(h.shape)>0),s=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const h=s?new vo(t[0].shape,Lu):new ju(t[0].shape,Lu);return n.runWebGLProgram(h,t,r)}const o=Ae().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const h=[];for(let v=0;v<i.length;v+=o){const y=i.slice(v,v+o);h.push(Nh(y,e,n))}const m=Nh(h,e,n);for(const v of h)n.disposeIntermediateTensorInfo(v);return m}if(s){const h=new E2e(i.map(m=>m.shape),e);return n.runWebGLProgram(h,i,r)}const{tensors2D:u,outShape:l}=D2e(i,e,n),c=new C2e(u.map(h=>h.shape)),f=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const d=st({inputs:{x:f},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(f),d}function D2e(t,e,n){const r=wo(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>st({inputs:{x:i},attrs:{shape:[-1,Oe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r,i=an(a,e[0].shape)[0],s=e.map(l=>l.shape);$D(s,i);const o=wo(e.map(l=>l.shape),i);if(Oe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const u=e.filter(l=>Oe(l.shape)>0);return u.length===1?Ni({inputs:{x:u[0]},backend:n}):Nh(u,i,n)}const $2e={kernelName:Y1,backendName:"webgl",kernelFunc:AV};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IV{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,o=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,y=e.dataFormat==="channelsLast",b=y?1:2,x=y?2:3,w=y?3:1;let S="",C="";r&&(a?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const E=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${x}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${C}
        setOutput(result);
      }
    `}}class A2e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,d=e.filterHeight,h=e.filterWidth,m=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kV{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const s=e.padInfo.left,o=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<c;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(f+1)/2;y++){const b=y*2;if(d+=`
           xC = xCCorner + ${b*u};
           `,o===1){if(b<c&&(s%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,u===1&&b>0?d+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<c)){const x=s%2===0?TE(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${x};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,u>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:d+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):x===1?d+=`
                     xC${b+1} = xTexelC${b};
                     `:d+=`
                     xCOffset = xC + ${x};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<c&&(s%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<c&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<c&&(d+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<c&&(d+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<c&&(d+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let h="",m="";r&&(a?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I2e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ya(this.outputShape.length);const{dataFormat:r}=n,a=Pa(),i=r==="channelsLast",s=i?1:2,o=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${a.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function _V({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,f=u[0]*u[1]*u[2],d=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,v=!1;let y;const b=[];if(i!=null){const S=r1(i.shape,h);S!=null&&(i=st({inputs:{x:i},backend:r,attrs:{shape:S}}),b.push(i))}if(a!=null){const S=r1(a.shape,h);S!=null&&(a=st({inputs:{x:a},backend:r,attrs:{shape:S}}),b.push(a))}if(!((f===1||d===1)&&c>CV)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&fn(l.shape.slice(-3),u.slice(-3))){const S=u[0]*u[1]*(u[2]+1),C={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},E=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,Y(t1(l.shape,C.shape),()=>`packed reshape ${l.shape} to ${C.shape} isn't free`);const A=st({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(A);const k=n1({a:C,b:A,backend:r,transposeA:m,transposeB:v,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s}),D=r.texData.get(k.dataId);Y(D.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=E,D.shape=n.outShape,y=Ni({inputs:{x:k},backend:r}),y.shape=n.outShape,b.push(k)}else{const S=n.outHeight*n.outWidth,C=st({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),E=st({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),A=n1({a:h?C:E,b:h?E:C,transposeA:!h,transposeB:v,backend:r,bias:a,activation:o,preluActivationWeights:i,leakyreluAlpha:s});y=st({inputs:{x:A},backend:r,attrs:{shape:n.outShape}}),b.push(C),b.push(E),b.push(A)}for(const S of b)r.disposeIntermediateTensorInfo(S);return y}function OV({x:t,filter:e,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:o=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:d,dataFormat:h}=n,m=h==="channelsLast",v=u*l*c,y=d*f,b=[n.batchSize,v,y],x=!0,w=!1,S=[];if(i!=null){const W=r1(i.shape,m);W!=null&&(i=st({inputs:{x:i},backend:r,attrs:{shape:W}}),S.push(i))}if(a!=null){const W=r1(a.shape,m);W!=null&&(a=st({inputs:{x:a},backend:r,attrs:{shape:W}}),S.push(a))}const C=st({inputs:{x:e},backend:r,attrs:{shape:[1,v,Oe(e.shape)/v]}});S.push(C);const E=new I2e(b,n),A=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],k=r.runWebGLProgram(E,[t],"float32",A),D=st({inputs:{x:k},backend:r,attrs:{shape:b}});S.push(k),S.push(D);const I=a!=null,$=i!=null,O=o==="leakyrelu",B=o?Qh(o,!0):null,z=new SV(m?D.shape:C.shape,m?C.shape:D.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],x,w,I,B,$,O),L=m?[D,C]:[C,D];if(a&&L.push(a),$&&L.push(i),O){const W=r.makeTensorInfo([],"float32",wl(s,"float32"));L.push(W),S.push(W)}const F=r.runWebGLProgram(z,L,"float32"),R=st({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});S.push(F);for(const W of S)r.disposeIntermediateTensorInfo(W);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=pu(u),d=Vr(a.shape,i.shape,s,l,o,c,!1,f);let h;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))h=_V({x:a,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&f==="channelsLast"&&Ae().getBool("WEBGL_EXP_CONV")){const v=new kV(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];h=n.runWebGLProgram(v,[a,i],"float32",y)}else if(Ae().getBool("WEBGL_CONV_IM2COL"))h=OV({x:a,filter:i,convInfo:d,backend:n});else{const v=new IV(d);h=n.runWebGLProgram(v,[a,i],"float32")}const m=st({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),m}const _2e={kernelName:Z1,backendName:"webgl",kernelFunc:k2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class F2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=s?1:2,c=s?2:3,f=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class R2e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,s=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class M2e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,o=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=a-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=pu(u),d=Vr(a.shape,c,s,1,o,l,!1,f),h=new O2e(d);return n.runWebGLProgram(h,[a,i],"float32")}const B2e={kernelName:ME,backendName:"webgl",kernelFunc:P2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L2e{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ya(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,a=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{inputShape:s,strides:o,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=pu(l),d=Vr(s,i.shape,o,1,u,c,!1,f);if(Ae().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const h=[[d.strideHeight,d.strideWidth]],m=new L2e(d);return n.runWebGLProgram(m,[a,i],"float32",h)}else{const h=new F2e(d);return n.runWebGLProgram(h,[a,i],"float32")}}const U2e={kernelName:Q1,backendName:"webgl",kernelFunc:z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r,l=Sl(a.shape,i.shape,s,u,o),c=new A2e(l);return n.runWebGLProgram(c,[a,i],"float32")}const W2e={kernelName:J1,backendName:"webgl",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,pad:o,filterShape:u}=r,l=Sl(a.shape,u,s,1,o),c=new R2e(l);return n.runWebGLProgram(c,[a,i],"float32")}const H2e={kernelName:PE,backendName:"webgl",kernelFunc:q2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{pad:s,strides:o,inputShape:u}=r,l=Sl(u,i.shape,o,1,s),c=new M2e(l);return n.runWebGLProgram(c,[a,i],"float32")}const G2e={kernelName:BE,backendName:"webgl",kernelFunc:j2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e=up+`
  return cos(x);
`,K2e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Qc}
  return result;
`,Y2e=yn({opSnippet:X2e,packedOpSnippet:K2e}),Z2e={kernelName:Nm,backendName:"webgl",kernelFunc:Y2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,J2e=yn({opSnippet:Q2e}),eNe={kernelName:Sm,backendName:"webgl",kernelFunc:J2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tNe{constructor(e,n,r,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,u,l]=e,[c]=n,[f,d]=r;this.outputShape=[c,f,d,l];const h=a==="bilinear"?1:0,[m,v]=[`${o-1}.0`,`${u-1}.0`],[y,b,x]=f>1?[`${(o-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[w,S,C]=d>1?[`${(u-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${S};

        float in_y = ${x};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:a,boxes:i,boxInd:s}=e,{cropSize:o,method:u,extrapolationValue:l}=r,c=new tNe(a.shape,i.shape,o,u,l);return n.runWebGLProgram(c,[a,i,s],"float32")},rNe={kernelName:zE,backendName:"webgl",kernelFunc:nNe};var em;(function(t){t.Prod="*",t.Sum="+"})(em||(em={}));class K3{constructor(e,n,r,a){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,s=this.op===em.Prod?"1.0":"0.0",o=r?s:`getX(${Y3(i,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=a?`end != ${u-1}`:"end != 0",c=a?"end + 1":"end - 1"):(l=a?`end + pow2 < ${u}`:"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Fn(i)} coords = getOutputCoords();
        int end = ${Z3(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${Z3(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Y3(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Y3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Z3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FV(t,e,n,r,a,i){const s=e.shape.length,o=nr([r],s);let u=e;o!=null&&(u=Oa({inputs:{x:e},backend:n,attrs:{perm:o}}));const l=pr(1,s)[0];if(l!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=Ni({inputs:{x:u},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const h=new K3(t,u.shape,!1,i),m=[[d]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,m),n.disposeIntermediateTensorInfo(v)}if(a){const d=new K3(t,u.shape,a,i),h=f;f=n.runWebGLProgram(d,[f],f.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){const d=Cl(o),h=Oa({inputs:{x:f},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),h}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return FV(em.Prod,a,n,i,s,o)}const iNe={kernelName:LE,backendName:"webgl",kernelFunc:aNe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,exclusive:s,reverse:o}=r;return FV(em.Sum,a,n,i,s,o)}const oNe={kernelName:eb,backendName:"webgl",kernelFunc:sNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,weights:i}=e,{size:s,binaryOutput:o}=r;if(a.shape.length===1){const u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=hV(u,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}else if(a.shape.length===2){const u=n.bufferSync(a),l=n.bufferSync(i),c=dbe(u,l,s,o);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const lNe={kernelName:UE,backendName:"webgl",kernelFunc:uNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cNe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockSize:i,dataFormat:s}=r,o=a.shape[0],u=s==="NHWC"?a.shape[1]:a.shape[2],l=s==="NHWC"?a.shape[2]:a.shape[3],c=s==="NHWC"?a.shape[3]:a.shape[1],f=u*i,d=l*i,h=c/(i*i),m=s==="NHWC"?[o,f,d,h]:[o,h,f,d],v=new cNe(m,i,s);return n.runWebGLProgram(v,[a],a.dtype)}const dNe={kernelName:VE,backendName:"webgl",kernelFunc:fNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RV{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const s=e.filterHeight,o=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(a?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MV{constructor(e,n=!1,r=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ya(this.outputShape.length);const s=e.outChannels/e.inChannels,o=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=f;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<f;b++)h+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let b=0;b<f;b++)h+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(d+1)/2;b++){const x=b*2;if(h+=`
          xC = xCCorner + ${x*l};
          `,u===1){if(x<f&&(o%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }
              `,l===1&&x>0?h+=`
                xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                  } else {
                    xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xC${x} = xTexelC${x};
                `,x+1<f)){const w=o%2===0?TE(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                    xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${x+1}.zw = vec2(0.0);
                    }
                    xTexelC${x+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                    } else {
                     xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                    }
                    `:h+=`
                    xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                    `):w===1?h+=`
                    xC${x+1} = xTexelC${x};
                    `:h+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                      xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${x+1}.zw = vec2(0.0);
                      }
                      xTexelC${x+1}Ready = 1;
                    }

                    xC${x+1} = xTexelC${x+1};
                    `}}else x<f&&(o%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.0);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
              `,x+1<f&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                  xTexelC${x} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${x}.zw = vec2(0.0);
                  }
                  xTexelC${x}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                  xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${x+1}.zw = vec2(0.);
                  }
                  xTexelC${x+1}Ready = 1;
                }

                xC${x} = vec4(
                  xTexelC${x}.xy, xTexelC${x+1}.xy);
              `,x+1<f&&(h+=`
                  xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                `)));x<f&&(h+=`
            wTexel = getW(r, ${x}, d1, q);
            dotProd += xC${x} * vec4(wTexel.xz, wTexel.xz);
          `,x+1<f&&(h+=`
              wTexel = getW(r, ${x+1}, d1, q);
              dotProd += xC${x+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",v="";r&&(a?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),Y(aa(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const f=Vr(a.shape,i.shape,s,c,o,l,!0);let d;Ae().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?d=new MV(f):d=new RV(f);const h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",h)}const hNe={kernelName:tb,backendName:"webgl",kernelFunc:pNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mNe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class gNe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,dy:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,filterShape:c}=r,f=Vr(a.shape,c,s,o,u,l,!0),d=new mNe(f);return n.runWebGLProgram(d,[a,i],"float32")}const yNe={kernelName:WE,backendName:"webgl",kernelFunc:vNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,filter:i}=e,{strides:s,dilations:o,pad:u,dimRoundingMode:l,inputShape:c}=r,f=Vr(c,i.shape,s,o,u,l,!0),d=new gNe(f);return n.runWebGLProgram(d,[a,i],"float32")}const wNe={kernelName:qE,backendName:"webgl",kernelFunc:bNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xNe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t){const{inputs:e,backend:n}=t,{x:r}=e,a=[...r.shape,...r.shape],i=Oe(r.shape),s=st({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new xNe(i),u=n.runWebGLProgram(o,[s],s.dtype),l=st({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),l}const SNe={kernelName:HE,backendName:"webgl",kernelFunc:NNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CNe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:a,strideHeight:i,strideWidth:s,filterHeight:o,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:f,left:d}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${f}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ENe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i}=e,{strides:s,pad:o,dilations:u}=r,l=ug(a.shape,i.shape,s,o,"NHWC",u);let c;const f=new CNe(l);c=n.runWebGLProgram(f,[a,i],"float32");const d=st({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),d}const TNe={kernelName:nb,backendName:"webgl",kernelFunc:ENe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:a}=r,i=e,{allDims:s,summedDims:o,idDims:u}=zD(a,i.length);VD(s.length,u,i);const{path:l,steps:c}=WD(o,u),f=c.length;let d=null,h=s.length;const m=[];for(let v=0;v<f;++v){for(const y of c[v]){const{permutationIndices:b,expandDims:x}=UD(h,u[y]);let w;qD(b)?w=i[y]:(w=Oa({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),m.push(w));const S=w.shape.slice();for(let C=0;C<x.length;++C)S.splice(x[C],0,1);fn(w.shape,S)||(w=st({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),d===null?d=w:(d=k$({inputs:{a:w,b:d},backend:n}),m.push(d))}v<f-1&&(l[v]>=0&&(d=Iw({inputs:{x:d},backend:n,attrs:{axis:l[v]-(s.length-h),keepDims:!1}}),m.push(d)),h--)}for(const v of m)v!==d&&n.disposeIntermediateTensorInfo(v);return d}const $Ne={kernelName:jE,backendName:"webgl",kernelFunc:DNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe="return (x >= 0.0) ? x : (exp(x) - 1.0);",INe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,kNe=yn({opSnippet:ANe,packedOpSnippet:INe}),_Ne={kernelName:Em,backendName:"webgl",kernelFunc:kNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe="return (b >= 0.0) ? a : a * (b + 1.0);",FNe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,RNe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:a}=e,i=Ae().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new op(FNe,r.shape,a.shape):new Bc(ONe,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},MNe={kernelName:GE,backendName:"webgl",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe=`
  return vec4(equal(a, b));
`,BNe="return float(a == b);",LNe=oa({opSnippet:BNe,packedOpSnippet:PNe,dtype:"bool",cpuKernelImpl:vbe}),zNe={kernelName:rb,backendName:"webgl",kernelFunc:LNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${OD};
  float a1 = ${FD};
  float a2 = ${RD};
  float a3 = ${MD};
  float a4 = ${PD};
  float a5 = ${BD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,VNe=yn({opSnippet:UNe}),WNe={kernelName:Tm,backendName:"webgl",kernelFunc:VNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe=up+`
  return exp(x);
`,HNe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PV=yn({opSnippet:qNe,packedOpSnippet:HNe,cpuKernelImpl:ybe,dtype:"float32"}),jNe={kernelName:Dm,backendName:"webgl",kernelFunc:PV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(t){const{inputs:e,attrs:n,backend:r}=t,{dim:a}=n,{input:i}=e,s=i.shape.length,o=i.shape.slice();let u=a;return a<0&&(Y(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),u=s+a+1),o.splice(u,0,1),st({inputs:{x:i},backend:r,attrs:{shape:o}})}const GNe={kernelName:ab,backendName:"webgl",kernelFunc:LC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3="return exp(x) - 1.0;",XNe=yn({opSnippet:Q3,packedOpSnippet:Q3,cpuKernelImpl:bbe}),KNe={kernelName:$m,backendName:"webgl",kernelFunc:XNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J3{constructor(e,n,r){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${a}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BV(t,e,n){const r=n.texData.get(t.dataId),a=Oe(t.shape),i=t.shape[t.shape.length-1],s=a/i,o=st({inputs:{x:t},backend:n,attrs:{shape:[s,i]}}),u=o.shape,l=new J3("real",u,e),c=new J3("imag",u,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],d=n.runWebGLProgram(l,f,"float32"),h=n.runWebGLProgram(c,f,"float32"),m=Il({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);const v=st({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t){const{inputs:e,backend:n}=t,{input:r}=e;return BV(r,!1,n)}const ZNe={kernelName:XE,backendName:"webgl",kernelFunc:YNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QNe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _g(t){const{backend:e,attrs:n}=t,{shape:r,value:a}=n;let{dtype:i}=n;if(i=i||Gd(a),i==="string"){const s=fr(i,Oe(r));return s.fill(a),e.makeTensorInfo(r,i,s)}else{const s=new QNe(r,a),o=[[a]];return e.runWebGLProgram(s,[],i,o)}}const JNe={kernelName:KE,backendName:"webgl",kernelFunc:_g};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eSe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe={kernelName:YE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,a=new eSe(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eF="return floor(x);",nSe=yn({opSnippet:eF,packedOpSnippet:eF,cpuKernelImpl:wbe}),rSe={kernelName:Am,backendName:"webgl",kernelFunc:nSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,iSe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,sSe=oa({opSnippet:aSe,packedOpSnippet:iSe,dtype:"int32"}),oSe={kernelName:Im,backendName:"webgl",kernelFunc:sSe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uSe{constructor(e){this.variableNames=["A"];const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lSe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Pa(),[r,a]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cSe={kernelName:YQ,backendName:"webgl",kernelFunc:fSe};let zf,MN=Ae().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function fSe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:a}=e;const{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[u,l]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=[l,u],f=[l,u,i];if(o||s){const v=Ae().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(zf==null||v!==MN)&&(MN=v,zf=document.createElement("canvas").getContext("2d",{willReadFrequently:MN})),zf.canvas.width=u,zf.canvas.height=l,zf.drawImage(a,0,0,u,l),a=zf.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=Fi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const h=Ae().getBool("WEBGL_PACK")?new lSe(f):new uSe(f),m=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,v=pu(c),y=Vr(a.shape,i.shape,u,f,l,d,!1,v);let b;const x=[],w=s!=null,S=o!=null,C=h==="leakyrelu",E=()=>{const k=[a,i],D=(I,$)=>{if($==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const O=st({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return x.push(O),O}return I};if(w&&k.push(D(s,c)),S&&k.push(D(o,c)),C){const I=n.makeTensorInfo([],"float32",wl(m,"float32"));k.push(I),x.push(I)}return k};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=_V({x:a,filter:i,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else if(y.strideWidth<=2&&v==="channelsLast"&&Ae().getBool("WEBGL_EXP_CONV")){const k=h?Qh(h,!0):null,D=new kV(y,w,k,S,C),I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],$=E();b=n.runWebGLProgram(D,$,"float32",I)}else if(Ae().getBool("WEBGL_CONV_IM2COL"))b=OV({x:a,filter:i,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else{const k=h?Qh(h,!1):null,D=new IV(y,w,k,S,C),I=E();b=n.runWebGLProgram(D,I,"float32")}const A=st({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return x.push(b),x.forEach(k=>n.disposeIntermediateTensorInfo(k)),A}const pSe={kernelName:_0,backendName:"webgl",kernelFunc:dSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,filter:i,bias:s,preluActivationWeights:o}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:d,leakyreluAlpha:h}=r,m=[];let v=c;v==null&&(v=[1,1]),Y(aa(u,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${v}'`);const y=Vr(a.shape,i.shape,u,v,l,f,!0),b=Ae().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,x=d?Qh(d,b):null,w=[a,i],S=s!=null,C=o!=null,E=d==="leakyrelu";if(S&&w.push(s),C&&w.push(o),E){const I=n.makeTensorInfo([],"float32",wl(h,"float32"));w.push(I),m.push(I)}let A;b?A=new MV(y,S,x,C,E):A=new RV(y,S,x,C,E);const k=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],D=n.runWebGLProgram(A,w,"float32",k);return m.forEach(I=>n.disposeIntermediateTensorInfo(I)),D}const mSe={kernelName:O0,backendName:"webgl",kernelFunc:hSe};class gSe{constructor(e,n,r,a){this.sliceDim=e,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;const i=Fn(r.length);let s=`
    int index;`;for(let o=0;o<this.sliceDim;o++)s+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t){const{inputs:e,backend:n}=t,{params:r,indices:a}=e,i=a.shape,s=i[i.length-1],o=Oe(r.shape),[u,l,c,f]=ND(r,a),d=st({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),h=st({inputs:{x:r},backend:n,attrs:{shape:[Oe(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||r.dtype==="string"){const b=n.readSync(a.dataId),x=n.bufferSync(r),w=xbe(b,x,r.dtype,l,s,c,f,r.shape,o);return n.makeTensorInfo(u,r.dtype,w.values)}const m=new gSe(s,f,[l,c],r.shape),v=n.runWebGLProgram(m,[h,d],h.dtype),y=st({inputs:{x:v},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),y}const ySe={kernelName:ZE,backendName:"webgl",kernelFunc:vSe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bSe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Fn(this.rank),a=wSe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function wSe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let a=0;a<t.length;a++)a===2?r.push("index"):r.push(`${n[a]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,indices:i}=e,{axis:s,batchDims:o}=r,u=an(s,a.shape)[0];if(Ae().get("DEBUG")){const x=n.readSync(i.dataId),w=a.shape[u];for(let S=0;S<x.length;++S){const C=x[S];Y(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const l=jD(a,i,u,o),c=Oe(i.shape),f=[],d=st({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=st({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);const m=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const x=n.bufferSync(h),w=n.bufferSync(d),S=Nbe(w,x,m);return f.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(l.outputShape,S.dtype,S.values)}const v=new bSe(d.shape,m),y=n.runWebGLProgram(v,[d,h],d.dtype);f.push(y);const b=st({inputs:{x:y},backend:n,attrs:{shape:l.outputShape}});return f.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const xSe={kernelName:sb,backendName:"webgl",kernelFunc:LV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe="return float(a > b);",SSe=`
  return vec4(greaterThan(a, b));
`,CSe=oa({opSnippet:NSe,packedOpSnippet:SSe,cpuKernelImpl:Sbe,dtype:"bool"}),ESe={kernelName:ob,backendName:"webgl",kernelFunc:CSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TSe="return float(a >= b);",DSe=`
  return vec4(greaterThanEqual(a, b));
`,$Se=oa({opSnippet:TSe,packedOpSnippet:DSe,dtype:"bool",cpuKernelImpl:Cbe}),ASe={kernelName:km,backendName:"webgl",kernelFunc:$Se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(t){const{inputs:e,backend:n}=t,{input:r}=e;return BV(r,!0,n)}const kSe={kernelName:QE,backendName:"webgl",kernelFunc:ISe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se="return float(!isnan(x) && !isinf(x));",OSe=yn({opSnippet:_Se,dtype:"bool"}),FSe={kernelName:Om,backendName:"webgl",kernelFunc:OSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe="return float(isinf(x));",MSe=yn({opSnippet:RSe,dtype:"bool"}),PSe={kernelName:Fm,backendName:"webgl",kernelFunc:MSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe="return float(isnan(x));",LSe=yn({opSnippet:BSe,dtype:"bool"}),zSe={kernelName:Rm,backendName:"webgl",kernelFunc:LSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USe="return float(a < b);",VSe=`
  return vec4(lessThan(a, b));
`,WSe=oa({opSnippet:USe,packedOpSnippet:VSe,cpuKernelImpl:Ebe,dtype:"bool"}),qSe={kernelName:lb,backendName:"webgl",kernelFunc:WSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe="return float(a <= b);",jSe=`
  return vec4(lessThanEqual(a, b));
`,GSe=oa({opSnippet:HSe,packedOpSnippet:jSe,cpuKernelImpl:Tbe,dtype:"bool"}),XSe={kernelName:cb,backendName:"webgl",kernelFunc:GSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(t){const{backend:e,attrs:n}=t,{start:r,stop:a,num:i}=n,s=Dbe(r,a,i);return e.makeTensorInfo([s.length],"float32",s)}const YSe={kernelName:eT,backendName:"webgl",kernelFunc:KSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZSe=up+`
  return x < 0.0 ? 0./0. : log(x);
`,QSe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,JSe=yn({opSnippet:ZSe,packedOpSnippet:QSe,cpuKernelImpl:$be}),eCe={kernelName:Mm,backendName:"webgl",kernelFunc:JSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tCe=up+`
  return log(1.0 + x);
`,nCe=yn({opSnippet:tCe}),rCe={kernelName:Pm,backendName:"webgl",kernelFunc:nCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCe="return float(a >= 1.0 && b >= 1.0);",iCe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,sCe=oa({opSnippet:aCe,packedOpSnippet:iCe,dtype:"bool"}),oCe={kernelName:fb,backendName:"webgl",kernelFunc:sCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uCe="return float(!(x >= 1.0));",lCe=yn({opSnippet:uCe}),cCe={kernelName:db,backendName:"webgl",kernelFunc:lCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe="return float(a >= 1.0 || b >= 1.0);",dCe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,pCe=oa({opSnippet:fCe,packedOpSnippet:dCe,dtype:"bool"}),hCe={kernelName:pb,backendName:"webgl",kernelFunc:pCe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mCe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[];const s=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gCe{constructor(e,n,r,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=n,o=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${a}) * sum`;i===.5?u=`inversesqrt(${l})`:i===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{depthRadius:i,bias:s,alpha:o,beta:u}=r,l=Ae().getBool("WEBGL_PACK_NORMALIZATION")?new gCe(a.shape,i,s,o,u):new mCe(a.shape,i,s,o,u);return n.runWebGLProgram(l,[a],a.dtype)},yCe={kernelName:hb,backendName:"webgl",kernelFunc:vCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bCe{constructor(e,n,r,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wCe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a,y:i,dy:s}=e,{depthRadius:o,bias:u,alpha:l,beta:c}=r,f=new bCe(a.shape,o,u,l,c);return n.runWebGLProgram(f,[a,i,s],a.dtype)},xCe={kernelName:tT,backendName:"webgl",kernelFunc:wCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(t,e,n,r){const a=Oe(e),s=Oe(t.shape)/a,o=st({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),u=Jc(o,t.dtype,"max",r),l=st({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,u=an(i,a.shape);let l=u;const c=nr(l,o),f=c!=null,d=n.shouldExecuteOnCPU([a]);let h=a;if(f){if(d){const w=n.texData.get(h.dataId).values,S=new Array(o);for(let A=0;A<S.length;A++)S[A]=a.shape[c[A]];const C=A$(w,a.shape,a.dtype,c,S);h=n.makeTensorInfo(S,a.dtype);const E=n.texData.get(h.dataId);E.values=C}else h=Aw(a,c,n);l=pr(l.length,o)}ia("max",l,o);const[m,v]=Wr(h.shape,l);let y=m;s&&(y=dr(m,u));let b;if(d){const w=n.texData.get(h.dataId).values,S=Abe(w,Oe(v),y,a.dtype);b=n.makeTensorInfo(y,a.dtype);const C=n.texData.get(b.dataId);C.values=S}else b=NCe(h,v,y,n);return f&&n.disposeIntermediateTensorInfo(h),b}const SCe={kernelName:mb,backendName:"webgl",kernelFunc:zV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCe=I$+`
  return max(a, b);
`,ECe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qc+`
  return result;
`,TCe=oa({opSnippet:CCe,packedOpSnippet:ECe,cpuKernelImpl:Ibe}),DCe={kernelName:Bm,backendName:"webgl",kernelFunc:TCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;Ag(a,"maxPool");const{filterSize:i,strides:s,pad:o,dimRoundingMode:u}=r,l=1;Y(aa(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=xs(a.shape,i,s,l,o,u);if(c.filterWidth===1&&c.filterHeight===1&&fn(c.inShape,c.outShape))return Ni({inputs:{x:a},backend:n});const f=new Jh(c,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}const ACe={kernelName:gb,backendName:"webgl",kernelFunc:$Ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ICe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{filterSize:i,strides:s,pad:o,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=du(a.shape,i,s,c,o,l,u),d=new _$(f,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const kCe={kernelName:vb,backendName:"webgl",kernelFunc:ICe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ce{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,s=e.effectiveFilterWidth,o=i-1-e.padInfo.top,u=s-1-e.padInfo.left,l=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class OCe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.front,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,m=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${d}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i}=e,s=i,{filterSize:o,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],d=du(s.shape,o,u,f,l,c),h=new _$(d,"max",!0),m=n.runWebGLProgram(h,[s],s.dtype),v=new OCe(d),y=n.runWebGLProgram(v,[a,m],s.dtype);return n.disposeIntermediateTensorInfo(m),y}const RCe={kernelName:rT,backendName:"webgl",kernelFunc:FCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:a,input:i,output:s}=e,o=i;Ag([i,s],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,d=xs(o.shape,u,l,1,c,f),h=!0,m=new Jh(d,"max",h),v=n.runWebGLProgram(m,[o],o.dtype),y=new _Ce(d),b=n.runWebGLProgram(y,[a,v],o.dtype);return n.disposeIntermediateTensorInfo(v),b}const PCe={kernelName:nT,backendName:"webgl",kernelFunc:MCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(t,e,n,r){let a=new Jh(n,"max",!1);const i=r.runWebGLProgram(a,[t],"float32");a=new Jh(n,"max",!0,!0,e);const s=r.runWebGLProgram(a,[t],"float32");return[i,s]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCe={kernelName:aT,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:o}=e,u=n;Y(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];Y(aa(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=xs(r.shape,a,i,l,s),[f,d]=BCe(r,o,c,u);return[f,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCe(t,e,n,r){const a=Oe(e),s=Oe(t.shape)/a,o=st({inputs:{x:t},attrs:{shape:[s,a]},backend:r}),u=Jc(o,"float32","mean",r),l=st({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCe={kernelName:yb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:a,axis:i}=e,s=n,o=r.shape.length,u=an(i,r.shape);let l=u;const c=nr(l,o),f=c!=null,d=s.shouldExecuteOnCPU([r]),h=[];let m=r;if(f){if(d){const S=s.texData.get(m.dataId).values,C=new Array(o);for(let k=0;k<C.length;k++)C[k]=r.shape[c[k]];const E=A$(S,r.shape,r.dtype,c,C);m=s.makeTensorInfo(C,r.dtype);const A=s.texData.get(m.dataId);A.values=E}else m=Aw(r,c,s);h.push(m),l=pr(l.length,o)}ia("sum",l,o);const[v,y]=Wr(m.shape,l);let b=v;a&&(b=dr(v,u));const x=zCe(m,y,b,s);for(const w of h)s.disposeIntermediateTensorInfo(w);return x}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=an(i,a.shape);let l=u;const c=nr(l,o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),l=pr(l.length,a.shape.length)),ia("min",l,o);const[d,h]=Wr(f.shape,l),m=Oe(h),v=st({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=Jc(v,v.dtype,"min",n);let b;if(s){const x=dr(d,u);b=st({inputs:{x:y},backend:n,attrs:{shape:x}})}else b=st({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(f),b}const WCe={kernelName:bb,backendName:"webgl",kernelFunc:VCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qCe=I$+`
  return min(a, b);
`,HCe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Qc+`
  return result;
`,jCe=oa({opSnippet:qCe,packedOpSnippet:HCe,cpuKernelImpl:kbe}),GCe={kernelName:Lm,backendName:"webgl",kernelFunc:jCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XCe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,f)=>c[0]+e[f]+c[1]);const a=e.length,i=Fn(a),s=n.map(c=>c[0]).join(","),o=n.map((c,f)=>c[0]+e[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l=r==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KCe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,v)=>m[0]+e[v]+m[1]);const a=e.length,i=Fn(a),s=n.map(m=>m[0]).join(","),o=n.map((m,v)=>m[0]+e[v]).join(","),u=ka("rc",a),l=ka("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=r==="reflect"?0:1;let h="";if(a===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[a-1]} += 1;
        if(${c}) {
          ${m}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[a-2]} += 1;
        if(${u[a-2]} < ${this.outputShape[a-2]}) {
          ${m}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[a-1]} += 1;
          if(${c}) {
            ${m}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YCe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:a,mode:i}=n,s=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KCe(r.shape,a,i):new XCe(r.shape,a,i);return e.runWebGLProgram(s,[r],r.dtype)},ZCe={kernelName:wb,backendName:"webgl",kernelFunc:YCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QCe=`if (b == 0.0) return NAN;
  return mod(a, b);`,JCe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Qc+`
  return result;
`,eEe=oa({opSnippet:QCe,packedOpSnippet:JCe}),tEe={kernelName:zm,backendName:"webgl",kernelFunc:eEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nEe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rEe=`
if (a == b) {
  return 1.0;
};
return a / b;`,aEe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,UV=oa({opSnippet:rEe,packedOpSnippet:aEe,checkOutOfBounds:!0}),iEe={kernelName:Cm,backendName:"webgl",kernelFunc:UV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tF="return a - b;",VV=oa({opSnippet:tF,packedOpSnippet:tF,supportsComplex:!0,cpuKernelImpl:Qbe}),sEe={kernelName:ng,backendName:"webgl",kernelFunc:VV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WV(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{dim:i}=r,s=an([i],a.shape),o=zV({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),u=dr(o.shape,s),l=st({inputs:{x:o},backend:n,attrs:{shape:u}}),c=VV({inputs:{a,b:l},backend:n}),f=PV({inputs:{x:c},backend:n}),d=Iw({inputs:{x:f},backend:n,attrs:{axis:s,keepDims:!1}}),h=st({inputs:{x:d},backend:n,attrs:{shape:u}}),m=UV({inputs:{a:f,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}const oEe={kernelName:Bb,backendName:"webgl",kernelFunc:WV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:a}=e,{numSamples:i,seed:s,normalized:o}=r,u=o?a:WV({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new nEe(l,c,i),d=[[s]],h=n.runWebGLProgram(f,[u],"int32",d);return o||n.disposeIntermediateTensorInfo(u),h}const lEe={kernelName:iT,backendName:"webgl",kernelFunc:uEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cEe=Ss+`
  return -x;
`,fEe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function dEe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[s,o]=Obe(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let a;return Ae().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new ju(r.shape,fEe):a=new vo(r.shape,cEe),n.runWebGLProgram(a,[r],r.dtype)}const pEe={kernelName:xb,backendName:"webgl",kernelFunc:dEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hEe=mD;function mEe(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:f}=hEe(l,c,s,o,u);return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}const gEe={kernelName:sT,backendName:"webgl",kernelFunc:mEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vEe=gD;function yEe(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),{selectedIndices:d,validOutputs:h}=vEe(c,f,s,o,u,l);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const bEe={kernelName:oT,backendName:"webgl",kernelFunc:yEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wEe=vD;function xEe(t){Oi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:a,scores:i}=e,{maxOutputSize:s,iouThreshold:o,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=s,h=o,m=u,v=l,{selectedIndices:y,selectedScores:b}=wEe(c,f,d,h,m,v);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const NEe={kernelName:uT,backendName:"webgl",kernelFunc:xEe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SEe{constructor(e,n,r,a){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:a}=e,{dtype:i,depth:s,onValue:o,offValue:u}=r,l=Oe(a.shape),c=new SEe(l,s,o,u),f=st({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(c,[f],i);n.disposeIntermediateTensorInfo(f);const h=[...a.shape,s],m=st({inputs:{x:d},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),m},EEe={kernelName:Cb,backendName:"webgl",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const a=kg({inputs:{input:r},backend:n}),i=a1({inputs:{x:a},backend:n}),s=kw({inputs:{input:r},backend:n}),o=a1({inputs:{x:s},backend:n}),u=Il({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return _g({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const TEe={kernelName:Vb,backendName:"webgl",kernelFunc:a1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qV(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const a=kg({inputs:{input:r},backend:n}),i=qV({inputs:{x:a},backend:n}),s=kw({inputs:{input:r},backend:n}),o=a1({inputs:{x:s},backend:n}),u=Il({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),u}else return _g({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const DEe={kernelName:Sb,backendName:"webgl",kernelFunc:qV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t){const{inputs:e,backend:n,attrs:r}=t,{axis:a}=r;if(e.length===1)return LC({inputs:{input:e[0]},backend:n,attrs:{dim:a}});const i=e[0].shape,s=e[0].dtype;e.forEach(c=>{Ei(i,c.shape,"All tensors passed to stack must have matching shapes"),Y(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],u=e.map(c=>{const f=LC({inputs:{input:c},backend:n,attrs:{dim:a}});return o.push(f),f}),l=AV({inputs:u,backend:n,attrs:{axis:a}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const AEe={kernelName:Eb,backendName:"webgl",kernelFunc:$Ee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IEe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const a=e.length,i=Fn(a),s=n.map(l=>l[0]).join(","),o=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${s};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kEe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,y)=>v[0]+e[y]+v[1]);const a=e.length,i=Fn(a),s=n.map(v=>v[0]).join(","),o=n.map((v,y)=>v[0]+e[y]).join(","),u=ka("rc",a),l=ka("source",a),c=`${u[a-1]} < ${this.outputShape[a-1]}`,f=a===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${u[a-1]} += 1;
       if(${c}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${u[a-2]} += 1;
       if(${u[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${u[a-1]} += 1;
         if(${c}) {`],h=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let v=0,y=a===1?2:4;v<y;v++)m+=`
        ${d[v]}
        if (${h}) {
          result[${v}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${v}] = getChannel(getX(${l.join()}), ${f});
        }
      `;m+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HV=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{paddings:i,constantValue:s}=r;if(Oe(a.shape)===0){const l=i.map((c,f)=>c[0]+a.shape[f]+c[1]);return _g({backend:n,attrs:{shape:l,value:s,dtype:a.dtype}})}const o=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kEe(a.shape,i,s):new IEe(a.shape,i,s),u=[[s]];return n.runWebGLProgram(o,[a],a.dtype,u)},_Ee={kernelName:Tb,backendName:"webgl",kernelFunc:HV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OEe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,FEe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Qc+`
  return result;
`,REe=oa({opSnippet:OEe,packedOpSnippet:FEe}),MEe={kernelName:Vm,backendName:"webgl",kernelFunc:REe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{axis:i,keepDims:s}=r,o=a.shape.length,u=[],l=an(i,a.shape);let c=l;const f=nr(c,o);let d=a;f!=null&&(d=Oa({inputs:{x:a},backend:n,attrs:{perm:f}}),c=pr(c.length,o),u.push(d)),ia("prod",c,o);let h;if(n.shouldExecuteOnCPU([d])){const m=n.texData.get(d.dataId).values,{outVals:v,outShape:y,outDtype:b}=Rbe(d.shape,d.dtype,m,c);h=n.makeTensorInfo(y,b,v)}else{const[m,v]=Wr(d.shape,c),y=Oe(v),b=st({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),x=OT(a.dtype),w=Jc(b,x,"prod",n);h=st({inputs:{x:w},backend:n,attrs:{shape:m}}),u.push(b),u.push(w)}if(s){u.push(h);const m=dr(h.shape,l);h=st({inputs:{x:h},backend:n,attrs:{shape:m}})}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const BEe={kernelName:$b,backendName:"webgl",kernelFunc:PEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=e,{outputRaggedRank:o}=r,u=a.map(b=>n.readSync(b.dataId)),l=a.map(b=>b.shape),c=n.readSync(i.dataId),f=n.readSync(s.dataId),[d,h,m]=Mbe(u,l,c,i.shape,i.dtype,f,s.shape,o),v=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(m,i.dtype,h);return v.concat([y])}const zEe={kernelName:lT,backendName:"webgl",kernelFunc:LEe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t){const{inputs:e,backend:n}=t,{starts:r,limits:a,deltas:i}=e,s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=Pbe(s,r.shape,r.dtype,o,a.shape,u,i.shape),f=n.makeTensorInfo([l.length],"int32",l),d=n.makeTensorInfo([c.length],r.dtype,c);return[f,d]}const VEe={kernelName:cT,backendName:"webgl",kernelFunc:UEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=e,{rowPartitionTypes:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=n.readSync(s.dataId),d=o.map(y=>n.readSync(y.dataId)),h=o.map(y=>y.shape),[m,v]=Bbe(l,a.shape,c,i.shape,i.dtype,f,s.shape,d,h,u);return n.makeTensorInfo(m,i.dtype,v)}const qEe={kernelName:fT,backendName:"webgl",kernelFunc:WEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=t=>{const{backend:e,attrs:n}=t,{start:r,stop:a,step:i,dtype:s}=n,o=Lbe(r,a,i,s);return e.makeTensorInfo([o.length],s,o)},HEe={kernelName:dT,backendName:"webgl",kernelFunc:jV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jEe="return 1.0 / x;",GEe=yn({opSnippet:jEe}),XEe={kernelName:Wm,backendName:"webgl",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe=Ss+`
  return (x < 0.0) ? 0.0 : x;
`,YEe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ZEe=yn({opSnippet:KEe,packedOpSnippet:YEe}),QEe={kernelName:qm,backendName:"webgl",kernelFunc:ZEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JEe=Ss+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,eTe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,tTe=yn({opSnippet:JEe,packedOpSnippet:eTe}),nTe={kernelName:Hm,backendName:"webgl",kernelFunc:tTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[u,l]=o,c=Ae().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new aTe(a.shape,u,l,i,s):new rTe(a.shape,u,l,i,s);return n.runWebGLProgram(c,[a],"float32")}const sTe={kernelName:kb,backendName:"webgl",kernelFunc:iTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,u=[r&&s>1?a-1:a,r&&o>1?i-1:i],l=[r&&s>1?s-1:s,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new oTe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const lTe={kernelName:mT,backendName:"webgl",kernelFunc:uTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fTe{constructor(e,n,r,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,o,u,l]=e;this.outputShape=[s,n,r,l];const c=[a&&n>1?o-1:o,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],d=a?"0.5":"0.0";let h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a}=e,{alignCorners:i,halfPixelCenters:s,size:o}=r,[u,l]=o,c=Ae().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fTe(a.shape,u,l,i,s):new cTe(a.shape,u,l,i,s);return n.runWebGLProgram(c,[a],a.dtype)}const pTe={kernelName:Ib,backendName:"webgl",kernelFunc:dTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hTe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,s,o]=e,u=[r&&s>1?a-1:a,r&&o>1?i-1:i],l=[r&&s>1?s-1:s,r&&o>1?o-1:o],c=u[0]/l[0],f=u[1]/l[1],d=1/c,h=1/f,m=Math.ceil(d)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(t){const{inputs:e,backend:n,attrs:r}=t,{images:a,dy:i}=e,{alignCorners:s}=r,o=new hTe(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const gTe={kernelName:hT,backendName:"webgl",kernelFunc:mTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vTe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const a=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,u)=>a(u)).join(","),s=Fn(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yTe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const a=ka("rc",r),i=`${a[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${a[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Fn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(a.slice())};
          if(${i}){
            result.g = ${l(a.slice())};
          }
          if(${s}) {
            result.b = ${c(a.slice())};
            if(${i}) {
              result.a = ${f(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(m){return d(m)}function l(m){return m[r-1]="("+m[r-1]+" + 1)",d(m)}function c(m){return m[r-2]="("+m[r-2]+" + 1)",d(m)}function f(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",d(m)}function d(m){const v=e.map((x,w)=>h(w,m)),y=v.join(","),b=v.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function h(m,v){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${v[m]} - 1`:`${v[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{dims:i}=r,s=a.shape.length,o=an(i,a.shape);if(s===0)return Ni({inputs:{x:a},backend:n});const u=Ae().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yTe(a.shape,o):new vTe(a.shape,o);return n.runWebGLProgram(u,[a],a.dtype)}const wTe={kernelName:_b,backendName:"webgl",kernelFunc:bTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xTe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],a=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTe={kernelName:_T,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:a,fillValue:i,center:s}=e,o=n,u=new xTe(r.shape,i),[l,c]=ID(s,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const STe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,CTe=yn({opSnippet:STe}),ETe={kernelName:jm,backendName:"webgl",kernelFunc:CTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TTe="return inversesqrt(x);",DTe=yn({opSnippet:TTe,cpuKernelImpl:zbe}),$Te={kernelName:Gm,backendName:"webgl",kernelFunc:DTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O${constructor(e,n,r,a,i,s,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const l=Fn(i.length),c=Fn(s.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ATe{constructor(e,n,r,a,i,s,o=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const l=Fn(i.length),c=Fn(s.length);let f="";r===1?f="i":r===2&&(f="i, j");const d=`getIndices(${f})`;let h="";a===1?h="i":a===2&&(h="i, coords[1]");const m=`getUpdates(${h})`;let v="";u&&(v="coords[0], coords[1]");const y=`getDefaultValue(${v})`,b=n>1?"strides[j]":"strides",x=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${x};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:a,updates:i}=e,{shape:s}=r,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(i,a,s),d=[f/l,l];if(f===0)return n.makeTensorInfo(s,a.dtype);const h=st({inputs:{x:a},backend:n,attrs:{shape:[u,o]}}),m=st({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;Ae().getBool("WEBGL_PACK")?y=new ATe(u,o,h.shape.length,m.shape.length,c,d):y=new O$(u,o,h.shape.length,m.shape.length,c,d);const b=n.runWebGLProgram(y,[m,h,v],m.dtype),x=st({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v),x}const kTe={kernelName:gT,backendName:"webgl",kernelFunc:ITe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Te{constructor(e,n,r,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=Ae().getNumber("WEBGL_VERSION")===2?i:s,u=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:a,values:i}=e,{side:s}=r,o=new _Te(a.shape[0],a.shape[1],i.shape[1],s),u=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",u)}const FTe={kernelName:yT,backendName:"webgl",kernelFunc:OTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RTe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",a="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${o[c]}`),c<e&&u.push(`${o[c]}`);a=u.join(),i=l.join()}const s=Fn(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t){const{inputs:e,backend:n}=t,{condition:r,t:a,e:i}=e,s=new RTe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],vi(a.dtype,i.dtype))}const PTe={kernelName:Ob,backendName:"webgl",kernelFunc:MTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${pw};
  float scale = ${hw};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,LTe=yn({opSnippet:BTe}),zTe={kernelName:Xm,backendName:"webgl",kernelFunc:LTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UTe=up+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,VTe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,WTe=yn({opSnippet:UTe,packedOpSnippet:VTe,cpuKernelImpl:Vbe}),qTe={kernelName:Qm,backendName:"webgl",kernelFunc:WTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,jTe=yn({opSnippet:HTe}),GTe={kernelName:Zm,backendName:"webgl",kernelFunc:jTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XTe=up+`
  return sin(x);
`,KTe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Qc}
  return result;
`,YTe=yn({opSnippet:XTe,packedOpSnippet:KTe}),ZTe={kernelName:Km,backendName:"webgl",kernelFunc:YTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,JTe=yn({opSnippet:QTe}),eDe={kernelName:Ym,backendName:"webgl",kernelFunc:JTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tDe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,nDe=yn({opSnippet:tDe}),rDe={kernelName:Jm,backendName:"webgl",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{blockShape:i,paddings:s}=r;Y(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((b,x)=>b*x),u=[[0,0]];u.push(...s);for(let b=1+i.length;b<a.shape.length;++b)u.push([0,0]);const l=[],c=HV({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=gg(c.shape,i,o,!1),d=vg(f.length,i.length,!1),h=yg(c.shape,i,o,!1),m=st({inputs:{x:c},backend:n,attrs:{shape:f}}),v=Oa({inputs:{x:m},backend:n,attrs:{perm:d}}),y=st({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(c),l.push(m),l.push(v),l.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},iDe={kernelName:Mb,backendName:"webgl",kernelFunc:aDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t){const{inputs:e,backend:n}=t,{indices:r,values:a,denseShape:i,defaultValue:s}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);const o=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId)[0],[f,d,h,m,v]=qbe(o,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(d,r.dtype,f),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const oDe={kernelName:bT,backendName:"webgl",kernelFunc:sDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:a,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[l,c,f]=Hbe(o,r.shape,r.dtype,s,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}const lDe={kernelName:wT,backendName:"webgl",kernelFunc:uDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=gV(s,r.shape,r.dtype,o,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const fDe={kernelName:xT,backendName:"webgl",kernelFunc:cDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(t){const{inputs:e,backend:n}=t,{data:r,indices:a,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const s=n.readSync(r.dataId),o=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=gV(s,r.shape,r.dtype,o,u);return n.makeTensorInfo(c,r.dtype,l)}const pDe={kernelName:NT,backendName:"webgl",kernelFunc:dDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:a,sparseValues:i,defaultValue:s}=e,{outputShape:o}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:d}=Gc(i,a,o),h=!1;if(i.dtype==="string"){const b=n.bufferSync(a),x=n.bufferSync(i),w=al(n.readSync(s.dataId)[0]),S=Ube(b,x,o,d,c,l,u,f,w,h);return n.makeTensorInfo(o,S.dtype,S.values)}const m=new O$(l,u,a.shape.length,i.shape.length,f,[d,1],h),v=n.runWebGLProgram(m,[i,a,s],i.dtype),y=st({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),y}const mDe={kernelName:ST,backendName:"webgl",kernelFunc:hDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{numOrSizeSplits:i,axis:s}=r,o=an(s,a.shape)[0],u=HD(a,i,o),l=a.shape.length,c=new Array(l).fill(0),f=a.shape.slice();return u.map(d=>{const h=[...f];h[o]=d;const m=lp({inputs:{x:a},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,m})}const vDe={kernelName:Pb,backendName:"webgl",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nF="return sqrt(x);",yDe=yn({opSnippet:nF,packedOpSnippet:nF,cpuKernelImpl:jbe}),bDe={kernelName:eg,backendName:"webgl",kernelFunc:yDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wDe="return x * x;",xDe=yn({opSnippet:wDe}),NDe={kernelName:CT,backendName:"webgl",kernelFunc:xDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF="return (a - b) * (a - b);",SDe=oa({opSnippet:rF,packedOpSnippet:rF}),CDe={kernelName:tg,backendName:"webgl",kernelFunc:SDe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(a.dataId),s=uu(i),o=Gbe(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}const TDe={kernelName:Lb,backendName:"webgl",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe({inputs:t,attrs:e,backend:n}){const{x:r}=t,a=Ss+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new vo(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}const $De={kernelName:sg,backendName:"webgl",kernelFunc:DDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ADe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const a=r.length,i=Fn(r.length),s=Fn(r.length);let o="";if(a===1)o="coords * strides + begin";else{let u=0;o=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{begin:i,end:s,strides:o,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:m,isIdentity:v,sliceDim0:y,isSimpleSlice:b,begin:x,end:w,strides:S}=DD(a.shape,i,s,o,u,l,c,f,d);let C;if(v)C=st({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){Y(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const A=CD(x,w,S),k=lp({inputs:{x:a},backend:n,attrs:{begin:x,size:A}});C=st({inputs:{x:k},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(k)}else if(n.shouldExecuteOnCPU([a])){const k=n.readSync(a.dataId),D=en(a.shape,a.dtype,k),I=Xbe(h,D,S,x);C=n.makeTensorInfo(m,a.dtype,I.values)}else{const k=new ADe(x,S,h);C=n.runWebGLProgram(k,[a],a.dtype)}const E=st({inputs:{x:C},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(C),E}const kDe={kernelName:ET,backendName:"webgl",kernelFunc:IDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t){const{inputs:e,backend:n,attrs:r}=t,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,d=n.readSync(c.dataId),h=n.readSync(f.dataId),[m,v]=Kbe(d,h,a,i,s,o,u,l);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(f.shape,"int32",v)]}const ODe={kernelName:TT,backendName:"webgl",kernelFunc:_De};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:a}=r,{input:i,delimiter:s}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const o=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[l,c,f]=Ybe(o,u,a),d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}const RDe={kernelName:DT,backendName:"webgl",kernelFunc:FDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:a}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(i.dataId),o=Zbe(s,a);return n.makeTensorInfo(i.shape,"int32",o)}const PDe={kernelName:$T,backendName:"webgl",kernelFunc:MDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe="return tan(x);",LDe=yn({opSnippet:BDe}),zDe={kernelName:rg,backendName:"webgl",kernelFunc:LDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,VDe=yn({opSnippet:UDe}),WDe={kernelName:ag,backendName:"webgl",kernelFunc:VDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:a,indices:i,updates:s}=e,{sliceRank:o,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Gc(s,i,a.shape),d=[f/l,l];if(f===0)return n.makeTensorInfo(a.shape,i.dtype);const h=st({inputs:{x:i},backend:n,attrs:{shape:[u,o]}}),m=st({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),v=st({inputs:{x:a},backend:n,attrs:{shape:d}}),y=new O$(u,o,h.shape.length,m.shape.length,c,d,!1,!0),b=n.runWebGLProgram(y,[m,h,v],v.dtype),x=st({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),x}const HDe={kernelName:vT,backendName:"webgl",kernelFunc:qDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jDe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.rank=r.length;const a=Fn(this.rank),i=GDe(e);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function GDe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<t.length;a++)r.push(`imod(${n[a]}, ${t[a]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GV(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{reps:i}=r;if(a.dtype==="string"||a.shape.length>5){const u=n.readSync(a.dataId),l=a.dtype==="string"?u.map(d=>al(d)):u,c=en(a.shape,a.dtype,l),f=Jbe(c,i);return n.makeTensorInfo(f.shape,f.dtype,f.values)}const s=new jDe(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}const XDe={kernelName:ig,backendName:"webgl",kernelFunc:GV};class KDe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class YDe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ic(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function aF(t){let e=1;for(;e<t;)e*=2;return e}function ZDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:a}=e,{k:i,sorted:s}=r,o=Ae().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Ae().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<o||i>u){const I=n.readSync(a.dataId),[$,O]=ewe(I,l,a.dtype,i,s);return[n.makeTensorInfo($.shape,$.dtype,$.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(i===0)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[a,_g({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const f=n.texData.get(a.dataId),d=f!==null&&f.isPacked,h=d?n.unpackTensor(a):a,v=Oe(l)/c,y=st({inputs:{x:h},attrs:{shape:[v,c]},backend:n});d&&ic(n,h);const b=aF(i),x=aF(c);let w=null;const S=()=>w===null?[y,y]:[y,w],C=(I,$,O)=>{const B=S(),z=new KDe(O),F=[[c],[w===null?1:0],[Number.NEGATIVE_INFINITY],[I],[$]],R=w;w=n.runWebGLProgram(z,B,"int32",F),ic(n,R)};for(let I=1;I<b;I*=2){const $=I*2;for(let O=I;O>=1;O/=2)C($,O,[v,x])}for(let I=x;I>b;I/=2){const $=S(),O=new YDe([v,I/2]),z=[[c],[w===null?1:0],[b]],L=w;w=n.runWebGLProgram(O,$,"int32",z),ic(n,L);const F=b/2,R=F*2;for(let W=F;W>=1;W/=2)C(R,W,w.shape)}let E=w;w=lp({inputs:{x:w},backend:n,attrs:{begin:0,size:[v,i]}}),ic(n,E);let A=LV({inputs:{x:y,indices:w},backend:n,attrs:{axis:1,batchDims:1}});ic(n,y);const k=l.slice(0,-1);k.push(i),E=w,w=st({inputs:{x:w},attrs:{shape:k},backend:n}),ic(n,E);const D=A;return A=st({inputs:{x:A},attrs:{shape:k},backend:n}),ic(n,D),[A,w]}const QDe={kernelName:AT,backendName:"webgl",kernelFunc:ZDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JDe{constructor(e,n,r,a,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const o=r==="nearest"?1:2;let u;switch(a){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t){const{inputs:e,backend:n,attrs:r}=t,{image:a,transforms:i}=e,{interpolation:s,fillMode:o,fillValue:u,outputShape:l}=r,[c,f,d,h]=a.shape,[m,v]=l??[f,d],y=[c,m,v,h],b=new JDe(f,d,s,o,u,y);return n.runWebGLProgram(b,[a,i],"float32")}const t$e={kernelName:IT,backendName:"webgl",kernelFunc:e$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:a}=n,{x:i}=e;Ag(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(i.dataId),{outputValues:o,outputShape:u,indices:l}=twe(s,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,o),r.makeTensorInfo([l.length],"int32",l)]}const r$e={kernelName:kT,backendName:"webgl",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){const{inputs:e,backend:n,attrs:r}=t,{value:a}=e;let{axis:i}=r;i<0&&(i+=a.shape.length);const s=a,o=s.shape.length,u=a.shape[i],l=new Array(o-1);let c=0;for(let v=0;v<o;v++)v!==i&&(l[c++]=s.shape[v]);const f=[],d=new Array(o).fill(0),h=s.shape.slice();h[i]=1;const m=new Array(u);for(let v=0;v<m.length;v++){d[i]=v;const y=lp({inputs:{x:s},backend:n,attrs:{begin:d,size:h}}),b=st({inputs:{x:y},backend:n,attrs:{shape:l}});m[v]=b,f.push(y)}return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}const i$e={kernelName:zb,backendName:"webgl",kernelFunc:a$e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s$e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,a=e.batchSize,i=e.inSize,s=e.numSegments,o=s*Math.ceil(i/r);this.outputShape=[a,o];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,d=`
        sumValue += dot(values, segFilter);
    `;let h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:a,segmentIds:i}=e,{numSegments:s}=r,o=a.shape.length,u=[];let l=0;const c=nr([l],o);let f=a;c!=null&&(f=Oa({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(f),l=pr(1,o)[0]);const d=C5(f.shape,l,s),h=Oe([f.shape[l]]),m=st({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(m);const v=OT(a.dtype),y=(S,C,E,A,k)=>{const D=S.shape[0],I=S.shape[1],$=S5(I,k),O={windowSize:$,inSize:I,batchSize:D,numSegments:k},B=new s$e(O,C),z=n.compileAndRun(B,[S,E],A);if(u.push(z),z.shape[1]===k)return z;const L=jV({backend:n,attrs:{start:0,stop:k,step:1,dtype:"float32"}}),F=GV({inputs:{x:L},backend:n,attrs:{reps:[I/$]}});return u.push(L),u.push(F),y(z,C,F,A,k)},b=y(m,"unsortedSegmentSum",i,v,s),x=st({inputs:{x:b},backend:n,attrs:{shape:d}});let w=x;if(c!=null){u.push(x);const S=Cl(c);w=Oa({inputs:{x:w},backend:n,attrs:{perm:S}})}return u.forEach(S=>n.disposeIntermediateTensorInfo(S)),w}const u$e={kernelName:Ub,backendName:"webgl",kernelFunc:o$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l$e=[jwe,Xwe,Zwe,exe,nxe,ixe,oxe,lxe,pxe,mxe,yxe,xxe,Cxe,$xe,kxe,Oxe,Rxe,Lxe,Uxe,Wxe,Gxe,e2e,n2e,s2e,u2e,h2e,g2e,w2e,Awe,S2e,$2e,_2e,B2e,U2e,W2e,H2e,G2e,Z2e,eNe,rNe,iNe,oNe,lNe,dNe,hNe,yNe,wNe,SNe,TNe,$Ne,_Ne,MNe,zNe,WNe,jNe,GNe,KNe,ZNe,JNe,tSe,rSe,oSe,cSe,pSe,mSe,ySe,xSe,ESe,ASe,$we,kSe,T2e,FSe,PSe,zSe,kwe,qSe,XSe,YSe,eCe,rCe,oCe,cCe,hCe,yCe,xCe,SCe,DCe,ACe,kCe,RCe,PCe,LCe,UCe,WCe,GCe,ZCe,tEe,lEe,Fwe,pEe,gEe,bEe,NEe,c2e,EEe,DEe,AEe,_Ee,MEe,Owe,BEe,zEe,VEe,qEe,HEe,f2e,iEe,XEe,QEe,nTe,Mwe,sTe,lTe,pTe,gTe,wTe,NTe,ETe,$Te,kTe,FTe,PTe,zTe,qTe,GTe,ZTe,eDe,Qxe,oEe,rDe,iDe,oDe,lDe,fDe,pDe,mDe,vDe,bDe,NDe,CDe,TDe,$De,kDe,ODe,RDe,PDe,sEe,Wwe,zDe,WDe,HDe,XDe,QDe,t$e,qwe,r$e,i$e,u$e,TEe];for(const t of l$e)KB(t);const iF=[{question:"Hola",answer:"Hola! En qu puedo ayudarte?"},{question:"Qu tal?",answer:"Todo bien! Y t?"},{question:"Buenas tardes",answer:"Buenas tardes. En qu te puedo ayudar?"},{question:"Buenas noches",answer:"Buenas noches. Cmo puedo asistirte?"},{question:"Qu onda?",answer:"Hola! Qu tal tu da?"},{question:"Quin eres?",answer:"Soy un asistente virtual creado para ayudarte con tus dudas y consultas."},{question:"Qu eres?",answer:"Soy un chatbot, un programa diseado para responder tus preguntas y mantener conversaciones."},{question:"Eres humano?",answer:"No, soy una inteligencia artificial, pero estoy aqu para ayudarte como si lo fuera."},{question:"Quin te cre?",answer:"Fui creada por un desarrollador apasionado por la tecnologa y el aprendizaje automtico."},{question:"Cmo te llamas?",answer:"No tengo un nombre propio, pero puedes llamarme tu asistente virtual."},{question:"Eres inteligente?",answer:"Hago lo mejor que puedo con la informacin que tengo. Estoy aprendiendo contigo!"},{question:"Qu es TensorFlow?",answer:"TensorFlow es una biblioteca de machine learning desarrollada por Google."},{question:"Qu es React?",answer:"React es una biblioteca de JavaScript para construir interfaces de usuario."},{question:"Qu es JavaScript?",answer:"JavaScript es un lenguaje de programacin utilizado para el desarrollo web."},{question:"Qu es una API?",answer:"Una API es un conjunto de definiciones y protocolos que permiten a las aplicaciones comunicarse entre s."},{question:"Qu es una base de datos?",answer:"Una base de datos es un sistema que almacena y organiza datos para su fcil acceso."},{question:"Qu es una red neuronal?",answer:"Una red neuronal es un modelo computacional inspirado en el cerebro humano."},{question:"Qu es HTML?",answer:"HTML es un lenguaje de marcado utilizado para crear la estructura de las pginas web."},{question:"Qu es CSS?",answer:"CSS es un lenguaje que se utiliza para disear y estilizar pginas web."},{question:"Qu es machine learning?",answer:"Machine learning es una rama de la inteligencia artificial que permite a las mquinas aprender de datos."},{question:"Cmo funciona esta IA?",answer:"Esta IA utiliza un modelo de machine learning para entender tus consultas."},{question:"Qu puedes hacer?",answer:"Puedo responder preguntas sobre tecnologa y ayudarte con dudas comunes."},{question:"Quin te cre?",answer:"Fui creada por un desarrollador que quiere ayudarte con tus consultas."},{question:"Cmo puedo aprender JavaScript?",answer:"Puedes comenzar con recursos en lnea como MDN Web Docs o plataformas como freeCodeCamp."},{question:"Dnde puedo aprender sobre machine learning?",answer:"Puedes aprender sobre machine learning en sitios como Coursera, edX o TensorFlow.org."},{question:"Cmo ests?",answer:"Estoy aqu para ayudarte con tus dudas."},{question:"Ests bien?",answer:"Claro que s! En qu puedo asistirte hoy?"},{question:"Cmo te sientes?",answer:"Me siento genial ayudndote con tus consultas."},{question:"Eres feliz?",answer:"Por supuesto! Mi felicidad es ayudarte."},{question:"Qu da es hoy?",answer:`Hoy es ${new Date().toLocaleDateString()}.`},{question:"Qu hora es?",answer:`Ahora mismo son aproximadamente las ${new Date().toLocaleTimeString()}.`},{question:"Qu puedo cocinar?",answer:"Qu tal una pasta sencilla o un arroz con pollo? Si necesitas recetas, puedo buscarte opciones."},{question:"Cmo est el clima?",answer:"No puedo verificar el clima directamente, pero puedes consultarlo en tu app favorita."},{question:"Qu me recomiendas para ver?",answer:"Depende de tus gustos. Si te gustan las series, prueba algo en Netflix o Prime Video. Te gusta la accin o el drama?"},{question:"Qu hago si estoy aburrido?",answer:"Puedes leer un libro, aprender algo nuevo o ver una pelcula interesante. Qu te gusta hacer?"},{question:"Cmo puedo ahorrar dinero?",answer:"Intenta llevar un presupuesto mensual, evita compras impulsivas y busca ofertas en lo que necesites."},{question:"Cmo puedo organizarme mejor?",answer:"Haz listas de tareas, utiliza una agenda y prioriza las actividades ms importantes."},{question:"Qu es bueno para el estrs?",answer:"El ejercicio, la meditacin y dormir bien pueden ayudarte a reducir el estrs. Te gustara ms consejos?"},{question:"Cmo mejorar mi salud?",answer:"Come saludable, haz ejercicio regularmente y mantn una buena hidratacin."},{question:"Cul es el animal ms rpido?",answer:"El guepardo es el animal terrestre ms rpido, alcanzando hasta 112 km/h."},{question:"Cuntos planetas hay?",answer:"Hay 8 planetas en nuestro sistema solar. Plutn es considerado un planeta enano."},{question:"Qu tan grande es el Sol?",answer:"El Sol tiene un dimetro de aproximadamente 1,39 millones de kilmetros. Es enorme!"},{question:"Quin invent la bombilla?",answer:"Thomas Edison es reconocido por inventar la bombilla incandescente."},{question:"Mi computadora no enciende",answer:"Revisa si est conectada correctamente a la corriente y asegrate de que el botn de encendido funcione."},{question:"No puedo conectarme a internet",answer:"Verifica tu conexin Wi-Fi, reinicia tu router y asegrate de que el servicio est activo."},{question:"Por qu mi pgina web no carga?",answer:"Revisa tu conexin a internet, limpia el cach del navegador o intenta con otro navegador."},{question:"Adis",answer:"Hasta pronto! Que tengas un buen da."},{question:"adios",answer:"Hasta pronto! Que tengas un buen da."},{question:"Nos vemos",answer:"Claro! Espero verte de nuevo."},{question:"Gracias",answer:"De nada! Estoy aqu para ayudarte siempre que lo necesites."},{question:"Chao",answer:"Adis! Cudate."},{question:"Qu libro me recomiendas?",answer:"Si te gusta la ficcin, prueba 'Cien aos de soledad' de Gabriel Garca Mrquez o 'El Principito' de Antoine de Saint-Exupry."},{question:"Qu pelcula me recomiendas?",answer:"Si te gustan los clsicos, prueba 'Forrest Gump'. Para algo reciente, prueba 'Dune'."},{question:"Qu msica puedo escuchar?",answer:"Depende de tu estilo. Si buscas algo tranquilo, prueba msica instrumental o jazz. Si quieres algo animado, prueba pop o reguetn."},{question:"Cmo puedo aprender un idioma?",answer:"Usa apps como Duolingo, mira pelculas en ese idioma y practica hablando con nativos."},{question:"Qu deporte es bueno para m?",answer:"Elige algo que disfrutes. Puede ser caminar, nadar o incluso yoga. La clave es moverte!"},{question:"Qu es bueno para la piel?",answer:"Usa protector solar, mantente hidratado y limpia tu piel regularmente."},{question:"Qu es un algoritmo?",answer:"Un algoritmo es un conjunto de pasos o instrucciones para resolver un problema o realizar una tarea."},{question:"Qu es un modelo preentrenado?",answer:"Es un modelo de machine learning que ya ha sido entrenado en un conjunto de datos y puede ser reutilizado para tareas especficas."},{question:"Qu es inteligencia artificial?",answer:"La inteligencia artificial es una rama de la informtica que busca crear sistemas capaces de realizar tareas que normalmente requieren inteligencia humana."},{question:"Qu es big data?",answer:"Big data se refiere a grandes volmenes de datos que no pueden ser procesados con herramientas tradicionales debido a su tamao y complejidad."},{question:"Qu es un framework?",answer:"Un framework es una estructura o entorno predefinido que facilita el desarrollo de aplicaciones."},{question:"Qu es el aprendizaje profundo?",answer:"El aprendizaje profundo es una subrama del machine learning que utiliza redes neuronales con muchas capas."},{question:"Qu es un chatbot?",answer:"Un chatbot es un programa diseado para simular conversaciones con usuarios."},{question:"Qu es GitHub?",answer:"GitHub es una plataforma para alojar y colaborar en proyectos de desarrollo de software utilizando control de versiones con Git."}];function Br(){return Br=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Br.apply(null,arguments)}var XV={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function ja(t,e){if(i1(t,e))return t[e];throw typeof t[e]=="function"&&F$(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Fd(t,e,n){if(i1(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function i1(t,e){return!f$e(t)&&!Array.isArray(t)?!1:pt(d$e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function c$e(t,e){if(!F$(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function F$(t,e){return t==null||typeof t[e]!="function"||pt(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:pt(p$e,e)?!0:!(e in Object.prototype||e in Function.prototype)}function f$e(t){return typeof t=="object"&&t&&t.constructor===Object}var d$e={length:!0,name:!0},p$e={toString:!0,valueOf:!0,toLocaleString:!0};class _w{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return ja(this.wrappedObject,e)}set(e,n){return Fd(this.wrappedObject,e,n),this}has(e){return i1(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return YV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){i1(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class KV{constructor(e,n,r){this.a=e,this.b=n,this.bKeys=r,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,n){return this.bKeys.has(e)?this.b.set(e,n):this.a.set(e,n),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return YV(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function YV(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function tm(){return new Map}function dd(t){if(!t)return tm();if(QV(t))return t;if(Fw(t))return new _w(t);throw new Error("createMap can create maps from objects or Maps")}function h$e(t){if(t instanceof _w)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);Fd(e,n,r)}return e}function qt(t){return typeof t=="number"}function jt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function m$e(t){return typeof t=="bigint"}function eu(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Og(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function is(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Ia(t){return typeof t=="string"}var $n=Array.isArray;function $t(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function ws(t){return Array.isArray(t)||$t(t)}function s1(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function vc(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function R$(t){return t&&t.constructor.prototype.isRange===!0||!1}function Ow(t){return t&&t.constructor.prototype.isIndex===!0||!1}function g$e(t){return typeof t=="boolean"}function v$e(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function ZV(t){return t&&t.constructor.prototype.isHelp===!0||!1}function y$e(t){return typeof t=="function"}function b$e(t){return t instanceof Date}function w$e(t){return t instanceof RegExp}function Fw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!eu(t)&&!Og(t))}function QV(t){return t?t instanceof Map||t instanceof _w||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function x$e(t){return t===null}function N$e(t){return t===void 0}function Lc(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function as(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function S$e(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function C$e(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function E$e(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function cn(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function zC(t){return cn(t)||br(t)&&t.args.length===1&&cn(t.args[0])&&"-+~".includes(t.op)}function Fg(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ml(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function cp(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function An(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function br(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function lu(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function T$e(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function D$e(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ea(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function JV(t){return t&&t.constructor.prototype.isChain===!0||!1}function Ln(t){var e=typeof t;return e==="object"?t===null?"null":jt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function zt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return zt(n)});if(t instanceof Date)return new Date(t.valueOf());if(jt(t))return t;if(Fw(t))return $$e(t,zt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function $$e(t,e){var n={};for(var r in t)pt(t,r)&&(n[r]=e(t[r]));return n}function eW(t,e){for(var n in e)pt(e,n)&&(t[n]=e[n]);return t}function cu(t,e){var n,r,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,a=t.length;r<a;r++)if(!cu(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!cu(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function A$e(t,e,n){var r=!0,a;Object.defineProperty(t,e,{get:function(){return r&&(a=n(),r=!1),a},set:function(s){a=s,r=!1},configurable:!0,enumerable:!0})}function pt(t,e){return t&&Object.hasOwnProperty.call(t,e)}function I$e(t,e){for(var n={},r=0;r<e.length;r++){var a=e[r],i=t[a];i!==void 0&&(n[a]=i)}return n}var k$e=["Matrix","Array"],_$e=["number","BigNumber","Fraction"],Ve=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(XV)};Br(Ve,XV,{MATRIX_OPTIONS:k$e,NUMBER_OPTIONS:_$e});function sF(){return!0}function Ji(){return!1}function Uf(){}const oF="Argument is not a typed-function.";function tW(){function t(re){return typeof re=="object"&&re!==null&&re.constructor===Object}const e=[{name:"number",test:function(re){return typeof re=="number"}},{name:"string",test:function(re){return typeof re=="string"}},{name:"boolean",test:function(re){return typeof re=="boolean"}},{name:"Function",test:function(re){return typeof re=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(re){return re instanceof Date}},{name:"RegExp",test:function(re){return re instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(re){return re===null}},{name:"undefined",test:function(re){return re===void 0}}],n={name:"any",test:sF,isAny:!0};let r,a,i=0,s={createCount:0};function o(re){const ce=r.get(re);if(ce)return ce;let Ce='Unknown type "'+re+'"';const $e=re.toLowerCase();let Le;for(Le of a)if(Le.toLowerCase()===$e){Ce+='. Did you mean "'+Le+'" ?';break}throw new TypeError(Ce)}function u(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Ce=ce?o(ce).index:a.length,$e=[];for(let Pe=0;Pe<re.length;++Pe){if(!re[Pe]||typeof re[Pe].name!="string"||typeof re[Pe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Je=re[Pe].name;if(r.has(Je))throw new TypeError('Duplicate type name "'+Je+'"');$e.push(Je),r.set(Je,{name:Je,test:re[Pe].test,isAny:re[Pe].isAny,index:Ce+Pe,conversionsTo:[]})}const Le=a.slice(Ce);a=a.slice(0,Ce).concat($e).concat(Le);for(let Pe=Ce+$e.length;Pe<a.length;++Pe)r.get(a[Pe]).index=Pe}function l(){r=new Map,a=[],i=0,u([n],!1)}l(),u(e);function c(){let re;for(re of a)r.get(re).conversionsTo=[];i=0}function f(re){const ce=a.filter(Ce=>{const $e=r.get(Ce);return!$e.isAny&&$e.test(re)});return ce.length?ce:["any"]}function d(re){return re&&typeof re=="function"&&"_typedFunctionData"in re}function h(re,ce,Ce){if(!d(re))throw new TypeError(oF);const $e=Ce&&Ce.exact,Le=Array.isArray(ce)?ce.join(","):ce,Pe=S(Le),Je=y(Pe);if(!$e||Je in re.signatures){const Xt=re._typedFunctionData.signatureMap.get(Je);if(Xt)return Xt}const He=Pe.length;let tt;if($e){tt=[];let Xt;for(Xt in re.signatures)tt.push(re._typedFunctionData.signatureMap.get(Xt))}else tt=re._typedFunctionData.signatures;for(let Xt=0;Xt<He;++Xt){const St=Pe[Xt],Cn=[];let V;for(V of tt){const fe=k(V.params,Xt);if(!(!fe||St.restParam&&!fe.restParam)){if(!fe.hasAny){const ke=w(fe);if(St.types.some(We=>!ke.has(We.name)))continue}Cn.push(V)}}if(tt=Cn,tt.length===0)break}let Ze;for(Ze of tt)if(Ze.params.length<=He)return Ze;throw new TypeError("Signature not found (signature: "+(re.name||"unnamed")+"("+y(Pe,", ")+"))")}function m(re,ce,Ce){return h(re,ce,Ce).implementation}function v(re,ce){const Ce=o(ce);if(Ce.test(re))return re;const $e=Ce.conversionsTo;if($e.length===0)throw new Error("There are no conversions to "+ce+" defined.");for(let Le=0;Le<$e.length;Le++)if(o($e[Le].from).test(re))return $e[Le].convert(re);throw new Error("Cannot convert "+re+" to "+ce)}function y(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return re.map(Ce=>Ce.name).join(ce)}function b(re){const ce=re.indexOf("...")===0,$e=(ce?re.length>3?re.slice(3):"any":re).split("|").map(He=>o(He.trim()));let Le=!1,Pe=ce?"...":"";return{types:$e.map(function(He){return Le=He.isAny||Le,Pe+=He.name+"|",{name:He.name,typeIndex:He.index,test:He.test,isAny:He.isAny,conversion:null,conversionIndex:-1}}),name:Pe.slice(0,-1),hasAny:Le,hasConversion:!1,restParam:ce}}function x(re){const ce=re.types.map(Je=>Je.name),Ce=R(ce);let $e=re.hasAny,Le=re.name;const Pe=Ce.map(function(Je){const He=o(Je.from);return $e=He.isAny||$e,Le+="|"+Je.from,{name:Je.from,typeIndex:He.index,test:He.test,isAny:He.isAny,conversion:Je,conversionIndex:Je.index}});return{types:re.types.concat(Pe),name:Le,hasAny:$e,hasConversion:Pe.length>0,restParam:re.restParam}}function w(re){return re.typeSet||(re.typeSet=new Set,re.types.forEach(ce=>re.typeSet.add(ce.name))),re.typeSet}function S(re){const ce=[];if(typeof re!="string")throw new TypeError("Signatures must be strings");const Ce=re.trim();if(Ce==="")return ce;const $e=Ce.split(",");for(let Le=0;Le<$e.length;++Le){const Pe=b($e[Le].trim());if(Pe.restParam&&Le!==$e.length-1)throw new SyntaxError('Unexpected rest parameter "'+$e[Le]+'": only allowed for the last parameter');if(Pe.types.length===0)return null;ce.push(Pe)}return ce}function C(re){const ce=K(re);return ce?ce.restParam:!1}function E(re){if(!re||re.types.length===0)return sF;if(re.types.length===1)return o(re.types[0].name).test;if(re.types.length===2){const ce=o(re.types[0].name).test,Ce=o(re.types[1].name).test;return function(Le){return ce(Le)||Ce(Le)}}else{const ce=re.types.map(function(Ce){return o(Ce.name).test});return function($e){for(let Le=0;Le<ce.length;Le++)if(ce[Le]($e))return!0;return!1}}}function A(re){let ce,Ce,$e;if(C(re)){ce=J(re).map(E);const Le=ce.length,Pe=E(K(re)),Je=function(He){for(let tt=Le;tt<He.length;tt++)if(!Pe(He[tt]))return!1;return!0};return function(tt){for(let Ze=0;Ze<ce.length;Ze++)if(!ce[Ze](tt[Ze]))return!1;return Je(tt)&&tt.length>=Le+1}}else return re.length===0?function(Pe){return Pe.length===0}:re.length===1?(Ce=E(re[0]),function(Pe){return Ce(Pe[0])&&Pe.length===1}):re.length===2?(Ce=E(re[0]),$e=E(re[1]),function(Pe){return Ce(Pe[0])&&$e(Pe[1])&&Pe.length===2}):(ce=re.map(E),function(Pe){for(let Je=0;Je<ce.length;Je++)if(!ce[Je](Pe[Je]))return!1;return Pe.length===ce.length})}function k(re,ce){return ce<re.length?re[ce]:C(re)?K(re):null}function D(re,ce){const Ce=k(re,ce);return Ce?w(Ce):new Set}function I(re){return re.conversion===null||re.conversion===void 0}function $(re,ce){const Ce=new Set;return re.forEach($e=>{const Le=D($e.params,ce);let Pe;for(Pe of Le)Ce.add(Pe)}),Ce.has("any")?["any"]:Array.from(Ce)}function O(re,ce,Ce){let $e,Le;const Pe=re||"unnamed";let Je=Ce,He;for(He=0;He<ce.length;He++){const St=[];if(Je.forEach(Cn=>{const V=k(Cn.params,He),fe=E(V);(He<Cn.params.length||C(Cn.params))&&fe(ce[He])&&St.push(Cn)}),St.length===0){if(Le=$(Je,He),Le.length>0){const Cn=f(ce[He]);return $e=new TypeError("Unexpected type of argument in function "+Pe+" (expected: "+Le.join(" or ")+", actual: "+Cn.join(" | ")+", index: "+He+")"),$e.data={category:"wrongType",fn:Pe,index:He,actual:Cn,expected:Le},$e}}else Je=St}const tt=Je.map(function(St){return C(St.params)?1/0:St.params.length});if(ce.length<Math.min.apply(null,tt))return Le=$(Je,He),$e=new TypeError("Too few arguments in function "+Pe+" (expected: "+Le.join(" or ")+", index: "+ce.length+")"),$e.data={category:"tooFewArgs",fn:Pe,index:ce.length,expected:Le},$e;const Ze=Math.max.apply(null,tt);if(ce.length>Ze)return $e=new TypeError("Too many arguments in function "+Pe+" (expected: "+Ze+", actual: "+ce.length+")"),$e.data={category:"tooManyArgs",fn:Pe,index:ce.length,expectedLength:Ze},$e;const Xt=[];for(let St=0;St<ce.length;++St)Xt.push(f(ce[St]).join("|"));return $e=new TypeError('Arguments of type "'+Xt.join(", ")+'" do not match any of the defined signatures of function '+Pe+"."),$e.data={category:"mismatch",actual:Xt},$e}function B(re){let ce=a.length+1;for(let Ce=0;Ce<re.types.length;Ce++)I(re.types[Ce])&&(ce=Math.min(ce,re.types[Ce].typeIndex));return ce}function z(re){let ce=i+1;for(let Ce=0;Ce<re.types.length;Ce++)I(re.types[Ce])||(ce=Math.min(ce,re.types[Ce].conversionIndex));return ce}function L(re,ce){if(re.hasAny){if(!ce.hasAny)return 1}else if(ce.hasAny)return-1;if(re.restParam){if(!ce.restParam)return 1}else if(ce.restParam)return-1;if(re.hasConversion){if(!ce.hasConversion)return 1}else if(ce.hasConversion)return-1;const Ce=B(re)-B(ce);if(Ce<0)return-1;if(Ce>0)return 1;const $e=z(re)-z(ce);return $e<0?-1:$e>0?1:0}function F(re,ce){const Ce=re.params,$e=ce.params,Le=K(Ce),Pe=K($e),Je=C(Ce),He=C($e);if(Je&&Le.hasAny){if(!He||!Pe.hasAny)return 1}else if(He&&Pe.hasAny)return-1;let tt=0,Ze=0,Xt;for(Xt of Ce)Xt.hasAny&&++tt,Xt.hasConversion&&++Ze;let St=0,Cn=0;for(Xt of $e)Xt.hasAny&&++St,Xt.hasConversion&&++Cn;if(tt!==St)return tt-St;if(Je&&Le.hasConversion){if(!He||!Pe.hasConversion)return 1}else if(He&&Pe.hasConversion)return-1;if(Ze!==Cn)return Ze-Cn;if(Je){if(!He)return 1}else if(He)return-1;const V=(Ce.length-$e.length)*(Je?-1:1);if(V!==0)return V;const fe=[];let ke=0;for(let Dt=0;Dt<Ce.length;++Dt){const At=L(Ce[Dt],$e[Dt]);fe.push(At),ke+=At}if(ke!==0)return ke;let We;for(We of fe)if(We!==0)return We;return 0}function R(re){if(re.length===0)return[];const ce=re.map(o);re.length>1&&ce.sort((Le,Pe)=>Le.index-Pe.index);let Ce=ce[0].conversionsTo;if(re.length===1)return Ce;Ce=Ce.concat([]);const $e=new Set(re);for(let Le=1;Le<ce.length;++Le){let Pe;for(Pe of ce[Le].conversionsTo)$e.has(Pe.from)||(Ce.push(Pe),$e.add(Pe.from))}return Ce}function W(re,ce){let Ce=ce;if(re.some(Le=>Le.hasConversion)){const Le=C(re),Pe=re.map(M);Ce=function(){const He=[],tt=Le?arguments.length-1:arguments.length;for(let Ze=0;Ze<tt;Ze++)He[Ze]=Pe[Ze](arguments[Ze]);return Le&&(He[tt]=arguments[tt].map(Pe[tt])),ce.apply(this,He)}}let $e=Ce;if(C(re)){const Le=re.length-1;$e=function(){return Ce.apply(this,ae(arguments,0,Le).concat([ae(arguments,Le)]))}}return $e}function M(re){let ce,Ce,$e,Le;const Pe=[],Je=[];switch(re.types.forEach(function(He){He.conversion&&(Pe.push(o(He.conversion.from).test),Je.push(He.conversion.convert))}),Je.length){case 0:return function(tt){return tt};case 1:return ce=Pe[0],$e=Je[0],function(tt){return ce(tt)?$e(tt):tt};case 2:return ce=Pe[0],Ce=Pe[1],$e=Je[0],Le=Je[1],function(tt){return ce(tt)?$e(tt):Ce(tt)?Le(tt):tt};default:return function(tt){for(let Ze=0;Ze<Je.length;Ze++)if(Pe[Ze](tt))return Je[Ze](tt);return tt}}}function G(re){function ce(Ce,$e,Le){if($e<Ce.length){const Pe=Ce[$e];let Je=[];if(Pe.restParam){const He=Pe.types.filter(I);He.length<Pe.types.length&&Je.push({types:He,name:"..."+He.map(tt=>tt.name).join("|"),hasAny:He.some(tt=>tt.isAny),hasConversion:!1,restParam:!0}),Je.push(Pe)}else Je=Pe.types.map(function(He){return{types:[He],name:He.name,hasAny:He.isAny,hasConversion:He.conversion,restParam:!1}});return he(Je,function(He){return ce(Ce,$e+1,Le.concat([He]))})}else return[Le]}return ce(re,0,[])}function q(re,ce){const Ce=Math.max(re.length,ce.length);for(let He=0;He<Ce;He++){const tt=D(re,He),Ze=D(ce,He);let Xt=!1,St;for(St of Ze)if(tt.has(St)){Xt=!0;break}if(!Xt)return!1}const $e=re.length,Le=ce.length,Pe=C(re),Je=C(ce);return Pe?Je?$e===Le:Le>=$e:Je?$e>=Le:$e===Le}function j(re){return re.map(ce=>ve(ce)?Z(ce.referToSelf.callback):ie(ce)?Ee(ce.referTo.references,ce.referTo.callback):ce)}function H(re,ce,Ce){const $e=[];let Le;for(Le of re){let Pe=Ce[Le];if(typeof Pe!="number")throw new TypeError('No definition for referenced signature "'+Le+'"');if(Pe=ce[Pe],typeof Pe!="function")return!1;$e.push(Pe)}return $e}function ne(re,ce,Ce){const $e=j(re),Le=new Array($e.length).fill(!1);let Pe=!0;for(;Pe;){Pe=!1;let Je=!0;for(let He=0;He<$e.length;++He){if(Le[He])continue;const tt=$e[He];if(ve(tt))$e[He]=tt.referToSelf.callback(Ce),$e[He].referToSelf=tt.referToSelf,Le[He]=!0,Je=!1;else if(ie(tt)){const Ze=H(tt.referTo.references,$e,ce);Ze?($e[He]=tt.referTo.callback.apply(this,Ze),$e[He].referTo=tt.referTo,Le[He]=!0,Je=!1):Pe=!0}}if(Je&&Pe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return $e}function ue(re){const ce=/\bthis(\(|\.signatures\b)/;Object.keys(re).forEach(Ce=>{const $e=re[Ce];if(ce.test($e.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function te(re,ce){if(s.createCount++,Object.keys(ce).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&ue(ce);const Ce=[],$e=[],Le={},Pe=[];let Je;for(Je in ce){if(!Object.prototype.hasOwnProperty.call(ce,Je))continue;const Ot=S(Je);if(!Ot)continue;Ce.forEach(function(no){if(q(no,Ot))throw new TypeError('Conflicting signatures "'+y(no)+'" and "'+y(Ot)+'".')}),Ce.push(Ot);const xa=$e.length;$e.push(ce[Je]);const $p=Ot.map(x);let ql;for(ql of G($p)){const no=y(ql);Pe.push({params:ql,name:no,fn:xa}),ql.every(dx=>!dx.hasConversion)&&(Le[no]=xa)}}Pe.sort(F);const He=ne($e,Le,Wl);let tt;for(tt in Le)Object.prototype.hasOwnProperty.call(Le,tt)&&(Le[tt]=He[Le[tt]]);const Ze=[],Xt=new Map;for(tt of Pe)Xt.has(tt.name)||(tt.fn=He[tt.fn],Ze.push(tt),Xt.set(tt.name,tt));const St=Ze[0]&&Ze[0].params.length<=2&&!C(Ze[0].params),Cn=Ze[1]&&Ze[1].params.length<=2&&!C(Ze[1].params),V=Ze[2]&&Ze[2].params.length<=2&&!C(Ze[2].params),fe=Ze[3]&&Ze[3].params.length<=2&&!C(Ze[3].params),ke=Ze[4]&&Ze[4].params.length<=2&&!C(Ze[4].params),We=Ze[5]&&Ze[5].params.length<=2&&!C(Ze[5].params),Dt=St&&Cn&&V&&fe&&ke&&We;for(let Ot=0;Ot<Ze.length;++Ot)Ze[Ot].test=A(Ze[Ot].params);const At=St?E(Ze[0].params[0]):Ji,lr=Cn?E(Ze[1].params[0]):Ji,pf=V?E(Ze[2].params[0]):Ji,Jg=fe?E(Ze[3].params[0]):Ji,ev=ke?E(Ze[4].params[0]):Ji,tv=We?E(Ze[5].params[0]):Ji,nv=St?E(Ze[0].params[1]):Ji,Ep=Cn?E(Ze[1].params[1]):Ji,rv=V?E(Ze[2].params[1]):Ji,zl=fe?E(Ze[3].params[1]):Ji,Tp=ke?E(Ze[4].params[1]):Ji,Ul=We?E(Ze[5].params[1]):Ji;for(let Ot=0;Ot<Ze.length;++Ot)Ze[Ot].implementation=W(Ze[Ot].params,Ze[Ot].fn);const sx=St?Ze[0].implementation:Uf,Vl=Cn?Ze[1].implementation:Uf,hf=V?Ze[2].implementation:Uf,mf=fe?Ze[3].implementation:Uf,Dp=ke?Ze[4].implementation:Uf,ox=We?Ze[5].implementation:Uf,ux=St?Ze[0].params.length:-1,lx=Cn?Ze[1].params.length:-1,Ro=V?Ze[2].params.length:-1,av=fe?Ze[3].params.length:-1,iv=ke?Ze[4].params.length:-1,cx=We?Ze[5].params.length:-1,sv=Dt?6:0,ov=Ze.length,uv=Ze.map(Ot=>Ot.test),lv=Ze.map(Ot=>Ot.implementation),fx=function(){for(let xa=sv;xa<ov;xa++)if(uv[xa](arguments))return lv[xa].apply(this,arguments);return s.onMismatch(re,arguments,Ze)};function Wl(Ot,xa){return arguments.length===ux&&At(Ot)&&nv(xa)?sx.apply(this,arguments):arguments.length===lx&&lr(Ot)&&Ep(xa)?Vl.apply(this,arguments):arguments.length===Ro&&pf(Ot)&&rv(xa)?hf.apply(this,arguments):arguments.length===av&&Jg(Ot)&&zl(xa)?mf.apply(this,arguments):arguments.length===iv&&ev(Ot)&&Tp(xa)?Dp.apply(this,arguments):arguments.length===cx&&tv(Ot)&&Ul(xa)?ox.apply(this,arguments):fx.apply(this,arguments)}try{Object.defineProperty(Wl,"name",{value:re})}catch{}return Wl.signatures=Le,Wl._typedFunctionData={signatures:Ze,signatureMap:Xt},Wl}function se(re,ce,Ce){throw O(re,ce,Ce)}function J(re){return ae(re,0,re.length-1)}function K(re){return re[re.length-1]}function ae(re,ce,Ce){return Array.prototype.slice.call(re,ce,Ce)}function pe(re,ce){for(let Ce=0;Ce<re.length;Ce++)if(ce(re[Ce]))return re[Ce]}function he(re,ce){return Array.prototype.concat.apply([],re.map(ce))}function Se(){const re=J(arguments).map(Ce=>y(S(Ce))),ce=K(arguments);if(typeof ce!="function")throw new TypeError("Callback function expected as last argument");return Ee(re,ce)}function Ee(re,ce){return{referTo:{references:re,callback:ce}}}function Z(re){if(typeof re!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:re}}}function ie(re){return re&&typeof re.referTo=="object"&&Array.isArray(re.referTo.references)&&typeof re.referTo.callback=="function"}function ve(re){return re&&typeof re.referToSelf=="object"&&typeof re.referToSelf.callback=="function"}function xe(re,ce){if(!re)return ce;if(ce&&ce!==re){const Ce=new Error("Function names do not match (expected: "+re+", actual: "+ce+")");throw Ce.data={actual:ce,expected:re},Ce}return re}function Re(re){let ce;for(const Ce in re)Object.prototype.hasOwnProperty.call(re,Ce)&&(d(re[Ce])||typeof re[Ce].signature=="string")&&(ce=xe(ce,re[Ce].name));return ce}function Me(re,ce){let Ce;for(Ce in ce)if(Object.prototype.hasOwnProperty.call(ce,Ce)){if(Ce in re&&ce[Ce]!==re[Ce]){const $e=new Error('Signature "'+Ce+'" is defined twice');throw $e.data={signature:Ce,sourceFunction:ce[Ce],destFunction:re[Ce]},$e}re[Ce]=ce[Ce]}}const je=s;s=function(re){const ce=typeof re=="string",Ce=ce?1:0;let $e=ce?re:"";const Le={};for(let Pe=Ce;Pe<arguments.length;++Pe){const Je=arguments[Pe];let He={},tt;if(typeof Je=="function"?(tt=Je.name,typeof Je.signature=="string"?He[Je.signature]=Je:d(Je)&&(He=Je.signatures)):t(Je)&&(He=Je,ce||(tt=Re(Je))),Object.keys(He).length===0){const Ze=new TypeError("Argument to 'typed' at index "+Pe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ze.data={index:Pe,argument:Je},Ze}ce||($e=xe($e,tt)),Me(Le,He)}return te($e||"",Le)},s.create=tW,s.createCount=je.createCount,s.onMismatch=se,s.throwMismatchError=se,s.createError=O,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=o,s.referTo=Se,s.referToSelf=Z,s.convert=v,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(re,ce){let Ce="any";ce!==!1&&r.has("Object")&&(Ce="Object"),s.addTypes([re],Ce)};function Qe(re){if(!re||typeof re.from!="string"||typeof re.to!="string"||typeof re.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(re.to===re.from)throw new SyntaxError('Illegal to define conversion from "'+re.from+'" to itself.')}return s.addConversion=function(re){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Qe(re);const Ce=o(re.to),$e=Ce.conversionsTo.find(Le=>Le.from===re.from);if($e)if(ce&&ce.override)s.removeConversion({from:$e.from,to:re.to,convert:$e.convert});else throw new Error('There is already a conversion from "'+re.from+'" to "'+Ce.name+'"');Ce.conversionsTo.push({from:re.from,convert:re.convert,index:i++})},s.addConversions=function(re,ce){re.forEach(Ce=>s.addConversion(Ce,ce))},s.removeConversion=function(re){Qe(re);const ce=o(re.to),Ce=pe(ce.conversionsTo,Le=>Le.from===re.from);if(!Ce)throw new Error("Attempt to remove nonexistent conversion from "+re.from+" to "+re.to);if(Ce.convert!==re.convert)throw new Error("Conversion to remove does not match existing conversion");const $e=ce.conversionsTo.indexOf(Ce);ce.conversionsTo.splice($e,1)},s.resolve=function(re,ce){if(!d(re))throw new TypeError(oF);const Ce=re._typedFunctionData.signatures;for(let $e=0;$e<Ce.length;++$e)if(Ce[$e].test(ce))return Ce[$e];return null},s}const o1=tW();function ee(t,e,n,r){function a(i){var s=I$e(i,e.map(R$e));return O$e(t,e,i),n(s)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),r&&(a.meta=r),a}function O$e(t,e,n){var r=e.filter(i=>!F$e(i)).every(i=>n[i]!==void 0);if(!r){var a=e.filter(i=>n[i]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(i=>'"'.concat(i,'"')).join(", "),"."))}}function F$e(t){return t&&t[0]==="?"}function R$e(t){return t&&t[0]==="?"?t.slice(1):t}function wt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function M$e(t){return/^-?\d+$/.test(t)}function kl(t,e){return e.number==="bigint"&&!M$e(t)?e.numberFallback:e.number}var Gu=Math.sign||function(t){return t>0?1:t<0?-1:0},P$e=Math.log2||function(e){return Math.log(e)/Math.LN2},B$e=Math.log10||function(e){return Math.log(e)/Math.LN10},L$e=Math.log1p||function(t){return Math.log(t+1)},z$e=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},U$e=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function PN(t,e,n){var r={2:"0b",8:"0o",16:"0x"},a=r[e],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!wt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!wt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),i="i".concat(n)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(a).concat(t.toString(e)).concat(i)}function Nc(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:a}=nW(e);switch(n){case"fixed":return rW(t,r);case"exponential":return aW(t,r);case"engineering":return V$e(t,r);case"bin":return PN(t,2,a);case"oct":return PN(t,8,a);case"hex":return PN(t,16,a);case"auto":return W$e(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var i=arguments[2],s=arguments[4];return i!=="."?i+s:s});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function nW(t){var e="auto",n,r;if(t!==void 0)if(qt(t))n=t;else if(jt(t))n=t.toNumber();else if(Fw(t))t.precision!==void 0&&(n=uF(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=uF(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function Rg(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],a=parseFloat(e[4]||"0"),i=r.indexOf(".");a+=i!==-1?i-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(o){return a-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),a++),{sign:n,coefficients:s,exponent:a}}function V$e(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=Mw(n,e),a=r.exponent,i=r.coefficients,s=a%3===0?a:a<0?a-3-a%3:a-a%3;if(qt(e))for(;e>i.length||a-s+1>i.length;)i.push(0);else for(var o=Math.abs(a-s)-(i.length-1),u=0;u<o;u++)i.push(0);for(var l=Math.abs(a-s),c=1;l>0;)c++,l--;var f=i.slice(c).join(""),d=qt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=i.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+s.toString();return r.sign+h}function rW(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=typeof e=="number"?Mw(n,n.exponent+1+e):n,a=r.coefficients,i=r.exponent+1,s=i+(e||0);return a.length<s&&(a=a.concat(pd(s-a.length))),i<0&&(a=pd(-i+1).concat(a),i=1),i<a.length&&a.splice(i,0,i===0?"0.":"."),r.sign+a.join("")}function aW(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=Rg(t),r=e?Mw(n,e):n,a=r.coefficients,i=r.exponent;a.length<e&&(a=a.concat(pd(e-a.length)));var s=a.shift();return r.sign+s+(a.length>0?"."+a.join(""):"")+"e"+(i>=0?"+":"")+i}function W$e(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=lF(n==null?void 0:n.lowerExp,-3),a=lF(n==null?void 0:n.upperExp,5),i=Rg(t),s=e?Mw(i,e):i;if(s.exponent<r||s.exponent>=a)return aW(t,e);var o=s.coefficients,u=s.exponent;o.length<e&&(o=o.concat(pd(e-o.length))),o=o.concat(pd(u-o.length+1+(o.length<e?e-o.length:0))),o=pd(-u).concat(o);var l=u>0?u:0;return l<o.length-1&&o.splice(l+1,0,"."),s.sign+o.join("")}function Mw(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var a=r.splice(e,r.length-e);if(a[0]>=5){var i=e-1;for(r[i]++;r[i]===10;)r.pop(),i===0&&(r.unshift(0),n.exponent++,i++),i--,r[i]++}}return n}function pd(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function q$e(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function ga(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}var H$e=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},j$e=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},G$e=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},X$e=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},K$e=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Y$e=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function Z$e(t,e){var n=t>0?!0:t<0?!1:1/t===1/0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function uF(t,e){if(qt(t))return t;if(jt(t))return t.toNumber();e()}function lF(t,e){return qt(t)?t:jt(t)?t.toNumber():e}var iW=function(){return iW=o1.create,o1},Q$e=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],J$e=ee("typed",Q$e,function(e){var{BigNumber:n,Complex:r,DenseMatrix:a,Fraction:i}=e,s=iW();return s.clear(),s.addTypes([{name:"number",test:qt},{name:"Complex",test:eu},{name:"BigNumber",test:jt},{name:"bigint",test:m$e},{name:"Fraction",test:Og},{name:"Unit",test:is},{name:"identifier",test:o=>Ia&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Ia},{name:"Chain",test:JV},{name:"Array",test:$n},{name:"Matrix",test:$t},{name:"DenseMatrix",test:s1},{name:"SparseMatrix",test:vc},{name:"Range",test:R$},{name:"Index",test:Ow},{name:"boolean",test:g$e},{name:"ResultSet",test:v$e},{name:"Help",test:ZV},{name:"function",test:y$e},{name:"Date",test:b$e},{name:"RegExp",test:w$e},{name:"null",test:x$e},{name:"undefined",test:N$e},{name:"AccessorNode",test:Lc},{name:"ArrayNode",test:as},{name:"AssignmentNode",test:S$e},{name:"BlockNode",test:C$e},{name:"ConditionalNode",test:E$e},{name:"ConstantNode",test:cn},{name:"FunctionNode",test:ml},{name:"FunctionAssignmentNode",test:Fg},{name:"IndexNode",test:cp},{name:"Node",test:An},{name:"ObjectNode",test:Rw},{name:"OperatorNode",test:br},{name:"ParenthesisNode",test:lu},{name:"RangeNode",test:T$e},{name:"RelationalNode",test:D$e},{name:"SymbolNode",test:ea},{name:"Map",test:QV},{name:"Object",test:Fw}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||Fy(u),q$e(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||Ry(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||Ry(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||Fy(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return i||My(u),new i(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||Ry(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){i||My(u);var l=new i(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||Fy(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){i||My(u);try{return new i(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||Ry(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||Fy(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return i||My(u),new i(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return a||eAe(),new a(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&ws(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&ws(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function Fy(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ry(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function eAe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function My(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var tAe="ResultSet",nAe=[],rAe=ee(tAe,nAe,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var td=9e15,_l=1e9,UC="0123456789abcdef",u1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",l1="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",VC={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-td,maxE:td,crypto:!1},sW,Yo,Ut=!0,Pw="[DecimalError] ",gl=Pw+"Invalid argument: ",oW=Pw+"Precision limit exceeded",uW=Pw+"crypto unavailable",lW="[object Decimal]",Fa=Math.floor,Mr=Math.pow,aAe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,iAe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sAe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,cW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vs=1e7,Ft=7,oAe=9007199254740991,uAe=u1.length-1,WC=l1.length-1,Ge={toStringTag:lW};Ge.absoluteValue=Ge.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Tt(t)};Ge.ceil=function(){return Tt(new this.constructor(this),this.e+1,2)};Ge.clampedTo=Ge.clamp=function(t,e){var n,r=this,a=r.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(gl+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new a(r)};Ge.comparedTo=Ge.cmp=function(t){var e,n,r,a,i=this,s=i.d,o=(t=new i.constructor(t)).d,u=i.s,l=t.s;if(!s||!o)return!u||!l?NaN:u!==l?u:s===o?0:!s^u<0?1:-1;if(!s[0]||!o[0])return s[0]?u:o[0]?-l:0;if(u!==l)return u;if(i.e!==t.e)return i.e>t.e^u<0?1:-1;for(r=s.length,a=o.length,e=0,n=r<a?r:a;e<n;++e)if(s[e]!==o[e])return s[e]>o[e]^u<0?1:-1;return r===a?0:r>a^u<0?1:-1};Ge.cosine=Ge.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ft,r.rounding=1,n=lAe(r,mW(r,n)),r.precision=t,r.rounding=e,Tt(Yo==2||Yo==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ge.cubeRoot=Ge.cbrt=function(){var t,e,n,r,a,i,s,o,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Ut=!1,i=c.s*Mr(c.s*c,1/3),!i||Math.abs(i)==1/0?(n=fa(c.d),t=c.e,(i=(t-n.length+1)%3)&&(n+=i==1||i==-2?"0":"00"),i=Mr(n,1/3),t=Fa((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?n="5e"+t:(n=i.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(i.toString()),s=(t=f.precision)+3;;)if(o=r,u=o.times(o).times(o),l=u.plus(c),r=Vn(l.plus(c).times(o),l.plus(u),s+2,1),fa(o.d).slice(0,s)===(n=fa(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!a&&n=="4999"){if(!a&&(Tt(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}s+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Tt(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return Ut=!0,Tt(r,t,f.rounding,e)};Ge.decimalPlaces=Ge.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Fa(this.e/Ft))*Ft,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ge.dividedBy=Ge.div=function(t){return Vn(this,new this.constructor(t))};Ge.dividedToIntegerBy=Ge.divToInt=function(t){var e=this,n=e.constructor;return Tt(Vn(e,new n(t),0,1,1),n.precision,n.rounding)};Ge.equals=Ge.eq=function(t){return this.cmp(t)===0};Ge.floor=function(){return Tt(new this.constructor(this),this.e+1,3)};Ge.greaterThan=Ge.gt=function(t){return this.cmp(t)>0};Ge.greaterThanOrEqualTo=Ge.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ge.hyperbolicCosine=Ge.cosh=function(){var t,e,n,r,a,i=this,s=i.constructor,o=new s(1);if(!i.isFinite())return new s(i.s?1/0:NaN);if(i.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(i.e,i.sd())+4,s.rounding=1,a=i.d.length,a<32?(t=Math.ceil(a/3),e=(1/Lw(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=Rd(s,1,i.times(e),new s(1),!0);for(var u,l=t,c=new s(8);l--;)u=i.times(i),i=o.minus(u.times(c.minus(u.times(c))));return Tt(i,s.precision=n,s.rounding=r,!0)};Ge.hyperbolicSine=Ge.sinh=function(){var t,e,n,r,a=this,i=a.constructor;if(!a.isFinite()||a.isZero())return new i(a);if(e=i.precision,n=i.rounding,i.precision=e+Math.max(a.e,a.sd())+4,i.rounding=1,r=a.d.length,r<3)a=Rd(i,2,a,a,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,a=a.times(1/Lw(5,t)),a=Rd(i,2,a,a,!0);for(var s,o=new i(5),u=new i(16),l=new i(20);t--;)s=a.times(a),a=a.times(o.plus(s.times(u.times(s).plus(l))))}return i.precision=e,i.rounding=n,Tt(a,e,n,!0)};Ge.hyperbolicTangent=Ge.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Vn(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ge.inverseCosine=Ge.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),a=n.precision,i=n.rounding;return r!==-1?r===0?e.isNeg()?Ls(n,a,i):new n(0):new n(NaN):e.isZero()?Ls(n,a+4,i).times(.5):(n.precision=a+6,n.rounding=1,e=e.asin(),t=Ls(n,a+4,i).times(.5),n.precision=a,n.rounding=i,t.minus(e))};Ge.inverseHyperbolicCosine=Ge.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Ut=!1,n=n.times(n).minus(1).sqrt().plus(n),Ut=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ge.inverseHyperbolicSine=Ge.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Ut=!1,n=n.times(n).plus(1).sqrt().plus(n),Ut=!0,r.precision=t,r.rounding=e,n.ln())};Ge.inverseHyperbolicTangent=Ge.atanh=function(){var t,e,n,r,a=this,i=a.constructor;return a.isFinite()?a.e>=0?new i(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=i.precision,e=i.rounding,r=a.sd(),Math.max(r,t)<2*-a.e-1?Tt(new i(a),t,e,!0):(i.precision=n=r-a.e,a=Vn(a.plus(1),new i(1).minus(a),n+t,1),i.precision=t+4,i.rounding=1,a=a.ln(),i.precision=t,i.rounding=e,a.times(.5))):new i(NaN)};Ge.inverseSine=Ge.asin=function(){var t,e,n,r,a=this,i=a.constructor;return a.isZero()?new i(a):(e=a.abs().cmp(1),n=i.precision,r=i.rounding,e!==-1?e===0?(t=Ls(i,n+4,r).times(.5),t.s=a.s,t):new i(NaN):(i.precision=n+6,i.rounding=1,a=a.div(new i(1).minus(a.times(a)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,a.times(2)))};Ge.inverseTangent=Ge.atan=function(){var t,e,n,r,a,i,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=WC)return s=Ls(c,f+4,d).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=WC)return s=Ls(c,f+4,d).times(.5),s.s=l.s,s}for(c.precision=o=f+10,c.rounding=1,n=Math.min(28,o/Ft+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Ut=!1,e=Math.ceil(o/Ft),r=1,u=l.times(l),s=new c(l),a=l;t!==-1;)if(a=a.times(u),i=s.minus(a.div(r+=2)),a=a.times(u),s=i.plus(a.div(r+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===i.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),Ut=!0,Tt(s,c.precision=f,c.rounding=d,!0)};Ge.isFinite=function(){return!!this.d};Ge.isInteger=Ge.isInt=function(){return!!this.d&&Fa(this.e/Ft)>this.d.length-2};Ge.isNaN=function(){return!this.s};Ge.isNegative=Ge.isNeg=function(){return this.s<0};Ge.isPositive=Ge.isPos=function(){return this.s>0};Ge.isZero=function(){return!!this.d&&this.d[0]===0};Ge.lessThan=Ge.lt=function(t){return this.cmp(t)<0};Ge.lessThanOrEqualTo=Ge.lte=function(t){return this.cmp(t)<1};Ge.logarithm=Ge.log=function(t){var e,n,r,a,i,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)i=!0;else{for(a=n[0];a%10===0;)a/=10;i=a!==1}if(Ut=!1,o=f+h,s=Xu(l,o),r=e?c1(c,o+10):Xu(t,o),u=Vn(s,r,o,1),nm(u.d,a=f,d))do if(o+=10,s=Xu(l,o),r=e?c1(c,o+10):Xu(t,o),u=Vn(s,r,o,1),!i){+fa(u.d).slice(a+1,a+15)+1==1e14&&(u=Tt(u,f+1,0));break}while(nm(u.d,a+=10,d));return Ut=!0,Tt(u,f,d)};Ge.minus=Ge.sub=function(t){var e,n,r,a,i,s,o,u,l,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,o=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new m(h);else return new m(u===3?-0:0);return Ut?Tt(t,o,u):t}if(n=Fa(t.e/Ft),c=Fa(h.e/Ft),l=l.slice(),i=c-n,i){for(f=i<0,f?(e=l,i=-i,s=d.length):(e=d,n=c,s=l.length),r=Math.max(Math.ceil(o/Ft),s)+2,i>r&&(i=r,e.length=1),e.reverse(),r=i;r--;)e.push(0);e.reverse()}else{for(r=l.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}i=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),s=l.length,r=d.length-s;r>0;--r)l[s++]=0;for(r=d.length;r>i;){if(l[--r]<d[r]){for(a=r;a&&l[--a]===0;)l[a]=Vs-1;--l[a],l[r]+=Vs}l[r]-=d[r]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=Bw(l,n),Ut?Tt(t,o,u):t):new m(u===3?-0:0)};Ge.modulo=Ge.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Tt(new r(n),r.precision,r.rounding):(Ut=!1,r.modulo==9?(e=Vn(n,t.abs(),0,3,1),e.s*=t.s):e=Vn(n,t,0,r.modulo,1),e=e.times(t),Ut=!0,n.minus(e))};Ge.naturalExponential=Ge.exp=function(){return qC(this)};Ge.naturalLogarithm=Ge.ln=function(){return Xu(this)};Ge.negated=Ge.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Tt(t)};Ge.plus=Ge.add=function(t){var e,n,r,a,i,s,o,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,o=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),Ut?Tt(t,o,u):t;if(i=Fa(f.e/Ft),r=Fa(t.e/Ft),l=l.slice(),a=i-r,a){for(a<0?(n=l,a=-a,s=c.length):(n=c,r=i,s=l.length),i=Math.ceil(o/Ft),s=i>s?i+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,n=c,c=l,l=n),e=0;a;)e=(l[--a]=l[a]+c[a]+e)/Vs|0,l[a]%=Vs;for(e&&(l.unshift(e),++r),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=Bw(l,r),Ut?Tt(t,o,u):t};Ge.precision=Ge.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gl+t);return n.d?(e=fW(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ge.round=function(){var t=this,e=t.constructor;return Tt(new e(t),t.e+1,e.rounding)};Ge.sine=Ge.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ft,r.rounding=1,n=fAe(r,mW(r,n)),r.precision=t,r.rounding=e,Tt(Yo>2?n.neg():n,t,e,!0)):new r(NaN)};Ge.squareRoot=Ge.sqrt=function(){var t,e,n,r,a,i,s=this,o=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);for(Ut=!1,l=Math.sqrt(+s),l==0||l==1/0?(e=fa(o),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Fa((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(i=r,r=i.plus(Vn(s,i,n+2,1)).times(.5),fa(i.d).slice(0,n)===(e=fa(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Tt(i,u+1,0),i.times(i).eq(s))){r=i;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Tt(r,u+1,1),t=!r.times(r).eq(s));break}return Ut=!0,Tt(r,u,c.rounding,t)};Ge.tangent=Ge.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Vn(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Tt(Yo==2||Yo==4?n.neg():n,t,e,!0)):new r(NaN)};Ge.times=Ge.mul=function(t){var e,n,r,a,i,s,o,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Fa(c.e/Ft)+Fa(t.e/Ft),u=d.length,l=h.length,u<l&&(i=d,d=h,h=i,s=u,u=l,l=s),i=[],s=u+l,r=s;r--;)i.push(0);for(r=l;--r>=0;){for(e=0,a=u+r;a>r;)o=i[a]+h[r]*d[a-r-1]+e,i[a--]=o%Vs|0,e=o/Vs|0;i[a]=(i[a]+e)%Vs|0}for(;!i[--s];)i.pop();return e?++n:i.shift(),t.d=i,t.e=Bw(i,n),Ut?Tt(t,f.precision,f.rounding):t};Ge.toBinary=function(t,e){return M$(this,2,t,e)};Ge.toDecimalPlaces=Ge.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Si(t,0,_l),e===void 0?e=r.rounding:Si(e,0,8),Tt(n,t+n.e+1,e))};Ge.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=To(r,!0):(Si(t,0,_l),e===void 0?e=a.rounding:Si(e,0,8),r=Tt(new a(r),t+1,e),n=To(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ge.toFixed=function(t,e){var n,r,a=this,i=a.constructor;return t===void 0?n=To(a):(Si(t,0,_l),e===void 0?e=i.rounding:Si(e,0,8),r=Tt(new i(a),t+a.e+1,e),n=To(r,!1,t+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};Ge.toFraction=function(t){var e,n,r,a,i,s,o,u,l,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(l=n=new v(1),r=u=new v(0),e=new v(r),i=e.e=fW(m)-h.e-1,s=i%Ft,e.d[0]=Mr(10,s<0?Ft+s:s),t==null)t=i>0?e:l;else{if(o=new v(t),!o.isInt()||o.lt(l))throw Error(gl+o);t=o.gt(e)?i>0?e:l:o}for(Ut=!1,o=new v(fa(m)),c=v.precision,v.precision=i=m.length*Ft*2;f=Vn(o,e,0,1,1),a=n.plus(f.times(r)),a.cmp(t)!=1;)n=r,r=a,a=l,l=u.plus(f.times(a)),u=a,a=e,e=o.minus(f.times(a)),o=a;return a=Vn(t.minus(n),r,0,1,1),u=u.plus(a.times(l)),n=n.plus(a.times(r)),u.s=l.s=h.s,d=Vn(l,r,i,1).minus(h).abs().cmp(Vn(u,n,i,1).minus(h).abs())<1?[l,r]:[u,n],v.precision=c,Ut=!0,d};Ge.toHexadecimal=Ge.toHex=function(t,e){return M$(this,16,t,e)};Ge.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Si(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Ut=!1,n=Vn(n,t,0,e,1).times(t),Ut=!0,Tt(n)):(t.s=n.s,n=t),n};Ge.toNumber=function(){return+this};Ge.toOctal=function(t,e){return M$(this,8,t,e)};Ge.toPower=Ge.pow=function(t){var e,n,r,a,i,s,o=this,u=o.constructor,l=+(t=new u(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new u(Mr(+o,l));if(o=new u(o),o.eq(1))return o;if(r=u.precision,i=u.rounding,t.eq(1))return Tt(o,r,i);if(e=Fa(t.e/Ft),e>=t.d.length-1&&(n=l<0?-l:l)<=oAe)return a=dW(u,o,n,r),t.s<0?new u(1).div(a):Tt(a,r,i);if(s=o.s,s<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return n=Mr(+o,l),e=n==0||!isFinite(n)?Fa(l*(Math.log("0."+fa(o.d))/Math.LN10+o.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(Ut=!1,u.rounding=o.s=1,n=Math.min(12,(e+"").length),a=qC(t.times(Xu(o,r+n)),r),a.d&&(a=Tt(a,r+5,1),nm(a.d,r,i)&&(e=r+10,a=Tt(qC(t.times(Xu(o,e+n)),e),e+5,1),+fa(a.d).slice(r+1,r+15)+1==1e14&&(a=Tt(a,r+1,0)))),a.s=s,Ut=!0,u.rounding=i,Tt(a,r,i))};Ge.toPrecision=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=To(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(Si(t,1,_l),e===void 0?e=a.rounding:Si(e,0,8),r=Tt(new a(r),t,e),n=To(r,t<=r.e||r.e<=a.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ge.toSignificantDigits=Ge.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Si(t,1,_l),e===void 0?e=r.rounding:Si(e,0,8)),Tt(new r(n),t,e)};Ge.toString=function(){var t=this,e=t.constructor,n=To(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ge.truncated=Ge.trunc=function(){return Tt(new this.constructor(this),this.e+1,1)};Ge.valueOf=Ge.toJSON=function(){var t=this,e=t.constructor,n=To(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function fa(t){var e,n,r,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)r=t[e]+"",n=Ft-r.length,n&&(i+=zu(n)),i+=r;s=t[e],r=s+"",n=Ft-r.length,n&&(i+=zu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}function Si(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gl+t)}function nm(t,e,n,r){var a,i,s,o;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=Ft,a=0):(a=Math.ceil((e+1)/Ft),e%=Ft),i=Mr(10,Ft-e),o=t[a]%i|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):s=(n<4&&o+1==i||n>3&&o+1==i/2)&&(t[a+1]/i/100|0)==Mr(10,e-2)-1||(o==i/2||o==0)&&(t[a+1]/i/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(r||n<4)&&o==9999||!r&&n>3&&o==4999):s=((r||n<4)&&o+1==i||!r&&n>3&&o+1==i/2)&&(t[a+1]/i/1e3|0)==Mr(10,e-3)-1,s}function h0(t,e,n){for(var r,a=[0],i,s=0,o=t.length;s<o;){for(i=a.length;i--;)a[i]*=e;for(a[0]+=UC.indexOf(t.charAt(s++)),r=0;r<a.length;r++)a[r]>n-1&&(a[r+1]===void 0&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}function lAe(t,e){var n,r,a;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),a=(1/Lw(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=Rd(t,1,e.times(a),new t(1));for(var i=n;i--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var Vn=function(){function t(r,a,i){var s,o=0,u=r.length;for(r=r.slice();u--;)s=r[u]*a+o,r[u]=s%i|0,o=s/i|0;return o&&r.unshift(o),r}function e(r,a,i,s){var o,u;if(i!=s)u=i>s?1:-1;else for(o=u=0;o<i;o++)if(r[o]!=a[o]){u=r[o]>a[o]?1:-1;break}return u}function n(r,a,i,s){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*s+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,s,o,u){var l,c,f,d,h,m,v,y,b,x,w,S,C,E,A,k,D,I,$,O,B=r.constructor,z=r.s==a.s?1:-1,L=r.d,F=a.d;if(!L||!L[0]||!F||!F[0])return new B(!r.s||!a.s||(L?F&&L[0]==F[0]:!F)?NaN:L&&L[0]==0||!F?z*0:z/0);for(u?(h=1,c=r.e-a.e):(u=Vs,h=Ft,c=Fa(r.e/h)-Fa(a.e/h)),$=F.length,D=L.length,b=new B(z),x=b.d=[],f=0;F[f]==(L[f]||0);f++);if(F[f]>(L[f]||0)&&c--,i==null?(E=i=B.precision,s=B.rounding):o?E=i+(r.e-a.e)+1:E=i,E<0)x.push(1),m=!0;else{if(E=E/h+2|0,f=0,$==1){for(d=0,F=F[0],E++;(f<D||d)&&E--;f++)A=d*u+(L[f]||0),x[f]=A/F|0,d=A%F|0;m=d||f<D}else{for(d=u/(F[0]+1)|0,d>1&&(F=t(F,d,u),L=t(L,d,u),$=F.length,D=L.length),k=$,w=L.slice(0,$),S=w.length;S<$;)w[S++]=0;O=F.slice(),O.unshift(0),I=F[0],F[1]>=u/2&&++I;do d=0,l=e(F,w,$,S),l<0?(C=w[0],$!=S&&(C=C*u+(w[1]||0)),d=C/I|0,d>1?(d>=u&&(d=u-1),v=t(F,d,u),y=v.length,S=w.length,l=e(v,w,y,S),l==1&&(d--,n(v,$<y?O:F,y,u))):(d==0&&(l=d=1),v=F.slice()),y=v.length,y<S&&v.unshift(0),n(w,v,S,u),l==-1&&(S=w.length,l=e(F,w,$,S),l<1&&(d++,n(w,$<S?O:F,S,u))),S=w.length):l===0&&(d++,w=[0]),x[f++]=d,l&&w[0]?w[S++]=L[k]||0:(w=[L[k]],S=1);while((k++<D||w[0]!==void 0)&&E--);m=w[0]!==void 0}x[0]||x.shift()}if(h==1)b.e=c,sW=m;else{for(f=1,d=x[0];d>=10;d/=10)f++;b.e=f+c*h-1,Tt(b,o?i+b.e+1:i,s,m)}return b}}();function Tt(t,e,n,r){var a,i,s,o,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(a=1,o=f[0];o>=10;o/=10)a++;if(i=e-a,i<0)i+=Ft,s=e,c=f[d=0],u=c/Mr(10,a-s-1)%10|0;else if(d=Math.ceil((i+1)/Ft),o=f.length,d>=o)if(r){for(;o++<=d;)f.push(0);c=u=0,a=1,i%=Ft,s=i-Ft+1}else break e;else{for(c=o=f[d],a=1;o>=10;o/=10)a++;i%=Ft,s=i-Ft+a,u=s<0?0:c/Mr(10,a-s-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(s<0?c:c%Mr(10,a-s-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(i>0?s>0?c/Mr(10,a-s):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=Mr(10,(Ft-e%Ft)%Ft),t.e=-e||0):f[0]=t.e=0,t;if(i==0?(f.length=d,o=1,d--):(f.length=d+1,o=Mr(10,Ft-i),f[d]=s>0?(c/Mr(10,a-s)%Mr(10,s)|0)*o:0),l)for(;;)if(d==0){for(i=1,s=f[0];s>=10;s/=10)i++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;i!=o&&(t.e++,f[0]==Vs&&(f[0]=1));break}else{if(f[d]+=o,f[d]!=Vs)break;f[d--]=0,o=1}for(i=f.length;f[--i]===0;)f.pop()}return Ut&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function To(t,e,n){if(!t.isFinite())return hW(t);var r,a=t.e,i=fa(t.d),s=i.length;return e?(n&&(r=n-s)>0?i=i.charAt(0)+"."+i.slice(1)+zu(r):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):a<0?(i="0."+zu(-a-1)+i,n&&(r=n-s)>0&&(i+=zu(r))):a>=s?(i+=zu(a+1-s),n&&(r=n-a-1)>0&&(i=i+"."+zu(r))):((r=a+1)<s&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-s)>0&&(a+1===s&&(i+="."),i+=zu(r))),i}function Bw(t,e){var n=t[0];for(e*=Ft;n>=10;n/=10)e++;return e}function c1(t,e,n){if(e>uAe)throw Ut=!0,n&&(t.precision=n),Error(oW);return Tt(new t(u1),e,1,!0)}function Ls(t,e,n){if(e>WC)throw Error(oW);return Tt(new t(l1),e,n,!0)}function fW(t){var e=t.length-1,n=e*Ft+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function zu(t){for(var e="";t--;)e+="0";return e}function dW(t,e,n,r){var a,i=new t(1),s=Math.ceil(r/Ft+4);for(Ut=!1;;){if(n%2&&(i=i.times(e),fF(i.d,s)&&(a=!0)),n=Fa(n/2),n===0){n=i.d.length-1,a&&i.d[n]===0&&++i.d[n];break}e=e.times(e),fF(e.d,s)}return Ut=!0,i}function cF(t){return t.d[t.d.length-1]&1}function pW(t,e,n){for(var r,a=new t(e[0]),i=0;++i<e.length;)if(r=new t(e[i]),r.s)a[n](r)&&(a=r);else{a=r;break}return a}function qC(t,e){var n,r,a,i,s,o,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Ut=!1,u=m):u=e,o=new d(.03125);t.e>-2;)t=t.times(o),f+=5;for(r=Math.log(Mr(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new d(1),d.precision=u;;){if(i=Tt(i.times(t),u,1),n=n.times(++c),o=s.plus(Vn(i,n,u,1)),fa(o.d).slice(0,u)===fa(s.d).slice(0,u)){for(a=f;a--;)s=Tt(s.times(s),u,1);if(e==null)if(l<3&&nm(s.d,u-r,h,l))d.precision=u+=10,n=i=o=new d(1),c=0,l++;else return Tt(s,d.precision=m,h,Ut=!0);else return d.precision=m,s}s=o}}function Xu(t,e){var n,r,a,i,s,o,u,l,c,f,d,h=1,m=10,v=t,y=v.d,b=v.constructor,x=b.rounding,w=b.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new b(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(Ut=!1,c=w):c=e,b.precision=c+=m,n=fa(y),r=n.charAt(0),Math.abs(i=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=fa(v.d),r=n.charAt(0),h++;i=v.e,r>1?(v=new b("0."+n),i++):v=new b(r+"."+n.slice(1))}else return l=c1(b,c+2,w).times(i+""),v=Xu(new b(r+"."+n.slice(1)),c-m).plus(l),b.precision=w,e==null?Tt(v,w,x,Ut=!0):v;for(f=v,u=s=v=Vn(v.minus(1),v.plus(1),c,1),d=Tt(v.times(v),c,1),a=3;;){if(s=Tt(s.times(d),c,1),l=u.plus(Vn(s,new b(a),c,1)),fa(l.d).slice(0,c)===fa(u.d).slice(0,c))if(u=u.times(2),i!==0&&(u=u.plus(c1(b,c+2,w).times(i+""))),u=Vn(u,new b(h),c,1),e==null)if(nm(u.d,c-m,x,o))b.precision=c+=m,l=s=v=Vn(f.minus(1),f.plus(1),c,1),d=Tt(v.times(v),c,1),a=o=1;else return Tt(u,b.precision=w,x,Ut=!0);else return b.precision=w,u;u=l,a+=2}}function hW(t){return String(t.s*t.s/0)}function HC(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(r,a),e){if(a-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Ft,n<0&&(r+=Ft),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=Ft;r<a;)t.d.push(+e.slice(r,r+=Ft));e=e.slice(r),r=Ft-e.length}else r-=a;for(;r--;)e+="0";t.d.push(+e),Ut&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function cAe(t,e){var n,r,a,i,s,o,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),cW.test(e))return HC(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(iAe.test(e))n=16,e=e.toLowerCase();else if(aAe.test(e))n=2;else if(sAe.test(e))n=8;else throw Error(gl+e);for(i=e.search(/p/i),i>0?(u=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),s=i>=0,r=t.constructor,s&&(e=e.replace(".",""),o=e.length,i=o-i,a=dW(r,new r(n),i,i*2)),l=h0(e,n,Vs),c=l.length-1,i=c;l[i]===0;--i)l.pop();return i<0?new r(t.s*0):(t.e=Bw(l,c),t.d=l,Ut=!1,s&&(t=Vn(t,a,o*4)),u&&(t=t.times(Math.abs(u)<54?Mr(2,u):vl.pow(2,u))),Ut=!0,t)}function fAe(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Rd(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/Lw(5,n)),e=Rd(t,2,e,e);for(var a,i=new t(5),s=new t(16),o=new t(20);n--;)a=e.times(e),e=e.times(i.plus(a.times(s.times(a).minus(o))));return e}function Rd(t,e,n,r,a){var i,s,o,u,l=t.precision,c=Math.ceil(l/Ft);for(Ut=!1,u=n.times(n),o=new t(r);;){if(s=Vn(o.times(u),new t(e++*e++),l,1),o=a?r.plus(s):r.minus(s),r=Vn(s.times(u),new t(e++*e++),l,1),s=o.plus(r),s.d[c]!==void 0){for(i=c;s.d[i]===o.d[i]&&i--;);if(i==-1)break}i=o,o=r,r=s,s=i}return Ut=!0,s.d.length=c+1,s}function Lw(t,e){for(var n=t;--e;)n*=t;return n}function mW(t,e){var n,r=e.s<0,a=Ls(t,t.precision,1),i=a.times(.5);if(e=e.abs(),e.lte(i))return Yo=r?4:1,e;if(n=e.divToInt(a),n.isZero())Yo=r?3:2;else{if(e=e.minus(n.times(a)),e.lte(i))return Yo=cF(n)?r?2:3:r?4:1,e;Yo=cF(n)?r?1:4:r?3:2}return e.minus(a).abs()}function M$(t,e,n,r){var a,i,s,o,u,l,c,f,d,h=t.constructor,m=n!==void 0;if(m?(Si(n,1,_l),r===void 0?r=h.rounding:Si(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=hW(t);else{for(c=To(t),s=c.indexOf("."),m?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=h0(To(d),10,a),d.e=d.d.length),f=h0(c,10,a),i=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?i--:(t=new h(t),t.d=f,t.e=i,t=Vn(t,d,n,r,0,a),f=t.d,i=t.e,l=sW),s=f[n],o=a/2,l=l||f[n+1]!==void 0,l=r<4?(s!==void 0||l)&&(r===0||r===(t.s<0?3:2)):s>o||s===o&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>a-1;)f[n]=0,n||(++i,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=UC.charAt(f[s]);if(m){if(u>1)if(e==16||e==8){for(s=e==16?4:3,--u;u%s;u++)c+="0";for(f=h0(c,a,e),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=UC.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>u)for(i-=u;i--;)c+="0";else i<u&&(c=c.slice(0,i)+"."+c.slice(i))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function fF(t,e){if(t.length>e)return t.length=e,!0}function dAe(t){return new this(t).abs()}function pAe(t){return new this(t).acos()}function hAe(t){return new this(t).acosh()}function mAe(t,e){return new this(t).plus(e)}function gAe(t){return new this(t).asin()}function vAe(t){return new this(t).asinh()}function yAe(t){return new this(t).atan()}function bAe(t){return new this(t).atanh()}function wAe(t,e){t=new this(t),e=new this(e);var n,r=this.precision,a=this.rounding,i=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ls(this,i,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ls(this,r,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ls(this,i,1).times(.5),n.s=t.s):e.s<0?(this.precision=i,this.rounding=1,n=this.atan(Vn(t,e,i,1)),e=Ls(this,i,1),this.precision=r,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Vn(t,e,i,1)),n}function xAe(t){return new this(t).cbrt()}function NAe(t){return Tt(t=new this(t),t.e+1,2)}function SAe(t,e,n){return new this(t).clamp(e,n)}function CAe(t){if(!t||typeof t!="object")throw Error(Pw+"Object expected");var e,n,r,a=t.defaults===!0,i=["precision",1,_l,"rounding",0,8,"toExpNeg",-td,0,"toExpPos",0,td,"maxE",0,td,"minE",-td,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(n=i[e],a&&(this[n]=VC[n]),(r=t[n])!==void 0)if(Fa(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(gl+n+": "+r);if(n="crypto",a&&(this[n]=VC[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(uW);else this[n]=!1;else throw Error(gl+n+": "+r);return this}function EAe(t){return new this(t).cos()}function TAe(t){return new this(t).cosh()}function gW(t){var e,n,r;function a(i){var s,o,u,l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,dF(i)){l.s=i.s,Ut?!i.d||i.e>a.maxE?(l.e=NaN,l.d=null):i.e<a.minE?(l.e=0,l.d=[0]):(l.e=i.e,l.d=i.d.slice()):(l.e=i.e,l.d=i.d?i.d.slice():i.d);return}if(u=typeof i,u==="number"){if(i===0){l.s=1/i<0?-1:1,l.e=0,l.d=[0];return}if(i<0?(i=-i,l.s=-1):l.s=1,i===~~i&&i<1e7){for(s=0,o=i;o>=10;o/=10)s++;Ut?s>a.maxE?(l.e=NaN,l.d=null):s<a.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[i]):(l.e=s,l.d=[i]);return}else if(i*0!==0){i||(l.s=NaN),l.e=NaN,l.d=null;return}return HC(l,i.toString())}else if(u!=="string")throw Error(gl+i);return(o=i.charCodeAt(0))===45?(i=i.slice(1),l.s=-1):(o===43&&(i=i.slice(1)),l.s=1),cW.test(i)?HC(l,i):cAe(l,i)}if(a.prototype=Ge,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=CAe,a.clone=gW,a.isDecimal=dF,a.abs=dAe,a.acos=pAe,a.acosh=hAe,a.add=mAe,a.asin=gAe,a.asinh=vAe,a.atan=yAe,a.atanh=bAe,a.atan2=wAe,a.cbrt=xAe,a.ceil=NAe,a.clamp=SAe,a.cos=EAe,a.cosh=TAe,a.div=DAe,a.exp=$Ae,a.floor=AAe,a.hypot=IAe,a.ln=kAe,a.log=_Ae,a.log10=FAe,a.log2=OAe,a.max=RAe,a.min=MAe,a.mod=PAe,a.mul=BAe,a.pow=LAe,a.random=zAe,a.round=UAe,a.sign=VAe,a.sin=WAe,a.sinh=qAe,a.sqrt=HAe,a.sub=jAe,a.sum=GAe,a.tan=XAe,a.tanh=KAe,a.trunc=YAe,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function DAe(t,e){return new this(t).div(e)}function $Ae(t){return new this(t).exp()}function AAe(t){return Tt(t=new this(t),t.e+1,3)}function IAe(){var t,e,n=new this(0);for(Ut=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Ut=!0,new this(1/0);n=e}return Ut=!0,n.sqrt()}function dF(t){return t instanceof vl||t&&t.toStringTag===lW||!1}function kAe(t){return new this(t).ln()}function _Ae(t,e){return new this(t).log(e)}function OAe(t){return new this(t).log(2)}function FAe(t){return new this(t).log(10)}function RAe(){return pW(this,arguments,"lt")}function MAe(){return pW(this,arguments,"gt")}function PAe(t,e){return new this(t).mod(e)}function BAe(t,e){return new this(t).mul(e)}function LAe(t,e){return new this(t).pow(e)}function zAe(t){var e,n,r,a,i=0,s=new this(1),o=[];if(t===void 0?t=this.precision:Si(t,1,_l),r=Math.ceil(t/Ft),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));i<r;)a=e[i],a>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:o[i++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);i<r;)a=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,i):(o.push(a%1e7),i+=4);i=r/4}else throw Error(uW);else for(;i<r;)o[i++]=Math.random()*1e7|0;for(r=o[--i],t%=Ft,r&&t&&(a=Mr(10,Ft-t),o[i]=(r/a|0)*a);o[i]===0;i--)o.pop();if(i<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=Ft)o.shift();for(r=1,a=o[0];a>=10;a/=10)r++;r<Ft&&(n-=Ft-r)}return s.e=n,s.d=o,s}function UAe(t){return Tt(t=new this(t),t.e+1,this.rounding)}function VAe(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function WAe(t){return new this(t).sin()}function qAe(t){return new this(t).sinh()}function HAe(t){return new this(t).sqrt()}function jAe(t,e){return new this(t).sub(e)}function GAe(){var t=0,e=arguments,n=new this(e[t]);for(Ut=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Ut=!0,Tt(n,this.precision,this.rounding)}function XAe(t){return new this(t).tan()}function KAe(t){return new this(t).tanh()}function YAe(t){return Tt(t=new this(t),t.e+1,1)}Ge[Symbol.for("nodejs.util.inspect.custom")]=Ge.toString;Ge[Symbol.toStringTag]="Decimal";var vl=Ge.constructor=gW(VC);u1=new vl(u1);l1=new vl(l1);var ZAe="BigNumber",QAe=["?on","config"],JAe=ee(ZAe,QAe,t=>{var{on:e,config:n}=t,r=vl.clone({precision:n.precision,modulo:vl.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(a){return new r(a.value)},e&&e("config",function(a,i){a.precision!==i.precision&&r.config({precision:a.precision})}),r},{isClass:!0});const Ta=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},es=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},eIe=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},BN=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Vf=function(){throw SyntaxError("Invalid Param")};function LN(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const tIe={re:0,im:0},lc=function(t,e){const n=tIe;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return Ue.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return Ue.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Vf();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,i=0;r===null&&Vf();for(let s=0;s<r.length;s++){const o=r[s];o===" "||o==="	"||o===`
`||(o==="+"?a++:o==="-"?i++:o==="i"||o==="I"?(a+i===0&&Vf(),r[s+1]!==" "&&!isNaN(r[s+1])?(n.im+=parseFloat((i%2?"-":"")+r[s+1]),s++):n.im+=parseFloat((i%2?"-":"")+"1"),a=i=0):((a+i===0||isNaN(o))&&Vf(),r[s+1]==="i"||r[s+1]==="I"?(n.im+=parseFloat((i%2?"-":"")+o),s++):n.re+=parseFloat((i%2?"-":"")+o),a=i=0))}a+i>0&&Vf();break;case"number":n.im=0,n.re=t;break;default:Vf()}return isNaN(n.re)||isNaN(n.im),n};function Ue(t,e){if(!(this instanceof Ue))return new Ue(t,e);const n=lc(t,e);this.re=n.re,this.im=n.im}Ue.prototype={re:0,im:0,sign:function(){const t=BN(this.re,this.im);return new Ue(this.re/t,this.im/t)},add:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?Ue.NAN:Ue.INFINITY:new Ue(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im));return r||a?r&&a?Ue.NAN:Ue.INFINITY:new Ue(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),i=this.re===0&&this.im===0,s=n.re===0&&n.im===0;return r&&s||a&&i?Ue.NAN:r||a?Ue.INFINITY:n.im===0&&this.im===0?new Ue(this.re*n.re,0):new Ue(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=lc(t,e),r=this.isInfinite(),a=!(isFinite(n.re)&&isFinite(n.im)),i=this.re===0&&this.im===0,s=n.re===0&&n.im===0;if(i&&s||r&&a)return Ue.NAN;if(s||r)return Ue.INFINITY;if(i||a)return Ue.ZERO;if(n.im===0)return new Ue(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const o=n.re/n.im,u=n.re*o+n.im;return new Ue((this.re*o+this.im)/u,(this.im*o-this.re)/u)}else{const o=n.im/n.re,u=n.im*o+n.re;return new Ue((this.re+this.im*o)/u,(this.im-this.re*o)/u)}},pow:function(t,e){const n=lc(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Ue.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Ue(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Ue(Math.pow(this.im,n.re),0);case 1:return new Ue(0,Math.pow(this.im,n.re));case 2:return new Ue(-Math.pow(this.im,n.re),0);case 3:return new Ue(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Ue.ZERO;const i=Math.atan2(this.im,this.re),s=LN(this.re,this.im);let o=Math.exp(n.re*s-n.im*i),u=n.im*s+n.re*i;return new Ue(o*Math.cos(u),o*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new Ue(Math.sqrt(t),0):new Ue(0,Math.sqrt(-t));const n=BN(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),a=Math.abs(e)/(2*r);return t>=0?new Ue(r,e<0?-a:a):new Ue(a,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new Ue(t,0):new Ue(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new Ue(Math.expm1(t)*Math.cos(e)+eIe(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new Ue(Math.log(t),0):new Ue(LN(t,e),Math.atan2(e,t))},abs:function(){return BN(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new Ue(Math.sin(t)*Ta(e),Math.cos(t)*es(e))},cos:function(){const t=this.re,e=this.im;return new Ue(Math.cos(t)*Ta(e),-Math.sin(t)*es(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+Ta(e);return new Ue(Math.sin(t)/n,es(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-Ta(e);return new Ue(-Math.sin(t)/n,es(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*Ta(2*e)+.5*Math.cos(2*t);return new Ue(Math.cos(t)*Ta(e)/n,Math.sin(t)*es(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*Ta(2*e)-.5*Math.cos(2*t);return new Ue(Math.sin(t)*Ta(e)/n,-Math.cos(t)*es(e)/n)},asin:function(){const t=this.re,e=this.im,n=new Ue(e*e-t*t+1,-2*t*e).sqrt(),r=new Ue(n.re-e,n.im+t).log();return new Ue(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new Ue(e*e-t*t+1,-2*t*e).sqrt(),r=new Ue(n.re-e,n.im+t).log();return new Ue(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new Ue(0,1/0);if(e===-1)return new Ue(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new Ue((1-e*e-t*t)/n,-2*t/n).log();return new Ue(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new Ue(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).atan():new Ue(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Ue(0,1/0);const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).acos():new Ue(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Ue(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).asin():new Ue(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new Ue(es(t)*Math.cos(e),Ta(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new Ue(Ta(t)*Math.cos(e),es(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=Ta(t)+Math.cos(e);return new Ue(es(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=Ta(t)-Math.cos(e);return new Ue(es(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-Ta(2*t);return new Ue(-2*es(t)*Math.cos(e)/n,2*Ta(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+Ta(2*t);return new Ue(2*Ta(t)*Math.cos(e)/n,-2*es(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,a=1+t,i=r*r+e*e,s=i!==0?new Ue((a*r-e*e)/i,(e*r+a*e)/i):new Ue(t!==-1?t/0:0,e!==0?e/0:0),o=s.re;return s.re=LN(s.re,s.im)/2,s.im=Math.atan2(s.im,o)/2,n&&(s.im=-s.im),s},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Ue(0,Math.PI/2);const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).atanh():new Ue(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new Ue(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).asinh():new Ue(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return Ue.INFINITY;const n=t*t+e*e;return n!==0?new Ue(t/n,-e/n).acosh():new Ue(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return Ue.INFINITY;if(this.isInfinite())return Ue.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new Ue(t/n,-e/n)},conjugate:function(){return new Ue(this.re,-this.im)},neg:function(){return new Ue(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new Ue(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new Ue(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new Ue(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=lc(t,e);return Math.abs(n.re-this.re)<=Ue.EPSILON&&Math.abs(n.im-this.im)<=Ue.EPSILON},clone:function(){return new Ue(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<Ue.EPSILON&&(t=0),Math.abs(e)<Ue.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Ue.ZERO=new Ue(0,0);Ue.ONE=new Ue(1,0);Ue.I=new Ue(0,1);Ue.PI=new Ue(Math.PI,0);Ue.E=new Ue(Math.E,0);Ue.INFINITY=new Ue(1/0,1/0);Ue.NAN=new Ue(NaN,NaN);Ue.EPSILON=1e-15;var nIe="Complex",rIe=[],aIe=ee(nIe,rIe,()=>(Object.defineProperty(Ue,"name",{value:"Complex"}),Ue.prototype.constructor=Ue,Ue.prototype.type="Complex",Ue.prototype.isComplex=!0,Ue.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ue.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ue.prototype.format=function(t){var e="",n=this.im,r=this.re,a=Nc(this.re,t),i=Nc(this.im,t),s=qt(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(r/n)<o&&(r=0),Math.abs(n/r)<o&&(n=0)}return n===0?e=a:r===0?n===1?e="i":n===-1?e="-i":e=i+"i":n<0?n===-1?e=a+" - i":e=a+" - "+i.substring(1)+"i":n===1?e=a+" + i":e=a+" + "+i+"i",e},Ue.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Ue(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(qt(n)){if(is(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),qt(r))return new Ue({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ue.prototype.valueOf=Ue.prototype.toString,Ue.fromJSON=function(t){return new Ue(t)},Ue.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ue),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const Et=BigInt(0),Kt=BigInt(1),rm=BigInt(2),jC=BigInt(5),ci=BigInt(10),iIe=2e3,ut={s:Kt,n:Et,d:Kt};function qo(t,e){try{t=BigInt(t)}catch{throw Bu()}return t*e}function Fs(t){return typeof t=="bigint"?t:Math.floor(t)}function Qn(t,e){if(e===Et)throw P$();const n=Object.create(ns.prototype);n.s=t<Et?-Kt:Kt,t=t<Et?-t:t;const r=hc(t,e);return n.n=t/r,n.d=e/r,n}function Wf(t){const e={};let n=t,r=rm,a=jC-Kt;for(;a<=n;){for(;n%r===Et;)n/=r,e[r]=(e[r]||Et)+Kt;a+=Kt+rm*r++}return n!==t?n>1&&(e[n]=(e[n]||Et)+Kt):e[t]=(e[t]||Et)+Kt,e}const Zr=function(t,e){let n=Et,r=Kt,a=Kt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Bu();if(t%1!==0)throw pF();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Bu();if(e%1!==0)throw pF();r=BigInt(e)}a=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw Bu();a=n*r}else if(typeof t=="number"){if(isNaN(t))throw Bu();if(t<0&&(a=-Kt,t=-t),t%1===0)n=BigInt(t);else if(t>0){let i=1,s=0,o=1,u=1,l=1,c=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);o<=c&&l<=c;){let f=(s+u)/(o+l);if(t===f){o+l<=c?(n=s+u,r=o+l):l>o?(n=u,r=l):(n=s,r=o);break}else t>f?(s+=u,o+=l):(u+=s,l+=o),o>c?(n=u,r=l):(n=s,r=o)}n=BigInt(n)*BigInt(i),r=BigInt(r)}}else if(typeof t=="string"){let i=0,s=Et,o=Et,u=Et,l=Kt,c=Kt,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw Bu();if(f[i]==="-"?(a=-Kt,i++):f[i]==="+"&&i++,f.length===i+1?o=qo(f[i++],a):f[i+1]==="."||f[i]==="."?(f[i]!=="."&&(s=qo(f[i++],a)),i++,(i+1===f.length||f[i+1]==="("&&f[i+3]===")"||f[i+1]==="'"&&f[i+3]==="'")&&(o=qo(f[i],a),l=ci**BigInt(f[i].length),i++),(f[i]==="("&&f[i+2]===")"||f[i]==="'"&&f[i+2]==="'")&&(u=qo(f[i+1],a),c=ci**BigInt(f[i+1].length)-Kt,i+=3)):f[i+1]==="/"||f[i+1]===":"?(o=qo(f[i],a),l=qo(f[i+2],Kt),i+=3):f[i+3]==="/"&&f[i+1]===" "&&(s=qo(f[i],a),o=qo(f[i+2],a),l=qo(f[i+4],Kt),i+=5),f.length<=i)r=l*c,a=n=u+r*s+c*o;else throw Bu()}else if(typeof t=="bigint")n=t,a=t,r=Kt;else throw Bu();if(r===Et)throw P$();ut.s=a<Et?-Kt:Kt,ut.n=n<Et?-n:n,ut.d=r<Et?-r:r};function sIe(t,e,n){let r=Kt;for(;e>Et;t=t*t%n,e>>=Kt)e&Kt&&(r=r*t%n);return r}function oIe(t,e){for(;e%rm===Et;e/=rm);for(;e%jC===Et;e/=jC);if(e===Kt)return Et;let n=ci%e,r=1;for(;n!==Kt;r++)if(n=n*ci%e,r>iIe)return Et;return BigInt(r)}function uIe(t,e,n){let r=Kt,a=sIe(ci,n,e);for(let i=0;i<300;i++){if(r===a)return BigInt(i);r=r*ci%e,a=a*ci%e}return 0}function hc(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function ns(t,e){if(Zr(t,e),this instanceof ns)t=hc(ut.d,ut.n),this.s=ut.s,this.n=ut.n/t,this.d=ut.d/t;else return Qn(ut.s*ut.n,ut.d)}var P$=function(){return new Error("Division by Zero")},Bu=function(){return new Error("Invalid argument")},pF=function(){return new Error("Parameters must be integer")};ns.prototype={s:Kt,n:Et,d:Kt,abs:function(){return Qn(this.n,this.d)},neg:function(){return Qn(-this.s*this.n,this.d)},add:function(t,e){return Zr(t,e),Qn(this.s*this.n*ut.d+ut.s*this.d*ut.n,this.d*ut.d)},sub:function(t,e){return Zr(t,e),Qn(this.s*this.n*ut.d-ut.s*this.d*ut.n,this.d*ut.d)},mul:function(t,e){return Zr(t,e),Qn(this.s*ut.s*this.n*ut.n,this.d*ut.d)},div:function(t,e){return Zr(t,e),Qn(this.s*ut.s*this.n*ut.d,this.d*ut.n)},clone:function(){return Qn(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Qn(this.s*this.n%this.d,Kt);if(Zr(t,e),Et===ut.n*this.d)throw P$();return Qn(this.s*(ut.d*this.n)%(ut.n*this.d),ut.d*this.d)},gcd:function(t,e){return Zr(t,e),Qn(hc(ut.n,this.n)*hc(ut.d,this.d),ut.d*this.d)},lcm:function(t,e){return Zr(t,e),ut.n===Et&&this.n===Et?Qn(Et,Kt):Qn(ut.n*this.n,hc(ut.n,this.n)*hc(ut.d,this.d))},inverse:function(){return Qn(this.s*this.d,this.n)},pow:function(t,e){if(Zr(t,e),ut.d===Kt)return ut.s<Et?Qn((this.s*this.d)**ut.n,this.n**ut.n):Qn((this.s*this.n)**ut.n,this.d**ut.n);if(this.s<Et)return null;let n=Wf(this.n),r=Wf(this.d),a=Kt,i=Kt;for(let s in n)if(s!=="1"){if(s==="0"){a=Et;break}if(n[s]*=ut.n,n[s]%ut.d===Et)n[s]/=ut.d;else return null;a*=BigInt(s)**n[s]}for(let s in r)if(s!=="1"){if(r[s]*=ut.n,r[s]%ut.d===Et)r[s]/=ut.d;else return null;i*=BigInt(s)**r[s]}return ut.s<Et?Qn(i,a):Qn(a,i)},log:function(t,e){if(Zr(t,e),this.s<=Et||ut.s<=Et)return null;const n={},r=Wf(ut.n),a=Wf(ut.d),i=Wf(this.n),s=Wf(this.d);for(const l in a)r[l]=(r[l]||Et)-a[l];for(const l in s)i[l]=(i[l]||Et)-s[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in i)l!=="1"&&(n[l]=!0);let o=null,u=null;for(const l in n){const c=r[l]||Et,f=i[l]||Et;if(c===Et){if(f!==Et)return null;continue}let d=f,h=c;const m=hc(d,h);if(d/=m,h/=m,o===null&&u===null)o=d,u=h;else if(d*u!==o*h)return null}return o!==null&&u!==null?Qn(o,u):null},equals:function(t,e){return Zr(t,e),this.s*this.n*ut.d===ut.s*ut.n*this.d},lt:function(t,e){return Zr(t,e),this.s*this.n*ut.d<ut.s*ut.n*this.d},lte:function(t,e){return Zr(t,e),this.s*this.n*ut.d<=ut.s*ut.n*this.d},gt:function(t,e){return Zr(t,e),this.s*this.n*ut.d>ut.s*ut.n*this.d},gte:function(t,e){return Zr(t,e),this.s*this.n*ut.d>=ut.s*ut.n*this.d},compare:function(t,e){Zr(t,e);let n=this.s*this.n*ut.d-ut.s*ut.n*this.d;return(Et<n)-(n<Et)},ceil:function(t){return t=ci**BigInt(t||0),Qn(Fs(this.s*t*this.n/this.d)+(t*this.n%this.d>Et&&this.s>=Et?Kt:Et),t)},floor:function(t){return t=ci**BigInt(t||0),Qn(Fs(this.s*t*this.n/this.d)-(t*this.n%this.d>Et&&this.s<Et?Kt:Et),t)},round:function(t){return t=ci**BigInt(t||0),Qn(Fs(this.s*t*this.n/this.d)+this.s*((this.s>=Et?Kt:Et)+rm*(t*this.n%this.d)>this.d?Kt:Et),t)},roundTo:function(t,e){Zr(t,e);const n=this.n*ut.d,r=this.d*ut.n,a=n%r;let i=Fs(n/r);return a+a>=r&&i++,Qn(this.s*i*ut.n,ut.d)},divisible:function(t,e){return Zr(t,e),!(!(ut.n*this.d)||this.n*ut.d%(ut.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=oIe(e,n),a=uIe(e,n,r),i=this.s<Et?"-":"";if(i+=Fs(e/n),e%=n,e*=ci,e&&(i+="."),r){for(let s=a;s--;)i+=Fs(e/n),e%=n,e*=ci;i+="(";for(let s=r;s--;)i+=Fs(e/n),e%=n,e*=ci;i+=")"}else for(let s=t;e&&s--;)i+=Fs(e/n),e%=n,e*=ci;return i},toFraction:function(t){let e=this.n,n=this.d,r=this.s<Et?"-":"";if(n===Kt)r+=e;else{let a=Fs(e/n);t&&a>Et&&(r+=a,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<Et?"-":"";if(n===Kt)r+=e;else{let a=Fs(e/n);t&&a>Et&&(r+=a,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(Fs(t/e));let r=t%e;t=e,e=r}while(t!==Kt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let a=1;a<r.length;a++){let i=Qn(r[a-1],Kt);for(let o=a-2;o>=0;o--)i=i.inverse().add(r[o]);let s=i.sub(n);if(s.n*e<s.d)return i.mul(this.s)}return this}};var lIe="Fraction",cIe=[],fIe=ee(lIe,cIe,()=>(Object.defineProperty(ns,"name",{value:"Fraction"}),ns.prototype.constructor=ns,ns.prototype.type="Fraction",ns.prototype.isFraction=!0,ns.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ns.fromJSON=function(t){return new ns(t)},ns),{isClass:!0}),dIe="Range",pIe=[],hIe=ee(dIe,pIe,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,i=n!=null,s=r!=null;if(a){if(jt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(i){if(jt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter end must be a number")}if(s){if(jt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=a?parseFloat(e):0,this.end=i?parseFloat(n):0,this.step=s?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(i){return parseFloat(i)}),a=r.some(function(i){return isNaN(i)});if(a)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,a=this.end,i=a-n;return Gu(r)===Gu(i)?e=Math.ceil(i/r):i===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,a=this.end,i=0;if(r>0)for(;n<a;)e(n,[i],this),n+=r,i++;else if(r<0)for(;n>a;)e(n,[i],this),n+=r,i++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,a,i){n[a[0]]=e(r,a,i)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Nc(this.start,e);return this.step!==1&&(n+=":"+Nc(this.step,e)),n+=":"+Nc(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),mIe="Matrix",gIe=[],vIe=ee(mIe,gIe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function zN(t,e,n){var r=t.constructor,a=new r(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!wt(n))throw new Error("size must be an integer");if(t.greaterThan(a.pow(n-1).sub(1))||t.lessThan(a.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(n))),i="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function yIe(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:a}=nW(e);switch(n){case"fixed":return wIe(t,r);case"exponential":return hF(t,r);case"engineering":return bIe(t,r);case"bin":return zN(t,2,a);case"oct":return zN(t,8,a);case"hex":return zN(t,16,a);case"auto":{var i=mF(e==null?void 0:e.lowerExp,-3),s=mF(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,u=t.toSignificantDigits(r),l=u.e;return l>=i&&l<s?o=u.toFixed():o=hF(t,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function bIe(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,a=t.mul(Math.pow(10,-r)),i=a.toPrecision(e);if(i.includes("e")){var s=t.constructor;i=new s(i).toFixed()}return i+"e"+(n>=0?"+":"")+r.toString()}function hF(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function wIe(t,e){return t.toFixed(e)}function mF(t,e){return qt(t)?t:jt(t)?t.toNumber():e}function xIe(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function Yt(t,e){var n=NIe(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function NIe(t,e){if(typeof t=="number")return Nc(t,e);if(jt(t))return yIe(t,e);if(SIe(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return vW(t,e);if(Ia(t))return nd(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>nd(r)+": "+Yt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function nd(t){for(var e=String(t),n="",r=0;r<e.length;){var a=e.charAt(r);n+=a in gF?gF[a]:a,r++}return'"'+n+'"'}var gF={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function os(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function vW(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,a=0;a<r;a++)a!==0&&(n+=", "),n+=vW(t[a],e);return n+="]",n}else return Yt(t,e)}function SIe(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function GC(t,e){if(!Ia(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ln(t)+", index: 0)");if(!Ia(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ln(e)+", index: 1)");return t===e?0:t>e?1:-1}function Qt(t,e,n){if(!(this instanceof Qt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Qt.prototype=new RangeError;Qt.prototype.constructor=RangeError;Qt.prototype.name="DimensionError";Qt.prototype.isDimensionError=!0;function Ks(t,e,n){if(!(this instanceof Ks))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ks.prototype=new RangeError;Ks.prototype.constructor=RangeError;Ks.prototype.name="IndexError";Ks.prototype.isIndexError=!0;function Bt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function yW(t,e,n){var r,a=t.length;if(a!==e[n])throw new Qt(a,e[n]);if(n<e.length-1){var i=n+1;for(r=0;r<a;r++){var s=t[r];if(!Array.isArray(s))throw new Qt(e.length-1,e.length,"<");yW(t[r],e,i)}}else for(r=0;r<a;r++)if(Array.isArray(t[r]))throw new Qt(e.length+1,e.length,">")}function vF(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new Qt(t.length,0)}else yW(t,e,0)}function f1(t,e){var n=t.isMatrix?t._size:Bt(t),r=e._sourceSize;r.forEach((a,i)=>{if(a!==null&&a!==n[i])throw new Qt(a,n[i])})}function Mn(t,e){if(t!==void 0){if(!qt(t)||!wt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Ks(t,e)}}function Md(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&$n(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Ia(n)&&n.length===0)return!0}return!1}function Pd(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!qt(a)||!wt(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Yt(e)+")")}),(qt(t)||jt(t))&&(t=[t]);var r=n!==void 0?n:0;return XC(t,e,0,r),t}function XC(t,e,n,r){var a,i,s=t.length,o=e[n],u=Math.min(s,o);if(t.length=o,n<e.length-1){var l=n+1;for(a=0;a<u;a++)i=t[a],Array.isArray(i)||(i=[i],t[a]=i),XC(i,e,l,r);for(a=u;a<o;a++)i=[],t[a]=i,XC(i,e,l,r)}else{for(a=0;a<u;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=u;a<o;a++)t[a]=r}}function B$(t,e){var n=vn(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Qt(0,r,"!=");e=L$(e,r);var a=bW(e);if(r!==a)throw new Qt(a,r,"!=");try{return CIe(n,e)}catch(i){throw i instanceof Qt?new Qt(a,r,"!="):i}}function L$(t,e){var n=bW(t),r=t.slice(),a=-1,i=t.indexOf(a),s=t.indexOf(a,i+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=i>=0,u=e%n===0;if(o)if(u)r[i]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function bW(t){return t.reduce((e,n)=>e*n,1)}function CIe(t,e){for(var n=t,r,a=e.length-1;a>0;a--){var i=e[a];r=[];for(var s=n.length/i,o=0;o<s;o++)r.push(n.slice(o*i,(o+1)*i));n=r}return n}function d1(t,e){for(var n=Bt(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=wW(t,r,0),n.length=r),t}function wW(t,e,n){var r,a;if(n<e){var i=n+1;for(r=0,a=t.length;r<a;r++)t[r]=wW(t[r],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function xW(t,e,n,r){var a=r||Bt(t);if(n)for(var i=0;i<n;i++)t=[t],a.unshift(1);for(t=NW(t,e,0);a.length<e;)a.push(1);return t}function NW(t,e,n){var r,a;if(Array.isArray(t)){var i=n+1;for(r=0,a=t.length;r<a;r++)t[r]=NW(t[r],e,i)}else for(var s=n;s<e;s++)t=[t];return t}function vn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function nl(t,e){return Array.prototype.map.call(t,e)}function SW(t,e){Array.prototype.forEach.call(t,e)}function EIe(t,e){if(Bt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function yF(t,e){if(Bt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function bF(t,e){return Array.prototype.join.call(t,e)}function Bd(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function p1(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function zw(t,e){for(var n,r=0,a=0;a<t.length;a++){var i=t[a],s=Array.isArray(i);if(a===0&&s&&(r=i.length),s&&i.length!==r)return;var o=s?zw(i,e):e(i);if(n===void 0)n=o;else if(n!==o)return"mixed"}return n}function CW(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Qt(t.length,e.length);for(var a=[],i=0;i<t.length;i++)a[i]=CW(t[i],e[i],n,r+1);return a}else return t.concat(e)}function EW(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return CW(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function z$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),a=Math.max(...r),i=new Array(a).fill(null),s=0;s<e.length;s++)for(var o=e[s],u=r[s],l=0;l<u;l++){var c=a-u+l;o[l]>i[c]&&(i[c]=o[l])}for(var f=0;f<e.length;f++)TW(e[f],i);return i}function TW(t,e){for(var n=e.length,r=t.length,a=0;a<r;a++){var i=n-r+a;if(t[a]<e[i]&&t[a]>1||t[a]>e[i])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[a]," to size ").concat(e[i]))}}function yc(t,e){var n=Bt(t);if(cu(n,e))return t;TW(n,e);var r=z$(n,e),a=r.length,i=[...Array(a-n.length).fill(1),...n],s=DIe(t);n.length<a&&(s=B$(s,i),n=Bt(s));for(var o=0;o<a;o++)n[o]<r[o]&&(s=TIe(s,r[o],o),n=Bt(s));return s}function TIe(t,e,n){return EW(...Array(e).fill(t),n)}function U$(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Bt(t);if(e.length!==n.length)throw new Qt(e.length,n.length);for(var r=0;r<e.length;r++)Mn(e[r],n[r]);return e.reduce((a,i)=>a[i],t)}function V$(t,e,n,r){return Array.isArray(t)?t.map(function(a,i){return V$(a,e.concat(i),n,r)}):r(t,e,n)}function DIe(t){return Br([],t)}function zc(t,e,n){if(o1.isTypedFunction(t)){var r=(e.isMatrix?e.size():Bt(e)).map(()=>0),a=e.isMatrix?e.get(r):U$(e,r),i=Object.keys(t.signatures).length===1,s=$Ie(t,a,r,e),o=i?Object.values(t.signatures)[0]:t;return s>=1&&s<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return wF(o,l.slice(0,s),n,t.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return wF(o,l,n,t.name)}}return t}function $Ie(t,e,n,r){for(var a=[e,n,r],i=3;i>0;i--){var s=a.slice(0,i);if(o1.resolve(t,s)!==null)return i}}function wF(t,e,n,r){try{return t(...e)}catch(a){AIe(a,e,n,r)}}function AIe(t,e,n,r){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var i=[];throw i.push("value: ".concat(Ln(e[0]))),e.length>=2&&i.push("index: ".concat(Ln(e[1]))),e.length>=3&&i.push("array: ".concat(Ln(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(i.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var IIe="DenseMatrix",kIe=["Matrix"],_Ie=ee(IIe,kIe,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Ia(f))throw new Error("Invalid datatype: "+f);if($t(c))c.type==="DenseMatrix"?(this._data=zt(c._data),this._size=zt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&$n(c.data)&&$n(c.size))this._data=c.data,this._size=c.size,vF(this._data,this._size),this._datatype=f||c.datatype;else if($n(c))this._data=l(c),this._size=Bt(this._data),vF(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Ln(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return zw(this._data,Ln)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return i(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return U$(this._data,c)},n.prototype.set=function(c,f,d){if(!$n(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Qt(c.length,this._size.length,"<");var h,m,v,y=c.map(function(x){return x+1});u(this,y,d);var b=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],Mn(v,b.length),b=b[v];return v=c[c.length-1],Mn(v,b.length),b[v]=f,this};function r(c,f){if(!Ow(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new Qt(h.length,c._size.length);for(var m=f.min(),v=f.max(),y=0,b=c._size.length;y<b;y++)Mn(m[y],c._size[y]),Mn(v[y],c._size[y]);return new n(a(c._data,f,h.length,0),c._datatype)}function a(c,f,d,h){var m=h===d-1,v=f.dimension(h);return m?v.map(function(y){return Mn(y,c.length),c[y]}).valueOf():v.map(function(y){Mn(y,c.length);var b=c[y];return a(b,f,d,h+1)}).valueOf()}function i(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),v=f.isScalar(),y;if($t(d)?(y=d.size(),d=d.valueOf()):y=Bt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!cu(y,m))try{y.length===0?d=yc([d],m):d=yc(d,m),y=Bt(d)}catch{}if(m.length<c._size.length)throw new Qt(m.length,c._size.length,"<");if(y.length<m.length){for(var b=0,x=0;m[b]===1&&y[b]===1;)b++;for(;m[b]===1;)x++,b++;d=xW(d,m.length,x,y)}if(!cu(m,y))throw new Qt(m,y,">");var w=f.max().map(function(E){return E+1});u(c,w,h);var S=m.length,C=0;s(c._data,f,d,S,C)}return c}function s(c,f,d,h,m){var v=m===h-1,y=f.dimension(m);v?y.forEach(function(b,x){Mn(b),c[b]=d[x[0]]}):y.forEach(function(b,x){Mn(b),s(c[b],f,d[x[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!ws(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return o(m,h,f)};function o(c,f,d){if(f.length===0){for(var h=c._data;$n(h);)h=h[0];return h}return c._size=f.slice(0),c._data=Pd(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=B$(d._data,c);var h=d._size.reduce((m,v)=>m*v);return d._size=L$(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],m=!0);m&&o(c,h,d)}n.prototype.clone=function(){var c=new n({data:zt(this._data),size:zt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var m=Array(d.length).fill(0),v=Array(d.length-1),y=v.length-1;v[0]=f._data[0];for(var b=0;b<y;b++)v[b+1]=v[b][0];for(m[y]=-1;;){var x=void 0;for(x=y;x>=0;x--){if(m[x]++,m[x]===d[x]){m[x]=0;continue}v[x]=x===0?f._data[m[x]]:v[x-1][m[x]];for(var w=x;w<y;w++)v[w+1]=v[w][0];for(var S=0;S<d[v.length];S++)m[v.length]=S,c(v[y],S,m.slice(0));break}if(x===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=zc(c,f._data,"map");return d._forEach(function(m,v,y){m[v]=h(m[v],y,f)}),d},n.prototype.forEach=function(c){var f=this,d=zc(c,f._data,"map");f._forEach(function(h,m,v){d(h[m],v,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if($n(d))for(var m=0;m<d.length;m++)yield*c(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(b){var x=h.map(w=>[w[b]]);f.push(new n(x,c._datatype))},v=0;v<d[1];v++)m(v);return f},n.prototype.toArray=function(){return zt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Yt(this._data,c)},n.prototype.toString=function(){return Yt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(jt(c)&&(c=c.toNumber()),!qt(c)||!wt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-f),y=[],b=0;b<v;b++)y[b]=this._data[b+d][b+f];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!$n(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(A){if(jt(A)&&(A=A.toNumber()),!qt(A)||!wt(A)||A<1)throw new Error("Size values must be positive integers");return A}),d){if(jt(d)&&(d=d.toNumber()),!qt(d)||!wt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=c[0],b=c[1],x=Math.min(y-v,b-m),w;if($n(f)){if(f.length!==x)throw new Error("Invalid value array length");w=function(k){return f[k]}}else if($t(f)){var S=f.size();if(S.length!==1||S[0]!==x)throw new Error("Invalid matrix length");w=function(k){return f.get([k])}}else w=function(){return f};h||(h=jt(w(0))?w(0).mul(0):0);var C=[];if(c.length>0){C=Pd(C,c,h);for(var E=0;E<x;E++)C[E+v][E+m]=w(E)}return new n({data:C,size:[y,b]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!qt(c)||!wt(c)||!qt(f)||!wt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Mn(c,this._size[0]),Mn(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return $t(c)?l(c.valueOf()):$n(c)?c.map(l):c}return n},{isClass:!0}),xF="clone",OIe=["typed"],FIe=ee(xF,OIe,t=>{var{typed:e}=t;return e(xF,{any:zt})});function DW(t){var e=t.length,n=t[0].length,r,a,i=[];for(a=0;a<n;a++){var s=[];for(r=0;r<e;r++)s.push(t[r][a]);i.push(s)}return i}function fp(t){for(var e=0;e<t.length;e++)if(ws(t[e]))return!0;return!1}function fu(t,e){$t(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var a=t[n];Array.isArray(a)?fu(a,e):e(a)}}function Vt(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return Vt(r,e)}):e(t)}function Uw(t,e,n){var r=Array.isArray(t)?Bt(t):t.size();if(e<0||e>=r.length)throw new Ks(e,r.length);return $t(t)?t.create(h1(t.valueOf(),e,n),t.datatype()):h1(t,e,n)}function h1(t,e,n){var r,a,i,s;if(e<=0)if(Array.isArray(t[0])){for(s=DW(t),a=[],r=0;r<s.length;r++)a[r]=h1(s[r],e-1,n);return a}else{for(i=t[0],r=1;r<t.length;r++)i=n(i,t[r]);return i}else{for(a=[],r=0;r<t.length;r++)a[r]=h1(t[r],e-1,n);return a}}function NF(t,e,n,r,a,i,s,o,u,l,c){var f=t._values,d=t._index,h=t._ptr,m,v,y,b;if(r)for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==i?(n[b]=i,s.push(b),r[b]=f[m]):(r[b]=o(r[b],f[m]),a[b]=i);else for(v=h[e],y=h[e+1],m=v;m<y;m++)b=d[m],n[b]!==i?(n[b]=i,s.push(b)):a[b]=i}var SF="isInteger",RIe=["typed"],MIe=ee(SF,RIe,t=>{var{typed:e}=t;return e(SF,{number:wt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),Ys="number",dp="number, number";function $W(t){return Math.abs(t)}$W.signature=Ys;function AW(t,e){return t+e}AW.signature=dp;function IW(t,e){return t-e}IW.signature=dp;function kW(t,e){return t*e}kW.signature=dp;function _W(t){return-t}_W.signature=Ys;function OW(t){return t}OW.signature=Ys;function Sh(t){return z$e(t)}Sh.signature=Ys;function FW(t){return t*t*t}FW.signature=Ys;function RW(t){return Math.exp(t)}RW.signature=Ys;function MW(t){return U$e(t)}MW.signature=Ys;function PW(t,e){if(!wt(t)||!wt(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}PW.signature=dp;function PIe(t,e){return Math.log(t)}function BW(t){return B$e(t)}BW.signature=Ys;function LW(t){return P$e(t)}LW.signature=Ys;function CF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function KC(t){return Gu(t)}KC.signature=Ys;function zW(t){return t*t}zW.signature=Ys;function UW(t,e){var n,r,a,i=0,s=1,o=1,u=0;if(!wt(t)||!wt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),a=t-r*e,n=i,i=s-r*i,s=n,n=o,o=u-r*o,u=n,t=e,e=a;var l;return t<0?l=[-t,-s,-u]:l=[t,t?s:0,u],l}UW.signature=dp;function VW(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}VW.signature=dp;function ph(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!wt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(rW(t,e))}var BIe="number",pp="number, number";function WW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitAnd");return t&e}WW.signature=pp;function qW(t){if(!wt(t))throw new Error("Integer expected in function bitNot");return~t}qW.signature=BIe;function HW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitOr");return t|e}HW.signature=pp;function jW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function bitXor");return t^e}jW.signature=pp;function GW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function leftShift");return t<<e}GW.signature=pp;function XW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function rightArithShift");return t>>e}XW.signature=pp;function KW(t,e){if(!wt(t)||!wt(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}KW.signature=pp;function Zo(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Zo(t,n)*Zo(n+1,e)}function YW(t,e){if(!wt(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!wt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,a=e<n?n+1:e+1,i=2,s=e<n?e:n,o=a;o<=t;++o)for(r*=o;i<=s&&r%i===0;)r/=i,++i;return i<=s&&(r/=Zo(i,s)),r}YW.signature="number, number";var LIe=Math.PI,zIe=2*Math.PI,UIe=Math.E,VIe=1.618033988749895,WIe="number",W$="number, number";function ZW(t){return!t}ZW.signature=WIe;function YC(t,e){return!!(t||e)}YC.signature=W$;function ZC(t,e){return!!t!=!!e}ZC.signature=W$;function QC(t,e){return!!(t&&e)}QC.signature=W$;function m1(t){var e;if(wt(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Zo(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*m1(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,a=r*t,i=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*a)+163879/(209018880*i)+5246819/(75246796800*i*t))}--t,e=hd[0];for(var s=1;s<hd.length;++s)e+=hd[s]/(t+s);var o=t+QW+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}m1.signature="number";var QW=4.7421875,hd=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],JW=.9189385332046728,qIe=5,HIe=7,EF=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function g1(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-g1(1-t);t=t-1;for(var e=t+qIe+.5,n=EF[0],r=HIe-1;r>=1;r--)n+=EF[r]/(t+r);return JW+(t+.5)*Math.log(e)-e+Math.log(n)}g1.signature="number";var Ba="number";function e7(t){return H$e(t)}e7.signature=Ba;function t7(t){return Math.atan(1/t)}t7.signature=Ba;function n7(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}n7.signature=Ba;function r7(t){return Math.asin(1/t)}r7.signature=Ba;function a7(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}a7.signature=Ba;function i7(t){return Math.acos(1/t)}i7.signature=Ba;function s7(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}s7.signature=Ba;function o7(t){return j$e(t)}o7.signature=Ba;function u7(t){return G$e(t)}u7.signature=Ba;function l7(t){return 1/Math.tan(t)}l7.signature=Ba;function c7(t){var e=Math.exp(2*t);return(e+1)/(e-1)}c7.signature=Ba;function f7(t){return 1/Math.sin(t)}f7.signature=Ba;function d7(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Gu(t)}d7.signature=Ba;function p7(t){return 1/Math.cos(t)}p7.signature=Ba;function h7(t){return 2/(Math.exp(t)+Math.exp(-t))}h7.signature=Ba;function m7(t){return K$e(t)}m7.signature=Ba;var q$="number";function g7(t){return t<0}g7.signature=q$;function v7(t){return t>0}v7.signature=q$;function y7(t){return Number.isNaN(t)}y7.signature=q$;function Ci(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var TF="isNegative",jIe=["typed","config"],GIe=ee(TF,jIe,t=>{var{typed:e,config:n}=t;return e(TF,{number:r=>ga(r,0,n.relTol,n.absTol)?!1:g7(r),BigNumber:r=>Ci(r,new r.constructor(0),n.relTol,n.absTol)?!1:r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r<0n,Fraction:r=>r.s<0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),DF="isNumeric",XIe=["typed"],KIe=ee(DF,XIe,t=>{var{typed:e}=t;return e(DF,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),$F="hasNumericValue",YIe=["typed","isNumeric"],ZIe=ee($F,YIe,t=>{var{typed:e,isNumeric:n}=t;return e($F,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return n(a)}})}),AF="isPositive",QIe=["typed","config"],JIe=ee(AF,QIe,t=>{var{typed:e,config:n}=t;return e(AF,{number:r=>ga(r,0,n.relTol,n.absTol)?!1:v7(r),BigNumber:r=>Ci(r,new r.constructor(0),n.relTol,n.absTol)?!1:!r.isNeg()&&!r.isZero()&&!r.isNaN(),bigint:r=>r>0n,Fraction:r=>r.s>0n&&r.n>0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),IF="isZero",eke=["typed","equalScalar"],tke=ee(IF,eke,t=>{var{typed:e,equalScalar:n}=t;return e(IF,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>a=>e.find(r,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),kF="isNaN",nke=["typed"],rke=ee(kF,nke,t=>{var{typed:e}=t;return e(kF,{number:y7,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),_F="typeOf",ake=["typed"],ike=ee(_F,ake,t=>{var{typed:e}=t;return e(_F,{any:Ln})});function ske(t,e,n,r){return ga(t.re,e.re,n,r)&&ga(t.im,e.im,n,r)}var hp=ee("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(!r.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),a.valueType()])(r.value,a.value)})}}),v1="equalScalar",oke=["typed","config"],uke=ee(v1,oke,t=>{var{typed:e,config:n}=t,r=hp({typed:e});return e(v1,{"boolean, boolean":function(i,s){return i===s},"number, number":function(i,s){return ga(i,s,n.relTol,n.absTol)},"BigNumber, BigNumber":function(i,s){return i.eq(s)||Ci(i,s,n.relTol,n.absTol)},"bigint, bigint":function(i,s){return i===s},"Fraction, Fraction":function(i,s){return i.equals(s)},"Complex, Complex":function(i,s){return ske(i,s,n.relTol,n.absTol)}},r)});ee(v1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(v1,{"number, number":function(a,i){return ga(a,i,n.relTol,n.absTol)}})});var lke="SparseMatrix",cke=["typed","equalScalar","Matrix"],fke=ee(lke,cke,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function a(v,y){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Ia(y))throw new Error("Invalid datatype: "+y);if($t(v))i(this,v,y);else if(v&&$n(v.index)&&$n(v.ptr)&&$n(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if($n(v))s(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Ln(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function i(v,y,b){y.type==="SparseMatrix"?(v._values=y._values?zt(y._values):void 0,v._index=zt(y._index),v._ptr=zt(y._ptr),v._size=zt(y._size),v._datatype=b||y._datatype):s(v,y.valueOf(),b||y._datatype)}function s(v,y,b){v._values=[],v._index=[],v._ptr=[],v._datatype=b;var x=y.length,w=0,S=n,C=0;if(Ia(b)&&(S=e.find(n,[b,b])||n,C=e.convert(0,b)),x>0){var E=0;do{v._ptr.push(v._index.length);for(var A=0;A<x;A++){var k=y[A];if($n(k)){if(E===0&&w<k.length&&(w=k.length),E<k.length){var D=k[E];S(D,C)||(v._values.push(D),v._index.push(A))}}else E===0&&w<1&&(w=1),S(k,C)||(v._values.push(k),v._index.push(A))}E++}while(E<w)}v._ptr.push(v._index.length),v._size=[x,w]}a.prototype=new r,a.prototype.createSparseMatrix=function(v,y){return new a(v,y)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return zw(this._values,Ln)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,y){return new a(v,y)},a.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},a.prototype.subset=function(v,y,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return u(this,v,y,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,y){if(!Ow(y))throw new TypeError("Invalid index");var b=y.isScalar();if(b)return v.get(y.min());var x=y.size();if(x.length!==v._size.length)throw new Qt(x.length,v._size.length);var w,S,C,E,A=y.min(),k=y.max();for(w=0,S=v._size.length;w<S;w++)Mn(A[w],v._size[w]),Mn(k[w],v._size[w]);var D=v._values,I=v._index,$=v._ptr,O=y.dimension(0),B=y.dimension(1),z=[],L=[];O.forEach(function(M,G){L[M]=G[0],z[M]=!0});var F=D?[]:void 0,R=[],W=[];return B.forEach(function(M){for(W.push(R.length),C=$[M],E=$[M+1];C<E;C++)w=I[C],z[w]===!0&&(R.push(L[w]),F&&F.push(D[C]))}),W.push(R.length),new a({values:F,index:R,ptr:W,size:x,datatype:v._datatype})}function u(v,y,b,x){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var w=y.size(),S=y.isScalar(),C;if($t(b)?(C=b.size(),b=b.toArray()):C=Bt(b),S){if(C.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),b,x)}else{if(w.length!==1&&w.length!==2)throw new Qt(w.length,v._size.length,"<");if(C.length<w.length){for(var E=0,A=0;w[E]===1&&C[E]===1;)E++;for(;w[E]===1;)A++,E++;b=xW(b,w.length,A,C)}if(!cu(w,C))throw new Qt(w,C,">");if(w.length===1){var k=y.dimension(0);k.forEach(function($,O){Mn($),v.set([$,0],b[O[0]],x)})}else{var D=y.dimension(0),I=y.dimension(1);D.forEach(function($,O){Mn($),I.forEach(function(B,z){Mn(B),v.set([$,B],b[O[0]][z[0]],x)})})}}return v}a.prototype.get=function(v){if(!$n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Qt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],b=v[1];Mn(y,this._size[0]),Mn(b,this._size[1]);var x=l(y,this._ptr[b],this._ptr[b+1],this._index);return x<this._ptr[b+1]&&this._index[x]===y?this._values[x]:0},a.prototype.set=function(v,y,b){if(!$n(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Qt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=v[0],w=v[1],S=this._size[0],C=this._size[1],E=n,A=0;Ia(this._datatype)&&(E=e.find(n,[this._datatype,this._datatype])||n,A=e.convert(0,this._datatype)),(x>S-1||w>C-1)&&(d(this,Math.max(x+1,S),Math.max(w+1,C),b),S=this._size[0],C=this._size[1]),Mn(x,S),Mn(w,C);var k=l(x,this._ptr[w],this._ptr[w+1],this._index);return k<this._ptr[w+1]&&this._index[k]===x?E(y,A)?c(k,w,this._values,this._index,this._ptr):this._values[k]=y:E(y,A)||f(k,x,w,y,this._values,this._index,this._ptr),this};function l(v,y,b,x){if(b-y===0)return b;for(var w=y;w<b;w++)if(x[w]===v)return w;return y}function c(v,y,b,x,w){b.splice(v,1),x.splice(v,1);for(var S=y+1;S<w.length;S++)w[S]--}function f(v,y,b,x,w,S,C){w.splice(v,0,x),S.splice(v,0,y);for(var E=b+1;E<C.length;E++)C[E]++}a.prototype.resize=function(v,y,b){if(!ws(v))throw new TypeError("Array or Matrix expected");var x=v.valueOf().map(S=>Array.isArray(S)&&S.length===1?S[0]:S);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(S){if(!qt(S)||!wt(S)||S<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Yt(x)+")")});var w=b?this.clone():this;return d(w,x[0],x[1],y)};function d(v,y,b,x){var w=x||0,S=n,C=0;Ia(v._datatype)&&(S=e.find(n,[v._datatype,v._datatype])||n,C=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var E=!S(w,C),A=v._size[0],k=v._size[1],D,I,$;if(b>k){for(I=k;I<b;I++)if(v._ptr[I]=v._values.length,E)for(D=0;D<A;D++)v._values.push(w),v._index.push(D);v._ptr[b]=v._values.length}else b<k&&(v._ptr.splice(b+1,k-b),v._values.splice(v._ptr[b],v._values.length),v._index.splice(v._ptr[b],v._index.length));if(k=b,y>A){if(E){var O=0;for(I=0;I<k;I++){v._ptr[I]=v._ptr[I]+O,$=v._ptr[I+1]+O;var B=0;for(D=A;D<y;D++,B++)v._values.splice($+B,0,w),v._index.splice($+B,0,D),O++}v._ptr[k]=v._values.length}}else if(y<A){var z=0;for(I=0;I<k;I++){v._ptr[I]=v._ptr[I]-z;var L=v._ptr[I],F=v._ptr[I+1]-z;for($=L;$<F;$++)D=v._index[$],D>y-1&&(v._values.splice($,1),v._index.splice($,1),z++)}v._ptr[I]=v._values.length}return v._size[0]=y,v._size[1]=b,v}a.prototype.reshape=function(v,y){if(!$n(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(M){if(!qt(M)||!wt(M)||M<=-2||M===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Yt(v)+")")});var b=this._size[0]*this._size[1];v=L$(v,b);var x=v[0]*v[1];if(b!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var S=[],C=0;C<w._ptr.length;C++)for(var E=0;E<w._ptr[C+1]-w._ptr[C];E++)S.push(C);for(var A=w._values.slice(),k=w._index.slice(),D=0;D<w._index.length;D++){var I=k[D],$=S[D],O=I*w._size[1]+$;S[D]=O%v[1],k[D]=Math.floor(O/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var B=0;B<w._ptr.length;B++)w._ptr[B]=0;for(var z=0;z<A.length;z++){var L=k[z],F=S[z],R=A[z],W=l(L,w._ptr[F],w._ptr[F+1],w._index);f(W,L,F,R,w._values,w._index,w._ptr)}return w},a.prototype.clone=function(){var v=new a({values:this._values?zt(this._values):void 0,index:zt(this._index),ptr:zt(this._ptr),size:zt(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,x=this._size[0],w=this._size[1],S=zc(v,b,"map"),C=function(A,k,D){return S(A,[k,D],b)};return h(this,0,x-1,0,w-1,C,y)};function h(v,y,b,x,w,S,C){var E=[],A=[],k=[],D=n,I=0;Ia(v._datatype)&&(D=e.find(n,[v._datatype,v._datatype])||n,I=e.convert(0,v._datatype));for(var $=function(H,ne,ue){var te=S(H,ne,ue);D(te,I)||(E.push(te),A.push(ne))},O=x;O<=w;O++){k.push(E.length);var B=v._ptr[O],z=v._ptr[O+1];if(C)for(var L=B;L<z;L++){var F=v._index[L];F>=y&&F<=b&&$(v._values[L],F-y,O-x)}else{for(var R={},W=B;W<z;W++){var M=v._index[W];R[M]=v._values[W]}for(var G=y;G<=b;G++){var q=G in R?R[G]:0;$(q,G-y,O-x)}}}return k.push(E.length),new a({values:E,index:A,ptr:k,size:[b-y+1,w-x+1]})}a.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,x=this._size[0],w=this._size[1],S=zc(v,b,"forEach"),C=0;C<w;C++){var E=this._ptr[C],A=this._ptr[C+1];if(y)for(var k=E;k<A;k++){var D=this._index[k];S(this._values[k],[D,C],b)}else{for(var I={},$=E;$<A;$++){var O=this._index[$];I[O]=this._values[$]}for(var B=0;B<x;B++){var z=B in I?I[B]:0;S(z,[B,C],b)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var b=this._ptr[y],x=this._ptr[y+1],w=b;w<x;w++){var S=this._index[w];yield{value:this._values[w],index:[S,y]}}},a.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,y,b,x,w){var S=x[0],C=x[1],E=[],A,k;for(A=0;A<S;A++)for(E[A]=[],k=0;k<C;k++)E[A][k]=0;for(k=0;k<C;k++)for(var D=b[k],I=b[k+1],$=D;$<I;$++)A=y[$],E[A][k]=v?w?zt(v[$]):v[$]:1;return E}return a.prototype.format=function(v){for(var y=this._size[0],b=this._size[1],x=this.density(),w="Sparse Matrix ["+Yt(y,v)+" x "+Yt(b,v)+"] density: "+Yt(x,v)+`
`,S=0;S<b;S++)for(var C=this._ptr[S],E=this._ptr[S+1],A=C;A<E;A++){var k=this._index[A];w+=`
    (`+Yt(k,v)+", "+Yt(S,v)+") ==> "+(this._values?Yt(this._values[A],v):"X")}return w},a.prototype.toString=function(){return Yt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(jt(v)&&(v=v.toNumber()),!qt(v)||!wt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,b=v<0?-v:0,x=this._size[0],w=this._size[1],S=Math.min(x-b,w-y),C=[],E=[],A=[];A[0]=0;for(var k=y;k<w&&C.length<S;k++)for(var D=this._ptr[k],I=this._ptr[k+1],$=D;$<I;$++){var O=this._index[$];if(O===k-y+b){C.push(this._values[$]),E[C.length-1]=O-b;break}}return A.push(C.length),new a({values:C,index:E,ptr:A,size:[S,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,y,b,x,w){if(!$n(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(M){if(jt(M)&&(M=M.toNumber()),!qt(M)||!wt(M)||M<1)throw new Error("Size values must be positive integers");return M}),b){if(jt(b)&&(b=b.toNumber()),!qt(b)||!wt(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var S=n,C=0;Ia(w)&&(S=e.find(n,[w,w])||n,C=e.convert(0,w));var E=b>0?b:0,A=b<0?-b:0,k=v[0],D=v[1],I=Math.min(k-A,D-E),$;if($n(y)){if(y.length!==I)throw new Error("Invalid value array length");$=function(G){return y[G]}}else if($t(y)){var O=y.size();if(O.length!==1||O[0]!==I)throw new Error("Invalid matrix length");$=function(G){return y.get([G])}}else $=function(){return y};for(var B=[],z=[],L=[],F=0;F<D;F++){L.push(B.length);var R=F-E;if(R>=0&&R<I){var W=$(R);S(W,C)||(z.push(R+A),B.push(W))}}return L.push(B.length),new a({values:B,index:z,ptr:L,size:[k,D]})},a.prototype.swapRows=function(v,y){if(!qt(v)||!wt(v)||!qt(y)||!wt(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Mn(v,this._size[0]),Mn(y,this._size[0]),a._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,y,b,x,w){for(var S=x[v],C=x[v+1],E=S;E<C;E++)w(b[E],y[E])},a._swapRows=function(v,y,b,x,w,S){for(var C=0;C<b;C++){var E=S[C],A=S[C+1],k=l(v,E,A,w),D=l(y,E,A,w);if(k<A&&D<A&&w[k]===v&&w[D]===y){if(x){var I=x[k];x[k]=x[D],x[D]=I}continue}if(k<A&&w[k]===v&&(D>=A||w[D]!==y)){var $=x?x[k]:void 0;w.splice(D,0,y),x&&x.splice(D,0,$),w.splice(D<=k?k+1:k,1),x&&x.splice(D<=k?k+1:k,1);continue}if(D<A&&w[D]===y&&(k>=A||w[k]!==v)){var O=x?x[D]:void 0;w.splice(k,0,v),x&&x.splice(k,0,O),w.splice(k<=D?D+1:D,1),x&&x.splice(k<=D?D+1:D,1)}}},a},{isClass:!0}),dke="number",pke=["typed"];function hke(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],a=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:a}}else return null}function mke(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var a=parseInt(t.fractionalPart[r],t.radix);n+=a/Math.pow(t.radix,r+1)}var i=e+n;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}var gke=ee(dke,pke,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var i=hke(a);if(i)return mke(i);var s=0,o=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),a=o[1]);var u=Number(a);if(isNaN(u))throw new SyntaxError('String "'+a+'" is not a valid number');if(o){if(u>2**s-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),null:function(a){return 0},"Unit, string | Unit":function(a,i){return a.toNumber(i)},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),vke="bigint",yke=["typed"],bke=ee(vke,yke,t=>{var{typed:e}=t,n=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))});return n.fromJSON=function(r){return BigInt(r.value)},n}),OF="string",wke=["typed"],xke=ee(OF,wke,t=>{var{typed:e}=t;return e(OF,{"":function(){return""},number:Nc,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n)),any:function(r){return String(r)}})}),FF="boolean",Nke=["typed"],Ske=ee(FF,Nke,t=>{var{typed:e}=t;return e(FF,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var a=r.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var i=Number(r);if(r!==""&&!isNaN(i))return!!i;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),Cke="bignumber",Eke=["typed","BigNumber"],Tke=ee(Cke,Eke,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(a){return new n(a+"")},string:function(a){var i=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(i){var s=i[2],o=n(i[1]),u=new n(2).pow(Number(s));if(o.gt(u.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var l=new n(2).pow(Number(s)-1);return o.gte(l)?o.sub(u):o}return new n(a)},BigNumber:function(a){return a},bigint:function(a){return new n(a.toString())},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),Fraction:function(a){return new n(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new n(0)},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),Dke="complex",$ke=["typed","Complex"],Ake=ee(Dke,$ke,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(a){return new n(a,0)},"number, number":function(a,i){return new n(a,i)},"BigNumber, BigNumber":function(a,i){return new n(a.toNumber(),i.toNumber())},Fraction:function(a){return new n(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return n(a)},null:function(a){return n(0)},Object:function(a){if("re"in a&&"im"in a)return new n(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new n(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),Ike="fraction",kke=["typed","Fraction"],_ke=ee(Ike,kke,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new n(a)},string:function(a){return new n(a)},"number, number":function(a,i){return new n(a,i)},"bigint, bigint":function(a,i){return new n(a,i)},null:function(a){return new n(0)},BigNumber:function(a){return new n(a.toString())},bigint:function(a){return new n(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(r=>a=>{var i=a.clone();return i.value=r(a.value),i}),Object:function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),RF="matrix",Oke=["typed","Matrix","DenseMatrix","SparseMatrix"],Fke=ee(RF,Oke,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(RF,{"":function(){return i([])},string:function(o){return i([],o)},"string, string":function(o,u){return i([],o,u)},Array:function(o){return i(o)},Matrix:function(o){return i(o,o.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(s,o,u){if(o==="dense"||o==="default"||o===void 0)return new r(s,u);if(o==="sparse")return new a(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),MF="matrixFromFunction",Rke=["typed","matrix","isZero"],Mke=ee(MF,Rke,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(MF,{"Array | Matrix, function, string, string":function(s,o,u,l){return a(s,o,u,l)},"Array | Matrix, function, string":function(s,o,u){return a(s,o,u)},"Matrix, function":function(s,o){return a(s,o,"dense")},"Array, function":function(s,o){return a(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,u){return a(s,u,o)},"Array | Matrix, string, string, function":function(s,o,u,l){return a(s,l,o,u)}});function a(i,s,o,u){var l;return u!==void 0?l=n(o,u):l=n(o),l.resize(i),l.forEach(function(c,f){var d=s(f);r(d)||l.set(f,d)}),l}}),PF="matrixFromRows",Pke=["typed","matrix","flatten","size"],Bke=ee(PF,Pke,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(PF,{"...Array":function(u){return i(u)},"...Matrix":function(u){return n(i(u.map(l=>l.toArray())))}});function i(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=s(o[0]),l=[];for(var c of o){var f=s(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(r(c))}return l}function s(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),BF="matrixFromColumns",Lke=["typed","matrix","flatten","size"],zke=ee(BF,Lke,t=>{var{typed:e,matrix:n,flatten:r,size:a}=t;return e(BF,{"...Array":function(u){return i(u)},"...Matrix":function(u){return n(i(u.map(l=>l.toArray())))}});function i(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=s(o[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of o){var d=s(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var h=r(f),m=0;m<u;m++)l[m].push(h[m])}return l}function s(o){var u=a(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),LF="splitUnit",Uke=["typed"],Vke=ee(LF,Uke,t=>{var{typed:e}=t;return e(LF,{"Unit, Array":function(r,a){return r.splitUnit(a)}})}),zF="unaryMinus",Wke=["typed"],qke=ee(zF,Wke,t=>{var{typed:e}=t;return e(zF,{number:_W,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var a=r.clone();return a.value=e.find(n,a.valueType())(r.value),a}),"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),UF="unaryPlus",Hke=["typed","config","numeric"],jke=ee(UF,Hke,t=>{var{typed:e,config:n,numeric:r}=t;return e(UF,{number:OW,Complex:function(i){return i},BigNumber:function(i){return i},bigint:function(i){return i},Fraction:function(i){return i},Unit:function(i){return i.clone()},"Array | Matrix":e.referToSelf(a=>i=>Vt(i,a)),boolean:function(i){return r(i?1:0,n.number)},string:function(i){return r(i,kl(i,n))}})}),VF="abs",Gke=["typed"],Xke=ee(VF,Gke,t=>{var{typed:e}=t;return e(VF,{number:$W,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),WF="apply",Kke=["typed","isInteger"],H$=ee(WF,Kke,t=>{var{typed:e,isInteger:n}=t;return e(WF,{"Array | Matrix, number | BigNumber, function":function(a,i,s){if(!n(i))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(a)?Bt(a):a.size();if(i<0||i>=o.length)throw new Ks(i,o.length);return $t(a)?a.create(y1(a.valueOf(),i,s),a.datatype()):y1(a,i,s)}})});function y1(t,e,n){var r,a,i;if(e<=0)if(Array.isArray(t[0])){for(i=Yke(t),a=[],r=0;r<i.length;r++)a[r]=y1(i[r],e-1,n);return a}else return n(t);else{for(a=[],r=0;r<t.length;r++)a[r]=y1(t[r],e-1,n);return a}}function Yke(t){var e=t.length,n=t[0].length,r,a,i=[];for(a=0;a<n;a++){var s=[];for(r=0;r<e;r++)s.push(t[r][a]);i.push(s)}return i}var qF="addScalar",Zke=["typed"],Qke=ee(qF,Zke,t=>{var{typed:e}=t;return e(qF,{"number, number":AW,"Complex, Complex":function(r,a){return r.add(a)},"BigNumber, BigNumber":function(r,a){return r.plus(a)},"bigint, bigint":function(r,a){return r+a},"Fraction, Fraction":function(r,a){return r.add(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(n,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),HF="subtractScalar",Jke=["typed"],e_e=ee(HF,Jke,t=>{var{typed:e}=t;return e(HF,{"number, number":IW,"Complex, Complex":function(r,a){return r.sub(a)},"BigNumber, BigNumber":function(r,a){return r.minus(a)},"bigint, bigint":function(r,a){return r-a},"Fraction, Fraction":function(r,a){return r.sub(a)},"Unit, Unit":e.referToSelf(n=>(r,a)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(a))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(n,[i.valueType(),a.valueType()])(i.value,a.value),i.fixPrefix=!1,i})})}),jF="cbrt",t_e=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],n_e=ee(jF,t_e,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:a,matrix:i,Complex:s,BigNumber:o,Fraction:u}=t;return n(jF,{number:Sh,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,m=f.abs(),v=new s(Sh(m),0).mul(new s(0,h).exp());if(d){var y=[v,new s(Sh(m),0).mul(new s(0,h+Math.PI*2/3).exp()),new s(Sh(m),0).mul(new s(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:i(y)}else return v}function c(f){if(f.value&&eu(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=a(f.value));var m;jt(f.value)?m=new o(1).div(3):Og(f.value)?m=new u(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=a(v.value)),v}}}),r_e="matAlgo11xS0s",a_e=["typed","equalScalar"],ba=ee(r_e,a_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=n,b=0,x=s;typeof d=="string"&&(v=d,y=e.find(n,[v,v]),b=e.convert(0,v),i=e.convert(i,v),x=e.find(s,[v,v]));for(var w=[],S=[],C=[],E=0;E<m;E++){C[E]=S.length;for(var A=c[E],k=c[E+1],D=A;D<k;D++){var I=l[D],$=o?x(i,u[D]):x(u[D],i);y($,b)||(S.push(I),w.push($))}}return C[m]=S.length,a.createSparseMatrix({values:w,index:S,ptr:C,size:[h,m],datatype:v})}}),i_e="matAlgo12xSfs",s_e=["typed","DenseMatrix"],qr=ee(i_e,s_e,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,i=e.convert(i,v),y=e.find(s,[v,v]));for(var b=[],x=[],w=[],S=0;S<m;S++){for(var C=S+1,E=c[S],A=c[S+1],k=E;k<A;k++){var D=l[k];x[D]=u[k],w[D]=C}for(var I=0;I<h;I++)S===0&&(b[I]=[]),w[I]===C?b[I][S]=o?y(i,x[I]):y(x[I],i):b[I][S]=o?y(i,0):y(0,i)}return new n({data:b,size:[h,m],datatype:v})}}),o_e="matAlgo14xDs",u_e=["typed"],Zs=ee(o_e,u_e,t=>{var{typed:e}=t;return function(a,i,s,o){var u=a._data,l=a._size,c=a._datatype,f,d=s;typeof c=="string"&&(f=c,i=e.convert(i,f),d=e.find(s,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,i,o):[];return a.createDenseMatrix({data:h,size:zt(l),datatype:f})};function n(r,a,i,s,o,u,l){var c=[];if(a===i.length-1)for(var f=0;f<s;f++)c[f]=l?r(u,o[f]):r(o[f],u);else for(var d=0;d<s;d++)c[d]=n(r,a+1,i,i[a+1],o[d],u,l);return c}}),JC="ceil",l_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],c_e=ee(JC,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(JC,{number:function(i){return ga(i,r(i),n.relTol,n.absTol)?r(i):Math.ceil(i)},"number, number":function(i,s){if(ga(i,r(i,s),n.relTol,n.absTol))return r(i,s);var[o,u]="".concat(i,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),f_e=ee(JC,l_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:i}),l=qr({typed:e,DenseMatrix:o}),c=Zs({typed:e}),f=c_e({typed:e,config:n,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return Ci(h,r(h),n.relTol,n.absTol)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return Ci(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),vl.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Vt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Vt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>Vt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),GF="cube",d_e=["typed"],p_e=ee(GF,d_e,t=>{var{typed:e}=t;return e(GF,{number:FW,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},bigint:function(r){return r*r*r},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),XF="exp",h_e=["typed"],m_e=ee(XF,h_e,t=>{var{typed:e}=t;return e(XF,{number:RW,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),KF="expm1",g_e=["typed","Complex"],v_e=ee(KF,g_e,t=>{var{typed:e,Complex:n}=t;return e(KF,{number:MW,Complex:function(a){var i=Math.exp(a.re);return new n(i*Math.cos(a.im)-1,i*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),eE="fix",y_e=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],b_e=ee(eE,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(eE,{number:function(i){return i>0?r(i):n(i)},"number, number":function(i,s){return i>0?r(i,s):n(i,s)}})}),w_e=ee(eE,y_e,t=>{var{typed:e,Complex:n,matrix:r,ceil:a,floor:i,equalScalar:s,zeros:o,DenseMatrix:u}=t,l=qr({typed:e,DenseMatrix:u}),c=Zs({typed:e}),f=b_e({typed:e,ceil:a,floor:i});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new n(h.re>0?i(h.re,m):a(h.re,m),h.im>0?i(h.im,m):a(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new n(h.re>0?i(h.re,v):a(h.re,v),h.im>0?i(h.im,v):a(h.im,v))},BigNumber:function(h){return h.isNegative()?a(h):i(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?a(h,m):i(h,m)},Fraction:function(h){return h.s<0n?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0n?a(h,m):i(h,m)},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Vt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Vt(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>Vt(h,v=>d(v,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),tE="floor",x_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],N_e=ee(tE,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(tE,{number:function(i){return ga(i,r(i),n.relTol,n.absTol)?r(i):Math.floor(i)},"number, number":function(i,s){if(ga(i,r(i,s),n.relTol,n.absTol))return r(i,s);var[o,u]="".concat(i,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),b7=ee(tE,x_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:i}),l=qr({typed:e,DenseMatrix:o}),c=Zs({typed:e}),f=N_e({typed:e,config:n,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return Ci(h,r(h),n.relTol,n.absTol)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return Ci(h,r(h,m),n.relTol,n.absTol)?r(h,m):h.toDecimalPlaces(m.toNumber(),vl.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Vt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Vt(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>Vt(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(a(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>i(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),S_e="matAlgo02xDS0",C_e=["typed","equalScalar"],Qs=ee(S_e,C_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s,o){var u=a._data,l=a._size,c=a._datatype||a.getDataType(),f=i._values,d=i._index,h=i._ptr,m=i._size,v=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==m.length)throw new Qt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=l[0],b=l[1],x,w=n,S=0,C=s;typeof c=="string"&&c===v&&c!=="mixed"&&(x=c,w=e.find(n,[x,x]),S=e.convert(0,x),C=e.find(s,[x,x]));for(var E=[],A=[],k=[],D=0;D<b;D++){k[D]=A.length;for(var I=h[D],$=h[D+1],O=I;O<$;O++){var B=d[O],z=o?C(f[O],u[B][D]):C(u[B][D],f[O]);w(z,S)||(A.push(B),E.push(z))}}return k[b]=A.length,i.createSparseMatrix({values:E,index:A,ptr:k,size:[y,b],datatype:c===a._datatype&&v===i._datatype?x:void 0})}}),E_e="matAlgo03xDSf",T_e=["typed"],Qa=ee(E_e,T_e,t=>{var{typed:e}=t;return function(r,a,i,s){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Qt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b,x=0,w=i;typeof l=="string"&&l===m&&l!=="mixed"&&(b=l,x=e.convert(0,b),w=e.find(i,[b,b]));for(var S=[],C=0;C<v;C++)S[C]=[];for(var E=[],A=[],k=0;k<y;k++){for(var D=k+1,I=d[k],$=d[k+1],O=I;O<$;O++){var B=f[O];E[B]=s?w(c[O],o[B][k]):w(o[B][k],c[O]),A[B]=D}for(var z=0;z<v;z++)A[z]===D?S[z][k]=E[z]:S[z][k]=s?w(x,o[z][k]):w(o[z][k],x)}return r.createDenseMatrix({data:S,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),D_e="matAlgo05xSfSf",$_e=["typed","equalScalar"],Vw=ee(D_e,$_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Qt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,S=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(s,[w,w]));var A=o&&d?[]:void 0,k=[],D=[],I=A?[]:void 0,$=A?[]:void 0,O=[],B=[],z,L,F,R;for(L=0;L<x;L++){D[L]=k.length;var W=L+1;for(F=l[L],R=l[L+1];F<R;F++)z=u[F],k.push(z),O[z]=W,I&&(I[z]=o[F]);for(F=m[L],R=m[L+1];F<R;F++)z=h[F],O[z]!==W&&k.push(z),B[z]=W,$&&($[z]=d[F]);if(A)for(F=D[L];F<k.length;){z=k[F];var M=O[z],G=B[z];if(M===W||G===W){var q=M===W?I[z]:C,j=G===W?$[z]:C,H=E(q,j);S(H,C)?k.splice(F,1):(A.push(H),F++)}}}return D[x]=k.length,a.createSparseMatrix({values:A,index:k,ptr:D,size:[b,x],datatype:f===a._datatype&&y===i._datatype?w:void 0})}}),A_e="matAlgo13xDD",I_e=["typed"],k_e=ee(A_e,I_e,t=>{var{typed:e}=t;return function(a,i,s){var o=a._data,u=a._size,l=a._datatype,c=i._data,f=i._size,d=i._datatype,h=[];if(u.length!==f.length)throw new Qt(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var v,y=s;typeof l=="string"&&l===d&&(v=l,y=e.find(s,[v,v]));var b=h.length>0?n(y,0,h,h[0],o,c):[];return a.createDenseMatrix({data:b,size:h,datatype:v})};function n(r,a,i,s,o,u){var l=[];if(a===i.length-1)for(var c=0;c<s;c++)l[c]=r(o[c],u[c]);else for(var f=0;f<s;f++)l[f]=n(r,a+1,i,i[a+1],o[f],u[f]);return l}});function Yr(t,e){if(cu(t.size(),e.size()))return[t,e];var n=z$(t.size(),e.size());return[t,e].map(r=>__e(r,n))}function __e(t,e){return cu(t.size(),e)?t:t.create(yc(t.valueOf(),e),t.datatype())}var O_e="matrixAlgorithmSuite",F_e=["typed","matrix"],zn=ee(O_e,F_e,t=>{var{typed:e,matrix:n}=t,r=k_e({typed:e}),a=Zs({typed:e});return function(s){var o=s.elop,u=s.SD||s.DS,l;o?(l={"DenseMatrix, DenseMatrix":(h,m)=>r(...Yr(h,m),o),"Array, Array":(h,m)=>r(...Yr(n(h),n(m)),o).valueOf(),"Array, DenseMatrix":(h,m)=>r(...Yr(n(h),m),o),"DenseMatrix, Array":(h,m)=>r(...Yr(h,n(m)),o)},s.SS&&(l["SparseMatrix, SparseMatrix"]=(h,m)=>s.SS(...Yr(h,m),o,!1)),s.DS&&(l["DenseMatrix, SparseMatrix"]=(h,m)=>s.DS(...Yr(h,m),o,!1),l["Array, SparseMatrix"]=(h,m)=>s.DS(...Yr(n(h),m),o,!1)),u&&(l["SparseMatrix, DenseMatrix"]=(h,m)=>u(...Yr(m,h),o,!0),l["SparseMatrix, Array"]=(h,m)=>u(...Yr(n(m),h),o,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Yr(m,v),h)),"Array, Array":e.referToSelf(h=>(m,v)=>r(...Yr(n(m),n(v)),h).valueOf()),"Array, DenseMatrix":e.referToSelf(h=>(m,v)=>r(...Yr(n(m),v),h)),"DenseMatrix, Array":e.referToSelf(h=>(m,v)=>r(...Yr(m,n(v)),h))},s.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.SS(...Yr(m,v),h,!1))),s.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.DS(...Yr(m,v),h,!1)),l["Array, SparseMatrix"]=e.referToSelf(h=>(m,v)=>s.DS(...Yr(n(m),v),h,!1))),u&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(h=>(m,v)=>u(...Yr(v,m),h,!0)),l["SparseMatrix, Array"]=e.referToSelf(h=>(m,v)=>u(...Yr(n(v),m),h,!0))));var c=s.scalar||"any",f=s.Ds||s.Ss;f&&(o?(l["DenseMatrix,"+c]=(h,m)=>a(h,m,o,!1),l[c+", DenseMatrix"]=(h,m)=>a(m,h,o,!0),l["Array,"+c]=(h,m)=>a(n(h),m,o,!1).valueOf(),l[c+", Array"]=(h,m)=>a(n(m),h,o,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(h=>(m,v)=>a(m,v,h,!1)),l[c+", DenseMatrix"]=e.referToSelf(h=>(m,v)=>a(v,m,h,!0)),l["Array,"+c]=e.referToSelf(h=>(m,v)=>a(n(m),v,h,!1).valueOf()),l[c+", Array"]=e.referToSelf(h=>(m,v)=>a(n(v),m,h,!0).valueOf())));var d=s.sS!==void 0?s.sS:s.Ss;return o?(s.Ss&&(l["SparseMatrix,"+c]=(h,m)=>s.Ss(h,m,o,!1)),d&&(l[c+", SparseMatrix"]=(h,m)=>d(m,h,o,!0))):(s.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(h=>(m,v)=>s.Ss(m,v,h,!1))),d&&(l[c+", SparseMatrix"]=e.referToSelf(h=>(m,v)=>d(v,m,h,!0)))),o&&o.signatures&&eW(l,o.signatures),l}}),YF="mod",R_e=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],w7=ee(YF,R_e,t=>{var{typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o,concat:u}=t,l=b7({typed:e,config:n,round:r,matrix:a,equalScalar:i,zeros:s,DenseMatrix:o}),c=Qs({typed:e,equalScalar:i}),f=Qa({typed:e}),d=Vw({typed:e,equalScalar:i}),h=ba({typed:e,equalScalar:i}),m=qr({typed:e,DenseMatrix:o}),v=zn({typed:e,matrix:a,concat:u});return e(YF,{"number, number":y,"BigNumber, BigNumber":function(x,w){return w.isZero()?x:x.sub(w.mul(l(x.div(w))))},"bigint, bigint":function(x,w){if(w===0n)return x;if(x<0){var S=x%w;return S===0n?S:S+w}return x%w},"Fraction, Fraction":function(x,w){return w.equals(0)?x:x.sub(w.mul(l(x.div(w))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(b,x){return x===0?b:b-x*l(b/x)}}),M_e="matAlgo01xDSid",P_e=["typed"],Ol=ee(M_e,P_e,t=>{var{typed:e}=t;return function(r,a,i,s){var o=r._data,u=r._size,l=r._datatype||r.getDataType(),c=a._values,f=a._index,d=a._ptr,h=a._size,m=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==h.length)throw new Qt(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],b=typeof l=="string"&&l!=="mixed"&&l===m?l:void 0,x=b?e.find(i,[b,b]):i,w,S,C=[];for(w=0;w<v;w++)C[w]=[];var E=[],A=[];for(S=0;S<y;S++){for(var k=S+1,D=d[S],I=d[S+1],$=D;$<I;$++)w=f[$],E[w]=s?x(c[$],o[w][S]):x(o[w][S],c[$]),A[w]=k;for(w=0;w<v;w++)A[w]===k?C[w][S]=E[w]:C[w][S]=o[w][S]}return r.createDenseMatrix({data:C,size:[v,y],datatype:l===r._datatype&&m===a._datatype?b:void 0})}}),B_e="matAlgo04xSidSid",L_e=["typed","equalScalar"],j$=ee(B_e,L_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Qt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,S=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(s,[w,w]));var A=o&&d?[]:void 0,k=[],D=[],I=o&&d?[]:void 0,$=o&&d?[]:void 0,O=[],B=[],z,L,F,R,W;for(L=0;L<x;L++){D[L]=k.length;var M=L+1;for(R=l[L],W=l[L+1],F=R;F<W;F++)z=u[F],k.push(z),O[z]=M,I&&(I[z]=o[F]);for(R=m[L],W=m[L+1],F=R;F<W;F++)if(z=h[F],O[z]===M){if(I){var G=E(I[z],d[F]);S(G,C)?O[z]=null:I[z]=G}}else k.push(z),B[z]=M,$&&($[z]=d[F]);if(I&&$)for(F=D[L];F<k.length;)z=k[F],O[z]===M?(A[F]=I[z],F++):B[z]===M?(A[F]=$[z],F++):k.splice(F,1)}return D[x]=k.length,a.createSparseMatrix({values:A,index:k,ptr:D,size:[b,x],datatype:f===a._datatype&&y===i._datatype?w:void 0})}}),z_e="matAlgo10xSids",U_e=["typed","DenseMatrix"],ef=ee(z_e,U_e,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,i,s,o){var u=a._values,l=a._index,c=a._ptr,f=a._size,d=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,i=e.convert(i,v),y=e.find(s,[v,v]));for(var b=[],x=[],w=[],S=0;S<m;S++){for(var C=S+1,E=c[S],A=c[S+1],k=E;k<A;k++){var D=l[k];x[D]=u[k],w[D]=C}for(var I=0;I<h;I++)S===0&&(b[I]=[]),w[I]===C?b[I][S]=o?y(i,x[I]):y(x[I],i):b[I][S]=i}return new n({data:b,size:[h,m],datatype:v})}});function tf(t,e,n,r){if(!(this instanceof tf))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}tf.prototype=new Error;tf.prototype.constructor=Error;tf.prototype.name="ArgumentsError";tf.prototype.isArgumentsError=!0;var ZF="gcd",V_e=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],UN="number | BigNumber | Fraction | Matrix | Array",W_e="".concat(UN,", ").concat(UN,", ...").concat(UN);function QF(t){return!t.some(e=>Array.isArray(e))}var q_e=ee(ZF,V_e,t=>{var{typed:e,matrix:n,config:r,round:a,equalScalar:i,zeros:s,BigNumber:o,DenseMatrix:u,concat:l}=t,c=w7({typed:e,config:r,round:a,matrix:n,equalScalar:i,zeros:s,DenseMatrix:u,concat:l}),f=Ol({typed:e}),d=j$({typed:e,equalScalar:i}),h=ef({typed:e,DenseMatrix:u}),m=zn({typed:e,matrix:n,concat:l});return e(ZF,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(b,x)=>b.gcd(x)},m({SS:d,DS:f,Ss:h}),{[W_e]:e.referToSelf(b=>(x,w,S)=>{for(var C=b(x,w),E=0;E<S.length;E++)C=b(C,S[E]);return C}),Array:e.referToSelf(b=>x=>{if(x.length===1&&Array.isArray(x[0])&&QF(x[0]))return b(...x[0]);if(QF(x))return b(...x);throw new tf("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(b=>x=>b(x.toArray()))});function v(b,x){if(!wt(b)||!wt(x))throw new Error("Parameters in function gcd must be integer numbers");for(var w;x!==0;)w=c(b,x),b=x,x=w;return b<0?-b:b}function y(b,x){if(!b.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var w=new o(0);!x.isZero();){var S=c(b,x);b=x,x=S}return b.lt(w)?b.neg():b}}),H_e="matAlgo06xS0S0",j_e=["typed","equalScalar"],Ww=ee(H_e,j_e,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._size,l=a._datatype||a._data===void 0?a._datatype:a.getDataType(),c=i._values,f=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==f.length)throw new Qt(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],m=u[1],v,y=n,b=0,x=s;typeof l=="string"&&l===d&&l!=="mixed"&&(v=l,y=e.find(n,[v,v]),b=e.convert(0,v),x=e.find(s,[v,v]));for(var w=o&&c?[]:void 0,S=[],C=[],E=w?[]:void 0,A=[],k=[],D=0;D<m;D++){C[D]=S.length;var I=D+1;if(NF(a,D,A,E,k,I,S,x),NF(i,D,A,E,k,I,S,x),E)for(var $=C[D];$<S.length;){var O=S[$];if(k[O]===I){var B=E[O];y(B,b)?S.splice($,1):(w.push(B),$++)}else S.splice($,1)}else for(var z=C[D];z<S.length;){var L=S[z];k[L]!==I?S.splice(z,1):z++}}return C[m]=S.length,a.createSparseMatrix({values:w,index:S,ptr:C,size:[h,m],datatype:l===a._datatype&&d===i._datatype?v:void 0})}}),JF="lcm",G_e=["typed","matrix","equalScalar","concat"],X_e=ee(JF,G_e,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,i=Qs({typed:e,equalScalar:r}),s=Ww({typed:e,equalScalar:r}),o=ba({typed:e,equalScalar:r}),u=zn({typed:e,matrix:n,concat:a}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y}),e(JF,{"number, number":PW,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:s,DS:i,Ss:o}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}}),eR="log10",K_e=["typed","config","Complex"],Y_e=ee(eR,K_e,t=>{var{typed:e,config:n,Complex:r}=t;return e(eR,{number:function(i){return i>=0||n.predictable?BW(i):new r(i,0).log().div(Math.LN10)},Complex:function(i){return new r(i).log().div(Math.LN10)},BigNumber:function(i){return!i.isNegative()||n.predictable?i.log():new r(i.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(a=>i=>Vt(i,a))})}),tR="log2",Z_e=["typed","config","Complex"],Q_e=ee(tR,Z_e,t=>{var{typed:e,config:n,Complex:r}=t;return e(tR,{number:function(s){return s>=0||n.predictable?LW(s):a(new r(s,0))},Complex:a,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):a(new r(s.toNumber(),0))},"Array | Matrix":e.referToSelf(i=>s=>Vt(s,i))});function a(i){var s=Math.sqrt(i.re*i.re+i.im*i.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(i.im,i.re)/Math.LN2)}}),J_e="multiplyScalar",eOe=["typed"],tOe=ee(J_e,eOe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":kW,"Complex, Complex":function(r,a){return r.mul(a)},"BigNumber, BigNumber":function(r,a){return r.times(a)},"bigint, bigint":function(r,a){return r*a},"Fraction, Fraction":function(r,a){return r.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),nR="multiply",nOe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],rOe=ee(nR,nOe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,equalScalar:i,dot:s}=t,o=ba({typed:e,equalScalar:i}),u=Zs({typed:e});function l(C,E){switch(C.length){case 1:switch(E.length){case 1:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+E[0]+")");break;case 2:if(C[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,E,A){if(A===0)throw new Error("Cannot multiply two empty vectors");return s(C,E)}function f(C,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(C,E)}function d(C,E){var A=C._data,k=C._size,D=C._datatype||C.getDataType(),I=E._data,$=E._size,O=E._datatype||E.getDataType(),B=k[0],z=$[1],L,F=r,R=a;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&(L=D,F=e.find(r,[L,L]),R=e.find(a,[L,L]));for(var W=[],M=0;M<z;M++){for(var G=R(A[0],I[0][M]),q=1;q<B;q++)G=F(G,R(A[q],I[q][M]));W[M]=G}return C.createDenseMatrix({data:W,size:[z],datatype:D===C._datatype&&O===E._datatype?L:void 0})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":x}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":S});function v(C,E){var A=C._data,k=C._size,D=C._datatype||C.getDataType(),I=E._data,$=E._datatype||E.getDataType(),O=k[0],B=k[1],z,L=r,F=a;D&&$&&D===$&&typeof D=="string"&&D!=="mixed"&&(z=D,L=e.find(r,[z,z]),F=e.find(a,[z,z]));for(var R=[],W=0;W<O;W++){for(var M=A[W],G=F(M[0],I[0]),q=1;q<B;q++)G=L(G,F(M[q],I[q]));R[W]=G}return C.createDenseMatrix({data:R,size:[O],datatype:D===C._datatype&&$===E._datatype?z:void 0})}function y(C,E){var A=C._data,k=C._size,D=C._datatype||C.getDataType(),I=E._data,$=E._size,O=E._datatype||E.getDataType(),B=k[0],z=k[1],L=$[1],F,R=r,W=a;D&&O&&D===O&&typeof D=="string"&&D!=="mixed"&&D!=="mixed"&&(F=D,R=e.find(r,[F,F]),W=e.find(a,[F,F]));for(var M=[],G=0;G<B;G++){var q=A[G];M[G]=[];for(var j=0;j<L;j++){for(var H=W(q[0],I[0][j]),ne=1;ne<z;ne++)H=R(H,W(q[ne],I[ne][j]));M[G][j]=H}}return C.createDenseMatrix({data:M,size:[B,L],datatype:D===C._datatype&&O===E._datatype?F:void 0})}function b(C,E){var A=C._data,k=C._size,D=C._datatype||C.getDataType(),I=E._values,$=E._index,O=E._ptr,B=E._size,z=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!I)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var L=k[0],F=B[1],R,W=r,M=a,G=i,q=0;D&&z&&D===z&&typeof D=="string"&&D!=="mixed"&&(R=D,W=e.find(r,[R,R]),M=e.find(a,[R,R]),G=e.find(i,[R,R]),q=e.convert(0,R));for(var j=[],H=[],ne=[],ue=E.createSparseMatrix({values:j,index:H,ptr:ne,size:[L,F],datatype:D===C._datatype&&z===E._datatype?R:void 0}),te=0;te<F;te++){ne[te]=H.length;var se=O[te],J=O[te+1];if(J>se)for(var K=0,ae=0;ae<L;ae++){for(var pe=ae+1,he=void 0,Se=se;Se<J;Se++){var Ee=$[Se];K!==pe?(he=M(A[ae][Ee],I[Se]),K=pe):he=W(he,M(A[ae][Ee],I[Se]))}K===pe&&!G(he,q)&&(H.push(ae),j.push(he))}}return ne[F]=H.length,ue}function x(C,E){var A=C._values,k=C._index,D=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=[],F=[],R=[],W,M=r,G=a,q=i,j=0;I&&O&&I===O&&typeof I=="string"&&I!=="mixed"&&(W=I,M=e.find(r,[W,W]),G=e.find(a,[W,W]),q=e.find(i,[W,W]),j=e.convert(0,W));var H=[],ne=[];R[0]=0;for(var ue=0;ue<z;ue++){var te=$[ue];if(!q(te,j))for(var se=D[ue],J=D[ue+1],K=se;K<J;K++){var ae=k[K];ne[ae]?H[ae]=M(H[ae],G(te,A[K])):(ne[ae]=!0,F.push(ae),H[ae]=G(te,A[K]))}}for(var pe=F.length,he=0;he<pe;he++){var Se=F[he];L[he]=H[Se]}return R[1]=F.length,C.createSparseMatrix({values:L,index:F,ptr:R,size:[B,1],datatype:I===C._datatype&&O===E._datatype?W:void 0})}function w(C,E){var A=C._values,k=C._index,D=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=E._data,O=E._datatype||E.getDataType(),B=C._size[0],z=E._size[0],L=E._size[1],F,R=r,W=a,M=i,G=0;I&&O&&I===O&&typeof I=="string"&&I!=="mixed"&&(F=I,R=e.find(r,[F,F]),W=e.find(a,[F,F]),M=e.find(i,[F,F]),G=e.convert(0,F));for(var q=[],j=[],H=[],ne=C.createSparseMatrix({values:q,index:j,ptr:H,size:[B,L],datatype:I===C._datatype&&O===E._datatype?F:void 0}),ue=[],te=[],se=0;se<L;se++){H[se]=j.length;for(var J=se+1,K=0;K<z;K++){var ae=$[K][se];if(!M(ae,G))for(var pe=D[K],he=D[K+1],Se=pe;Se<he;Se++){var Ee=k[Se];te[Ee]!==J?(te[Ee]=J,j.push(Ee),ue[Ee]=W(ae,A[Se])):ue[Ee]=R(ue[Ee],W(ae,A[Se]))}}for(var Z=H[se],ie=j.length,ve=Z;ve<ie;ve++){var xe=j[ve];q[ve]=ue[xe]}}return H[L]=j.length,ne}function S(C,E){var A=C._values,k=C._index,D=C._ptr,I=C._datatype||C._data===void 0?C._datatype:C.getDataType(),$=E._values,O=E._index,B=E._ptr,z=E._datatype||E._data===void 0?E._datatype:E.getDataType(),L=C._size[0],F=E._size[1],R=A&&$,W,M=r,G=a;I&&z&&I===z&&typeof I=="string"&&I!=="mixed"&&(W=I,M=e.find(r,[W,W]),G=e.find(a,[W,W]));for(var q=R?[]:void 0,j=[],H=[],ne=C.createSparseMatrix({values:q,index:j,ptr:H,size:[L,F],datatype:I===C._datatype&&z===E._datatype?W:void 0}),ue=R?[]:void 0,te=[],se,J,K,ae,pe,he,Se,Ee,Z=0;Z<F;Z++){H[Z]=j.length;var ie=Z+1;for(pe=B[Z],he=B[Z+1],ae=pe;ae<he;ae++)if(Ee=O[ae],R)for(J=D[Ee],K=D[Ee+1],se=J;se<K;se++)Se=k[se],te[Se]!==ie?(te[Se]=ie,j.push(Se),ue[Se]=G($[ae],A[se])):ue[Se]=M(ue[Se],G($[ae],A[se]));else for(J=D[Ee],K=D[Ee+1],se=J;se<K;se++)Se=k[se],te[Se]!==ie&&(te[Se]=ie,j.push(Se));if(R)for(var ve=H[Z],xe=j.length,Re=ve;Re<xe;Re++){var Me=j[Re];q[Re]=ue[Me]}}return H[F]=j.length,ne}return e(nR,a,{"Array, Array":e.referTo("Matrix, Matrix",C=>(E,A)=>{l(Bt(E),Bt(A));var k=C(n(E),n(A));return $t(k)?k.valueOf():k}),"Matrix, Matrix":function(E,A){var k=E.size(),D=A.size();return l(k,D),k.length===1?D.length===1?c(E,A,k[0]):f(E,A):D.length===1?h(E,A):m(E,A)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(E,A)=>C(E,n(A))),"Array, Matrix":e.referToSelf(C=>(E,A)=>C(n(E,A.storage()),A)),"SparseMatrix, any":function(E,A){return o(E,A,a,!1)},"DenseMatrix, any":function(E,A){return u(E,A,a,!1)},"any, SparseMatrix":function(E,A){return o(A,E,a,!0)},"any, DenseMatrix":function(E,A){return u(A,E,a,!0)},"Array, any":function(E,A){return u(n(E),A,a,!1).valueOf()},"any, Array":function(E,A){return u(n(A),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(C=>(E,A,k)=>{for(var D=C(E,A),I=0;I<k.length;I++)D=C(D,k[I]);return D})})}),rR="nthRoot",aOe=["typed","matrix","equalScalar","BigNumber","concat"],iOe=ee(rR,aOe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,concat:i}=t,s=Ol({typed:e}),o=Qs({typed:e,equalScalar:r}),u=Ww({typed:e,equalScalar:r}),l=ba({typed:e,equalScalar:r}),c=zn({typed:e,matrix:n,concat:i});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(rR,{number:CF,"number, number":CF,BigNumber:h=>d(h,new a(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(n(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return s(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(n(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:l,sS:!1}));function d(h,m){var v=a.precision,y=a.clone({precision:v+2}),b=new a(0),x=new y(1),w=m.isNegative();if(w&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return w?new y(1/0):0;if(!h.isFinite())return w?b:h;var S=h.abs().pow(x.div(m));return S=h.isNeg()?S.neg():S,new a((w?x.div(S):S).toPrecision(v))}}),aR="sign",sOe=["typed","BigNumber","Fraction","complex"],oOe=ee(aR,sOe,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:a}=t;return e(aR,{number:KC,Complex:function(s){return s.im===0?r(KC(s.re)):s.sign()},BigNumber:function(s){return new n(s.cmp(0))},bigint:function(s){return s>0n?1n:s<0n?-1n:0n},Fraction:function(s){return new a(s.s)},"Array | Matrix":e.referToSelf(i=>s=>Vt(s,i)),Unit:e.referToSelf(i=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(i,s.valueType())(s.value)})})}),uOe="sqrt",lOe=["config","typed","Complex"],cOe=ee(uOe,lOe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:a,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():a(s.toNumber())},Unit:function(s){return s.pow(.5)}});function a(i){return isNaN(i)?NaN:i>=0||e.predictable?Math.sqrt(i):new r(i,0).sqrt()}}),iR="square",fOe=["typed"],dOe=ee(iR,fOe,t=>{var{typed:e}=t;return e(iR,{number:zW,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},bigint:function(r){return r*r},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),sR="subtract",pOe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],hOe=ee(sR,pOe,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:a,unaryMinus:i,DenseMatrix:s,concat:o}=t,u=Ol({typed:e}),l=Qa({typed:e}),c=Vw({typed:e,equalScalar:r}),f=ef({typed:e,DenseMatrix:s}),d=qr({typed:e,DenseMatrix:s}),h=zn({typed:e,matrix:n,concat:o});return e(sR,{"any, any":a},h({elop:a,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),oR="xgcd",mOe=["typed","config","matrix","BigNumber"],gOe=ee(oR,mOe,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(oR,{"number, number":function(o,u){var l=UW(o,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":i});function i(s,o){var u,l,c,f=new a(0),d=new a(1),h=f,m=d,v=d,y=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)l=s.div(o).floor(),c=s.mod(o),u=h,h=m.minus(l.times(h)),m=u,u=v,v=y.minus(l.times(v)),y=u,s=o,o=c;var b;return s.lt(f)?b=[s.neg(),m.neg(),y.neg()]:b=[s,s.isZero()?0:m,y],n.matrix==="Array"?b:r(b)}}),uR="invmod",vOe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],yOe=ee(uR,vOe,t=>{var{typed:e,config:n,BigNumber:r,xgcd:a,equal:i,smaller:s,mod:o,add:u,isInteger:l}=t;return e(uR,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,d),i(d,0))throw new Error("Divisor must be non zero");var h=a(f,d);h=h.valueOf();var[m,v]=h;return i(m,r(1))?(v=o(v,d),s(v,r(0))&&(v=u(v,d)),v):NaN}}),bOe="matAlgo09xS0Sf",wOe=["typed","equalScalar"],x7=ee(bOe,wOe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Qt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var b=c[0],x=c[1],w,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,S=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(s,[w,w]));var A=o&&d?[]:void 0,k=[],D=[],I=A?[]:void 0,$=[],O,B,z,L,F;for(B=0;B<x;B++){D[B]=k.length;var R=B+1;if(I)for(L=m[B],F=m[B+1],z=L;z<F;z++)O=h[z],$[O]=R,I[O]=d[z];for(L=l[B],F=l[B+1],z=L;z<F;z++)if(O=u[z],I){var W=$[O]===R?I[O]:C,M=E(o[z],W);S(M,C)||(k.push(O),A.push(M))}else k.push(O)}return D[x]=k.length,a.createSparseMatrix({values:A,index:k,ptr:D,size:[b,x],datatype:f===a._datatype&&y===i._datatype?w:void 0})}}),lR="dotMultiply",xOe=["typed","matrix","equalScalar","multiplyScalar","concat"],NOe=ee(lR,xOe,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:a,concat:i}=t,s=Qs({typed:e,equalScalar:r}),o=x7({typed:e,equalScalar:r}),u=ba({typed:e,equalScalar:r}),l=zn({typed:e,matrix:n,concat:i});return e(lR,l({elop:a,SS:o,DS:s,Ss:u}))});function SOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return G$(t,e,function(r,a){return r&a})}function am(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function COe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:G$(t,e,function(a,i){return a|i})}function G$(t,e,n){var r=t.constructor,a,i,s=+(t.s<0),o=+(e.s<0);if(s){a=Py(am(t));for(var u=0;u<a.length;++u)a[u]^=1}else a=Py(t);if(o){i=Py(am(e));for(var l=0;l<i.length;++l)i[l]^=1}else i=Py(e);var c,f,d;a.length<=i.length?(c=a,f=i,d=s):(c=i,f=a,d=o);var h=c.length,m=f.length,v=n(s,o)^1,y=new r(v^1),b=new r(1),x=new r(2),w=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--m])===v&&(y=y.plus(b)),b=b.times(x);for(;m>0;)n(d,f[--m])===v&&(y=y.plus(b)),b=b.times(x);return r.config({precision:w}),v===0&&(y.s=-y.s),y}function Py(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var a=e[r]+"",i=7-a.length;i--;)a="0"+a;n+=a}for(var s=n.length;n.charAt(s)==="0";)s--;var o=t.e,u=n.slice(0,s+1||1),l=u.length;if(o>0)if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function EOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?am(e):e.eq(r)?am(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):G$(t,e,function(a,i){return a^i})}function TOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function DOe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var cR="bitAnd",$Oe=["typed","matrix","equalScalar","concat"],N7=ee(cR,$Oe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:a}=t,i=Qs({typed:e,equalScalar:r}),s=Ww({typed:e,equalScalar:r}),o=ba({typed:e,equalScalar:r}),u=zn({typed:e,matrix:n,concat:a});return e(cR,{"number, number":WW,"BigNumber, BigNumber":SOe,"bigint, bigint":(l,c)=>l&c},u({SS:s,DS:i,Ss:o}))}),fR="bitNot",AOe=["typed"],IOe=ee(fR,AOe,t=>{var{typed:e}=t;return e(fR,{number:qW,BigNumber:am,bigint:n=>~n,"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),dR="bitOr",kOe=["typed","matrix","equalScalar","DenseMatrix","concat"],S7=ee(dR,kOe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=Ol({typed:e}),o=j$({typed:e,equalScalar:r}),u=ef({typed:e,DenseMatrix:a}),l=zn({typed:e,matrix:n,concat:i});return e(dR,{"number, number":HW,"BigNumber, BigNumber":COe,"bigint, bigint":(c,f)=>c|f},l({SS:o,DS:s,Ss:u}))}),_Oe="matAlgo07xSSf",OOe=["typed","SparseMatrix"],ko=ee(_Oe,OOe,t=>{var{typed:e,SparseMatrix:n}=t;return function(i,s,o){var u=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._size,f=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==c.length)throw new Qt(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],m,v=0,y=o;typeof l=="string"&&l===f&&l!=="mixed"&&(m=l,v=e.convert(0,m),y=e.find(o,[m,m]));for(var b=[],x=[],w=new Array(h+1).fill(0),S=[],C=[],E=[],A=[],k=0;k<h;k++){var D=k+1,I=0;r(i,k,E,S,D),r(s,k,A,C,D);for(var $=0;$<d;$++){var O=E[$]===D?S[$]:v,B=A[$]===D?C[$]:v,z=y(O,B);z!==0&&z!==!1&&(x.push($),b.push(z),I++)}w[k+1]=w[k]+I}return new n({values:b,index:x,ptr:w,size:[d,h],datatype:l===i._datatype&&f===s._datatype?m:void 0})};function r(a,i,s,o,u){for(var l=a._values,c=a._index,f=a._ptr,d=f[i],h=f[i+1];d<h;d++){var m=c[d];s[m]=u,o[m]=l[d]}}}),pR="bitXor",FOe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],ROe=ee(pR,FOe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:i}=t,s=Qa({typed:e}),o=ko({typed:e,SparseMatrix:i}),u=qr({typed:e,DenseMatrix:r}),l=zn({typed:e,matrix:n,concat:a});return e(pR,{"number, number":jW,"BigNumber, BigNumber":EOe,"bigint, bigint":(c,f)=>c^f},l({SS:o,DS:s,Ss:u}))}),hR="arg",MOe=["typed"],POe=ee(hR,MOe,t=>{var{typed:e}=t;return e(hR,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),mR="conj",BOe=["typed"],LOe=ee(mR,BOe,t=>{var{typed:e}=t;return e(mR,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),gR="im",zOe=["typed"],UOe=ee(gR,zOe,t=>{var{typed:e}=t;return e(gR,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),vR="re",VOe=["typed"],WOe=ee(vR,VOe,t=>{var{typed:e}=t;return e(vR,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),yR="not",qOe=["typed"],HOe=ee(yR,qOe,t=>{var{typed:e}=t;return e(yR,{"null | undefined":()=>!0,number:ZW,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},bigint:n=>!n,Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),bR="or",jOe=["typed","matrix","equalScalar","DenseMatrix","concat"],C7=ee(bR,jOe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=Qa({typed:e}),o=Vw({typed:e,equalScalar:r}),u=qr({typed:e,DenseMatrix:a}),l=zn({typed:e,matrix:n,concat:i});return e(bR,{"number, number":YC,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":YC,"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:s,Ss:u}))}),wR="xor",GOe=["typed","matrix","DenseMatrix","concat","SparseMatrix"],XOe=ee(wR,GOe,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:a,SparseMatrix:i}=t,s=Qa({typed:e}),o=ko({typed:e,SparseMatrix:i}),u=qr({typed:e,DenseMatrix:r}),l=zn({typed:e,matrix:n,concat:a});return e(wR,{"number, number":ZC,"Complex, Complex":function(f,d){return(f.re!==0||f.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":ZC,"BigNumber, BigNumber":function(f,d){return(!f.isZero()&&!f.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:s,Ss:u}))}),xR="concat",KOe=["typed","matrix","isInteger"],E7=ee(xR,KOe,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(xR,{"...Array | Matrix | number | BigNumber":function(i){var s,o=i.length,u=-1,l,c=!1,f=[];for(s=0;s<o;s++){var d=i[s];if($t(d)&&(c=!0),qt(d)||jt(d)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Ks(u,l+1)}else{var h=zt(d).valueOf(),m=Bt(h);if(f[s]=h,l=u,u=m.length-1,s>0&&u!==l)throw new Qt(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=EW(v,f.shift(),u);return c?n(v):v},"...string":function(i){return i.join("")}})}),NR="column",YOe=["typed","Index","matrix","range"],T7=ee(NR,YOe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(NR,{"Matrix, number":i,"Array, number":function(o,u){return i(r(zt(o)),u).valueOf()}});function i(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Mn(o,s.size()[1]);var u=a(0,s.size()[0]),l=new n(u,o),c=s.subset(l);return $t(c)?c:r([[c]])}}),SR="count",ZOe=["typed","size","prod"],QOe=ee(SR,ZOe,t=>{var{typed:e,size:n,prod:r}=t;return e(SR,{string:function(i){return i.length},"Matrix | Array":function(i){return r(n(i))}})}),CR="cross",JOe=["typed","matrix","subtract","multiply"],e3e=ee(CR,JOe,t=>{var{typed:e,matrix:n,subtract:r,multiply:a}=t;return e(CR,{"Matrix, Matrix":function(o,u){return n(i(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return n(i(o.toArray(),u))},"Array, Matrix":function(o,u){return n(i(o,u.toArray()))},"Array, Array":i});function i(s,o){var u=Math.max(Bt(s).length,Bt(o).length);s=d1(s),o=d1(o);var l=Bt(s),c=Bt(o);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(a(s[1],o[2]),a(s[2],o[1])),r(a(s[2],o[0]),a(s[0],o[2])),r(a(s[0],o[1]),a(s[1],o[0]))];return u>1?[f]:f}}),ER="diag",t3e=["typed","matrix","DenseMatrix","SparseMatrix"],n3e=ee(ER,t3e,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:a}=t;return e(ER,{Array:function(l){return i(l,0,Bt(l),null)},"Array, number":function(l,c){return i(l,c,Bt(l),null)},"Array, BigNumber":function(l,c){return i(l,c.toNumber(),Bt(l),null)},"Array, string":function(l,c){return i(l,0,Bt(l),c)},"Array, number, string":function(l,c,f){return i(l,c,Bt(l),f)},"Array, BigNumber, string":function(l,c,f){return i(l,c.toNumber(),Bt(l),f)},Matrix:function(l){return i(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return i(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return i(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return i(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return i(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return i(l,c.toNumber(),l.size(),f)}});function i(u,l,c,f){if(!wt(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return s(u,l,f,c[0],h,d);case 2:return o(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(u,l,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(m,u,l):r.diagonal(m,u,l);return c!==null?v:v.valueOf()}function o(u,l,c,f,d,h){if($t(u)){var m=u.diagonal(l);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],b=0;b<v;b++)y[b]=u[b+d][b+h];return c!==null?n(y):y}}),r3e="filter",a3e=["typed"],D7=ee(r3e,a3e,t=>{var{typed:e}=t;return e("filter",{"Array, function":TR,"Matrix, function":function(r,a){return r.create(TR(r.valueOf(),a),r.datatype())},"Array, RegExp":yF,"Matrix, RegExp":function(r,a){return r.create(yF(r.valueOf(),a),r.datatype())}})});function TR(t,e){var n=zc(e,t,"filter");return EIe(t,function(r,a,i){return n(r,[a],i)})}var DR="flatten",i3e=["typed"],s3e=ee(DR,i3e,t=>{var{typed:e}=t;return e(DR,{Array:function(r){return vn(r)},Matrix:function(r){return r.create(vn(r.toArray()),r.datatype())}})}),nE="forEach",o3e=["typed"],$7=ee(nE,o3e,t=>{var{typed:e}=t;return e(nE,{"Array, function":u3e,"Matrix, function":function(r,a){r.forEach(a)}})});function u3e(t,e){V$(t,[],t,zc(e,t,nE))}var $R="getMatrixDataType",l3e=["typed"],c3e=ee($R,l3e,t=>{var{typed:e}=t;return e($R,{Array:function(r){return zw(r,Ln)},Matrix:function(r){return r.getDataType()}})}),AR="identity",f3e=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],d3e=ee(AR,f3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a,DenseMatrix:i,SparseMatrix:s}=t;return e(AR,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=jt(l)||jt(c)?a:null;if(jt(l)&&(l=l.toNumber()),jt(c)&&(c=c.toNumber()),!wt(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!wt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new a(1):1,m=d?new d(0):0,v=[l,c];if(f){if(f==="sparse")return s.diagonal(v,h,0,m);if(f==="dense")return i.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=Pd([],v,m),b=l<c?l:c,x=0;x<b;x++)y[x][x]=h;return y}}),IR="kron",p3e=["typed","matrix","multiplyScalar"],h3e=ee(IR,p3e,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(IR,{"Matrix, Matrix":function(s,o){return n(a(s.toArray(),o.toArray()))},"Matrix, Array":function(s,o){return n(a(s.toArray(),o))},"Array, Matrix":function(s,o){return n(a(s,o.toArray()))},"Array, Array":a});function a(i,s){if(Bt(i).length===1&&(i=[i]),Bt(s).length===1&&(s=[s]),Bt(i).length>2||Bt(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(i.length)+", y = "+JSON.stringify(s.length)+")");var o=[],u=[];return i.map(function(l){return s.map(function(c){return u=[],o.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&o}}),VN="map",m3e=["typed"],A7=ee(VN,m3e,t=>{var{typed:e}=t;return e(VN,{"Array, function":r,"Matrix, function":function(i,s){return i.map(s)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(a,i,s)=>n([a,i,...s.slice(0,s.length-1)],s[s.length-1])});function n(a,i){if(typeof i!="function")throw new Error("Last argument must be a callback function");var s=a[0].isMatrix,o=z$(...a.map(S=>S.isMatrix?S.size():Bt(S))),u=s?(S,C)=>S.get(C):U$,l=s?a.map(S=>S.isMatrix?S.create(yc(S.toArray(),o),S.datatype()):a[0].create(yc(S.valueOf(),o))):a.map(S=>S.isMatrix?yc(S.toArray(),o):yc(S,o)),c;if(e.isTypedFunction(i)){var f=o.map(()=>0),d=l.map(S=>u(S,f)),h=w(i,d,f,l);c=b(h)}else{var m=a.length,v=x(i,m);c=b(v)}var y=(S,C)=>c([S,...l.slice(1).map(E=>u(E,C))],C);if(s)return l[0].map(y);return r(l[0],y);function b(S){switch(S){case 0:return C=>i(...C);case 1:return(C,E)=>i(...C,E);case 2:return(C,E)=>i(...C,E,...l)}}function x(S,C){return S.length>C+1?2:S.length===C+1?1:0}function w(S,C,E,A){return e.resolve(S,[...C,E,...A])!==null?2:e.resolve(S,[...C,E])!==null?1:(e.resolve(S,C)!==null,0)}}function r(a,i){return V$(a,[],a,zc(i,a,VN))}}),kR="diff",g3e=["typed","matrix","subtract","number"],I7=ee(kR,g3e,t=>{var{typed:e,matrix:n,subtract:r,number:a}=t;return e(kR,{"Array | Matrix":function(c){return $t(c)?n(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!wt(f))throw new RangeError("Dimension must be a whole number");return $t(c)?n(i(c.toArray(),f)):i(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,a(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,a(f)))});function i(l,c){if($t(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(i(d,c-1))}),f}else{if(c===0)return s(l);throw RangeError("Cannot have negative dimension")}}function s(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(o(l[d-1],l[d]));return c}function o(l,c){$t(l)&&(l=l.toArray()),$t(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(o(l[h],c[h]));return f}}),v3e="ones",y3e=["typed","config","matrix","BigNumber"],b3e=ee(v3e,y3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e("ones",{"":function(){return n.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return i(l,f)}else return n.matrix==="Array"?i(l):i(l,"default")},Array:i,Matrix:function(l){var c=l.storage();return i(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return i(l.valueOf(),c)}});function i(u,l){var c=s(u),f=c?new a(1):1;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Pd(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){jt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!wt(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function X$(){throw new Error('No "bignumber" implementation available')}function k7(){throw new Error('No "fraction" implementation available')}function _7(){throw new Error('No "matrix" implementation available')}var _R="range",w3e=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],O7=ee(_R,w3e,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t;return e(_R,{string:d,"string, boolean":d,"number, number":function(y,b){return f(h(y,b,1,!1))},"number, number, number":function(y,b,x){return f(h(y,b,x,!1))},"number, number, boolean":function(y,b,x){return f(h(y,b,1,x))},"number, number, number, boolean":function(y,b,x,w){return f(h(y,b,x,w))},"BigNumber, BigNumber":function(y,b){var x=y.constructor;return f(h(y,b,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,b,x){return f(h(y,b,x,!1))},"BigNumber, BigNumber, boolean":function(y,b,x){var w=y.constructor;return f(h(y,b,new w(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(y,b,x,w){return f(h(y,b,x,w))},"Unit, Unit, Unit":function(y,b,x){return f(h(y,b,x,!1))},"Unit, Unit, Unit, boolean":function(y,b,x,w){return f(h(y,b,x,w))}});function f(v){return n.matrix==="Matrix"?r?r(v):_7():v}function d(v,y){var b=m(v);if(!b)throw new SyntaxError('String "'+v+'" is no valid range');return n.number==="BigNumber"?(a===void 0&&X$(),f(h(a(b.start),a(b.end),a(b.step)))):f(h(b.start,b.end,b.step,y))}function h(v,y,b,x){for(var w=[],S=c(b)?x?s:i:x?u:o,C=v;S(C,y);)w.push(C),C=l(C,b);return w}function m(v){var y=v.split(":"),b=y.map(function(w){return Number(w)}),x=b.some(function(w){return isNaN(w)});if(x)return null;switch(b.length){case 2:return{start:b[0],end:b[1],step:1};case 3:return{start:b[0],end:b[2],step:b[1]};default:return null}}}),OR="reshape",x3e=["typed","isInteger","matrix"],N3e=ee(OR,x3e,t=>{var{typed:e,isInteger:n}=t;return e(OR,{"Matrix, Array":function(a,i){return a.reshape(i,!0)},"Array, Array":function(a,i){return i.forEach(function(s){if(!n(s))throw new TypeError("Invalid size for dimension: "+s)}),B$(a,i)}})}),S3e="resize",C3e=["config","matrix"],E3e=ee(S3e,C3e,t=>{var{config:e,matrix:n}=t;return function(i,s,o){if(arguments.length!==2&&arguments.length!==3)throw new tf("resize",arguments.length,2,3);if($t(s)&&(s=s.valueOf()),jt(s[0])&&(s=s.map(function(c){return jt(c)?c.toNumber():c})),$t(i))return i.resize(s,o,!0);if(typeof i=="string")return r(i,s,o);var u=Array.isArray(i)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(i);)i=i[0];return zt(i)}else{Array.isArray(i)||(i=[i]),i=zt(i);var l=Pd(i,s,o);return u?n(l):l}};function r(a,i,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(i.length!==1)throw new Qt(i.length,1);var o=i[0];if(typeof o!="number"||!wt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Yt(i)+")");if(a.length>o)return a.substring(0,o);if(a.length<o){for(var u=a,l=0,c=o-a.length;l<c;l++)u+=s;return u}else return a}}),FR="rotate",T3e=["typed","multiply","rotationMatrix"],D3e=ee(FR,T3e,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(FR,{"Array , number | BigNumber | Complex | Unit":function(s,o){a(s,2);var u=n(r(o),s);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return a(s,2),n(r(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){a(s,3);var l=n(r(o,u),s);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){return a(s,3),n(r(o,u),s)}});function a(i,s){var o=Array.isArray(i)?Bt(i):i.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),RR="rotationMatrix",$3e=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],A3e=ee(RR,$3e,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:a,unaryMinus:i,norm:s,BigNumber:o,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(RR,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(w){return u(w)},"number | BigNumber | Complex | Unit":function(w){return h(w,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(w,S){return h(w,S)},"number | BigNumber | Complex | Unit, Array":function(w,S){var C=u(S);return m(C),b(w,C,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(w,S){m(S);var C=S.storage()||(n.matrix==="Matrix"?"dense":void 0);return b(w,S,C)},"number | BigNumber | Complex | Unit, Array, string":function(w,S,C){var E=u(S);return m(E),b(w,E,C)},"number | BigNumber | Complex | Unit, Matrix, string":function(w,S,C){return m(S),b(w,S,C)}});function h(x,w){var S=jt(x),C=S?new o(-1):-1,E=f(x),A=d(x),k=[[E,r(C,A)],[A,E]];return y(k,w)}function m(x){var w=x.size();if(w.length<1||w[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(x){return x.reduce((w,S)=>r(w,S))}function y(x,w){if(w){if(w==="sparse")return new c(x);if(w==="dense")return new l(x);throw new TypeError('Unknown matrix type "'.concat(w,'"'))}return x}function b(x,w,S){var C=s(w);if(C===0)throw new RangeError("Rotation around zero vector");var E=jt(x)?o:null,A=E?new E(1):1,k=E?new E(-1):-1,D=E?new E(w.get([0])/C):w.get([0])/C,I=E?new E(w.get([1])/C):w.get([1])/C,$=E?new E(w.get([2])/C):w.get([2])/C,O=f(x),B=a(A,i(O)),z=d(x),L=a(O,v([D,D,B])),F=a(v([D,I,B]),v([k,$,z])),R=a(v([D,$,B]),v([I,z])),W=a(v([D,I,B]),v([$,z])),M=a(O,v([I,I,B])),G=a(v([I,$,B]),v([k,D,z])),q=a(v([D,$,B]),v([k,I,z])),j=a(v([I,$,B]),v([D,z])),H=a(O,v([$,$,B])),ne=[[L,F,R],[W,M,G],[q,j,H]];return y(ne,S)}}),MR="row",I3e=["typed","Index","matrix","range"],F7=ee(MR,I3e,t=>{var{typed:e,Index:n,matrix:r,range:a}=t;return e(MR,{"Matrix, number":i,"Array, number":function(o,u){return i(r(zt(o)),u).valueOf()}});function i(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Mn(o,s.size()[0]);var u=a(0,s.size()[1]),l=new n(o,u),c=s.subset(l);return $t(c)?c:r([[c]])}}),PR="size",k3e=["typed","config","?matrix"],_3e=ee(PR,k3e,t=>{var{typed:e,config:n,matrix:r}=t;return e(PR,{Matrix:function(i){return i.create(i.size(),"number")},Array:Bt,string:function(i){return n.matrix==="Array"?[i.length]:r([i.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(i){return n.matrix==="Array"?[]:r?r([],"dense","number"):_7()}})}),BR="squeeze",O3e=["typed"],F3e=ee(BR,O3e,t=>{var{typed:e}=t;return e(BR,{Array:function(r){return d1(zt(r))},Matrix:function(r){var a=d1(r.toArray());return Array.isArray(a)?r.create(a,r.datatype()):a},any:function(r){return zt(r)}})}),LR="subset",R3e=["typed","matrix","zeros","add"],R7=ee(LR,R3e,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t;return e(LR,{"Matrix, Index":function(o,u){return Md(u)?n():(f1(o,u),o.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,u){var l=s(n(o),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":P3e,"string, Index":M3e,"Matrix, Index, any, any":function(o,u,l,c){return Md(u)?o:(f1(o,u),o.clone().subset(u,i(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l,c){var f=s(n(o),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(n(o),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(o,u,l,void 0)}}),"string, Index, string":zR,"string, Index, string, string":zR,"Object, Index, any":B3e});function i(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o._isScalar)return s;var u=o.size();if(u.every(l=>l>0))try{return a(s,r(u))}catch{return s}else return s}});function M3e(t,e){if(!Ow(e))throw new TypeError("Index expected");if(Md(e))return"";if(f1(Array.from(t),e),e.size().length!==1)throw new Qt(e.size().length,1);var n=t.length;Mn(e.min()[0],n),Mn(e.max()[0],n);var r=e.dimension(0),a="";return r.forEach(function(i){a+=t.charAt(i)}),a}function zR(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Md(e))return t;if(f1(Array.from(t),e),e.size().length!==1)throw new Qt(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var a=e.dimension(0),i=a.size()[0];if(i!==n.length)throw new Qt(a.size()[0],n.length);var s=t.length;Mn(e.min()[0]),Mn(e.max()[0]);for(var o=[],u=0;u<s;u++)o[u]=t.charAt(u);if(a.forEach(function(f,d){o[f]=n.charAt(d[0])}),o.length>s)for(var l=s-1,c=o.length;l<c;l++)o[l]||(o[l]=r);return o.join("")}function P3e(t,e){if(!Md(e)){if(e.size().length!==1)throw new Qt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return ja(t,n)}}function B3e(t,e,n){if(Md(e))return t;if(e.size().length!==1)throw new Qt(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var a=zt(t);return Fd(a,r,n),a}var UR="transpose",L3e=["typed","matrix"],z3e=ee(UR,L3e,t=>{var{typed:e,matrix:n}=t;return e(UR,{Array:s=>r(n(s)).valueOf(),Matrix:r,any:zt});function r(s){var o=s.size(),u;switch(o.length){case 1:u=s.clone();break;case 2:{var l=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Yt(o)+")");switch(s.storage()){case"dense":u=a(s,l,c);break;case"sparse":u=i(s,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Yt(o)+")")}return u}function a(s,o,u){for(var l=s._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<o;h++)f[h]=zt(l[h][d])}return s.createDenseMatrix({data:c,size:[u,o],datatype:s._datatype})}function i(s,o,u){for(var l=s._values,c=s._index,f=s._ptr,d=l?[]:void 0,h=[],m=[],v=[],y=0;y<o;y++)v[y]=0;var b,x,w;for(b=0,x=c.length;b<x;b++)v[c[b]]++;for(var S=0,C=0;C<o;C++)m.push(S),S+=v[C],v[C]=m[C];for(m.push(S),w=0;w<u;w++)for(var E=f[w],A=f[w+1],k=E;k<A;k++){var D=v[c[k]]++;h[D]=w,l&&(d[D]=zt(l[k]))}return s.createSparseMatrix({values:d,index:h,ptr:m,size:[u,o],datatype:s._datatype})}}),VR="ctranspose",U3e=["typed","transpose","conj"],V3e=ee(VR,U3e,t=>{var{typed:e,transpose:n,conj:r}=t;return e(VR,{any:function(i){return r(n(i))}})}),WR="zeros",W3e=["typed","config","matrix","BigNumber"],q3e=ee(WR,W3e,t=>{var{typed:e,config:n,matrix:r,BigNumber:a}=t;return e(WR,{"":function(){return n.matrix==="Array"?i([]):i([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return i(l,f)}else return n.matrix==="Array"?i(l):i(l,"default")},Array:i,Matrix:function(l){var c=l.storage();return i(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return i(l.valueOf(),c)}});function i(u,l){var c=s(u),f=c?new a(0):0;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?Pd(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){jt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!wt(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),qR="fft",H3e=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],j3e=ee(qR,H3e,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:a,divideScalar:i,exp:s,tau:o,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(qR,{Array:m,Matrix:function(w){return w.create(m(w.valueOf()),w.datatype())}});function m(x){var w=Bt(x);return w.length===1?b(x,w[0]):v(x.map(S=>m(S,w.slice(1))),0)}function v(x,w){var S=Bt(x);if(w!==0)return new Array(S[0]).fill(0).map((E,A)=>v(x[A],w-1));if(S.length===1)return b(x);function C(E){var A=Bt(E);return new Array(A[1]).fill(0).map((k,D)=>new Array(A[0]).fill(0).map((I,$)=>E[$][D]))}return C(v(C(x),1))}function y(x){for(var w=x.length,S=s(i(a(-1,a(u,o)),w)),C=[],E=1-w;E<w;E++)C.push(f(S,i(f(E,2),2)));for(var A=f(2,d(h(w+w-1))),k=[...new Array(w).fill(0).map((F,R)=>a(x[R],C[w-1+R])),...new Array(A-w).fill(0)],D=[...new Array(w+w-1).fill(0).map((F,R)=>i(1,C[R])),...new Array(A-(w+w-1)).fill(0)],I=b(k),$=b(D),O=new Array(A).fill(0).map((F,R)=>a(I[R],$[R])),B=l(c(m(c(O))),A),z=[],L=w-1;L<w+w-1;L++)z.push(a(B[L],C[L]));return z}function b(x){var w=x.length;if(w===1)return[x[0]];if(w%2===0){for(var S=[...b(x.filter((k,D)=>D%2===0)),...b(x.filter((k,D)=>D%2===1))],C=0;C<w/2;C++){var E=S[C],A=a(S[C+w/2],s(a(a(o,u),i(-C,w))));S[C]=r(E,A),S[C+w/2]=r(E,a(-1,A))}return S}else return y(x)}}),HR="ifft",G3e=["typed","fft","dotDivide","conj"],X3e=ee(HR,G3e,t=>{var{typed:e,fft:n,dotDivide:r,conj:a}=t;return e(HR,{"Array | Matrix":function(s){var o=$t(s)?s.size():Bt(s);return r(a(n(a(s))),o.reduce((u,l)=>u*l,1))}})});function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function K3e(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y3e(t){var e=K3e(t,"string");return im(e)=="symbol"?e:e+""}function Ur(t,e,n){return(e=Y3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Z3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jR(Object(n),!0).forEach(function(r){Ur(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Q3e="solveODE",J3e=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],eFe=ee(Q3e,J3e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,max:s,map:o,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=t;function y(k){return function(D,I,$,O){var B=!(I.length===2&&(I.every(E)||I.every(is)));if(B)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var z=I[0],L=I[1],F=f(L,z),R=O.firstStep;if(R!==void 0&&!l(R))throw new Error('"firstStep" must be positive');var W=O.maxStep;if(W!==void 0&&!l(W))throw new Error('"maxStep" must be positive');var M=O.minStep;if(M&&c(M))throw new Error('"minStep" must be positive or zero');var G=[z,L,R,M,W].filter(re=>re!==void 0);if(!(G.every(E)||G.every(is)))throw new Error('Inconsistent type of "t" dependant variables');for(var q=1,j=O.tol?O.tol:1e-4,H=O.minDelta?O.minDelta:.2,ne=O.maxDelta?O.maxDelta:5,ue=O.maxIter?O.maxIter:1e4,te=[z,L,...$,W,M].some(jt),[se,J,K,ae]=te?[m(k.a),m(k.c),m(k.b),m(k.bp)]:[k.a,k.c,k.b,k.bp],pe=R?F?R:v(R):i(r(L,z),q),he=[z],Se=[$],Ee=r(K,ae),Z=0,ie=0,ve=S(F),xe=C(F);ve(he[Z],L);){var Re=[];pe=xe(he[Z],L,pe),Re.push(D(he[Z],Se[Z]));for(var Me=1;Me<J.length;++Me)Re.push(D(n(he[Z],a(J[Me],pe)),n(Se[Z],a(pe,se[Me],Re))));var je=s(u(o(a(Ee,Re),re=>is(re)?re.value:re)));je<j&&j/je>1/4&&(he.push(n(he[Z],pe)),Se.push(n(Se[Z],a(pe,K,Re))),Z++);var Qe=.84*(j/je)**(1/5);if(d(Qe,H)?Qe=H:f(Qe,ne)&&(Qe=ne),Qe=te?m(Qe):Qe,pe=a(pe,Qe),W&&f(u(pe),W)?pe=F?W:v(W):M&&d(u(pe),M)&&(pe=F?M:v(M)),ie++,ie>ue)throw new Error("Maximum number of iterations reached, try changing options")}return{t:he,y:Se}}}function b(k,D,I,$){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],B=[null,1/2,3/4,1],z=[2/9,1/3,4/9,0],L=[7/24,1/4,1/3,1/8],F={a:O,c:B,b:z,bp:L};return y(F)(k,D,I,$)}function x(k,D,I,$){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],B=[null,1/5,3/10,4/5,8/9,1,1],z=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],L=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],F={a:O,c:B,b:z,bp:L};return y(F)(k,D,I,$)}function w(k,D,I,$){var O=$.method?$.method:"RK45",B={RK23:b,RK45:x};if(O.toUpperCase()in B){var z=Z3e({},$);return delete z.method,B[O.toUpperCase()](k,D,I,z)}else{var L=Object.keys(B).map(R=>'"'.concat(R,'"')),F="".concat(L.slice(0,-1).join(", ")," and ").concat(L.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(F))}}function S(k){return k?d:f}function C(k){var D=k?f:d;return function(I,$,O){var B=n(I,O);return D(B,$)?r($,I):O}}function E(k){return jt(k)||qt(k)}function A(k,D,I,$){var O=w(k,D.toArray(),I.toArray(),$);return{t:h(O.t),y:h(O.y)}}return e("solveODE",{"function, Array, Array, Object":w,"function, Matrix, Matrix, Object":A,"function, Array, Array":(k,D,I)=>w(k,D,I,{}),"function, Matrix, Matrix":(k,D,I)=>A(k,D,I,{}),"function, Array, number | BigNumber | Unit":(k,D,I)=>{var $=w(k,D,[I],{});return{t:$.t,y:$.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(k,D,I)=>{var $=w(k,D.toArray(),[I],{});return{t:h($.t),y:h($.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(k,D,I,$)=>{var O=w(k,D,[I],$);return{t:O.t,y:O.y.map(B=>B[0])}},"function, Matrix, number | BigNumber | Unit, Object":(k,D,I,$)=>{var O=w(k,D.toArray(),[I],$);return{t:h(O.t),y:h(O.y.map(B=>B[0]))}}})}),tFe="erf",nFe=["typed"],rFe=ee(tFe,nFe,t=>{var{typed:e}=t;return e("name",{number:function(s){var o=Math.abs(s);return o>=sFe?Gu(s):o<=aFe?Gu(s)*n(o):o<=4?Gu(s)*(1-r(o)):Gu(s)*(1-a(o))},"Array | Matrix":e.referToSelf(i=>s=>Vt(s,i))});function n(i){var s=i*i,o=Ho[0][4]*s,u=s,l;for(l=0;l<3;l+=1)o=(o+Ho[0][l])*s,u=(u+qf[0][l])*s;return i*(o+Ho[0][3])/(u+qf[0][3])}function r(i){var s=Ho[1][8]*i,o=i,u;for(u=0;u<7;u+=1)s=(s+Ho[1][u])*i,o=(o+qf[1][u])*i;var l=(s+Ho[1][7])/(o+qf[1][7]),c=parseInt(i*16)/16,f=(i-c)*(i+c);return Math.exp(-c*c)*Math.exp(-f)*l}function a(i){var s=1/(i*i),o=Ho[2][5]*s,u=s,l;for(l=0;l<4;l+=1)o=(o+Ho[2][l])*s,u=(u+qf[2][l])*s;var c=s*(o+Ho[2][4])/(u+qf[2][4]);c=(iFe-c)/i,s=parseInt(i*16)/16;var f=(i-s)*(i+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),aFe=.46875,iFe=.5641895835477563,Ho=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],qf=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],sFe=Math.pow(2,53),GR="zeta",oFe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],uFe=ee(GR,oFe,t=>{var{typed:e,config:n,multiply:r,pow:a,divide:i,factorial:s,equal:o,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:v,pi:y}=t;return e(GR,{number:E=>b(E,A=>A,()=>20),BigNumber:E=>b(E,A=>new v(A),()=>Math.abs(Math.log10(n.relTol))),Complex:x});function b(E,A,k){return o(E,0)?A(-.5):o(E,1)?A(NaN):isFinite(E)?w(E,A,k,D=>D):l(E)?A(NaN):A(1)}function x(E){return E.re===0&&E.im===0?new m(-.5):E.re===1?new m(NaN,NaN):E.re===1/0&&E.im===0?new m(1):E.im===1/0||E.re===-1/0?new m(NaN,NaN):w(E,A=>A,A=>Math.round(1.3*15+.9*Math.abs(A.im)),A=>A.re)}function w(E,A,k,D){var I=k(E);if(D(E)>-(I-1)/2)return C(E,A(I),A);var $=r(a(2,E),a(A(y),d(E,1)));return $=r($,f(r(i(A(y),2),E))),$=r($,c(d(1,E))),r($,w(d(1,E),A,k,D))}function S(E,A){for(var k=E,D=E;u(D,A);D=h(D,1)){var I=i(r(s(h(A,d(D,1))),a(4,D)),r(s(d(A,D)),s(r(2,D))));k=h(k,I)}return r(A,k)}function C(E,A,k){for(var D=i(1,r(S(k(0),A),d(1,a(2,d(1,E))))),I=k(0),$=k(1);u($,A);$=h($,1))I=h(I,i(r((-1)**($-1),S($,A)),a($,E)));return r(D,I)}}),XR="mode",lFe=["typed","isNaN","isNumeric"],cFe=ee(XR,lFe,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(XR,{"Array | Matrix":a,"...":function(s){return a(s)}});function a(i){i=vn(i.valueOf());var s=i.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},u=[],l=0,c=0;c<i.length;c++){var f=i[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===l?u.push(f):o[f]>l&&(l=o[f],u=[f])}return u}});function Za(t,e,n){var r;return String(t).includes("Unexpected type")?(r=arguments.length>2?" (type: "+Ln(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).includes("complex numbers")?(r=arguments.length>2?" (type: "+Ln(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var KR="prod",fFe=["typed","config","multiplyScalar","numeric"],dFe=ee(KR,fFe,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:a}=t;return e(KR,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(o,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return i(o)}});function i(s){var o;if(fu(s,function(u){try{o=o===void 0?u:r(o,u)}catch(l){throw Za(l,"prod",u)}}),typeof o=="string"&&(o=a(o,kl(o,n))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),YR="format",pFe=["typed"],hFe=ee(YR,pFe,t=>{var{typed:e}=t;return e(YR,{any:Yt,"any, Object | function | number | BigNumber":Yt})}),ZR="bin",mFe=["typed","format"],gFe=ee(ZR,mFe,t=>{var{typed:e,format:n}=t;return e(ZR,{"number | BigNumber":function(a){return n(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"bin",wordSize:i})}})}),QR="oct",vFe=["typed","format"],yFe=ee(QR,vFe,t=>{var{typed:e,format:n}=t;return e(QR,{"number | BigNumber":function(a){return n(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"oct",wordSize:i})}})}),JR="hex",bFe=["typed","format"],wFe=ee(JR,bFe,t=>{var{typed:e,format:n}=t;return e(JR,{"number | BigNumber":function(a){return n(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,i){return n(a,{notation:"hex",wordSize:i})}})}),M7=/\$([\w.]+)/g,eM="print",xFe=["typed"],P7=ee(eM,xFe,t=>{var{typed:e}=t;return e(eM,{"string, Object | Array":tM,"string, Object | Array, number | Object":tM})});function tM(t,e,n){return t.replace(M7,function(r,a){var i=a.split("."),s=e[i.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());i.length&&s!==void 0;){var o=i.shift();s=o?s[o]:s+"."}return s!==void 0?Ia(s)?s:Yt(s,n):r})}var nM="to",NFe=["typed","matrix","concat"],SFe=ee(nM,NFe,t=>{var{typed:e,matrix:n,concat:r}=t,a=zn({typed:e,matrix:n,concat:r});return e(nM,{"Unit, Unit | string":(i,s)=>i.to(s)},a({Ds:!0}))}),rM="isPrime",CFe=["typed"],EFe=ee(rM,CFe,t=>{var{typed:e}=t;return e(rM,{number:function(r){if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var a=5;a*a<=r;a+=6)if(r%a===0||r%(a+2)===0)return!1;return!0},bigint:function(r){if(r<=3n)return r>1n;if(r%2n===0n||r%3n===0n)return!1;for(var a=5n;a*a<=r;a+=6n)if(r%a===0n||r%(a+2n)===0n)return!1;return!0},BigNumber:function(r){if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var a=r.toNumber(),i=5;i*i<=a;i+=6)if(a%i===0||a%(i+2)===0)return!1;return!0}function s(x,w,S){for(var C=1;!w.eq(0);)w.mod(2).eq(0)?(w=w.div(2),x=x.mul(x).mod(S)):(w=w.sub(1),C=x.mul(C).mod(S));return C}var o=r.constructor.clone({precision:r.toFixed(0).length*2});r=new o(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=s(r.sub(r).add(m),l,r);if(!v.eq(1)){for(var y=0,b=v;!b.eq(r.sub(1));y+=1,b=b.mul(b).mod(r))if(y===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>Vt(r,n))})}),TFe="numeric",DFe=["number","?bignumber","?fraction"],$Fe=ee(TFe,DFe,t=>{var{number:e,bignumber:n,fraction:r}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},i={number:s=>e(s),BigNumber:n?s=>n(s):X$,bigint:s=>BigInt(s),Fraction:r?s=>r(s):k7};return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Ln(o);if(!(c in a))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(a).join(", "));if(!(u in i))throw new TypeError("Cannot convert "+o+' to type "'+u+'"; valid output types are '+Object.keys(i).join(", "));return u===c?o:i[u](o)}}),aM="divideScalar",AFe=["typed","numeric"],IFe=ee(aM,AFe,t=>{var{typed:e,numeric:n}=t;return e(aM,{"number, number":function(a,i){return a/i},"Complex, Complex":function(a,i){return a.div(i)},"BigNumber, BigNumber":function(a,i){return a.div(i)},"bigint, bigint":function(a,i){return a/i},"Fraction, Fraction":function(a,i){return a.div(i)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,a)=>r.divide(a),"number | Fraction | Complex | BigNumber, Unit":(r,a)=>a.divideInto(r)})}),iM="pow",kFe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],_Fe=ee(iM,kFe,t=>{var{typed:e,config:n,identity:r,multiply:a,matrix:i,inv:s,number:o,fraction:u,Complex:l}=t;return e(iM,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||n.predictable?m.pow(v):new l(m.toNumber(),0).pow(v.toNumber(),0)},"bigint, bigint":(h,m)=>h**m,"Fraction, Fraction":function(m,v){var y=m.pow(v);if(y!=null)return y;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(n.predictable&&!wt(m)&&h<0)try{var v=u(m),y=o(v);if((m===y||Math.abs((m-y)/m)<1e-14)&&v.d%2n===1n)return(v.n%2n===0n?1:-1)*Math.pow(-h,m)}catch{}return n.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:wt(m)||h>=0||n.predictable?VW(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new l(h,0).pow(m,0)}function f(h,m){if(!wt(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=Bt(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(s(h),-m)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):x}for(var y=r(v[0]).valueOf(),b=h;m>=1;)(m&1)===1&&(y=a(b,y)),m>>=1,b=a(b,b);return y}function d(h,m){return i(f(h.valueOf(),m))}}),Hf="Number of decimals in function round must be an integer",sM="round",OFe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],FFe=ee(sM,OFe,t=>{var{typed:e,config:n,matrix:r,equalScalar:a,zeros:i,BigNumber:s,DenseMatrix:o}=t,u=ba({typed:e,equalScalar:a}),l=qr({typed:e,DenseMatrix:o}),c=Zs({typed:e});function f(d){return Math.abs(Rg(d).exponent)}return e(sM,{number:function(h){var m=ph(h,f(n.relTol)),v=ga(h,m,n.relTol,n.absTol)?m:h;return ph(v)},"number, number":function(h,m){var v=f(n.relTol);if(m>=v)return ph(h,m);var y=ph(h,v),b=ga(h,y,n.relTol,n.absTol)?y:h;return ph(b,m)},"number, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Hf);return new s(h).toDecimalPlaces(m.toNumber())},Complex:function(h){return h.round()},"Complex, number":function(h,m){if(m%1)throw new TypeError(Hf);return h.round(m)},"Complex, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Hf);var v=m.toNumber();return h.round(v)},BigNumber:function(h){var m=new s(h).toDecimalPlaces(f(n.relTol)),v=Ci(h,m,n.relTol,n.absTol)?m:h;return v.toDecimalPlaces(0)},"BigNumber, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Hf);var v=f(n.relTol);if(m>=v)return h.toDecimalPlaces(m.toNumber());var y=h.toDecimalPlaces(v),b=Ci(h,y,n.relTol,n.absTol)?y:h;return b.toDecimalPlaces(m.toNumber())},Fraction:function(h){return h.round()},"Fraction, number":function(h,m){if(m%1)throw new TypeError(Hf);return h.round(m)},"Fraction, BigNumber":function(h,m){if(!m.isInteger())throw new TypeError(Hf);return h.round(m.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(h,m,v){var y=h.toNumeric(v);return v.multiply(d(y,m))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>d(h,m.toNumber(),v)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(h,m,v)=>Vt(h,y=>d(y,m,v))),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(h,m)=>d(h,0,m)),"Array | Matrix":e.referToSelf(d=>h=>Vt(h,d)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>c(r(h),m,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?i(m.size(),m.storage()):l(m,h,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(h,m)=>a(h,0)?i(m.size(),m.storage()):c(m,h,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf())})}),oM="log",RFe=["config","typed","typeOf","divideScalar","Complex"],MFe=ee(oM,RFe,t=>{var{typed:e,typeOf:n,config:r,divideScalar:a,Complex:i}=t;return e(oM,{number:function(o){return o>=0||r.predictable?PIe(o):new i(o,0).log()},Complex:function(o){return o.log()},BigNumber:function(o){return!o.isNegative()||r.predictable?o.ln():new i(o.toNumber(),0).log()},"any, any":e.referToSelf(s=>(o,u)=>{if(n(o)==="Fraction"&&n(u)==="Fraction"){var l=o.log(u);if(l!==null)return l}return a(s(o),s(u))})})}),uM="log1p",PFe=["typed","config","divideScalar","log","Complex"],BFe=ee(uM,PFe,t=>{var{typed:e,config:n,divideScalar:r,log:a,Complex:i}=t;return e(uM,{number:function(u){return u>=-1||n.predictable?L$e(u):s(new i(u,0))},Complex:s,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():s(new i(u.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>u=>Vt(u,o)),"any, any":e.referToSelf(o=>(u,l)=>r(o(u),a(l)))});function s(o){var u=o.re+1;return new i(Math.log(Math.sqrt(u*u+o.im*o.im)),Math.atan2(o.im,u))}}),lM="nthRoots",LFe=["config","typed","divideScalar","Complex"],zFe=ee(lM,LFe,t=>{var{typed:e,config:n,divideScalar:r,Complex:a}=t,i=[function(u){return new a(u,0)},function(u){return new a(0,u)},function(u){return new a(-u,0)},function(u){return new a(0,-u)}];function s(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new a(0,0)];var l=typeof o=="number",c;(l||o.re===0||o.im===0)&&(l?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),d=o.abs(),h=[],m=Math.pow(d,1/u),v=0;v<u;v++){var y=(c+4*v)/u;if(y===Math.round(y)){h.push(i[y%4](m));continue}h.push(new a({r:m,phi:(f+2*Math.PI*v)/u}))}return h}return e(lM,{Complex:function(u){return s(u,2)},"Complex, number":s})}),cM="dotPow",UFe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],VFe=ee(cM,UFe,t=>{var{typed:e,equalScalar:n,matrix:r,pow:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Qa({typed:e}),l=ko({typed:e,SparseMatrix:o}),c=ba({typed:e,equalScalar:n}),f=qr({typed:e,DenseMatrix:i}),d=zn({typed:e,matrix:r,concat:s}),h={};for(var m in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,m)&&!m.includes("Matrix")&&!m.includes("Array")&&(h[m]=a.signatures[m]);var v=e(h);return e(cM,d({elop:v,SS:l,DS:u,Ss:c,sS:f}))}),fM="dotDivide",WFe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],qFe=ee(fM,WFe,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Qs({typed:e,equalScalar:r}),l=Qa({typed:e}),c=ko({typed:e,SparseMatrix:o}),f=ba({typed:e,equalScalar:r}),d=qr({typed:e,DenseMatrix:i}),h=zn({typed:e,matrix:n,concat:s});return e(fM,h({elop:a,SS:c,DS:l,SD:u,Ss:f,sS:d}))});function Mg(t){var{DenseMatrix:e}=t;return function(r,a,i){var s=r.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Yt(s)+")");var o=s[0],u=s[1];if(o!==u)throw new RangeError("Matrix must be square (size: "+Yt(s)+")");var l=[];if($t(a)){var c=a.size(),f=a._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)l[d]=[f[d]];return new e({data:l,size:[o,1],datatype:a._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(s1(a)){if(i){l=[];for(var h=0;h<o;h++)l[h]=[f[h][0]];return new e({data:l,size:[o,1],datatype:a._datatype})}return a}if(vc(a)){for(var m=0;m<o;m++)l[m]=[0];for(var v=a._values,y=a._index,b=a._ptr,x=b[1],w=b[0];w<x;w++){var S=y[w];l[S][0]=v[w]}return new e({data:l,size:[o,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if($n(a)){var C=Bt(a);if(C.length===1){if(C[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<o;E++)l[E]=[a[E]];return new e({data:l,size:[o,1]})}if(C.length===2){if(C[0]!==o||C[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<o;A++)l[A]=[a[A][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var dM="lsolve",HFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],jFe=ee(dM,HFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(dM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,x=0;x<v;x++){var w=h[x][0]||0,S=void 0;if(s(w,0))S=0;else{var C=b[x][x];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(w,C);for(var E=x+1;E<m;E++)h[E]=[i(h[E][0]||0,a(S,b[E][x]))]}y[x]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=[],S=0;S<v;S++){var C=h[S][0]||0;if(s(C,0))w[S]=[0];else{for(var E=0,A=[],k=[],D=x[S],I=x[S+1],$=D;$<I;$++){var O=b[$];O===S?E=y[$]:O>S&&(A.push(y[$]),k.push(O))}if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=k.length;z<L;z++){var F=k[z];h[F]=[i(h[F][0]||0,a(B,A[z]))]}w[S]=[B]}}return new o({data:w,size:[m,1]})}}),pM="usolve",GFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],XFe=ee(pM,GFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(pM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],b=f._data,x=v-1;x>=0;x--){var w=h[x][0]||0,S=void 0;if(s(w,0))S=0;else{var C=b[x][x];if(s(C,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(w,C);for(var E=x-1;E>=0;E--)h[E]=[i(h[E][0]||0,a(S,b[E][x]))]}y[x]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=[],S=v-1;S>=0;S--){var C=h[S][0]||0;if(s(C,0))w[S]=[0];else{for(var E=0,A=[],k=[],D=x[S],I=x[S+1],$=I-1;$>=D;$--){var O=b[$];O===S?E=y[$]:O<S&&(A.push(y[$]),k.push(O))}if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var B=r(C,E),z=0,L=k.length;z<L;z++){var F=k[z];h[F]=[i(h[F][0],a(B,A[z]))]}w[S]=[B]}}return new o({data:w,size:[m,1]})}}),hM="lsolveAll",KFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],YFe=ee(hM,KFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(hM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(k=>k[0])],m=f._data,v=f._size[0],y=f._size[1],b=0;b<y;b++)for(var x=h.length,w=0;w<x;w++){var S=h[w];if(s(m[b][b],0))if(s(S[b],0)){if(w===0){var E=[...S];E[b]=1;for(var A=b+1;A<y;A++)E[A]=i(E[A],m[A][b]);h.push(E)}}else{if(w===0)return[];h.splice(w,1),w-=1,x-=1}else{S[b]=r(S[b],m[b][b]);for(var C=b+1;C<y;C++)S[C]=i(S[C],a(S[b],m[C][b]))}}return h.map(k=>new o({data:k.map(D=>[D]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(q=>q[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=0;w<v;w++)for(var S=h.length,C=0;C<S;C++){for(var E=h[C],A=[],k=[],D=x[w],I=x[w+1],$=0,O=D;O<I;O++){var B=b[O];B===w?$=y[O]:B>w&&(A.push(y[O]),k.push(B))}if(s($,0))if(s(E[w],0)){if(C===0){var R=[...E];R[w]=1;for(var W=0,M=k.length;W<M;W++){var G=k[W];R[G]=i(R[G],A[W])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,S-=1}else{E[w]=r(E[w],$);for(var z=0,L=k.length;z<L;z++){var F=k[z];E[F]=i(E[F],a(E[w],A[z]))}}}return h.map(q=>new o({data:q.map(j=>[j]),size:[m,1]}))}}),mM="usolveAll",ZFe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],QFe=ee(mM,ZFe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:a,subtractScalar:i,equalScalar:s,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(mM,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(k=>k[0])],m=f._data,v=f._size[0],y=f._size[1],b=y-1;b>=0;b--)for(var x=h.length,w=0;w<x;w++){var S=h[w];if(s(m[b][b],0))if(s(S[b],0)){if(w===0){var E=[...S];E[b]=1;for(var A=b-1;A>=0;A--)E[A]=i(E[A],m[A][b]);h.push(E)}}else{if(w===0)return[];h.splice(w,1),w-=1,x-=1}else{S[b]=r(S[b],m[b][b]);for(var C=b-1;C>=0;C--)S[C]=i(S[C],a(S[b],m[C][b]))}}return h.map(k=>new o({data:k.map(D=>[D]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(q=>q[0])],m=f._size[0],v=f._size[1],y=f._values,b=f._index,x=f._ptr,w=v-1;w>=0;w--)for(var S=h.length,C=0;C<S;C++){for(var E=h[C],A=[],k=[],D=x[w],I=x[w+1],$=0,O=I-1;O>=D;O--){var B=b[O];B===w?$=y[O]:B<w&&(A.push(y[O]),k.push(B))}if(s($,0))if(s(E[w],0)){if(C===0){var R=[...E];R[w]=1;for(var W=0,M=k.length;W<M;W++){var G=k[W];R[G]=i(R[G],A[W])}h.push(R)}}else{if(C===0)return[];h.splice(C,1),C-=1,S-=1}else{E[w]=r(E[w],$);for(var z=0,L=k.length;z<L;z++){var F=k[z];E[F]=i(E[F],a(E[w],A[z]))}}}return h.map(q=>new o({data:q.map(j=>[j]),size:[m,1]}))}}),JFe="matAlgo08xS0Sid",eRe=["typed","equalScalar"],K$=ee(JFe,eRe,t=>{var{typed:e,equalScalar:n}=t;return function(a,i,s){var o=a._values,u=a._index,l=a._ptr,c=a._size,f=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=i._values,h=i._index,m=i._ptr,v=i._size,y=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(c.length!==v.length)throw new Qt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var b=c[0],x=c[1],w,S=n,C=0,E=s;typeof f=="string"&&f===y&&f!=="mixed"&&(w=f,S=e.find(n,[w,w]),C=e.convert(0,w),E=e.find(s,[w,w]));for(var A=[],k=[],D=[],I=[],$=[],O,B,z,L,F=0;F<x;F++){D[F]=k.length;var R=F+1;for(B=l[F],z=l[F+1],O=B;O<z;O++)L=u[O],$[L]=R,I[L]=o[O],k.push(L);for(B=m[F],z=m[F+1],O=B;O<z;O++)L=h[O],$[L]===R&&(I[L]=E(I[L],d[O]));for(O=D[F];O<k.length;){L=k[O];var W=I[L];S(W,C)?k.splice(O,1):(A.push(W),O++)}}return D[x]=k.length,a.createSparseMatrix({values:A,index:k,ptr:D,size:[b,x],datatype:f===a._datatype&&y===i._datatype?w:void 0})}}),Y$=ee("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(a,i)=>r(n(a),i).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(a,i)=>r(n(a),i).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(a,i)=>r(a,n(i)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(a,i)=>r(a,n(i)).valueOf())}}),gM="leftShift",tRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],nRe=ee(gM,tRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=Ol({typed:e}),u=Qs({typed:e,equalScalar:r}),l=K$({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:i}),f=ba({typed:e,equalScalar:r}),d=Zs({typed:e}),h=zn({typed:e,matrix:n,concat:s}),m=Y$({typed:e,matrix:n});return e(gM,{"number, number":GW,"BigNumber, BigNumber":TOe,"bigint, bigint":(v,y)=>v<<y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),vM="rightArithShift",rRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],aRe=ee(vM,rRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=Ol({typed:e}),u=Qs({typed:e,equalScalar:r}),l=K$({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:i}),f=ba({typed:e,equalScalar:r}),d=Zs({typed:e}),h=zn({typed:e,matrix:n,concat:s}),m=Y$({typed:e,matrix:n});return e(vM,{"number, number":XW,"BigNumber, BigNumber":DOe,"bigint, bigint":(v,y)=>v>>y,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),yM="rightLogShift",iRe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],sRe=ee(yM,iRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,DenseMatrix:i,concat:s}=t,o=Ol({typed:e}),u=Qs({typed:e,equalScalar:r}),l=K$({typed:e,equalScalar:r}),c=ef({typed:e,DenseMatrix:i}),f=ba({typed:e,equalScalar:r}),d=Zs({typed:e}),h=zn({typed:e,matrix:n,concat:s}),m=Y$({typed:e,matrix:n});return e(yM,{"number, number":KW,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():f(y,b,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,b)=>r(b,0)?y.clone():d(y,b,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):c(b,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,b)=>r(y,0)?a(b.size(),b.storage()):d(b,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),bM="and",oRe=["typed","matrix","equalScalar","zeros","not","concat"],B7=ee(bM,oRe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=Qs({typed:e,equalScalar:r}),u=Ww({typed:e,equalScalar:r}),l=ba({typed:e,equalScalar:r}),c=Zs({typed:e}),f=zn({typed:e,matrix:n,concat:s});return e(bM,{"number, number":QC,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"bigint, bigint":QC,"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>i(m)?a(h.size(),h.storage()):l(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>i(m)?a(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>i(h)?a(h.size(),h.storage()):l(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>i(h)?a(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(n(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,n(m)).valueOf())},f({SS:u,DS:o}))}),b1="compare",uRe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],lRe=ee(b1,uRe,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,BigNumber:i,Fraction:s,DenseMatrix:o,concat:u}=t,l=Qa({typed:e}),c=Vw({typed:e,equalScalar:r}),f=qr({typed:e,DenseMatrix:o}),d=zn({typed:e,matrix:a,concat:u}),h=hp({typed:e});return e(b1,cRe({typed:e,config:n}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return Ci(v,y,n.relTol,n.absTol)?new i(0):new i(v.cmp(y))},"bigint, bigint":function(v,y){return v===y?0n:v>y?1n:-1n},"Fraction, Fraction":function(v,y){return new s(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),cRe=ee(b1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(b1,{"number, number":function(a,i){return ga(a,i,n.relTol,n.absTol)?0:a>i?1:-1}})}),WN,wM;function fRe(){return wM||(wM=1,WN=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=function(w){return t.insensitive&&(""+w).toLowerCase()||""+w},l=u(e).replace(a,"")||"",c=u(n).replace(a,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(s),16)||f.length!==1&&l.match(i)&&Date.parse(l),m=parseInt(c.match(s),16)||h&&c.match(i)&&Date.parse(c)||null,v,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var b=0,x=Math.max(f.length,d.length);b<x;b++){if(v=!(f[b]||"").match(o)&&parseFloat(f[b])||f[b]||0,y=!(d[b]||"").match(o)&&parseFloat(d[b])||d[b]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0}),WN}var dRe=fRe();const jf=Vc(dRe);var xM="compareNatural",pRe=["typed","compare"],hRe=ee(xM,pRe,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(xM,{"any, any":a});function a(u,l){var c=Ln(u),f=Ln(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:jf(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=i(a,u,l),d!==0?d:jf(c,f);if(c!==f)return jf(c,f);if(c==="Complex")return mRe(u,l);if(c==="Unit")return u.equalBase(l)?a(u.value,l.value):s(a,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return jf(u,l);if(c==="Object")return o(a,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function i(u,l,c){return vc(l)&&vc(c)?s(u,l.toJSON().values,c.toJSON().values):vc(l)?i(u,l.toArray(),c):vc(c)?i(u,l,c.toArray()):s1(l)?i(u,l.toJSON().data,c):s1(c)?i(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?s(u,l,c):i(u,l,[c]):i(u,[l],c)}function s(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function o(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(jf),d.sort(jf);var h=s(u,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=u(l[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function mRe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var NM="compareText",gRe=["typed","matrix","concat"];GC.signature="any, any";var vRe=ee(NM,gRe,t=>{var{typed:e,matrix:n,concat:r}=t,a=zn({typed:e,matrix:n,concat:r});return e(NM,GC,a({elop:GC,Ds:!0}))}),w1="equal",yRe=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],bRe=ee(w1,yRe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Qa({typed:e}),u=ko({typed:e,SparseMatrix:s}),l=qr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:n,concat:i});return e(w1,wRe({typed:e,equalScalar:r}),c({elop:r,SS:u,DS:o,Ss:l}))}),wRe=ee(w1,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(w1,{"any, any":function(a,i){return a===null?i===null:i===null?a===null:a===void 0?i===void 0:i===void 0?a===void 0:n(a,i)}})}),SM="equalText",xRe=["typed","compareText","isZero"],NRe=ee(SM,xRe,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(SM,{"any, any":function(i,s){return r(n(i,s))}})}),x1="smaller",SRe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],CRe=ee(x1,SRe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Qa({typed:e}),u=ko({typed:e,SparseMatrix:s}),l=qr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:i}),f=hp({typed:e});return e(x1,ERe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<h,"BigNumber, BigNumber":function(h,m){return h.lt(m)&&!Ci(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<h,"Fraction, Fraction":(d,h)=>d.compare(h)===-1,"Complex, Complex":function(h,m){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),ERe=ee(x1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(x1,{"number, number":function(a,i){return a<i&&!ga(a,i,n.relTol,n.absTol)}})}),N1="smallerEq",TRe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],DRe=ee(N1,TRe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Qa({typed:e}),u=ko({typed:e,SparseMatrix:s}),l=qr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:i}),f=hp({typed:e});return e(N1,$Re({typed:e,config:n}),{"boolean, boolean":(d,h)=>d<=h,"BigNumber, BigNumber":function(h,m){return h.lte(m)||Ci(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d<=h,"Fraction, Fraction":(d,h)=>d.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),$Re=ee(N1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(N1,{"number, number":function(a,i){return a<=i||ga(a,i,n.relTol,n.absTol)}})}),S1="larger",ARe=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],IRe=ee(S1,ARe,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Qa({typed:e}),u=ko({typed:e,SparseMatrix:s}),l=qr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:i}),f=hp({typed:e});return e(S1,kRe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>h,"BigNumber, BigNumber":function(h,m){return h.gt(m)&&!Ci(h,m,n.relTol,n.absTol)},"bigint, bigint":(d,h)=>d>h,"Fraction, Fraction":(d,h)=>d.compare(h)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),kRe=ee(S1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(S1,{"number, number":function(a,i){return a>i&&!ga(a,i,n.relTol,n.absTol)}})}),C1="largerEq",_Re=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],ORe=ee(C1,_Re,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:a,concat:i,SparseMatrix:s}=t,o=Qa({typed:e}),u=ko({typed:e,SparseMatrix:s}),l=qr({typed:e,DenseMatrix:a}),c=zn({typed:e,matrix:r,concat:i}),f=hp({typed:e});return e(C1,FRe({typed:e,config:n}),{"boolean, boolean":(d,h)=>d>=h,"BigNumber, BigNumber":function(h,m){return h.gte(m)||Ci(h,m,n.relTol,n.absTol)},"bigint, bigint":function(h,m){return h>=m},"Fraction, Fraction":(d,h)=>d.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:u,DS:o,Ss:l}))}),FRe=ee(C1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(C1,{"number, number":function(a,i){return a>=i||ga(a,i,n.relTol,n.absTol)}})}),CM="deepEqual",RRe=["typed","equal"],MRe=ee(CM,RRe,t=>{var{typed:e,equal:n}=t;return e(CM,{"any, any":function(i,s){return r(i.valueOf(),s.valueOf())}});function r(a,i){if(Array.isArray(a))if(Array.isArray(i)){var s=a.length;if(s!==i.length)return!1;for(var o=0;o<s;o++)if(!r(a[o],i[o]))return!1;return!0}else return!1;else return Array.isArray(i)?!1:n(a,i)}}),E1="unequal",PRe=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],BRe=ee(E1,PRe,t=>{var{typed:e,config:n,equalScalar:r,matrix:a,DenseMatrix:i,concat:s,SparseMatrix:o}=t,u=Qa({typed:e}),l=ko({typed:e,SparseMatrix:o}),c=qr({typed:e,DenseMatrix:i}),f=zn({typed:e,matrix:a,concat:s});return e(E1,LRe({typed:e,equalScalar:r}),f({elop:d,SS:l,DS:u,Ss:c}));function d(h,m){return!r(h,m)}}),LRe=ee(E1,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(E1,{"any, any":function(a,i){return a===null?i!==null:i===null?a!==null:a===void 0?i!==void 0:i===void 0?a!==void 0:!n(a,i)}})}),EM="partitionSelect",zRe=["typed","isNumeric","isNaN","compare"],URe=ee(EM,zRe,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:a}=t,i=a,s=(l,c)=>-a(l,c);return e(EM,{"Array | Matrix, number":function(c,f){return o(c,f,i)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return o(c,f,i);if(d==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(l,c,f){if(!wt(c)||c<0)throw new Error("k must be a non-negative integer");if($t(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,m=l.length-1;h<m;){for(var v=h,y=m,b=l[Math.floor(Math.random()*(m-h+1))+h];v<y;)if(f(l[v],b)>=0){var x=l[y];l[y]=l[v],l[v]=x,--y}else++v;f(l[v],b)>0&&--v,c<=v?m=v:h=v+1}return l[c]}}),TM="sort",VRe=["typed","matrix","compare","compareNatural"],WRe=ee(TM,VRe,t=>{var{typed:e,matrix:n,compare:r,compareNatural:a}=t,i=r,s=(c,f)=>-r(c,f);return e(TM,{Array:function(f){return u(f),f.sort(i)},Matrix:function(f){return l(f),n(f.toArray().sort(i),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(o(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(o(d)),f.storage())}});function o(c){if(c==="asc")return i;if(c==="desc")return s;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Bt(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),DM="max",qRe=["typed","config","numeric","larger"],L7=ee(DM,qRe,t=>{var{typed:e,config:n,numeric:r,larger:a}=t;return e(DM,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Uw(u,l.valueOf(),i)},"...":function(u){if(fp(u))throw new TypeError("Scalar values expected in function max");return s(u)}});function i(o,u){try{return a(o,u)?o:u}catch(l){throw Za(l,"max",u)}}function s(o){var u;if(fu(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Za(c,"max",l)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=r(u,kl(u,n))),u}}),$M="min",HRe=["typed","config","numeric","smaller"],z7=ee($M,HRe,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t;return e($M,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Uw(u,l.valueOf(),i)},"...":function(u){if(fp(u))throw new TypeError("Scalar values expected in function min");return s(u)}});function i(o,u){try{return a(o,u)?o:u}catch(l){throw Za(l,"min",u)}}function s(o){var u;if(fu(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||a(l,u))&&(u=l)}catch(c){throw Za(c,"min",l)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=r(u,kl(u,n))),u}}),jRe="ImmutableDenseMatrix",GRe=["smaller","DenseMatrix"],XRe=ee(jRe,GRe,t=>{var{smaller:e,DenseMatrix:n}=t;function r(a,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(i&&!Ia(i))throw new Error("Invalid datatype: "+i);if($t(a)||$n(a)){var s=new n(a,i);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(a&&$n(a.data)&&$n(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Ln(a)+")");this._data=[],this._size=[0],this._datatype=i,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(a){switch(arguments.length){case 1:{var i=n.prototype.subset.call(this,a);return $t(i)?new r({data:i._data,size:i._size,datatype:i._datatype}):i}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:zt(this._data),size:zt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(i){(a===null||e(i,a))&&(a=i)}),this._min=a!==null?a:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(i){(a===null||e(a,i))&&(a=i)}),this._max=a!==null?a:void 0}return this._max},r},{isClass:!0}),KRe="Index",YRe=["ImmutableDenseMatrix","getMatrixDataType"],ZRe=ee(KRe,YRe,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var u=arguments[s],l=$n(u),c=$t(u),f=null;if(R$(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var d=void 0;n(u)==="boolean"?(l&&(d=a(AM(u).valueOf())),c&&(d=a(AM(u._data).valueOf())),f=u.valueOf().length):d=a(u.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(a([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function a(i){for(var s=0,o=i.length;s<o;s++)if(typeof i[s]!="number"||!wt(i[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(i)}return r.prototype.clone=function(){var i=new r;return i._dimensions=zt(this._dimensions),i._isScalar=this._isScalar,i._sourceSize=this._sourceSize,i},r.create=function(i){var s=new r;return r.apply(s,i),s},r.prototype.size=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?1:u.size()[0]}return i},r.prototype.max=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?u:u.max()}return i},r.prototype.min=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i[s]=typeof u=="string"?u:u.min()}return i},r.prototype.forEach=function(i){for(var s=0,o=this._dimensions.length;s<o;s++)i(this._dimensions[s],s,this)},r.prototype.dimension=function(i){return typeof i!="number"?null:this._dimensions[i]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];i.push(typeof u=="string"?u:u.toArray())}return i},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var i=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];typeof u=="string"?i.push(JSON.stringify(u)):i.push(u.toString())}return"["+i.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(i){return r.create(i.dimensions)},r},{isClass:!0});function AM(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var QRe="FibonacciHeap",JRe=["smaller","larger"],eMe=ee(QRe,JRe,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},a.prototype.remove=function(c){this._minimum=i(this._minimum,c,-1),this.extractMinimum()};function i(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(s(c,f,h),o(c,h)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),o(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var y;m>0;){for(var b=v.degree,x=v.right;y=h[b],!!y;){if(n(v.key,y.key)){var w=y;y=v,v=w}u(y,v),h[b]=null,b++}h[b]=v,v=x,m--}c=null;for(var S=0;S<d;S++)y=h[S],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return a},{isClass:!0}),tMe="Spa",nMe=["addScalar","equalScalar","FibonacciHeap"],rMe=ee(tMe,nMe,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(i,s){if(this._values[i])this._values[i].value=s;else{var o=this._heap.insert(i,s);this._values[i]=o}},a.prototype.get=function(i){var s=this._values[i];return s?s.value:0},a.prototype.accumulate=function(i,s){var o=this._values[i];o?o.value=e(o.value,s):(o=this._heap.insert(i,s),this._values[i]=o)},a.prototype.forEach=function(i,s,o){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=i&&(n(f.value,0)||o(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},a.prototype.swap=function(i,s){var o=this._values[i],u=this._values[s];if(!o&&u)o=this._heap.insert(i,u.value),this._heap.remove(u),this._values[i]=o,this._values[s]=void 0;else if(o&&!u)u=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=u,this._values[i]=void 0;else if(o&&u){var l=o.value;o.value=u.value,u.value=l}},a},{isClass:!0});function aMe(t){var e=0,n=1,r=Object.create(null),a=Object.create(null),i=0,s=function(u){var l=a[u];if(l&&(delete r[l],delete a[u],--e,n===l)){if(!e){i=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=a[u],c=++i;if(r[c]=u,a[u]=c,!l)return++e,e<=t?void 0:(u=r[n],s(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:s,clear:function(){e=i=0,n=1,r=Object.create(null),a=Object.create(null)}}}function Pg(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:aMe(n||Number.POSITIVE_INFINITY)});for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=e(a);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var o=t.apply(t,a);return r.cache.values.set(s,o),r.cache.values.delete(r.cache.lru.hit(s)),o}}var iMe=Pg(function(t){return new t(1).exp()},{hasher:qw}),sMe=Pg(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:qw}),Z$=Pg(function(t){return t.acos(-1)},{hasher:qw}),oMe=Pg(function(t){return Z$(t).times(2)},{hasher:qw});function qw(t){return t[0].precision}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(r){Ur(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var uMe="Unit",lMe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],cMe=ee(uMe,lMe,t=>{var{on:e,config:n,addScalar:r,subtractScalar:a,multiplyScalar:i,divideScalar:s,pow:o,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:y,Fraction:b}=t,x=m;function w(Z,ie){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(!(Z==null||d(Z)||eu(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,ie===void 0)this.units=[],this.dimensions=W.map(xe=>0);else if(typeof ie=="string"){var ve=w.parse(ie);this.units=ve.units,this.dimensions=ve.dimensions}else if(is(ie)&&ie.value===null)this.fixPrefix=ie.fixPrefix,this.skipAutomaticSimplification=ie.skipAutomaticSimplification,this.dimensions=ie.dimensions.slice(0),this.units=ie.units.map(xe=>Br({},xe));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Z)}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0;var S,C,E;function A(){for(;E===" "||E==="	";)I()}function k(Z){return Z>="0"&&Z<="9"||Z==="."}function D(Z){return Z>="0"&&Z<="9"}function I(){C++,E=S.charAt(C)}function $(Z){C=Z,E=S.charAt(C)}function O(){var Z="",ie=C;if(E==="+"?I():E==="-"&&(Z+=E,I()),!k(E))return $(ie),null;if(E==="."){if(Z+=E,I(),!D(E))return $(ie),null}else{for(;D(E);)Z+=E,I();E==="."&&(Z+=E,I())}for(;D(E);)Z+=E,I();if(E==="E"||E==="e"){var ve="",xe=C;if(ve+=E,I(),(E==="+"||E==="-")&&(ve+=E,I()),!D(E))return $(xe),Z;for(Z=Z+ve;D(E);)Z+=E,I()}return Z}function B(){for(var Z="";D(E)||w.isValidAlpha(E);)Z+=E,I();var ie=Z.charAt(0);return w.isValidAlpha(ie)?Z:null}function z(Z){return E===Z?(I(),Z):null}w.parse=function(Z,ie){if(ie=ie||{},S=Z,C=-1,E="",typeof S!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var ve=new w;ve.units=[];var xe=1,Re=!1;I(),A();var Me=O(),je=null;if(Me){if(n.number==="BigNumber")je=new y(Me);else if(n.number==="Fraction")try{je=new b(Me)}catch{je=parseFloat(Me)}else je=parseFloat(Me);A(),z("*")?(xe=1,Re=!0):z("/")&&(xe=-1,Re=!0)}for(var Qe=[],re=1;;){for(A();E==="(";)Qe.push(xe),re*=xe,xe=1,I(),A();var ce=void 0;if(E){var Ce=E;if(ce=B(),ce===null)throw new SyntaxError('Unexpected "'+Ce+'" in "'+S+'" at index '+C.toString())}else break;var $e=L(ce);if($e===null)throw new SyntaxError('Unit "'+ce+'" not found.');var Le=xe*re;if(A(),z("^")){A();var Pe=O();if(Pe===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');Le*=Pe}ve.units.push({unit:$e.unit,prefix:$e.prefix,power:Le});for(var Je=0;Je<W.length;Je++)ve.dimensions[Je]+=($e.unit.dimensions[Je]||0)*Le;for(A();E===")";){if(Qe.length===0)throw new SyntaxError('Unmatched ")" in "'+S+'" at index '+C.toString());re/=Qe.pop(),I(),A()}if(Re=!1,z("*")?(xe=1,Re=!0):z("/")?(xe=-1,Re=!0):xe=1,$e.unit.base){var He=$e.unit.base.key;te.auto[He]={unit:$e.unit,prefix:$e.prefix}}}if(A(),E)throw new SyntaxError('Could not parse: "'+Z+'"');if(Re)throw new SyntaxError('Trailing characters: "'+Z+'"');if(Qe.length!==0)throw new SyntaxError('Unmatched "(" in "'+S+'"');if(ve.units.length===0&&!ie.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return ve.value=je!==void 0?ve._normalize(je):null,ve},w.prototype.clone=function(){var Z=new w;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=zt(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var ie=0;ie<this.units.length;ie++){Z.units[ie]={};for(var ve in this.units[ie])pt(this.units[ie],ve)&&(Z.units[ie][ve]=this.units[ie][ve])}return Z},w.prototype.valueType=function(){return Ln(this.value)},w.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},w.prototype._normalize=function(Z){if(Z==null||this.units.length===0)return Z;for(var ie=Z,ve=w._getNumberConverter(Ln(Z)),xe=0;xe<this.units.length;xe++){var Re=ve(this.units[xe].unit.value),Me=ve(this.units[xe].prefix.value),je=ve(this.units[xe].power);ie=i(ie,o(i(Re,Me),je))}return ie},w.prototype._denormalize=function(Z,ie){if(Z==null||this.units.length===0)return Z;for(var ve=Z,xe=w._getNumberConverter(Ln(Z)),Re=0;Re<this.units.length;Re++){var Me=xe(this.units[Re].unit.value),je=xe(this.units[Re].prefix.value),Qe=xe(this.units[Re].power);ve=s(ve,o(i(Me,je),Qe))}return ve};var L=Pg(Z=>{if(pt(H,Z)){var ie=H[Z],ve=ie.prefixes[""];return{unit:ie,prefix:ve}}for(var xe in H)if(pt(H,xe)&&xIe(Z,xe)){var Re=H[xe],Me=Z.length-xe.length,je=Z.substring(0,Me),Qe=pt(Re.prefixes,je)?Re.prefixes[je]:void 0;if(Qe!==void 0)return{unit:Re,prefix:Qe}}return null},{hasher:Z=>Z[0],limit:100});w.isValuelessUnit=function(Z){return L(Z)!==null},w.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=M[Z]),!Z)return!1;for(var ie=0;ie<W.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(Z){for(var ie=0;ie<W.length;ie++)if(Math.abs((this.dimensions[ie]||0)-(Z.dimensions[ie]||0))>1e-12)return!1;return!0},w.prototype.equals=function(Z){return this.equalBase(Z)&&f(this.value,Z.value)},w.prototype.multiply=function(Z){for(var ie=this.clone(),ve=is(Z)?Z:new w(Z),xe=0;xe<W.length;xe++)ie.dimensions[xe]=(this.dimensions[xe]||0)+(ve.dimensions[xe]||0);for(var Re=0;Re<ve.units.length;Re++){var Me=qN({},ve.units[Re]);ie.units.push(Me)}if(this.value!==null||ve.value!==null){var je=this.value===null?this._normalize(1):this.value,Qe=ve.value===null?ve._normalize(1):ve.value;ie.value=i(je,Qe)}else ie.value=null;return is(Z)&&(ie.skipAutomaticSimplification=!1),F(ie)},w.prototype.divideInto=function(Z){return new w(Z).divide(this)},w.prototype.divide=function(Z){for(var ie=this.clone(),ve=is(Z)?Z:new w(Z),xe=0;xe<W.length;xe++)ie.dimensions[xe]=(this.dimensions[xe]||0)-(ve.dimensions[xe]||0);for(var Re=0;Re<ve.units.length;Re++){var Me=qN(qN({},ve.units[Re]),{},{power:-ve.units[Re].power});ie.units.push(Me)}if(this.value!==null||ve.value!==null){var je=this.value===null?this._normalize(1):this.value,Qe=ve.value===null?ve._normalize(1):ve.value;ie.value=s(je,Qe)}else ie.value=null;return is(Z)&&(ie.skipAutomaticSimplification=!1),F(ie)},w.prototype.pow=function(Z){for(var ie=this.clone(),ve=0;ve<W.length;ve++)ie.dimensions[ve]=(this.dimensions[ve]||0)*Z;for(var xe=0;xe<ie.units.length;xe++)ie.units[xe].power*=Z;return ie.value!==null?ie.value=o(ie.value,Z):ie.value=null,ie.skipAutomaticSimplification=!1,F(ie)};function F(Z){return Z.equalBase(M.NONE)&&Z.value!==null&&!n.predictable?Z.value:Z}w.prototype.abs=function(){var Z=this.clone();if(Z.value!==null)if(Z._isDerived()||Z.units.length===0||Z.units[0].unit.offset===0)Z.value=u(Z.value);else{var ie=Z._numberConverter(),ve=ie(Z.units[0].unit.value),xe=ie(Z.units[0].unit.offset),Re=i(ve,xe);Z.value=a(u(r(Z.value,Re)),Re)}for(var Me in Z.units)(Z.units[Me].unit.name==="VA"||Z.units[Me].unit.name==="VAR")&&(Z.units[Me].unit=H.W);return Z},w.prototype.to=function(Z){var ie=this.value===null?this._normalize(1):this.value,ve;if(typeof Z=="string")ve=w.parse(Z);else if(is(Z))ve=Z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(ve))throw new Error("Units do not match ('".concat(ve.toString(),"' != '").concat(this.toString(),"')"));if(ve.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||ve.units.length===0||this.units[0].unit.offset===ve.units[0].unit.offset)ve.value=zt(ie);else{var xe=w._getNumberConverter(Ln(ie)),Re=this.units[0].unit.value,Me=this.units[0].unit.offset,je=i(Re,Me),Qe=ve.units[0].unit.value,re=ve.units[0].unit.offset,ce=i(Qe,re);ve.value=r(ie,xe(a(je,ce)))}return ve.fixPrefix=!0,ve.skipAutomaticSimplification=!0,ve},w.prototype.toNumber=function(Z){return x(this.toNumeric(Z))},w.prototype.toNumeric=function(Z){var ie;return Z?ie=this.to(Z):ie=this.clone(),ie._isDerived()||ie.units.length===0?ie._denormalize(ie.value):ie._denormalize(ie.value,ie.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},w.fromJSON=function(Z){var ie,ve=new w(Z.value,(ie=Z.unit)!==null&&ie!==void 0?ie:void 0);return ve.fixPrefix=Z.fixPrefix||!1,ve},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var Z=this.clone(),ie=[],ve;for(var xe in se)if(pt(se,xe)&&Z.hasBase(M[xe])){ve=xe;break}if(ve==="NONE")Z.units=[];else{var Re;if(ve&&pt(se,ve)&&(Re=se[ve]),Re)Z.units=[{unit:Re.unit,prefix:Re.prefix,power:1}];else{for(var Me=!1,je=0;je<W.length;je++){var Qe=W[je];Math.abs(Z.dimensions[je]||0)>1e-12&&(pt(se,Qe)?ie.push({unit:se[Qe].unit,prefix:se[Qe].prefix,power:Z.dimensions[je]||0}):Me=!0)}ie.length<Z.units.length&&!Me&&(Z.units=ie)}}return Z},w.prototype.toSI=function(){for(var Z=this.clone(),ie=[],ve=0;ve<W.length;ve++){var xe=W[ve];if(Math.abs(Z.dimensions[ve]||0)>1e-12)if(pt(te.si,xe))ie.push({unit:te.si[xe].unit,prefix:te.si[xe].prefix,power:Z.dimensions[ve]||0});else throw new Error("Cannot express custom unit "+xe+" in SI units")}return Z.units=ie,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,this.value!==null?(Z.value=null,this.to(Z)):Z},w.prototype.formatUnits=function(){for(var Z="",ie="",ve=0,xe=0,Re=0;Re<this.units.length;Re++)this.units[Re].power>0?(ve++,Z+=" "+this.units[Re].prefix.name+this.units[Re].unit.name,Math.abs(this.units[Re].power-1)>1e-15&&(Z+="^"+this.units[Re].power)):this.units[Re].power<0&&xe++;if(xe>0)for(var Me=0;Me<this.units.length;Me++)this.units[Me].power<0&&(ve>0?(ie+=" "+this.units[Me].prefix.name+this.units[Me].unit.name,Math.abs(this.units[Me].power+1)>1e-15&&(ie+="^"+-this.units[Me].power)):(ie+=" "+this.units[Me].prefix.name+this.units[Me].unit.name,ie+="^"+this.units[Me].power));Z=Z.substr(1),ie=ie.substr(1),ve>1&&xe>0&&(Z="("+Z+")"),xe>1&&ve>0&&(ie="("+ie+")");var je=Z;return ve>0&&xe>0&&(je+=" / "),je+=ie,je},w.prototype.format=function(Z){var ie=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),ve=!1;typeof ie.value<"u"&&ie.value!==null&&eu(ie.value)&&(ve=Math.abs(ie.value.re)<1e-14);for(var xe in ie.units)pt(ie.units,xe)&&ie.units[xe].unit&&(ie.units[xe].unit.name==="VA"&&ve?ie.units[xe].unit=H.VAR:ie.units[xe].unit.name==="VAR"&&!ve&&(ie.units[xe].unit=H.VA));ie.units.length===1&&!ie.fixPrefix&&Math.abs(ie.units[0].power-Math.round(ie.units[0].power))<1e-14&&(ie.units[0].prefix=ie._bestPrefix());var Re=ie._denormalize(ie.value),Me=ie.value!==null?h(Re,Z||{}):"",je=ie.formatUnits();return ie.value&&eu(ie.value)&&(Me="("+Me+")"),je.length>0&&Me.length>0&&(Me+=" "),Me+=je,Me},w.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Z=this.value!==null?u(this.value):0,ie=u(this.units[0].unit.value),ve=this.units[0].prefix;if(Z===0)return ve;var xe=this.units[0].power,Re=Math.log(Z/Math.pow(ve.value*ie,xe))/Math.LN10-1.2;if(Re>-2.200001&&Re<1.800001)return ve;Re=Math.abs(Re);var Me=this.units[0].unit.prefixes;for(var je in Me)if(pt(Me,je)){var Qe=Me[je];if(Qe.scientific){var re=Math.abs(Math.log(Z/Math.pow(Qe.value*ie,xe))/Math.LN10-1.2);(re<Re||re===Re&&Qe.name.length<ve.name.length)&&(ve=Qe,Re=re)}}return ve},w.prototype.splitUnit=function(Z){for(var ie=this.clone(),ve=[],xe=0;xe<Z.length&&(ie=ie.to(Z[xe]),xe!==Z.length-1);xe++){var Re=ie.toNumeric(),Me=c(Re),je=void 0,Qe=f(Me,Re);Qe?je=Me:je=l(ie.toNumeric());var re=new w(je,Z[xe].toString());ve.push(re),ie=a(ie,re)}for(var ce=0,Ce=0;Ce<ve.length;Ce++)ce=r(ce,ve[Ce].value);return f(ce,this.value)&&(ie.value=0),ve.push(ie),ve};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=Br({},R.SHORT,R.LONG),R.BINARY_SHORT=Br({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=Br({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var W=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],M={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var G in M)pt(M,G)&&(M[G].key=G);var q={},j={name:"",base:q,value:1,offset:0,dimensions:W.map(Z=>0)},H={meter:{name:"meter",base:M.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:M.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:M.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:M.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:M.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:M.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:M.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:M.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:M.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:M.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:M.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:M.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:M.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:M.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:M.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:M.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:M.SURFACE,prefixes:R.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:M.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:M.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:M.SURFACE,prefixes:R.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:M.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:M.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:M.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:M.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:M.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:M.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:M.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:M.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:M.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:M.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:M.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:M.VOLUME,prefixes:R.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:M.VOLUME,prefixes:R.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:M.VOLUME,prefixes:R.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:M.VOLUME,prefixes:R.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:M.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:M.VOLUME,prefixes:R.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:M.VOLUME,prefixes:R.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:M.VOLUME,prefixes:R.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:M.VOLUME,prefixes:R.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:M.VOLUME,prefixes:R.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:M.VOLUME,prefixes:R.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:M.VOLUME,prefixes:R.NONE,value:.238480942392,offset:0},g:{name:"g",base:M.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:M.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:M.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:M.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:M.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:M.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:M.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:M.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:M.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:M.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:M.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:M.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:M.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:M.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:M.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:M.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:M.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:M.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:M.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:M.TIME,prefixes:R.NONE,value:7*86400,offset:0},month:{name:"month",base:M.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:M.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:M.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:M.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:M.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:M.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:M.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:M.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:M.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:M.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:M.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:M.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:M.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:M.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:0},degC:{name:"degC",base:M.TEMPERATURE,prefixes:R.SHORT,value:1,offset:273.15},degF:{name:"degF",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:459.67},degR:{name:"degR",base:M.TEMPERATURE,prefixes:R.SHORT,value:new b(5,9),offset:0},kelvin:{name:"kelvin",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:0},celsius:{name:"celsius",base:M.TEMPERATURE,prefixes:R.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:459.67},rankine:{name:"rankine",base:M.TEMPERATURE,prefixes:R.LONG,value:new b(5,9),offset:0},mol:{name:"mol",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:M.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:M.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:M.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:M.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:M.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:M.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:M.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:M.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:M.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:M.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:M.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:M.ENERGY,prefixes:R.LONG,value:1,offset:0},erg:{name:"erg",base:M.ENERGY,prefixes:R.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:M.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:M.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:M.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:M.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:M.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:M.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:M.POWER,prefixes:R.SHORT,value:v.I,offset:0},VA:{name:"VA",base:M.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:M.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:M.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:M.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:M.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:M.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:M.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:M.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:M.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:M.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:M.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:M.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:M.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:M.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:M.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:M.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:M.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:M.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:M.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:M.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:M.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:M.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:M.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:M.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:M.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},ne={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ue(Z){if(Z.number==="BigNumber"){var ie=Z$(y);H.rad.value=new y(1),H.deg.value=ie.div(180),H.grad.value=ie.div(200),H.cycle.value=ie.times(2),H.arcsec.value=ie.div(648e3),H.arcmin.value=ie.div(10800)}else H.rad.value=1,H.deg.value=Math.PI/180,H.grad.value=Math.PI/200,H.cycle.value=Math.PI*2,H.arcsec.value=Math.PI/648e3,H.arcmin.value=Math.PI/10800;H.radian.value=H.rad.value,H.degree.value=H.deg.value,H.gradian.value=H.grad.value}ue(n),e&&e("config",function(Z,ie){Z.number!==ie.number&&ue(Z)});var te={si:{NONE:{unit:j,prefix:R.NONE[""]},LENGTH:{unit:H.m,prefix:R.SHORT[""]},MASS:{unit:H.g,prefix:R.SHORT.k},TIME:{unit:H.s,prefix:R.SHORT[""]},CURRENT:{unit:H.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:H.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:H.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:H.mol,prefix:R.SHORT[""]},ANGLE:{unit:H.rad,prefix:R.SHORT[""]},BIT:{unit:H.bits,prefix:R.SHORT[""]},FORCE:{unit:H.N,prefix:R.SHORT[""]},ENERGY:{unit:H.J,prefix:R.SHORT[""]},POWER:{unit:H.W,prefix:R.SHORT[""]},PRESSURE:{unit:H.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:H.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:H.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:H.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:H.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:H.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:H.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:H.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:H.T,prefix:R.SHORT[""]},FREQUENCY:{unit:H.Hz,prefix:R.SHORT[""]}}};te.cgs=JSON.parse(JSON.stringify(te.si)),te.cgs.LENGTH={unit:H.m,prefix:R.SHORT.c},te.cgs.MASS={unit:H.g,prefix:R.SHORT[""]},te.cgs.FORCE={unit:H.dyn,prefix:R.SHORT[""]},te.cgs.ENERGY={unit:H.erg,prefix:R.NONE[""]},te.us=JSON.parse(JSON.stringify(te.si)),te.us.LENGTH={unit:H.ft,prefix:R.NONE[""]},te.us.MASS={unit:H.lbm,prefix:R.NONE[""]},te.us.TEMPERATURE={unit:H.degF,prefix:R.NONE[""]},te.us.FORCE={unit:H.lbf,prefix:R.NONE[""]},te.us.ENERGY={unit:H.BTU,prefix:R.BTU[""]},te.us.POWER={unit:H.hp,prefix:R.NONE[""]},te.us.PRESSURE={unit:H.psi,prefix:R.NONE[""]},te.auto=JSON.parse(JSON.stringify(te.si));var se=te.auto;w.setUnitSystem=function(Z){if(pt(te,Z))se=te[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(te).join(", "))},w.getUnitSystem=function(){for(var Z in te)if(pt(te,Z)&&te[Z]===se)return Z},w.typeConverters={BigNumber:function(ie){return ie!=null&&ie.isFraction?new y(String(ie.n)).div(String(ie.d)).times(String(ie.s)):new y(ie+"")},Fraction:function(ie){return new b(ie)},Complex:function(ie){return ie},number:function(ie){return ie!=null&&ie.isFraction?m(ie):ie}},w.prototype._numberConverter=function(){var Z=w.typeConverters[this.valueType()];if(Z)return Z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(Z){if(!w.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return w.typeConverters[Z]};for(var J in H)if(pt(H,J)){var K=H[J];K.dimensions=K.base.dimensions}for(var ae in ne)if(pt(ne,ae)){var pe=H[ne[ae]],he={};for(var Se in pe)pt(pe,Se)&&(he[Se]=pe[Se]);he.name=ae,H[ae]=he}w.isValidAlpha=function(ie){return/^[a-zA-Z]$/.test(ie)};function Ee(Z){for(var ie=0;ie<Z.length;ie++){if(E=Z.charAt(ie),ie===0&&!w.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(ie>0&&!(w.isValidAlpha(E)||D(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return w.createUnit=function(Z,ie){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ie&&ie.override){for(var ve in Z)if(pt(Z,ve)&&w.deleteUnit(ve),Z[ve].aliases)for(var xe=0;xe<Z[ve].aliases.length;xe++)w.deleteUnit(Z[ve].aliases[xe])}var Re;for(var Me in Z)pt(Z,Me)&&(Re=w.createUnitSingle(Me,Z[Me]));return Re},w.createUnitSingle=function(Z,ie){if((typeof ie>"u"||ie===null)&&(ie={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(pt(H,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');Ee(Z);var ve=null,xe=[],Re=0,Me,je,Qe;if(ie&&ie.type==="Unit")ve=ie.clone();else if(typeof ie=="string")ie!==""&&(Me=ie);else if(typeof ie=="object")Me=ie.definition,je=ie.prefixes,Re=ie.offset,Qe=ie.baseName,ie.aliases&&(xe=ie.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+ie.toString()+'": expecting "string" or "Unit" or "Object"');if(xe){for(var re=0;re<xe.length;re++)if(pt(H,xe[re]))throw new Error('Cannot create alias "'+xe[re]+'": a unit with that name already exists')}if(Me&&typeof Me=="string"&&!ve)try{ve=w.parse(Me,{allowNoUnits:!0})}catch(fe){throw fe.message='Could not create unit "'+Z+'" from "'+Me+'": '+fe.message,fe}else Me&&Me.type==="Unit"&&(ve=Me.clone());xe=xe||[],Re=Re||0,je&&je.toUpperCase?je=R[je.toUpperCase()]||R.NONE:je=R.NONE;var ce={};if(ve){ce={name:Z,value:ve.value,dimensions:ve.dimensions.slice(0),prefixes:je,offset:Re};var Pe=!1;for(var Je in M)if(pt(M,Je)){for(var He=!0,tt=0;tt<W.length;tt++)if(Math.abs((ce.dimensions[tt]||0)-(M[Je].dimensions[tt]||0))>1e-12){He=!1;break}if(He){Pe=!0,ce.base=M[Je];break}}if(!Pe){Qe=Qe||Z+"_STUFF";var Ze={dimensions:ve.dimensions.slice(0)};Ze.key=Qe,M[Qe]=Ze,se[Qe]={unit:ce,prefix:R.NONE[""]},ce.base=M[Qe]}}else{if(Qe=Qe||Z+"_STUFF",W.indexOf(Qe)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');W.push(Qe);for(var Ce in M)pt(M,Ce)&&(M[Ce].dimensions[W.length-1]=0);for(var $e={dimensions:[]},Le=0;Le<W.length;Le++)$e.dimensions[Le]=0;$e.dimensions[W.length-1]=1,$e.key=Qe,M[Qe]=$e,ce={name:Z,value:1,dimensions:M[Qe].dimensions.slice(0),prefixes:je,offset:Re,base:M[Qe]},se[Qe]={unit:ce,prefix:R.NONE[""]}}w.UNITS[Z]=ce;for(var Xt=0;Xt<xe.length;Xt++){var St=xe[Xt],Cn={};for(var V in ce)pt(ce,V)&&(Cn[V]=ce[V]);Cn.name=St,w.UNITS[St]=Cn}return delete L.cache,new w(null,Z)},w.deleteUnit=function(Z){delete w.UNITS[Z],delete L.cache},w.PREFIXES=R,w.BASE_DIMENSIONS=W,w.BASE_UNITS=M,w.UNIT_SYSTEMS=te,w.UNITS=H,w},{isClass:!0}),kM="unit",fMe=["typed","Unit"],dMe=ee(kM,fMe,t=>{var{typed:e,Unit:n}=t;return e(kM,{Unit:function(a){return a.clone()},string:function(a){return n.isValuelessUnit(a)?new n(null,a):n.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,i){return new n(a,i)},"number | BigNumber | Fraction":function(a){return new n(a)},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),_M="sparse",pMe=["typed","SparseMatrix"],hMe=ee(_M,pMe,t=>{var{typed:e,SparseMatrix:n}=t;return e(_M,{"":function(){return new n([])},string:function(a){return new n([],a)},"Array | Matrix":function(a){return new n(a)},"Array | Matrix, string":function(a,i){return new n(a,i)}})}),OM="createUnit",mMe=["typed","Unit"],gMe=ee(OM,mMe,t=>{var{typed:e,Unit:n}=t;return e(OM,{"Object, Object":function(a,i){return n.createUnit(a,i)},Object:function(a){return n.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,i,s){var o={};return o[a]=i,n.createUnit(o,s)},"string, Unit | string | Object":function(a,i){var s={};return s[a]=i,n.createUnit(s,{})},string:function(a){var i={};return i[a]={},n.createUnit(i,{})}})}),FM="acos",vMe=["typed","config","Complex"],yMe=ee(FM,vMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(FM,{number:function(i){return i>=-1&&i<=1||n.predictable?Math.acos(i):new r(i,0).acos()},Complex:function(i){return i.acos()},BigNumber:function(i){return i.acos()}})}),RM="acosh",bMe=["typed","config","Complex"],wMe=ee(RM,bMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(RM,{number:function(i){return i>=1||n.predictable?e7(i):i<=-1?new r(Math.log(Math.sqrt(i*i-1)-i),Math.PI):new r(i,0).acosh()},Complex:function(i){return i.acosh()},BigNumber:function(i){return i.acosh()}})}),MM="acot",xMe=["typed","BigNumber"],NMe=ee(MM,xMe,t=>{var{typed:e,BigNumber:n}=t;return e(MM,{number:t7,Complex:function(a){return a.acot()},BigNumber:function(a){return new n(1).div(a).atan()}})}),PM="acoth",SMe=["typed","config","Complex","BigNumber"],CMe=ee(PM,SMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(PM,{number:function(s){return s>=1||s<=-1||n.predictable?n7(s):new r(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new a(1).div(s).atanh()}})}),BM="acsc",EMe=["typed","config","Complex","BigNumber"],TMe=ee(BM,EMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(BM,{number:function(s){return s<=-1||s>=1||n.predictable?r7(s):new r(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new a(1).div(s).asin()}})}),LM="acsch",DMe=["typed","BigNumber"],$Me=ee(LM,DMe,t=>{var{typed:e,BigNumber:n}=t;return e(LM,{number:a7,Complex:function(a){return a.acsch()},BigNumber:function(a){return new n(1).div(a).asinh()}})}),zM="asec",AMe=["typed","config","Complex","BigNumber"],IMe=ee(zM,AMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(zM,{number:function(s){return s<=-1||s>=1||n.predictable?i7(s):new r(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new a(1).div(s).acos()}})}),UM="asech",kMe=["typed","config","Complex","BigNumber"],_Me=ee(UM,kMe,t=>{var{typed:e,config:n,Complex:r,BigNumber:a}=t;return e(UM,{number:function(s){if(s<=1&&s>=-1||n.predictable){var o=1/s;if(o>0||n.predictable)return s7(s);var u=Math.sqrt(o*o-1);return new r(Math.log(u-o),Math.PI)}return new r(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new a(1).div(s).acosh()}})}),VM="asin",OMe=["typed","config","Complex"],FMe=ee(VM,OMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(VM,{number:function(i){return i>=-1&&i<=1||n.predictable?Math.asin(i):new r(i,0).asin()},Complex:function(i){return i.asin()},BigNumber:function(i){return i.asin()}})}),RMe="asinh",MMe=["typed"],PMe=ee(RMe,MMe,t=>{var{typed:e}=t;return e("asinh",{number:o7,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),BMe="atan",LMe=["typed"],zMe=ee(BMe,LMe,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),WM="atan2",UMe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],VMe=ee(WM,UMe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:a,DenseMatrix:i,concat:s}=t,o=Qs({typed:e,equalScalar:r}),u=Qa({typed:e}),l=x7({typed:e,equalScalar:r}),c=ba({typed:e,equalScalar:r}),f=qr({typed:e,DenseMatrix:i}),d=zn({typed:e,matrix:n,concat:s});return e(WM,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>a.atan2(h,m)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:o,Ss:c,sS:f}))}),qM="atanh",WMe=["typed","config","Complex"],qMe=ee(qM,WMe,t=>{var{typed:e,config:n,Complex:r}=t;return e(qM,{number:function(i){return i<=1&&i>=-1||n.predictable?u7(i):new r(i,0).atanh()},Complex:function(i){return i.atanh()},BigNumber:function(i){return i.atanh()}})}),mp=ee("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),HM="cos",HMe=["typed"],jMe=ee(HM,HMe,t=>{var{typed:e}=t,n=mp({typed:e});return e(HM,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),jM="cosh",GMe=["typed"],XMe=ee(jM,GMe,t=>{var{typed:e}=t;return e(jM,{number:X$e,"Complex | BigNumber":n=>n.cosh()})}),GM="cot",KMe=["typed","BigNumber"],YMe=ee(GM,KMe,t=>{var{typed:e,BigNumber:n}=t,r=mp({typed:e});return e(GM,{number:l7,Complex:a=>a.cot(),BigNumber:a=>new n(1).div(a.tan())},r)}),XM="coth",ZMe=["typed","BigNumber"],QMe=ee(XM,ZMe,t=>{var{typed:e,BigNumber:n}=t;return e(XM,{number:c7,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),KM="csc",JMe=["typed","BigNumber"],e4e=ee(KM,JMe,t=>{var{typed:e,BigNumber:n}=t,r=mp({typed:e});return e(KM,{number:f7,Complex:a=>a.csc(),BigNumber:a=>new n(1).div(a.sin())},r)}),YM="csch",t4e=["typed","BigNumber"],n4e=ee(YM,t4e,t=>{var{typed:e,BigNumber:n}=t;return e(YM,{number:d7,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),ZM="sec",r4e=["typed","BigNumber"],a4e=ee(ZM,r4e,t=>{var{typed:e,BigNumber:n}=t,r=mp({typed:e});return e(ZM,{number:p7,Complex:a=>a.sec(),BigNumber:a=>new n(1).div(a.cos())},r)}),QM="sech",i4e=["typed","BigNumber"],s4e=ee(QM,i4e,t=>{var{typed:e,BigNumber:n}=t;return e(QM,{number:h7,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),JM="sin",o4e=["typed"],u4e=ee(JM,o4e,t=>{var{typed:e}=t,n=mp({typed:e});return e(JM,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),e4="sinh",l4e=["typed"],c4e=ee(e4,l4e,t=>{var{typed:e}=t;return e(e4,{number:m7,"Complex | BigNumber":n=>n.sinh()})}),t4="tan",f4e=["typed"],d4e=ee(t4,f4e,t=>{var{typed:e}=t,n=mp({typed:e});return e(t4,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),p4e="tanh",h4e=["typed"],m4e=ee(p4e,h4e,t=>{var{typed:e}=t;return e("tanh",{number:Y$e,"Complex | BigNumber":n=>n.tanh()})}),n4="setCartesian",g4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],v4e=ee(n4,g4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(n4,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new i(0))!==0&&r(n(l),new i(0))!==0){var f=vn(Array.isArray(u)?u:u.toArray()).sort(a),d=vn(Array.isArray(l)?l:l.toArray()).sort(a);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(u)&&Array.isArray(l)?c:new s(c)}})}),r4="setDifference",y4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],b4e=ee(r4,y4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(r4,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new i(0))===0)c=[];else{if(r(n(l),new i(0))===0)return vn(u.toArray());var f=Bd(vn(Array.isArray(u)?u:u.toArray()).sort(a)),d=Bd(vn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(a(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(u)&&Array.isArray(l)?p1(c):new s(p1(c))}})}),a4="setDistinct",w4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],x4e=ee(a4,w4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(a4,{"Array | Matrix":function(u){var l;if(r(n(u),new i(0))===0)l=[];else{var c=vn(Array.isArray(u)?u:u.toArray()).sort(a);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)a(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new s(l)}})}),i4="setIntersect",N4e=["typed","size","subset","compareNatural","Index","DenseMatrix"],S4e=ee(i4,N4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i,DenseMatrix:s}=t;return e(i4,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new i(0))===0||r(n(l),new i(0))===0)c=[];else{var f=Bd(vn(Array.isArray(u)?u:u.toArray()).sort(a)),d=Bd(vn(Array.isArray(l)?l:l.toArray()).sort(a));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(a(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?p1(c):new s(p1(c))}})}),s4="setIsSubset",C4e=["typed","size","subset","compareNatural","Index"],E4e=ee(s4,C4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(s4,{"Array | Matrix, Array | Matrix":function(o,u){if(r(n(o),new i(0))===0)return!0;if(r(n(u),new i(0))===0)return!1;for(var l=Bd(vn(Array.isArray(o)?o:o.toArray()).sort(a)),c=Bd(vn(Array.isArray(u)?u:u.toArray()).sort(a)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(a(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),o4="setMultiplicity",T4e=["typed","size","subset","compareNatural","Index"],D4e=ee(o4,T4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(o4,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,u){if(r(n(u),new i(0))===0)return 0;for(var l=vn(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)a(l[f],o)===0&&c++;return c}})}),u4="setPowerset",$4e=["typed","size","subset","compareNatural","Index"],A4e=ee(u4,$4e,t=>{var{typed:e,size:n,subset:r,compareNatural:a,Index:i}=t;return e(u4,{"Array | Matrix":function(l){if(r(n(l),new i(0))===0)return[];for(var c=vn(Array.isArray(l)?l:l.toArray()).sort(a),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return o(f)}});function s(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function o(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),l4="setSize",I4e=["typed","compareNatural"],k4e=ee(l4,I4e,t=>{var{typed:e,compareNatural:n}=t;return e(l4,{"Array | Matrix":function(a){return Array.isArray(a)?vn(a).length:vn(a.toArray()).length},"Array | Matrix, boolean":function(a,i){if(i===!1||a.length===0)return Array.isArray(a)?vn(a).length:vn(a.toArray()).length;for(var s=vn(Array.isArray(a)?a:a.toArray()).sort(n),o=1,u=1;u<s.length;u++)n(s[u],s[u-1])!==0&&o++;return o}})}),c4="setSymDifference",_4e=["typed","size","concat","subset","setDifference","Index"],O4e=ee(c4,_4e,t=>{var{typed:e,size:n,concat:r,subset:a,setDifference:i,Index:s}=t;return e(c4,{"Array | Matrix, Array | Matrix":function(u,l){if(a(n(u),new s(0))===0)return vn(l);if(a(n(l),new s(0))===0)return vn(u);var c=vn(u),f=vn(l);return r(i(c,f),i(f,c))}})}),f4="setUnion",F4e=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],R4e=ee(f4,F4e,t=>{var{typed:e,size:n,concat:r,subset:a,setIntersect:i,setSymDifference:s,Index:o}=t;return e(f4,{"Array | Matrix, Array | Matrix":function(l,c){if(a(n(l),new o(0))===0)return vn(c);if(a(n(c),new o(0))===0)return vn(l);var f=vn(l),d=vn(c);return r(s(f,d),i(f,d))}})}),d4="add",M4e=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],P4e=ee(d4,M4e,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:a,DenseMatrix:i,SparseMatrix:s,concat:o}=t,u=Ol({typed:e}),l=j$({typed:e,equalScalar:a}),c=ef({typed:e,DenseMatrix:i}),f=zn({typed:e,matrix:n,concat:o});return e(d4,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),b=0;b<v.length;b++)y=d(y,v[b]);return y})},f({elop:r,DS:u,SS:l,Ss:c}))}),p4="hypot",B4e=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],L4e=ee(p4,B4e,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:a,multiplyScalar:i,sqrt:s,smaller:o,isPositive:u}=t;return e(p4,{"... number | BigNumber":l,Array:l,Matrix:c=>l(vn(c.toArray()))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(eu(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=n(c[h]);o(d,m)?(f=i(f,i(a(d,m),a(d,m))),f=r(f,1),d=m):f=r(f,u(m)?i(a(m,d),a(m,d)):m)}return i(d,s(f))}}),h4="norm",z4e=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],U4e=ee(h4,z4e,t=>{var{typed:e,abs:n,add:r,pow:a,conj:i,sqrt:s,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(h4,{number:Math.abs,Complex:function(k){return k.abs()},BigNumber:function(k){return k.abs()},boolean:function(k){return Math.abs(k)},Array:function(k){return E(f(k),2)},Matrix:function(k){return E(k,2)},"Array, number | BigNumber | string":function(k,D){return E(f(k),D)},"Matrix, number | BigNumber | string":function(k,D){return E(k,D)}});function m(A){var k=0;return A.forEach(function(D){var I=n(D);l(I,k)&&(k=I)},!0),k}function v(A){var k;return A.forEach(function(D){var I=n(D);(!k||c(I,k))&&(k=I)},!0),k||0}function y(A,k){if(k===Number.POSITIVE_INFINITY||k==="inf")return m(A);if(k===Number.NEGATIVE_INFINITY||k==="-inf")return v(A);if(k==="fro")return E(A,2);if(typeof k=="number"&&!isNaN(k)){if(!u(k,0)){var D=0;return A.forEach(function(I){D=r(a(n(I),k),D)},!0),a(D,1/k)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function b(A){var k=0;return A.forEach(function(D,I){k=r(k,o(D,i(D)))}),n(s(k))}function x(A){var k=[],D=0;return A.forEach(function(I,$){var O=$[1],B=r(k[O]||0,n(I));l(B,D)&&(D=B),k[O]=B},!0),D}function w(A){var k=A.size();if(k[0]!==k[1])throw new RangeError("Invalid matrix dimensions");var D=d(A),I=o(D,A),$=h(I).values.toArray(),O=$[$.length-1];return n(s(O))}function S(A){var k=[],D=0;return A.forEach(function(I,$){var O=$[0],B=r(k[O]||0,n(I));l(B,D)&&(D=B),k[O]=B},!0),D}function C(A,k){if(k===1)return x(A);if(k===Number.POSITIVE_INFINITY||k==="inf")return S(A);if(k==="fro")return b(A);if(k===2)return w(A);throw new Error("Unsupported parameter value "+k)}function E(A,k){var D=A.size();if(D.length===1)return y(A,k);if(D.length===2){if(D[0]&&D[1])return C(A,k);throw new RangeError("Invalid matrix dimensions")}}}),m4="dot",V4e=["typed","addScalar","multiplyScalar","conj","size"],W4e=ee(m4,V4e,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:a,size:i}=t;return e(m4,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":u});function s(c,f){var d=l(c),h=l(f),m,v;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==v)throw new RangeError("Vectors must have equal length ("+m+" != "+v+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function o(c,f){var d=s(c,f),h=$t(c)?c._data:c,m=$t(c)?c._datatype||c.getDataType():void 0,v=$t(f)?f._data:f,y=$t(f)?f._datatype||f.getDataType():void 0,b=l(c).length===2,x=l(f).length===2,w=n,S=r;if(m&&y&&m===y&&typeof m=="string"&&m!=="mixed"){var C=m;w=e.find(n,[C,C]),S=e.find(r,[C,C])}if(!b&&!x){for(var E=S(a(h[0]),v[0]),A=1;A<d;A++)E=w(E,S(a(h[A]),v[A]));return E}if(!b&&x){for(var k=S(a(h[0]),v[0][0]),D=1;D<d;D++)k=w(k,S(a(h[D]),v[D][0]));return k}if(b&&!x){for(var I=S(a(h[0][0]),v[0]),$=1;$<d;$++)I=w(I,S(a(h[$][0]),v[$]));return I}if(b&&x){for(var O=S(a(h[0][0]),v[0][0]),B=1;B<d;B++)O=w(O,S(a(h[B][0]),v[B][0]));return O}}function u(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,v=f._values,y=0,b=n,x=r,w=0,S=0;w<d.length&&S<m.length;){var C=d[w],E=m[S];if(C<E){w++;continue}if(C>E){S++;continue}C===E&&(y=b(y,x(h[w],v[S])),w++,S++)}return y}function l(c){return $t(c)?c.size():i(c)}}),q4e="trace",H4e=["typed","matrix","add"],j4e=ee(q4e,H4e,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(o){return a(n(o))},SparseMatrix:i,DenseMatrix:a,any:zt});function a(s){var o=s._size,u=s._data;switch(o.length){case 1:if(o[0]===1)return zt(u[0]);throw new RangeError("Matrix must be square (size: "+Yt(o)+")");case 2:{var l=o[0],c=o[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+Yt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Yt(o)+")")}}function i(s){var o=s._values,u=s._index,l=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var h=0;if(o.length>0)for(var m=0;m<d;m++)for(var v=l[m],y=l[m+1],b=v;b<y;b++){var x=u[b];if(x===m){h=r(h,o[b]);break}if(x>m)break}return h}throw new RangeError("Matrix must be square (size: "+Yt(c)+")")}}),g4="index",G4e=["typed","Index"],X4e=ee(g4,G4e,t=>{var{typed:e,Index:n}=t;return e(g4,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var i=a.map(function(o){return jt(o)?o.toNumber():$n(o)||$t(o)?o.map(function(u){return jt(u)?u.toNumber():u}):o}),s=new n;return n.apply(s,i),s}})}),U7=new Set(["end"]),K4e="Node",Y4e=["mathWithTransform"],Z4e=ee(K4e,Y4e,t=>{var{mathWithTransform:e}=t;function n(a){for(var i of[...U7])if(a.has(i))throw new Error('Scope contains an illegal symbol, "'+i+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(i){return this.compile().evaluate(i)}compile(){var i=this._compile(e,{}),s={},o=null;function u(l){var c=dd(l);return n(c),i(c,s,o)}return{evaluate:u}}_compile(i,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(i){throw new Error("Cannot run forEach on a Node interface")}map(i){throw new Error("Cannot run map on a Node interface")}_ifNode(i){if(!An(i))throw new TypeError("Callback function must return a Node");return i}traverse(i){i(this,null,null);function s(o,u){o.forEach(function(l,c,f){u(l,c,f),s(l,u)})}s(this,i)}transform(i){function s(o,u,l){var c=i(o,u,l);return c!==o?c:o.map(s)}return s(this,null,null)}filter(i){var s=[];return this.traverse(function(o,u,l){i(o,u,l)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(i){return i.cloneDeep()})}equals(i){return i?this.type===i.type&&cu(this,i):!1}toString(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toString(i)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toHTML(i)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(i){var s=this._getCustomString(i);return typeof s<"u"?s:this._toTex(i)}_toTex(i){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(i){if(i&&typeof i=="object")switch(typeof i.handler){case"object":case"undefined":return;case"function":return i.handler(this,i);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Ja(t){return t&&t.isIndexError?new Ks(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function V7(t){var{subset:e}=t;return function(r,a){try{if(Array.isArray(r))return e(r,a);if(r&&typeof r.subset=="function")return r.subset(a);if(typeof r=="string")return e(r,a);if(typeof r=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return ja(r,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(i){throw Ja(i)}}}var By="AccessorNode",Q4e=["subset","Node"],J4e=ee(By,Q4e,t=>{var{subset:e,Node:n}=t,r=V7({subset:e});function a(s){return!(Lc(s)||as(s)||cn(s)||ml(s)||Rw(s)||lu(s)||ea(s))}class i extends n{constructor(o,u){if(super(),!An(o))throw new TypeError('Node expected for parameter "object"');if(!cp(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return By}get isAccessorNode(){return!0}_compile(o,u){var l=this.object._compile(o,u),c=this.index._compile(o,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,v){return ja(l(h,m,v),f)}}else return function(h,m,v){var y=l(h,m,v),b=c(h,m,y);return r(y,b)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new i(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new i(this.object,this.index)}_toString(o){var u=this.object.toString(o);return a(this.object)&&(u="("+u+")"),u+this.index.toString(o)}_toHTML(o){var u=this.object.toHTML(o);return a(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)}_toTex(o){var u=this.object.toTex(o);return a(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)}toJSON(){return{mathjs:By,object:this.object,index:this.index}}static fromJSON(o){return new i(o.object,o.index)}}return Ur(i,"name",By),i},{isClass:!0,isNode:!0}),Ly="ArrayNode",ePe=["Node"],tPe=ee(Ly,ePe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(An))throw new TypeError("Array containing Nodes expected")}get type(){return Ly}get isArrayNode(){return!0}_compile(a,i){var s=nl(this.items,function(l){return l._compile(a,i)}),o=a.config.matrix!=="Array";if(o){var u=a.matrix;return function(c,f,d){return u(nl(s,function(h){return h(c,f,d)}))}}else return function(c,f,d){return nl(s,function(h){return h(c,f,d)})}}forEach(a){for(var i=0;i<this.items.length;i++){var s=this.items[i];a(s,"items["+i+"]",this)}}map(a){for(var i=[],s=0;s<this.items.length;s++)i[s]=this._ifNode(a(this.items[s],"items["+s+"]",this));return new n(i)}clone(){return new n(this.items.slice(0))}_toString(a){var i=this.items.map(function(s){return s.toString(a)});return"["+i.join(", ")+"]"}toJSON(){return{mathjs:Ly,items:this.items}}static fromJSON(a){return new n(a.items)}_toHTML(a){var i=this.items.map(function(s){return s.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function i(s,o){var u=s.some(as)&&!s.every(as),l=o||u,c=l?"&":"\\\\",f=s.map(function(d){return d.items?i(d.items,!o):d.toTex(a)}).join(c);return u||!l||l&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return i(this.items,!1)}}return Ur(n,"name",Ly),n},{isClass:!0,isNode:!0});function nPe(t){var{subset:e,matrix:n}=t;return function(a,i,s){try{if(Array.isArray(a)){var o=n(a).subset(i,s).valueOf();return o.forEach((u,l)=>{a[l]=u}),a}else{if(a&&typeof a.subset=="function")return a.subset(i,s);if(typeof a=="string")return e(a,i,s);if(typeof a=="object"){if(!i.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Fd(a,i.getObjectProperty(),s),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw Ja(u)}}}var Bs=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function zy(t,e){if(!e||e!=="auto")return t;for(var n=t;lu(n);)n=n.content;return n}function _n(t,e,n,r){var a=t;e!=="keep"&&(a=t.getContent());for(var i=a.getIdentifier(),s=null,o=0;o<Bs.length;o++)if(i in Bs[o]){s=o;break}if(i==="OperatorNode:multiply"&&a.implicit&&n!=="show"){var u=zy(a.args[0],e);!(cn(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&zC(zy(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&zC(zy(u.args[0],e))&&cn(zy(u.args[1])))&&(s+=1)}return s}function hh(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),a=_n(n,e);if(a===null)return null;var i=Bs[a][r];if(pt(i,"associativity")){if(i.associativity==="left")return"left";if(i.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+i.associativity+"'.")}return null}function HN(t,e,n){var r=n!=="keep"?t.getContent():t,a=n!=="keep"?t.getContent():e,i=r.getIdentifier(),s=a.getIdentifier(),o=_n(r,n);if(o===null)return null;var u=Bs[o][i];if(pt(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===s)return!0;return!1}return null}function rPe(t){var e="OperatorNode:"+t;for(var n of Bs)if(e in n)return n[e].op;return null}var Uy="AssignmentNode",aPe=["subset","?matrix","Node"],iPe=ee(Uy,aPe,t=>{var{subset:e,matrix:n,Node:r}=t,a=V7({subset:e}),i=nPe({subset:e,matrix:n});function s(u,l,c){l||(l="keep");var f=_n(u,l,c),d=_n(u.value,l,c);return l==="all"||d!==null&&d<=f}class o extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!ea(l)&&!Lc(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ea(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!cp(this.index))throw new TypeError('IndexNode expected as "index"');if(!An(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Uy}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(S,C,E){var A=f(S,C,E),k=h(S,C,E);return Fd(A,v,k),k}}else{if(ea(this.object))return function(S,C,E){var A=f(S,C,E),k=h(S,C,E),D=d(S,C,A);return S.set(m,i(A,D,k)),k};var y=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var b=this.object.index.getObjectProperty();return function(S,C,E){var A=y(S,C,E),k=ja(A,b),D=d(S,C,k),I=h(S,C,E);return Fd(A,b,i(k,D,I)),I}}else{var x=this.object.index._compile(l,c);return function(S,C,E){var A=y(S,C,E),k=x(S,C,A),D=a(A,k),I=d(S,C,D),$=h(S,C,E);return i(A,k,i(D,I,$)),$}}}else{if(!ea(this.object))throw new TypeError("SymbolNode expected as object");return function(S,C,E){var A=h(S,C,E);return S.set(m,A),A}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new o(c,f,d)}clone(){return new o(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:Uy,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new o(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return Ur(o,"name",Uy),o},{isClass:!0,isNode:!0}),Vy="BlockNode",sPe=["ResultSet","Node"],oPe=ee(Vy,sPe,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(i){if(super(),!Array.isArray(i))throw new Error("Array expected");this.blocks=i.map(function(s){var o=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!An(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}get type(){return Vy}get isBlockNode(){return!0}_compile(i,s){var o=nl(this.blocks,function(u){return{evaluate:u.node._compile(i,s),visible:u.visible}});return function(l,c,f){var d=[];return SW(o,function(m){var v=m.evaluate(l,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(i){for(var s=0;s<this.blocks.length;s++)i(this.blocks[s].node,"blocks["+s+"].node",this)}map(i){for(var s=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(i(u.node,"blocks["+o+"].node",this));s[o]={node:l,visible:u.visible}}return new r(s)}clone(){var i=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new r(i)}_toString(i){return this.blocks.map(function(s){return s.node.toString(i)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:Vy,blocks:this.blocks}}static fromJSON(i){return new r(i.blocks)}_toHTML(i){return this.blocks.map(function(s){return s.node.toHTML(i)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(i){return this.blocks.map(function(s){return s.node.toTex(i)+(s.visible?"":";")}).join(`\\;\\;
`)}}return Ur(r,"name",Vy),r},{isClass:!0,isNode:!0}),Wy="ConditionalNode",uPe=["Node"],lPe=ee(Wy,uPe,t=>{var{Node:e}=t;function n(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(jt(a))return!a.isZero();if(eu(a))return!!(a.re||a.im);if(is(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Ln(a)+'"')}class r extends e{constructor(i,s,o){if(super(),!An(i))throw new TypeError("Parameter condition must be a Node");if(!An(s))throw new TypeError("Parameter trueExpr must be a Node");if(!An(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=i,this.trueExpr=s,this.falseExpr=o}get type(){return Wy}get isConditionalNode(){return!0}_compile(i,s){var o=this.condition._compile(i,s),u=this.trueExpr._compile(i,s),l=this.falseExpr._compile(i,s);return function(f,d,h){return n(o(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(i){i(this.condition,"condition",this),i(this.trueExpr,"trueExpr",this),i(this.falseExpr,"falseExpr",this)}map(i){return new r(this._ifNode(i(this.condition,"condition",this)),this._ifNode(i(this.trueExpr,"trueExpr",this)),this._ifNode(i(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=_n(this,s,i&&i.implicit),u=this.condition.toString(i),l=_n(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var c=this.trueExpr.toString(i),f=_n(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var d=this.falseExpr.toString(i),h=_n(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:Wy,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(i){return new r(i.condition,i.trueExpr,i.falseExpr)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=_n(this,s,i&&i.implicit),u=this.condition.toHTML(i),l=_n(this.condition,s,i&&i.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(i),f=_n(this.trueExpr,s,i&&i.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(i),h=_n(this.falseExpr,s,i&&i.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(i){return"\\begin{cases} {"+this.trueExpr.toTex(i)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(i)+"}\\\\{"+this.falseExpr.toTex(i)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Ur(r,"name",Wy),r},{isClass:!0,isNode:!0}),jN,v4;function cPe(){if(v4)return jN;v4=1;var t=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},r=function(i,s){return t({},i,s)};return jN=function(a){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.preserveFormatting,o=s===void 0?!1:s,u=i.escapeMapFn,l=u===void 0?r:u,c=String(a),f="",d=l(t({},e),o?t({},n):{}),h=Object.keys(d),m=function(){var y=!1;h.forEach(function(b,x){y||c.length>=b.length&&c.slice(0,b.length)===b&&(f+=d[h[x]],c=c.slice(b.length,c.length),y=!0)}),y||(f+=c.slice(0,1),c=c.slice(1,c.length))};c;)m();return f},jN}var fPe=cPe();const dPe=Vc(fPe);var rE={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},gn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},y4={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(gn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(gn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(gn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(gn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(gn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(gn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(gn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(gn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(gn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(gn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(gn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(gn.bitAnd,"${args[1]}\\right)")},bitNot:{1:gn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(gn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(gn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(gn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(gn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(gn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(gn.and,"${args[1]}\\right)")},not:{1:gn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(gn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(gn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(gn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(gn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(gn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(gn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(gn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(gn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(gn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(gn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(gn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(gn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(gn.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(rE.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},pPe="\\mathrm{${name}}\\left(${args}\\right)",b4={deg:"^\\circ"};function aE(t){return dPe(t,{preserveFormatting:!0})}function W7(t,e){return e=typeof e>"u"?!1:e,e?pt(b4,t)?b4[t]:"\\mathrm{"+aE(t)+"}":pt(rE,t)?rE[t]:aE(t)}var qy="ConstantNode",hPe=["Node"],mPe=ee(qy,hPe,t=>{var{Node:e}=t;class n extends e{constructor(a){super(),this.value=a}get type(){return qy}get isConstantNode(){return!0}_compile(a,i){var s=this.value;return function(){return s}}forEach(a){}map(a){return this.clone()}clone(){return new n(this.value)}_toString(a){return Yt(this.value,a)}_toHTML(a){var i=this._toString(a);switch(Ln(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+i+"</span>";case"string":return'<span class="math-string">'+i+"</span>";case"boolean":return'<span class="math-boolean">'+i+"</span>";case"null":return'<span class="math-null-symbol">'+i+"</span>";case"undefined":return'<span class="math-undefined">'+i+"</span>";default:return'<span class="math-symbol">'+i+"</span>"}}toJSON(){return{mathjs:qy,value:this.value}}static fromJSON(a){return new n(a.value)}_toTex(a){var i=this._toString(a),s=Ln(this.value);switch(s){case"string":return"\\mathtt{"+aE(i)+"}";case"number":case"BigNumber":{var o=s==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!o)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=i.toLowerCase().indexOf("e");return u!==-1?i.substring(0,u)+"\\cdot10^{"+i.substring(u+1)+"}":i}case"bigint":return i.toString();case"Fraction":return this.value.toLatex();default:return i}}}return Ur(n,"name",qy),n},{isClass:!0,isNode:!0}),Hy="FunctionAssignmentNode",gPe=["typed","Node"],vPe=ee(Hy,gPe,t=>{var{typed:e,Node:n}=t;function r(i,s,o){var u=_n(i,s,o),l=_n(i.expr,s,o);return s==="all"||l!==null&&l<=u}class a extends n{constructor(s,o,u){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!An(u))throw new TypeError('Node expected for parameter "expr"');if(U7.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var l=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=s,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return Hy}get isFunctionAssignmentNode(){return!0}_compile(s,o){var u=Object.create(o);SW(this.params,function(m){u[m]=!0});var l=this.expr._compile(s,u),c=this.name,f=this.params,d=bF(this.types,","),h=c+"("+bF(this.params,", ")+")";return function(v,y,b){var x={};x[d]=function(){for(var S=Object.create(y),C=0;C<f.length;C++)S[f[C]]=arguments[C];return l(v,S,b)};var w=e(c,x);return w.syntax=h,v.set(c,w),w}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new a(this.name,this.params.slice(0),o)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return r(this,o,s&&s.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var s=this.types;return{mathjs:Hy,name:this.name,params:this.params.map(function(o,u){return{name:o,type:s[u]}}),expr:this.expr}}static fromJSON(s){return new a(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+os(this.params[l])+"</span>");var c=this.expr.toHTML(s);return r(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+os(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return r(this,o,s&&s.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(W7).join(",")+"\\right)="+u}}return Ur(a,"name",Hy),a},{isClass:!0,isNode:!0}),jy="IndexNode",yPe=["Node","size"],bPe=ee(jy,yPe,t=>{var{Node:e,size:n}=t;class r extends e{constructor(i,s){if(super(),this.dimensions=i,this.dotNotation=s||!1,!Array.isArray(i)||!i.every(An))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return jy}get isIndexNode(){return!0}_compile(i,s){var o=nl(this.dimensions,function(l,c){var f=l.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var h=l._compile(i,d);return function(v,y,b){if(!$t(b)&&!$n(b)&&!Ia(b))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Ln(b));var x=n(b).valueOf(),w=Object.create(y);return w.end=x[c],h(v,w,b)}}else return l._compile(i,s)}),u=ja(i,"index");return function(c,f,d){var h=nl(o,function(m){return m(c,f,d)});return u(...h)}}forEach(i){for(var s=0;s<this.dimensions.length;s++)i(this.dimensions[s],"dimensions["+s+"]",this)}map(i){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(i(this.dimensions[o],"dimensions["+o+"]",this));return new r(s,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&cn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(i){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:jy,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(i){return new r(i.dimensions,i.dotNotation)}_toHTML(i){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+os(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){var s=this.dimensions.map(function(o){return o.toTex(i)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return Ur(r,"name",jy),r},{isClass:!0,isNode:!0}),Gy="ObjectNode",wPe=["Node"],xPe=ee(Gy,wPe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(i){return An(a[i])})))throw new TypeError("Object containing Nodes expected")}get type(){return Gy}get isObjectNode(){return!0}_compile(a,i){var s={};for(var o in this.properties)if(pt(this.properties,o)){var u=nd(o),l=JSON.parse(u),c=ja(this.properties,o);s[l]=c._compile(a,i)}return function(d,h,m){var v={};for(var y in s)pt(s,y)&&(v[y]=s[y](d,h,m));return v}}forEach(a){for(var i in this.properties)pt(this.properties,i)&&a(this.properties[i],"properties["+nd(i)+"]",this)}map(a){var i={};for(var s in this.properties)pt(this.properties,s)&&(i[s]=this._ifNode(a(this.properties[s],"properties["+nd(s)+"]",this)));return new n(i)}clone(){var a={};for(var i in this.properties)pt(this.properties,i)&&(a[i]=this.properties[i]);return new n(a)}_toString(a){var i=[];for(var s in this.properties)pt(this.properties,s)&&i.push(nd(s)+": "+this.properties[s].toString(a));return"{"+i.join(", ")+"}"}toJSON(){return{mathjs:Gy,properties:this.properties}}static fromJSON(a){return new n(a.properties)}_toHTML(a){var i=[];for(var s in this.properties)pt(this.properties,s)&&i.push('<span class="math-symbol math-property">'+os(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+i.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var i=[];for(var s in this.properties)pt(this.properties,s)&&i.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(a)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+i.join(`
`)+"\\end{array}\\right\\}";return o}}return Ur(n,"name",Gy),n},{isClass:!0,isNode:!0});function Ch(t,e){return new KV(t,new _w(e),new Set(Object.keys(e)))}var Xy="OperatorNode",NPe=["Node"],SPe=ee(Xy,NPe,t=>{var{Node:e}=t;function n(i,s){var o=i;if(s==="auto")for(;lu(o);)o=o.content;return cn(o)?!0:br(o)?n(o.args[0],s):!1}function r(i,s,o,u,l){var c=_n(i,s,o),f=hh(i,s);if(s==="all"||u.length>2&&i.getIdentifier()!=="OperatorNode:add"&&i.getIdentifier()!=="OperatorNode:multiply")return u.map(function(I){switch(I.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=_n(u[0],s,o,i);if(l&&h!==null){var m,v;if(s==="keep"?(m=u[0].getIdentifier(),v=i.getIdentifier()):(m=u[0].getContent().getIdentifier(),v=i.getContent().getIdentifier()),Bs[c][v].latexLeftParens===!1){d=[!1];break}if(Bs[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,b=_n(u[0],s,o,i),x=HN(i,u[0],s);b===null?y=!1:b===c&&f==="right"&&!x||b<c?y=!0:y=!1;var w,S=_n(u[1],s,o,i),C=HN(i,u[1],s);if(S===null?w=!1:S===c&&f==="left"&&!C||S<c?w=!0:w=!1,l){var E,A,k;s==="keep"?(E=i.getIdentifier(),A=i.args[0].getIdentifier(),k=i.args[1].getIdentifier()):(E=i.getContent().getIdentifier(),A=i.args[0].getContent().getIdentifier(),k=i.args[1].getContent().getIdentifier()),b!==null&&(Bs[c][E].latexLeftParens===!1&&(y=!1),Bs[b][A].latexParens===!1&&(y=!1)),S!==null&&(Bs[c][E].latexRightParens===!1&&(w=!1),Bs[S][k].latexParens===!1&&(w=!1))}d=[y,w]}break;default:(i.getIdentifier()==="OperatorNode:add"||i.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(I){var $=_n(I,s,o,i),O=HN(i,I,s),B=hh(I,s);return $===null?!1:c===$&&f===B&&!O?!0:$<c}));break}if(u.length>=2&&i.getIdentifier()==="OperatorNode:multiply"&&i.implicit&&s!=="all"&&o==="hide")for(var D=1;D<d.length;++D)n(u[D],s)&&!d[D-1]&&(s!=="keep"||!lu(u[D-1]))&&(d[D]=!0);return d}class a extends e{constructor(s,o,u,l,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(An))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=u||[]}get type(){return Xy}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!F$(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=ja(s,this.fn),l=nl(this.args,function(m){return m._compile(s,o)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(v,y,b){return u(c,s,Ch(v,y))}}else if(l.length===1){var f=l[0];return function(v,y,b){return u(f(v,y,b))}}else if(l.length===2){var d=l[0],h=l[1];return function(v,y,b){return u(d(v,y,b),h(v,y,b))}}else return function(v,y,b){return u.apply(null,nl(l,function(x){return x(v,y,b)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],u=0;u<this.args.length;u++)o[u]=this._ifNode(s(this.args[u],"args["+u+"]",this));return new a(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=hh(this,o),d=l[0].toString(s);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var m=l[0].toString(s),v=l[1].toString(s);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(b,x){return b=b.toString(s),c[x]&&(b="("+b+")"),b});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Xy,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new a(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=hh(this,o),d=l[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+os(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+os(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(s),m=l[1].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+os(this.op)+"</span>"+m}else{var v=l.map(function(y,b){return y=y.toHTML(s),c[b]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+os(this.op)+"</span>"):'<span class="math-function">'+os(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!0),f=gn[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=hh(this,o),h=l[0].toTex(s);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var m=l[0],v=m.toTex(s);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=l[1],b=y.toTex(s);c[1]&&(b="\\left(".concat(b,"\\right)"));var x;switch(o==="keep"?x=m.getIdentifier():x=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+b+"}";case"OperatorNode:pow":switch(v="{"+v+"}",b="{"+b+"}",x){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return v+"~"+b}return v+f+b}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var w=l.map(function(S,C){return S=S.toTex(s),c[C]&&(S="\\left(".concat(S,"\\right)")),S});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?w.join("~"):w.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(S){return S.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Ur(a,"name",Xy),a},{isClass:!0,isNode:!0}),Ky="ParenthesisNode",CPe=["Node"],EPe=ee(Ky,CPe,t=>{var{Node:e}=t;class n extends e{constructor(a){if(super(),!An(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return Ky}get isParenthesisNode(){return!0}_compile(a,i){return this.content._compile(a,i)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var i=a(this.content,"content",this);return new n(i)}clone(){return new n(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:Ky,content:this.content}}static fromJSON(a){return new n(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Ur(n,"name",Ky),n},{isClass:!0,isNode:!0}),Yy="RangeNode",TPe=["Node"],DPe=ee(Yy,TPe,t=>{var{Node:e}=t;function n(a,i,s){var o=_n(a,i,s),u={},l=_n(a.start,i,s);if(u.start=l!==null&&l<=o||i==="all",a.step){var c=_n(a.step,i,s);u.step=c!==null&&c<=o||i==="all"}var f=_n(a.end,i,s);return u.end=f!==null&&f<=o||i==="all",u}class r extends e{constructor(i,s,o){if(super(),!An(i))throw new TypeError("Node expected");if(!An(s))throw new TypeError("Node expected");if(o&&!An(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=i,this.end=s,this.step=o||null}get type(){return Yy}get isRangeNode(){return!0}needsEnd(){var i=this.filter(function(s){return ea(s)&&s.name==="end"});return i.length>0}_compile(i,s){var o=i.range,u=this.start._compile(i,s),l=this.end._compile(i,s);if(this.step){var c=this.step._compile(i,s);return function(d,h,m){return o(u(d,h,m),l(d,h,m),c(d,h,m))}}else return function(d,h,m){return o(u(d,h,m),l(d,h,m))}}forEach(i){i(this.start,"start",this),i(this.end,"end",this),this.step&&i(this.step,"step",this)}map(i){return new r(this._ifNode(i(this.start,"start",this)),this._ifNode(i(this.end,"end",this)),this.step&&this._ifNode(i(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u,l=this.start.toString(i);if(o.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(i);o.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(i);return o.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:Yy,start:this.start,end:this.end,step:this.step}}static fromJSON(i){return new r(i.start,i.end,i.step)}_toHTML(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u,l=this.start.toHTML(i);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(i);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(i);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(i){var s=i&&i.parenthesis?i.parenthesis:"keep",o=n(this,s,i&&i.implicit),u=this.start.toTex(i);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(i);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(i);return o.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return Ur(r,"name",Yy),r},{isClass:!0,isNode:!0}),Zy="RelationalNode",$Pe=["Node"],APe=ee(Zy,$Pe,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(i,s){if(super(),!Array.isArray(i))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(i.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=i,this.params=s}get type(){return Zy}get isRelationalNode(){return!0}_compile(i,s){var o=this,u=this.params.map(l=>l._compile(i,s));return function(c,f,d){for(var h,m=u[0](c,f,d),v=0;v<o.conditionals.length;v++){h=m,m=u[v+1](c,f,d);var y=ja(i,o.conditionals[v]);if(!y(h,m))return!1}return!0}}forEach(i){this.params.forEach((s,o)=>i(s,"params["+o+"]",this),this)}map(i){return new r(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(i(s,"params["+o+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=_n(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=_n(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?"("+f.toString(i)+")":f.toString(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:Zy,conditionals:this.conditionals,params:this.params}}static fromJSON(i){return new r(i.conditionals,i.params)}_toHTML(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=_n(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=_n(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+os(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(i){for(var s=i&&i.parenthesis?i.parenthesis:"keep",o=_n(this,s,i&&i.implicit),u=this.params.map(function(f,d){var h=_n(f,s,i&&i.implicit);return s==="all"||h!==null&&h<=o?"\\left("+f.toTex(i)+"\right)":f.toTex(i)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=gn[this.conditionals[c]]+u[c+1];return l}}return Ur(r,"name",Zy),r},{isClass:!0,isNode:!0}),IPe="SymbolNode",kPe=["math","?Unit","Node"],_Pe=ee(IPe,kPe,t=>{var{math:e,Unit:n,Node:r}=t;function a(s){return n?n.isValuelessUnit(s):!1}class i extends r{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return ja(d,l)};if(l in o)return function(f,d,h){return f.has(l)?f.get(l):ja(o,l)};var c=a(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):i.onUndefinedSymbol(l)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new i(this.name)}_toString(o){return this.name}_toHTML(o){var u=os(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new i(o.name)}_toTex(o){var u=!1;typeof e[this.name]>"u"&&a(this.name)&&(u=!0);var l=W7(this.name,u);return l[0]==="\\"?l:" "+l}}return i},{isClass:!0,isNode:!0}),Qy="FunctionNode",OPe=["math","Node","SymbolNode"],FPe=ee(Qy,OPe,t=>{var e,{math:n,Node:r,SymbolNode:a}=t,i=u=>Yt(u,{truncate:78});function s(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(u))!==null;)if(f+=u.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=l[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(An(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,b){if(An(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+b+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(An(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=u.slice(h),f}class o extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new a(l)),!An(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(An))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return Qy}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(k=>k._compile(l,c));if(ea(this.fn)){var d=this.fn.name;if(c[d]){var b=this.args;return function(D,I,$){var O=ja(I,d);if(typeof O!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(i(O)));if(O.rawArgs)return O(b,l,Ch(D,I));var B=f.map(z=>z(D,I,$));return O.apply(O,B)}}else{var h=d in l?ja(l,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,v=k=>{var D;if(k.has(d))D=k.get(d);else if(d in l)D=ja(l,d);else return o.onUndefinedFunction(d);if(typeof D=="function")return D;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(i(D)))};if(m){var y=this.args;return function(D,I,$){var O=v(D);if(O.rawArgs===!0)return O(y,l,Ch(D,I));var B=f.map(z=>z(D,I,$));return O(...B)}}else switch(f.length){case 0:return function(D,I,$){var O=v(D);return O()};case 1:return function(D,I,$){var O=v(D),B=f[0];return O(B(D,I,$))};case 2:return function(D,I,$){var O=v(D),B=f[0],z=f[1];return O(B(D,I,$),z(D,I,$))};default:return function(D,I,$){var O=v(D),B=f.map(z=>z(D,I,$));return O(...B)}}}}else if(Lc(this.fn)&&cp(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(l,c),w=this.fn.index.getObjectProperty(),S=this.args;return function(D,I,$){var O=x(D,I,$),B=c$e(O,w);if(B!=null&&B.rawArgs)return B(S,l,Ch(D,I));var z=f.map(L=>L(D,I,$));return B.apply(O,z)}}else{var C=this.fn.toString(),E=this.fn._compile(l,c),A=this.args;return function(D,I,$){var O=E(D,I,$);if(typeof O!="function")throw new TypeError("Expression '".concat(C,"' did not evaluate to a function; value is:")+`
  `.concat(i(O)));if(O.rawArgs)return O(A,l,Ch(D,I));var B=f.map(z=>z(D,I,$));return O.apply(O,B)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&pt(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=Fg(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:Qy,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+os(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&pt(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;y4[this.name]&&(f=y4[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=s(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=s(f[c.length],this,l);break}}return typeof d<"u"?d:s(pPe,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=o,Ur(o,"name",Qy),Ur(o,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Ur(o,"fromJSON",function(u){return new e(u.fn,u.args)}),o},{isClass:!0,isNode:!0}),w4="parse",RPe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],MPe=ee(w4,RPe,t=>{var{typed:e,numeric:n,config:r,AccessorNode:a,ArrayNode:i,AssignmentNode:s,BlockNode:o,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:y,RelationalNode:b,SymbolNode:x}=t,w=e(w4,{string:function(fe){return q(fe,{})},"Array | Matrix":function(fe){return S(fe,{})},"string, Object":function(fe,ke){var We=ke.nodes!==void 0?ke.nodes:{};return q(fe,We)},"Array | Matrix, Object":S});function S(V){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=fe.nodes!==void 0?fe.nodes:{};return Vt(V,function(We){if(typeof We!="string")throw new TypeError("String expected");return q(We,ke)})}var C={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},A={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},k={true:!0,false:!1,null:null,undefined:void 0},D=["NaN","Infinity"],I={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function $(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:C.NULL,nestingLevel:0,conditionalLevel:null}}function O(V,fe){return V.expression.substr(V.index,fe)}function B(V){return O(V,1)}function z(V){V.index++}function L(V){return V.expression.charAt(V.index-1)}function F(V){return V.expression.charAt(V.index+1)}function R(V){for(V.tokenType=C.NULL,V.token="",V.comment="";;){if(B(V)==="#")for(;B(V)!==`
`&&B(V)!=="";)V.comment+=B(V),z(V);if(w.isWhitespace(B(V),V.nestingLevel))z(V);else break}if(B(V)===""){V.tokenType=C.DELIMITER;return}if(B(V)===`
`&&!V.nestingLevel){V.tokenType=C.DELIMITER,V.token=B(V),z(V);return}var fe=B(V),ke=O(V,2),We=O(V,3);if(We.length===3&&E[We]){V.tokenType=C.DELIMITER,V.token=We,z(V),z(V),z(V);return}if(ke.length===2&&E[ke]){V.tokenType=C.DELIMITER,V.token=ke,z(V),z(V);return}if(E[fe]){V.tokenType=C.DELIMITER,V.token=fe,z(V);return}if(w.isDigitDot(fe)){V.tokenType=C.NUMBER;var Dt=O(V,2);if(Dt==="0b"||Dt==="0o"||Dt==="0x"){for(V.token+=B(V),z(V),V.token+=B(V),z(V);w.isHexDigit(B(V));)V.token+=B(V),z(V);if(B(V)===".")for(V.token+=".",z(V);w.isHexDigit(B(V));)V.token+=B(V),z(V);else if(B(V)==="i")for(V.token+="i",z(V);w.isDigit(B(V));)V.token+=B(V),z(V);return}if(B(V)==="."){if(V.token+=B(V),z(V),!w.isDigit(B(V))){V.tokenType=C.DELIMITER;return}}else{for(;w.isDigit(B(V));)V.token+=B(V),z(V);w.isDecimalMark(B(V),F(V))&&(V.token+=B(V),z(V))}for(;w.isDigit(B(V));)V.token+=B(V),z(V);if(B(V)==="E"||B(V)==="e"){if(w.isDigit(F(V))||F(V)==="-"||F(V)==="+"){if(V.token+=B(V),z(V),(B(V)==="+"||B(V)==="-")&&(V.token+=B(V),z(V)),!w.isDigit(B(V)))throw St(V,'Digit expected, got "'+B(V)+'"');for(;w.isDigit(B(V));)V.token+=B(V),z(V);if(w.isDecimalMark(B(V),F(V)))throw St(V,'Digit expected, got "'+B(V)+'"')}else if(F(V)===".")throw z(V),St(V,'Digit expected, got "'+B(V)+'"')}return}if(w.isAlpha(B(V),L(V),F(V))){for(;w.isAlpha(B(V),L(V),F(V))||w.isDigit(B(V));)V.token+=B(V),z(V);pt(A,V.token)?V.tokenType=C.DELIMITER:V.tokenType=C.SYMBOL;return}for(V.tokenType=C.UNKNOWN;B(V)!=="";)V.token+=B(V),z(V);throw St(V,'Syntax error in part "'+V.token+'"')}function W(V){do R(V);while(V.token===`
`)}function M(V){V.nestingLevel++}function G(V){V.nestingLevel--}w.isAlpha=function(fe,ke,We){return w.isValidLatinOrGreek(fe)||w.isValidMathSymbol(fe,We)||w.isValidMathSymbol(ke,fe)},w.isValidLatinOrGreek=function(fe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(fe)},w.isValidMathSymbol=function(fe,ke){return/^[\uD835]$/.test(fe)&&/^[\uDC00-\uDFFF]$/.test(ke)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(ke)},w.isWhitespace=function(fe,ke){return fe===" "||fe==="	"||fe===`
`&&ke>0},w.isDecimalMark=function(fe,ke){return fe==="."&&ke!=="/"&&ke!=="*"&&ke!=="^"},w.isDigitDot=function(fe){return fe>="0"&&fe<="9"||fe==="."},w.isDigit=function(fe){return fe>="0"&&fe<="9"},w.isHexDigit=function(fe){return fe>="0"&&fe<="9"||fe>="a"&&fe<="f"||fe>="A"&&fe<="F"};function q(V,fe){var ke=$();Br(ke,{expression:V,extraNodes:fe}),R(ke);var We=j(ke);if(ke.token!=="")throw ke.tokenType===C.DELIMITER?Cn(ke,"Unexpected operator "+ke.token):St(ke,'Unexpected part "'+ke.token+'"');return We}function j(V){var fe,ke=[],We;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(fe=H(V),V.comment&&(fe.comment=V.comment));V.token===`
`||V.token===";";)ke.length===0&&fe&&(We=V.token!==";",ke.push({node:fe,visible:We})),R(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(fe=H(V),V.comment&&(fe.comment=V.comment),We=V.token!==";",ke.push({node:fe,visible:We}));return ke.length>0?new o(ke):(fe||(fe=new l(void 0),V.comment&&(fe.comment=V.comment)),fe)}function H(V){var fe,ke,We,Dt,At=ne(V);if(V.token==="="){if(ea(At))return fe=At.name,W(V),We=H(V),new s(new x(fe),We);if(Lc(At))return W(V),We=H(V),new s(At.object,At.index,We);if(ml(At)&&ea(At.fn)&&(Dt=!0,ke=[],fe=At.name,At.args.forEach(function(lr,pf){ea(lr)?ke[pf]=lr.name:Dt=!1}),Dt))return W(V),We=H(V),new c(fe,ke,We);throw St(V,"Invalid left hand side of assignment operator =")}return At}function ne(V){for(var fe=ue(V);V.token==="?";){var ke=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,W(V);var We=fe,Dt=H(V);if(V.token!==":")throw St(V,"False part of conditional expression expected");V.conditionalLevel=null,W(V);var At=H(V);fe=new u(We,Dt,At),V.conditionalLevel=ke}return fe}function ue(V){for(var fe=te(V);V.token==="or";)W(V),fe=new m("or","or",[fe,te(V)]);return fe}function te(V){for(var fe=se(V);V.token==="xor";)W(V),fe=new m("xor","xor",[fe,se(V)]);return fe}function se(V){for(var fe=J(V);V.token==="and";)W(V),fe=new m("and","and",[fe,J(V)]);return fe}function J(V){for(var fe=K(V);V.token==="|";)W(V),fe=new m("|","bitOr",[fe,K(V)]);return fe}function K(V){for(var fe=ae(V);V.token==="^|";)W(V),fe=new m("^|","bitXor",[fe,ae(V)]);return fe}function ae(V){for(var fe=pe(V);V.token==="&";)W(V),fe=new m("&","bitAnd",[fe,pe(V)]);return fe}function pe(V){for(var fe=[he(V)],ke=[],We={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};pt(We,V.token);){var Dt={name:V.token,fn:We[V.token]};ke.push(Dt),W(V),fe.push(he(V))}return fe.length===1?fe[0]:fe.length===2?new m(ke[0].name,ke[0].fn,fe):new b(ke.map(At=>At.fn),fe)}function he(V){var fe,ke,We,Dt;fe=Se(V);for(var At={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};pt(At,V.token);)ke=V.token,We=At[ke],W(V),Dt=[fe,Se(V)],fe=new m(ke,We,Dt);return fe}function Se(V){var fe,ke,We,Dt;fe=Ee(V);for(var At={to:"to",in:"to"};pt(At,V.token);)ke=V.token,We=At[ke],W(V),ke==="in"&&V.token===""?fe=new m("*","multiply",[fe,new x("in")],!0):(Dt=[fe,Ee(V)],fe=new m(ke,We,Dt));return fe}function Ee(V){var fe,ke=[];if(V.token===":"?fe=new l(1):fe=Z(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(ke.push(fe);V.token===":"&&ke.length<3;)W(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?ke.push(new x("end")):ke.push(Z(V));ke.length===3?fe=new y(ke[0],ke[2],ke[1]):fe=new y(ke[0],ke[1])}return fe}function Z(V){var fe,ke,We,Dt;fe=ie(V);for(var At={"+":"add","-":"subtract"};pt(At,V.token);){ke=V.token,We=At[ke],W(V);var lr=ie(V);lr.isPercentage?Dt=[fe,new m("*","multiply",[fe,lr])]:Dt=[fe,lr],fe=new m(ke,We,Dt)}return fe}function ie(V){var fe,ke,We,Dt;fe=ve(V),ke=fe;for(var At={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};pt(At,V.token);)if(We=V.token,Dt=At[We],W(V),We==="%"&&V.tokenType===C.DELIMITER&&V.token!=="(")if(V.token!==""&&At[V.token]){var lr=new m("/","divide",[fe,new l(100)],!1,!0);We=V.token,Dt=At[We],W(V),ke=ve(V),fe=new m(We,Dt,[lr,ke])}else fe=new m("/","divide",[fe,new l(100)],!1,!0);else ke=ve(V),fe=new m(We,Dt,[fe,ke]);return fe}function ve(V){var fe,ke;for(fe=xe(V),ke=fe;V.tokenType===C.SYMBOL||V.token==="in"&&cn(fe)||V.token==="in"&&br(fe)&&fe.fn==="unaryMinus"&&cn(fe.args[0])||V.tokenType===C.NUMBER&&!cn(ke)&&(!br(ke)||ke.op==="!")||V.token==="(";)ke=xe(V),fe=new m("*","multiply",[fe,ke],!0);return fe}function xe(V){for(var fe=Re(V),ke=fe,We=[];V.token==="/"&&zC(ke);)if(We.push(Br({},V)),W(V),V.tokenType===C.NUMBER)if(We.push(Br({},V)),W(V),V.tokenType===C.SYMBOL||V.token==="("||V.token==="in")Br(V,We.pop()),We.pop(),ke=Re(V),fe=new m("/","divide",[fe,ke]);else{We.pop(),Br(V,We.pop());break}else{Br(V,We.pop());break}return fe}function Re(V){var fe,ke,We,Dt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return pt(Dt,V.token)?(We=Dt[V.token],fe=V.token,W(V),ke=[Re(V)],new m(fe,We,ke)):Me(V)}function Me(V){var fe,ke,We,Dt;return fe=je(V),(V.token==="^"||V.token===".^")&&(ke=V.token,We=ke==="^"?"pow":"dotPow",W(V),Dt=[fe,Re(V)],fe=new m(ke,We,Dt)),fe}function je(V){var fe,ke,We,Dt;fe=Qe(V);for(var At={"!":"factorial","'":"ctranspose"};pt(At,V.token);)ke=V.token,We=At[ke],R(V),Dt=[fe],fe=new m(ke,We,Dt),fe=ce(V,fe);return fe}function Qe(V){var fe=[];if(V.tokenType===C.SYMBOL&&pt(V.extraNodes,V.token)){var ke=V.extraNodes[V.token];if(R(V),V.token==="("){if(fe=[],M(V),R(V),V.token!==")")for(fe.push(H(V));V.token===",";)R(V),fe.push(H(V));if(V.token!==")")throw St(V,"Parenthesis ) expected");G(V),R(V)}return new ke(fe)}return re(V)}function re(V){var fe,ke;return V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A?(ke=V.token,R(V),pt(k,ke)?fe=new l(k[ke]):D.includes(ke)?fe=new l(n(ke,"number")):fe=new x(ke),fe=ce(V,fe),fe):Ce(V)}function ce(V,fe,ke){for(var We;(V.token==="("||V.token==="["||V.token===".")&&!ke;)if(We=[],V.token==="(")if(ea(fe)||Lc(fe)){if(M(V),R(V),V.token!==")")for(We.push(H(V));V.token===",";)R(V),We.push(H(V));if(V.token!==")")throw St(V,"Parenthesis ) expected");G(V),R(V),fe=new f(fe,We)}else return fe;else if(V.token==="["){if(M(V),R(V),V.token!=="]")for(We.push(H(V));V.token===",";)R(V),We.push(H(V));if(V.token!=="]")throw St(V,"Parenthesis ] expected");G(V),R(V),fe=new a(fe,new d(We))}else{R(V);var Dt=V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A;if(!Dt)throw St(V,"Property name expected after dot");We.push(new l(V.token)),R(V);var At=!0;fe=new a(fe,new d(We,At))}return fe}function Ce(V){var fe,ke;return V.token==='"'||V.token==="'"?(ke=$e(V,V.token),fe=new l(ke),fe=ce(V,fe),fe):Le(V)}function $e(V,fe){for(var ke="";B(V)!==""&&B(V)!==fe;)if(B(V)==="\\"){z(V);var We=B(V),Dt=I[We];if(Dt!==void 0)ke+=Dt,V.index+=1;else if(We==="u"){var At=V.expression.slice(V.index+1,V.index+5);if(/^[0-9A-Fa-f]{4}$/.test(At))ke+=String.fromCharCode(parseInt(At,16)),V.index+=5;else throw St(V,"Invalid unicode character \\u".concat(At))}else throw St(V,"Bad escape character \\".concat(We))}else ke+=B(V),z(V);if(R(V),V.token!==fe)throw St(V,"End of string ".concat(fe," expected"));return R(V),ke}function Le(V){var fe,ke,We,Dt;if(V.token==="["){if(M(V),R(V),V.token!=="]"){var At=Pe(V);if(V.token===";"){for(We=1,ke=[At];V.token===";";)R(V),V.token!=="]"&&(ke[We]=Pe(V),We++);if(V.token!=="]")throw St(V,"End of matrix ] expected");G(V),R(V),Dt=ke[0].items.length;for(var lr=1;lr<We;lr++)if(ke[lr].items.length!==Dt)throw Cn(V,"Column dimensions mismatch ("+ke[lr].items.length+" !== "+Dt+")");fe=new i(ke)}else{if(V.token!=="]")throw St(V,"End of matrix ] expected");G(V),R(V),fe=At}}else G(V),R(V),fe=new i([]);return ce(V,fe)}return Je(V)}function Pe(V){for(var fe=[H(V)],ke=1;V.token===",";)R(V),V.token!=="]"&&V.token!==";"&&(fe[ke]=H(V),ke++);return new i(fe)}function Je(V){if(V.token==="{"){M(V);var fe,ke={};do if(R(V),V.token!=="}"){if(V.token==='"'||V.token==="'")fe=$e(V,V.token);else if(V.tokenType===C.SYMBOL||V.tokenType===C.DELIMITER&&V.token in A)fe=V.token,R(V);else throw St(V,"Symbol or string expected as object key");if(V.token!==":")throw St(V,"Colon : expected after object key");R(V),ke[fe]=H(V)}while(V.token===",");if(V.token!=="}")throw St(V,"Comma , or bracket } expected after object value");G(V),R(V);var We=new h(ke);return We=ce(V,We),We}return He(V)}function He(V){var fe;if(V.tokenType===C.NUMBER){fe=V.token,R(V);var ke=kl(fe,r),We=n(fe,ke);return new l(We)}return tt(V)}function tt(V){var fe;if(V.token==="("){if(M(V),R(V),fe=H(V),V.token!==")")throw St(V,"Parenthesis ) expected");return G(V),R(V),fe=new v(fe),fe=ce(V,fe),fe}return Ze(V)}function Ze(V){throw V.token===""?St(V,"Unexpected end of expression"):St(V,"Value expected")}function Xt(V){return V.index-V.token.length+1}function St(V,fe){var ke=Xt(V),We=new SyntaxError(fe+" (char "+ke+")");return We.char=ke,We}function Cn(V,fe){var ke=Xt(V),We=new SyntaxError(fe+" (char "+ke+")");return We.char=ke,We}return e.addConversion({from:"string",to:"Node",convert:w}),w}),x4="compile",PPe=["typed","parse"],BPe=ee(x4,PPe,t=>{var{typed:e,parse:n}=t;return e(x4,{string:function(a){return n(a).compile()},"Array | Matrix":function(a){return Vt(a,function(i){return n(i).compile()})}})}),N4="evaluate",LPe=["typed","parse"],zPe=ee(N4,LPe,t=>{var{typed:e,parse:n}=t;return e(N4,{string:function(a){var i=tm();return n(a).compile().evaluate(i)},"string, Map | Object":function(a,i){return n(a).compile().evaluate(i)},"Array | Matrix":function(a){var i=tm();return Vt(a,function(s){return n(s).compile().evaluate(i)})},"Array | Matrix, Map | Object":function(a,i){return Vt(a,function(s){return n(s).compile().evaluate(i)})}})}),UPe="Parser",VPe=["evaluate","parse"],WPe=ee(UPe,VPe,t=>{var{evaluate:e,parse:n}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:tm(),writable:!1})}r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(i){return e(i,this.scope)},r.prototype.get=function(i){if(this.scope.has(i))return this.scope.get(i)},r.prototype.getAll=function(){return h$e(this.scope)},r.prototype.getAllAsMap=function(){return this.scope};function a(i){if(i.length===0)return!1;for(var s=0;s<i.length;s++){var o=i.charAt(s-1),u=i.charAt(s),l=i.charAt(s+1),c=n.isAlpha(u,o,l)||s>0&&n.isDigit(u);if(!c)return!1}return!0}return r.prototype.set=function(i,s){if(!a(i))throw new Error("Invalid variable name: '".concat(i,"'. Variable names must follow the specified rules."));return this.scope.set(i,s),s},r.prototype.remove=function(i){this.scope.delete(i)},r.prototype.clear=function(){this.scope.clear()},r},{isClass:!0}),S4="parser",qPe=["typed","Parser"],HPe=ee(S4,qPe,t=>{var{typed:e,Parser:n}=t;return e(S4,{"":function(){return new n}})}),C4="lup",jPe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],GPe=ee(C4,jPe,t=>{var{typed:e,matrix:n,abs:r,addScalar:a,divideScalar:i,multiplyScalar:s,subtractScalar:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(C4,{DenseMatrix:function(b){return m(b)},SparseMatrix:function(b){return v(b)},Array:function(b){var x=n(b),w=m(x);return{L:w.L.valueOf(),U:w.U.valueOf(),p:w.p}}});function m(y){var b=y._size[0],x=y._size[1],w=Math.min(b,x),S=zt(y._data),C=[],E=[b,w],A=[],k=[w,x],D,I,$,O=[];for(D=0;D<b;D++)O[D]=D;for(I=0;I<x;I++){if(I>0)for(D=0;D<b;D++){var B=Math.min(D,I),z=0;for($=0;$<B;$++)z=a(z,s(S[D][$],S[$][I]));S[D][I]=o(S[D][I],z)}var L=I,F=0,R=0;for(D=I;D<b;D++){var W=S[D][I],M=r(W);u(M,F)&&(L=D,F=M,R=W)}if(I!==L&&(O[I]=[O[L],O[L]=O[I]][0],f._swapRows(I,L,S)),I<b)for(D=I+1;D<b;D++){var G=S[D][I];l(G,0)||(S[D][I]=i(S[D][I],R))}}for(I=0;I<x;I++)for(D=0;D<b;D++){if(I===0&&(D<x&&(A[D]=[]),C[D]=[]),D<I){D<x&&(A[D][I]=S[D][I]),I<b&&(C[D][I]=0);continue}if(D===I){D<x&&(A[D][I]=S[D][I]),I<b&&(C[D][I]=1);continue}D<x&&(A[D][I]=0),I<b&&(C[D][I]=S[D][I])}var q=new f({data:C,size:E}),j=new f({data:A,size:k}),H=[];for(D=0,w=O.length;D<w;D++)H[O[D]]=D;return{L:q,U:j,p:H,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var b=y._size[0],x=y._size[1],w=Math.min(b,x),S=y._values,C=y._index,E=y._ptr,A=[],k=[],D=[],I=[b,w],$=[],O=[],B=[],z=[w,x],L,F,R,W=[],M=[];for(L=0;L<b;L++)W[L]=L,M[L]=L;var G=function(H,ne){var ue=M[H],te=M[ne];W[ue]=ne,W[te]=H,M[H]=te,M[ne]=ue},q=function(){var H=new h;F<b&&(D.push(A.length),A.push(1),k.push(F)),B.push($.length);var ne=E[F],ue=E[F+1];for(R=ne;R<ue;R++)L=C[R],H.set(W[L],S[R]);F>0&&H.forEach(0,F-1,function(K,ae){d._forEachRow(K,A,k,D,function(pe,he){pe>K&&H.accumulate(pe,c(s(he,ae)))})});var te=F,se=H.get(F),J=r(se);H.forEach(F+1,b-1,function(K,ae){var pe=r(ae);u(pe,J)&&(te=K,J=pe,se=ae)}),F!==te&&(d._swapRows(F,te,I[1],A,k,D),d._swapRows(F,te,z[1],$,O,B),H.swap(F,te),G(F,te)),H.forEach(0,b-1,function(K,ae){K<=F?($.push(ae),O.push(K)):(ae=i(ae,se),l(ae,0)||(A.push(ae),k.push(K)))})};for(F=0;F<x;F++)q();return B.push($.length),D.push(A.length),{L:new d({values:A,index:k,ptr:D,size:I}),U:new d({values:$,index:O,ptr:B,size:z}),p:W,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),E4="qr",XPe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],KPe=ee(E4,XPe,t=>{var{typed:e,matrix:n,zeros:r,identity:a,isZero:i,equal:s,sign:o,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=t;return Br(e(E4,{DenseMatrix:function(S){return b(S)},SparseMatrix:function(S){return x()},Array:function(S){var C=n(S),E=b(C);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:y});function y(w){var S=w._size[0],C=w._size[1],E=a([S],"dense"),A=E._data,k=w.clone(),D=k._data,I,$,O,B=r([S],"");for(O=0;O<Math.min(C,S);++O){var z=D[O][O],L=c(s(z,0)?1:o(z)),F=l(L),R=0;for(I=O;I<S;I++)R=f(R,h(D[I][O],l(D[I][O])));var W=h(L,u(R));if(!i(W)){var M=m(z,W);for(B[O]=1,I=O+1;I<S;I++)B[I]=d(D[I][O],M);var G=c(l(d(M,W))),q=void 0;for($=O;$<C;$++){for(q=0,I=O;I<S;I++)q=f(q,h(l(B[I]),D[I][$]));for(q=h(q,G),I=O;I<S;I++)D[I][$]=h(m(D[I][$],h(B[I],q)),F)}for(I=0;I<S;I++){for(q=0,$=O;$<S;$++)q=f(q,h(A[I][$],B[$]));for(q=h(q,G),$=O;$<S;++$)A[I][$]=d(m(A[I][$],h(q,l(B[$]))),F)}}}return{Q:E,R:k,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function b(w){var S=y(w),C=S.R._data;if(w._data.length>0)for(var E=C[0][0].type==="Complex"?v(0):0,A=0;A<C.length;++A)for(var k=0;k<A&&k<(C[0]||[]).length;++k)C[A][k]=E;return S}function x(w){throw new Error("qr not implemented for sparse matrices yet")}});function YPe(t,e,n,r){t._values;for(var a=t._index,i=t._ptr,s=t._size,o=t._datatype,u=s[0],l=s[1],c=null,f=[],d=[],h=0,m=0;m<l;m++){d[m]=h;for(var v=n?n[m]:m,y=i[v],b=i[v+1],x=y;x<b;x++){var w=a[x];f[h]=w,h++}}return d[l]=h,t.createSparseMatrix({values:c,index:f,ptr:d,size:[u,l],datatype:o})}function q7(t,e,n,r,a,i,s){var o=0;for(n[s]=t;o>=0;){var u=n[s+o],l=n[r+u];l===-1?(o--,i[e++]=u):(n[r+u]=n[a+l],++o,n[s+o]=l)}return e}function ZPe(t,e){if(!t)return null;var n=0,r,a=[],i=[],s=0,o=e,u=2*e;for(r=0;r<e;r++)i[s+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(i[o+r]=i[s+t[r]],i[s+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=q7(r,n,i,s,o,a,u));return a}function QPe(t,e){if(!t)return null;var n=t._index,r=t._ptr,a=t._size,i=a[0],s=a[1],o=[],u=[],l=0,c=s,f,d;for(f=0;f<i;f++)u[c+f]=-1;for(var h=0;h<s;h++){o[h]=-1,u[l+h]=-1;for(var m=r[h],v=r[h+1],y=m;y<v;y++){var b=n[y];for(f=u[c+b];f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(o[f]=h);u[c+b]=h}}return o}function JPe(t,e,n){for(var r=t._values,a=t._index,i=t._ptr,s=t._size,o=s[1],u=0,l=0;l<o;l++){var c=i[l];for(i[l]=u;c<i[l+1];c++)e(a[c],l,r?r[c]:1,n)&&(a[u]=a[c],r&&(r[u]=r[c]),u++)}return i[o]=u,a.splice(u,a.length-u),r&&r.splice(u,r.length-u),u}function Uu(t){return-t-2}var eBe="csAmd",tBe=["add","multiply","transpose"],nBe=ee(eBe,tBe,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var b=a(c,f,h,m,y);JPe(b,u,null);for(var x=b._index,w=b._ptr,S=w[m],C=[],E=[],A=0,k=m+1,D=2*(m+1),I=3*(m+1),$=4*(m+1),O=5*(m+1),B=6*(m+1),z=7*(m+1),L=C,F=i(m,w,E,A,I,L,D,z,k,B,$,O),R=s(m,w,E,O,$,B,y,k,I,L,D),W=0,M,G,q,j,H,ne,ue,te,se,J,K,ae,pe,he,Se,Ee;R<m;){for(q=-1;W<m&&(q=E[I+W])===-1;W++);E[D+q]!==-1&&(L[E[D+q]]=-1),E[I+W]=E[D+q];var Z=E[$+q],ie=E[k+q];R+=ie;var ve=0;E[k+q]=-ie;var xe=w[q],Re=Z===0?xe:S,Me=Re;for(j=1;j<=Z+1;j++){for(j>Z?(ne=q,ue=xe,te=E[A+q]-Z):(ne=x[xe++],ue=w[ne],te=E[A+ne]),H=1;H<=te;H++)M=x[ue++],!((se=E[k+M])<=0)&&(ve+=se,E[k+M]=-se,x[Me++]=M,E[D+M]!==-1&&(L[E[D+M]]=L[M]),L[M]!==-1?E[D+L[M]]=E[D+M]:E[I+E[O+M]]=E[D+M]);ne!==q&&(w[ne]=Uu(q),E[B+ne]=0)}for(Z!==0&&(S=Me),E[O+q]=ve,w[q]=Re,E[A+q]=Me-Re,E[$+q]=-2,F=o(F,v,E,B,m),J=Re;J<Me;J++)if(M=x[J],!((K=E[$+M])<=0)){se=-E[k+M];var je=F-se;for(xe=w[M],ae=w[M]+K-1;xe<=ae;xe++)ne=x[xe],E[B+ne]>=F?E[B+ne]-=se:E[B+ne]!==0&&(E[B+ne]=E[O+ne]+je)}for(J=Re;J<Me;J++){for(M=x[J],ae=w[M],pe=ae+E[$+M]-1,he=ae,Se=0,Ee=0,xe=ae;xe<=pe;xe++)if(ne=x[xe],E[B+ne]!==0){var Qe=E[B+ne]-F;Qe>0?(Ee+=Qe,x[he++]=ne,Se+=ne):(w[ne]=Uu(q),E[B+ne]=0)}E[$+M]=he-ae+1;var re=he,ce=ae+E[A+M];for(xe=pe+1;xe<ce;xe++){G=x[xe];var Ce=E[k+G];Ce<=0||(Ee+=Ce,x[he++]=G,Se+=G)}Ee===0?(w[M]=Uu(q),se=-E[k+M],ve-=se,ie+=se,R+=se,E[k+M]=0,E[$+M]=-1):(E[O+M]=Math.min(E[O+M],Ee),x[he]=x[re],x[re]=x[ae],x[ae]=q,E[A+M]=he-ae+1,Se=(Se<0?-Se:Se)%m,E[D+M]=E[z+Se],E[z+Se]=M,L[M]=Se)}for(E[O+q]=ve,v=Math.max(v,ve),F=o(F+v,v,E,B,m),J=Re;J<Me;J++)if(M=x[J],!(E[k+M]>=0))for(Se=L[M],M=E[z+Se],E[z+Se]=-1;M!==-1&&E[D+M]!==-1;M=E[D+M],F++){for(te=E[A+M],K=E[$+M],xe=w[M]+1;xe<=w[M]+te-1;xe++)E[B+x[xe]]=F;var $e=M;for(G=E[D+M];G!==-1;){var Le=E[A+G]===te&&E[$+G]===K;for(xe=w[G]+1;Le&&xe<=w[G]+te-1;xe++)E[B+x[xe]]!==F&&(Le=0);Le?(w[G]=Uu(M),E[k+M]+=E[k+G],E[k+G]=0,E[$+G]=-1,G=E[D+G],E[D+$e]=G):($e=G,G=E[D+G])}}for(xe=Re,J=Re;J<Me;J++)M=x[J],!((se=-E[k+M])<=0)&&(E[k+M]=se,Ee=E[O+M]+ve-se,Ee=Math.min(Ee,m-R-se),E[I+Ee]!==-1&&(L[E[I+Ee]]=M),E[D+M]=E[I+Ee],L[M]=-1,E[I+Ee]=M,W=Math.min(W,Ee),E[O+M]=Ee,x[xe++]=M);E[k+q]=ie,(E[A+q]=xe-Re)===0&&(w[q]=-1,E[B+q]=0),Z!==0&&(S=xe)}for(M=0;M<m;M++)w[M]=Uu(w[M]);for(G=0;G<=m;G++)E[I+G]=-1;for(G=m;G>=0;G--)E[k+G]>0||(E[D+G]=E[I+w[G]],E[I+w[G]]=G);for(ne=m;ne>=0;ne--)E[k+ne]<=0||w[ne]!==-1&&(E[D+ne]=E[I+w[ne]],E[I+w[ne]]=ne);for(q=0,M=0;M<=m;M++)w[M]===-1&&(q=q7(M,q,E,I,D,C,B));return C.splice(C.length-1,1),C};function a(l,c,f,d,h){var m=r(c);if(l===1&&d===f)return e(c,m);if(l===2){for(var v=m._index,y=m._ptr,b=0,x=0;x<f;x++){var w=y[x];if(y[x]=b,!(y[x+1]-w>h))for(var S=y[x+1];w<S;w++)v[b++]=v[w]}return y[f]=b,c=r(m),n(m,c)}return n(m,c)}function i(l,c,f,d,h,m,v,y,b,x,w,S){for(var C=0;C<l;C++)f[d+C]=c[C+1]-c[C];f[d+l]=0;for(var E=0;E<=l;E++)f[h+E]=-1,m[E]=-1,f[v+E]=-1,f[y+E]=-1,f[b+E]=1,f[x+E]=1,f[w+E]=0,f[S+E]=f[d+E];var A=o(0,0,f,x,l);return f[w+l]=-2,c[l]=-1,f[x+l]=0,A}function s(l,c,f,d,h,m,v,y,b,x,w){for(var S=0,C=0;C<l;C++){var E=f[d+C];if(E===0)f[h+C]=-2,S++,c[C]=-1,f[m+C]=0;else if(E>v)f[y+C]=0,f[h+C]=-1,S++,c[C]=Uu(l),f[y+l]++;else{var A=f[b+E];A!==-1&&(x[A]=C),f[w+C]=f[b+E],f[b+E]=C}}return S}function o(l,c,f,d,h){if(l<2||l+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);l=2}return l}function u(l,c){return l!==c}});function rBe(t,e,n,r,a,i,s){var o,u,l=0,c;if(t<=e||n[r+e]<=n[a+t])return-1;n[a+t]=n[r+e];var f=n[i+t];if(n[i+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[s+c];c=n[s+c]);for(o=f;o!==c;o=u)u=n[s+o],n[s+o]=c}return{jleaf:l,q:c}}var aBe="csCounts",iBe=["transpose"],sBe=ee(aBe,iBe,t=>{var{transpose:e}=t;return function(n,r,a,i){if(!n||!r||!a)return null;var s=n._size,o=s[0],u=s[1],l,c,f,d,h,m,v,y=4*u+(i?u+o+1:0),b=[],x=0,w=u,S=2*u,C=3*u,E=4*u,A=5*u+1;for(f=0;f<y;f++)b[f]=-1;var k=[],D=e(n),I=D._index,$=D._ptr;for(f=0;f<u;f++)for(c=a[f],k[c]=b[C+c]===-1?1:0;c!==-1&&b[C+c]===-1;c=r[c])b[C+c]=f;if(i){for(f=0;f<u;f++)b[a[f]]=f;for(l=0;l<o;l++){for(f=u,m=$[l],v=$[l+1],h=m;h<v;h++)f=Math.min(f,b[I[h]]);b[A+l]=b[E+f],b[E+f]=l}}for(l=0;l<u;l++)b[x+l]=l;for(f=0;f<u;f++){for(c=a[f],r[c]!==-1&&k[r[c]]--,d=i?b[E+f]:c;d!==-1;d=i?b[A+d]:-1)for(h=$[d];h<$[d+1];h++){l=I[h];var O=rBe(l,c,b,C,w,S,x);O.jleaf>=1&&k[c]++,O.jleaf===2&&k[O.q]--}r[c]!==-1&&(b[x+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(k[r[c]]+=k[c]);return k}}),oBe="csSqr",uBe=["add","multiply","transpose"],lBe=ee(oBe,uBe,t=>{var{add:e,multiply:n,transpose:r}=t,a=nBe({add:e,multiply:n,transpose:r}),i=sBe({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],m,v={};if(v.q=a(u,l),u&&!v.q)return null;if(c){var y=u?YPe(l,null,v.q):l;v.parent=QPe(y);var b=ZPe(v.parent,h);if(v.cp=i(y,v.parent,b,1),y&&v.parent&&v.cp&&s(y,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function s(o,u){var l=o._ptr,c=o._index,f=o._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var m=u.parent,v=u.pinv,y=u.leftmost,b=[],x=0,w=d,S=d+h,C=d+2*h,E,A,k,D,I;for(A=0;A<h;A++)b[w+A]=-1,b[S+A]=-1,b[C+A]=0;for(E=0;E<d;E++)y[E]=-1;for(A=h-1;A>=0;A--)for(D=l[A],I=l[A+1],k=D;k<I;k++)y[c[k]]=A;for(E=d-1;E>=0;E--)v[E]=-1,A=y[E],A!==-1&&(b[C+A]++===0&&(b[S+A]=E),b[x+E]=b[w+A],b[w+A]=E);for(u.lnz=0,u.m2=d,A=0;A<h;A++)if(E=b[w+A],u.lnz++,E<0&&(E=u.m2++),v[E]=A,!(--C[A]<=0)){u.lnz+=b[C+A];var $=m[A];$!==-1&&(b[C+$]===0&&(b[S+$]=b[S+A]),b[x+b[S+A]]=b[w+$],b[w+$]=b[x+E],b[C+$]+=b[C+A])}for(E=0;E<d;E++)v[E]<0&&(v[E]=A++);return!0}});function iE(t,e){return t[e]<0}function H7(t,e){t[e]=Uu(t[e])}function T4(t){return t<0?Uu(t):t}function cBe(t,e,n,r,a){var i=e._index,s=e._ptr,o=e._size,u=o[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=a?a[t]:t;iE(s,t)||(H7(s,t),r[u+d]=h<0?0:T4(s[h]));var m=1;for(c=r[u+d],f=h<0?0:T4(s[h+1]);c<f;c++)if(l=i[c],!iE(s,l)){r[u+d]=c,r[++d]=l,m=0;break}m&&(d--,r[--n]=t)}return n}function fBe(t,e,n,r,a){var i=t._ptr,s=t._size,o=e._index,u=e._ptr,l=s[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var m=o[c];iE(i,m)||(h=cBe(m,t,h,r,a))}for(c=h;c<l;c++)H7(i,r[c]);return h}var dBe="csSpsolve",pBe=["divideScalar","multiply","subtract"],hBe=ee(dBe,pBe,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(i,s,o,u,l,c,f){var d=i._values,h=i._index,m=i._ptr,v=i._size,y=v[1],b=s._values,x=s._index,w=s._ptr,S,C,E,A,k=fBe(i,s,o,u,c);for(S=k;S<y;S++)l[u[S]]=0;for(C=w[o],E=w[o+1],S=C;S<E;S++)l[x[S]]=b[S];for(var D=k;D<y;D++){var I=u[D],$=c?c[I]:I;if(!($<0))for(C=m[$],E=m[$+1],l[I]=e(l[I],d[f?C:E-1]),S=f?C+1:C,A=f?E:E-1;S<A;S++){var O=h[S];l[O]=r(l[O],n(d[S],l[I]))}}return k}}),mBe="csLu",gBe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],vBe=ee(mBe,gBe,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:a,larger:i,largerEq:s,SparseMatrix:o}=t,u=hBe({divideScalar:n,multiply:r,subtract:a});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,y=100,b=100;f&&(v=f.q,y=f.lnz||y,b=f.unz||b);var x=[],w=[],S=[],C=new o({values:x,index:w,ptr:S,size:[m,m]}),E=[],A=[],k=[],D=new o({values:E,index:A,ptr:k,size:[m,m]}),I=[],$,O,B=[],z=[];for($=0;$<m;$++)B[$]=0,I[$]=-1,S[$+1]=0;y=0,b=0;for(var L=0;L<m;L++){S[L]=y,k[L]=b;var F=v?v[L]:L,R=u(C,c,F,z,B,I,1),W=-1,M=-1;for(O=R;O<m;O++)if($=z[O],I[$]<0){var G=e(B[$]);i(G,M)&&(M=G,W=$)}else A[b]=I[$],E[b++]=B[$];if(W===-1||M<=0)return null;I[F]<0&&s(e(B[F]),r(M,d))&&(W=F);var q=B[W];for(A[b]=L,E[b++]=q,I[W]=L,w[y]=W,x[y++]=1,O=R;O<m;O++)$=z[O],I[$]<0&&(w[y]=$,x[y++]=n(B[$],q)),B[$]=0}for(S[m]=y,k[m]=b,O=0;O<y;O++)w[O]=I[w[O]];return x.splice(y,x.length-y),w.splice(y,w.length-y),E.splice(b,E.length-b),A.splice(b,A.length-b),{L:C,U:D,pinv:I}}}),D4="slu",yBe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],bBe=ee(D4,yBe,t=>{var{typed:e,abs:n,add:r,multiply:a,transpose:i,divideScalar:s,subtract:o,larger:u,largerEq:l,SparseMatrix:c}=t,f=lBe({add:r,multiply:a,transpose:i}),d=vBe({abs:n,divideScalar:s,multiply:a,subtract:o,larger:u,largerEq:l,SparseMatrix:c});return e(D4,{"SparseMatrix, number, number":function(m,v,y){if(!wt(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var b=f(v,m,!1),x=d(m,b,y);return{L:x.L,U:x.U,p:x.pinv,q:b.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function $4(t,e){var n,r=e.length,a=[];if(t)for(n=0;n<r;n++)a[t[n]]=e[n];else for(n=0;n<r;n++)a[n]=e[n];return a}var A4="lusolve",wBe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],xBe=ee(A4,wBe,t=>{var{typed:e,matrix:n,lup:r,slu:a,usolve:i,lsolve:s,DenseMatrix:o}=t,u=Mg({DenseMatrix:o});return e(A4,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var y=a(d,m,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if($t(f))return f;if($n(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=l(f),d=l(d),h&&(v=u(f,v,!0),v._data=$4(h,v._data));var y=s(f,v),b=i(d,y);return m&&(b._data=$4(m,b._data)),b}}),I4="polynomialRoot",NBe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],SBe=ee(I4,NBe,t=>{var{typed:e,isZero:n,equalScalar:r,add:a,subtract:i,multiply:s,divide:o,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(I4,{"number|Complex, ...number|Complex":(m,v)=>{for(var y=[m,...v];y.length>0&&n(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[l(o(y[0],y[1]))];case 3:{var[b,x,w]=y,S=s(2,w),C=s(x,x),E=s(4,w,b);if(r(C,E))return[o(l(x),S)];var A=u(i(C,E));return[o(i(A,x),S),o(i(l(A),x),S)]}case 4:{var[k,D,I,$]=y,O=l(s(3,$)),B=s(I,I),z=s(3,$,D),L=a(s(2,I,I,I),s(27,$,$,k)),F=s(9,$,I,D);if(r(B,z)&&r(L,F))return[o(I,O)];var R=i(B,z),W=i(L,F),M=a(s(18,$,I,D,k),s(I,I,D,D)),G=a(s(4,I,I,I,k),s(4,$,D,D,D),s(27,$,$,k,k));if(r(M,G))return[o(i(s(4,$,I,D),a(s(9,$,$,k),s(I,I,I))),s($,R)),o(i(s(9,$,k),s(I,D)),s(2,R))];var q;r(B,z)?q=W:q=o(a(W,u(i(s(W,W),s(4,R,R,R)))),2);var j=!0,H=c(q,j).toArray().map(ne=>o(a(I,ne,o(R,ne)),O));return H.map(ne=>f(ne)==="Complex"&&r(h(ne),h(ne)+d(ne))?h(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),CBe="Help",EBe=["evaluate"],TBe=ee(CBe,EBe,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},a=`
`;if(r.name&&(a+="Name: "+r.name+`

`),r.category&&(a+="Category: "+r.category+`

`),r.description&&(a+=`Description:
    `+r.description+`

`),r.syntax&&(a+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){a+=`Examples:
`;for(var i=!1,s=e("config()"),o={config:f=>(i=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];a+="    "+l+`
`;var c=void 0;try{c=e(l,o)}catch(f){c=f}c!==void 0&&!ZV(c)&&(a+="        "+Yt(c,{precision:14})+`
`)}a+=`
`,i&&e("config(originalConfig)",{originalConfig:s})}return r.mayThrow&&r.mayThrow.length&&(a+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(a+="See also: "+r.seealso.join(", ")+`
`),a},n.prototype.toJSON=function(){var r=zt(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var a={};return Object.keys(r).filter(i=>i!=="mathjs").forEach(i=>{a[i]=r[i]}),new n(a)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),DBe="Chain",$Be=["?on","math","typed"],ABe=ee(DBe,$Be,t=>{var{on:e,math:n,typed:r}=t;function a(l){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");JV(l)?this.value=l.value:this.value=l}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return Yt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(l){return new a(l.value)};function i(l,c){typeof c=="function"&&(a.prototype[l]=o(c))}function s(l,c){A$e(a.prototype,l,function(){var d=c();if(typeof d=="function")return o(d)})}function o(l){return function(){if(arguments.length===0)return new a(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new a(d.implementation.apply(l,c))}return new a(l.apply(l,c))}}a.createProxy=function(l,c){if(typeof l=="string")i(l,c);else{var f=function(m){pt(l,m)&&u[m]===void 0&&s(m,()=>l[m])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(n),e&&e("import",function(l,c,f){f||s(l,c)}),a},{isClass:!0}),k4={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},IBe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},kBe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},_Be={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},OBe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},FBe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},RBe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},MBe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},PBe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},BBe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},LBe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},_4={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},zBe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},UBe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},VBe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},WBe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},qBe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},HBe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},jBe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},GBe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},XBe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},KBe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},YBe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},ZBe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},QBe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},JBe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},eLe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},tLe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},nLe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},rLe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},aLe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},iLe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},sLe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},oLe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},uLe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lLe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},cLe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},fLe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},dLe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},pLe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},hLe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},mLe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},gLe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},vLe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},yLe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},bLe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},wLe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},xLe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},NLe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},SLe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},CLe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},ELe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},TLe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},DLe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},$Le={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},ALe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},ILe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},kLe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},_Le={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},OLe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},FLe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},RLe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},MLe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},PLe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},BLe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},LLe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},zLe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},ULe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},VLe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},WLe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},qLe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},HLe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},jLe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},GLe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},XLe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},KLe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},YLe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},ZLe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},QLe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},JLe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},eze={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},tze={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},nze={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},rze={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},aze={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},ize={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},sze={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},oze={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},uze={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},lze={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},cze={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},fze={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},dze={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},pze={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},hze={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},mze={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},gze={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},vze={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},yze={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},bze={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},wze={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},xze={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Nze={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Sze={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Cze={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Eze={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},Tze={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},Dze={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},$ze={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},Aze={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},Ize={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},kze={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},_ze={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},Oze={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},Fze={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Rze={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},Mze={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},Pze={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Bze={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Lze={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},zze={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},Uze={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Vze={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},Wze={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},qze={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},Hze={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},jze={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Gze={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Xze={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Kze={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Yze={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Zze={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},Qze={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},Jze={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},e5e={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},t5e={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},n5e={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},r5e={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},a5e={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},i5e={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},s5e={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},o5e={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},u5e={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},l5e={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},c5e={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},f5e={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},d5e={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},p5e={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},h5e={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},m5e={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},g5e={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},v5e={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},y5e={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},b5e={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},w5e={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},x5e={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},N5e={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},S5e={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},C5e={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},E5e={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},T5e={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},D5e={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},$5e={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},A5e={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},I5e={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},k5e={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},_5e={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},O5e={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},F5e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},R5e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},M5e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},P5e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},B5e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},L5e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},z5e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},U5e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},V5e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},W5e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},q5e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},H5e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},j5e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},G5e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},X5e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},K5e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Y5e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Z5e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Q5e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},J5e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},e6e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},t6e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},n6e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},r6e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},a6e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},i6e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},s6e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},o6e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},u6e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},l6e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},c6e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},f6e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},d6e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},p6e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},h6e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},m6e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},g6e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},v6e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},y6e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},b6e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},w6e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},x6e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},N6e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},S6e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},C6e={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},E6e={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},T6e={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},D6e={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},$6e={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},A6e={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},I6e={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},k6e={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},_6e={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},O6e={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},F6e={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},R6e={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},M6e={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},P6e={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},B6e={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},L6e={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},z6e={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},U6e={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},V6e={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},W6e={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},q6e={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},H6e={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},j6e={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},G6e={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},X6e={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},K6e={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Y6e={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Z6e={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},Q6e={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},J6e={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},e8e={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},t8e={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},n8e={bignumber:HBe,bigint:jBe,boolean:GBe,complex:XBe,createUnit:KBe,fraction:YBe,index:ZBe,matrix:QBe,number:JBe,sparse:eLe,splitUnit:tLe,string:nLe,unit:rLe,e:k4,E:k4,false:IBe,i:kBe,Infinity:_Be,LN2:FBe,LN10:OBe,LOG2E:MBe,LOG10E:RBe,NaN:PBe,null:BBe,pi:_4,PI:_4,phi:LBe,SQRT1_2:zBe,SQRT2:UBe,tau:VBe,true:WBe,version:qBe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:oLe,lsolve:lLe,lsolveAll:cLe,lup:fLe,lusolve:dLe,leafCount:uLe,polynomialRoot:pLe,resolve:gLe,simplify:vLe,simplifyConstant:yLe,simplifyCore:bLe,symbolicEqual:xLe,rationalize:mLe,slu:wLe,usolve:NLe,usolveAll:SLe,qr:hLe,abs:CLe,add:ELe,cbrt:TLe,ceil:DLe,cube:$Le,divide:ALe,dotDivide:ILe,dotMultiply:kLe,dotPow:_Le,exp:OLe,expm:FLe,expm1:RLe,fix:MLe,floor:PLe,gcd:BLe,hypot:LLe,lcm:ULe,log:VLe,log2:HLe,log1p:qLe,log10:WLe,mod:jLe,multiply:GLe,norm:XLe,nthRoot:KLe,nthRoots:YLe,pow:ZLe,round:QLe,sign:JLe,sqrt:eze,sqrtm:tze,square:ize,subtract:sze,unaryMinus:oze,unaryPlus:uze,xgcd:lze,invmod:zLe,bitAnd:cze,bitNot:fze,bitOr:dze,bitXor:pze,leftShift:hze,rightArithShift:mze,rightLogShift:gze,bellNumbers:vze,catalan:yze,composition:bze,stirlingS2:wze,config:aLe,import:iLe,typed:sLe,arg:xze,conj:Nze,re:Cze,im:Sze,evaluate:Eze,help:Tze,distance:Dze,intersect:$ze,and:Aze,not:Ize,or:kze,xor:_ze,concat:Fze,count:Rze,cross:Mze,column:Oze,ctranspose:Pze,det:Bze,diag:Lze,diff:zze,dot:Uze,getMatrixDataType:jze,identity:Gze,filter:Wze,flatten:qze,forEach:Hze,inv:Xze,pinv:Kze,eigs:Vze,kron:Yze,matrixFromFunction:Jze,matrixFromRows:e5e,matrixFromColumns:Qze,map:Zze,ones:t5e,partitionSelect:n5e,range:r5e,resize:i5e,reshape:a5e,rotate:s5e,rotationMatrix:o5e,row:u5e,size:l5e,sort:c5e,squeeze:f5e,subset:d5e,trace:p5e,transpose:h5e,zeros:m5e,fft:g5e,ifft:v5e,sylvester:nze,schur:rze,lyap:aze,solveODE:t8e,combinations:y5e,combinationsWithRep:b5e,factorial:w5e,gamma:x5e,kldivergence:S5e,lgamma:N5e,multinomial:C5e,permutations:E5e,pickRandom:T5e,random:D5e,randomInt:$5e,compare:A5e,compareNatural:I5e,compareText:k5e,deepEqual:_5e,equal:O5e,equalText:F5e,larger:R5e,largerEq:M5e,smaller:P5e,smallerEq:B5e,unequal:L5e,setCartesian:z5e,setDifference:U5e,setDistinct:V5e,setIntersect:W5e,setIsSubset:q5e,setMultiplicity:H5e,setPowerset:j5e,setSize:G5e,setSymDifference:X5e,setUnion:K5e,zpk2tf:Y5e,freqz:Z5e,erf:Q5e,zeta:J5e,cumsum:l6e,mad:e6e,max:t6e,mean:n6e,median:r6e,min:a6e,mode:i6e,prod:s6e,quantileSeq:o6e,std:u6e,sum:c6e,variance:f6e,corr:d6e,acos:p6e,acosh:h6e,acot:m6e,acoth:g6e,acsc:v6e,acsch:y6e,asec:b6e,asech:w6e,asin:x6e,asinh:N6e,atan:S6e,atanh:E6e,atan2:C6e,cos:T6e,cosh:D6e,cot:$6e,coth:A6e,csc:I6e,csch:k6e,sec:_6e,sech:O6e,sin:F6e,sinh:R6e,tan:M6e,tanh:P6e,to:B6e,clone:z6e,format:U6e,bin:L6e,oct:Q6e,hex:W6e,isNaN:H6e,isInteger:q6e,isNegative:j6e,isNumeric:G6e,hasNumericValue:V6e,isPositive:X6e,isPrime:K6e,isZero:Y6e,print:J6e,typeOf:e8e,numeric:Z6e},O4="help",r8e=["typed","mathWithTransform","Help"],a8e=ee(O4,r8e,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(O4,{any:function(i){var s,o=i;if(typeof i!="string"){for(s in n)if(pt(n,s)&&i===n[s]){o=s;break}}var u=ja(n8e,o);if(!u){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),F4="chain",i8e=["typed","Chain"],s8e=ee(F4,i8e,t=>{var{typed:e,Chain:n}=t;return e(F4,{"":function(){return new n},any:function(a){return new n(a)}})}),R4="det",o8e=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],u8e=ee(R4,o8e,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:a,divideScalar:i,isZero:s,unaryMinus:o}=t;return e(R4,{any:function(c){return zt(c)},"Array | Matrix":function(c){var f;switch($t(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return zt(c);case 1:if(f[0]===1)return zt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Yt(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Yt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Yt(f)+")")}}});function u(l,c,f){if(c===1)return zt(l[0][0]);if(c===2)return r(a(l[0][0],l[1][1]),a(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((A,k)=>k),m=0;m<c;m++){var v=h[m];if(s(l[v][m])){var y=void 0;for(y=m+1;y<c;y++)if(!s(l[h[y]][m])){v=h[y],h[y]=h[m],h[m]=v,d=!d;break}if(y===c)return l[v][m]}for(var b=l[v][m],x=m===0?1:l[h[m-1]][m-1],w=m+1;w<c;w++)for(var S=h[w],C=m+1;C<c;C++)l[S][C]=i(r(a(l[S][C],b),a(l[S][m],l[v][C])),x)}var E=l[h[c-1]][c-1];return d?o(E):E}}),M4="inv",l8e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],c8e=ee(M4,l8e,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:a,multiply:i,unaryMinus:s,det:o,identity:u,abs:l}=t;return e(M4,{"Array | Matrix":function(d){var h=$t(d)?d.size():Bt(d);switch(h.length){case 1:if(h[0]===1)return $t(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Yt(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return $t(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+Yt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Yt(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,y,b,x;if(d===1){if(b=f[0][0],b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,b)]]}else if(d===2){var w=o(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(s(f[0][1]),w)],[r(s(f[1][0]),w),r(f[0][0],w)]]}else{var S=f.concat();for(m=0;m<d;m++)S[m]=S[m].concat();for(var C=u(d).valueOf(),E=0;E<h;E++){var A=l(S[E][E]),k=E;for(m=E+1;m<d;)l(S[m][E])>A&&(A=l(S[m][E]),k=m),m++;if(A===0)throw Error("Cannot calculate inverse, determinant is zero");m=k,m!==E&&(x=S[E],S[E]=S[m],S[m]=x,x=C[E],C[E]=C[m],C[m]=x);var D=S[E],I=C[E];for(m=0;m<d;m++){var $=S[m],O=C[m];if(m!==E){if($[E]!==0){for(y=r(s($[E]),D[E]),v=E;v<h;v++)$[v]=a($[v],i(y,D[v]));for(v=0;v<h;v++)O[v]=a(O[v],i(y,I[v]))}}else{for(y=D[E],v=E;v<h;v++)$[v]=r($[v],y);for(v=0;v<h;v++)O[v]=r(O[v],y)}}}return C}}}),P4="pinv",f8e=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],d8e=ee(P4,f8e,t=>{var{typed:e,matrix:n,inv:r,deepEqual:a,equal:i,dotDivide:s,dot:o,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(P4,{"Array | Matrix":function(w){var S=$t(w)?w.size():Bt(w);switch(S.length){case 1:return b(w)?u(w):S[0]===1?r(w):s(u(w),o(w,w));case 2:{if(b(w))return u(w);var C=S[0],E=S[1];if(C===E)try{return r(w)}catch(A){if(!(A instanceof Error&&A.message.match(/Cannot calculate inverse, determinant is zero/)))throw A}return $t(w)?n(h(w.valueOf(),C,E),w.storage()):h(w,C,E)}default:throw new RangeError("Matrix must be two dimensional (size: "+Yt(S)+")")}},any:function(w){return i(w,0)?zt(w):l(1,w)}});function h(x,w,S){var{C,F:E}=v(x,w,S),A=c(r(c(u(C),C)),u(C)),k=c(u(E),r(c(E,u(E))));return c(k,A)}function m(x,w,S){for(var C=zt(x),E=0,A=0;A<w;A++){if(S<=E)return C;for(var k=A;y(C[k][E]);)if(k++,w===k&&(k=A,E++,S===E))return C;[C[k],C[A]]=[C[A],C[k]];for(var D=C[A][E],I=0;I<S;I++)C[A][I]=s(C[A][I],D);for(var $=0;$<w;$++)if($!==A){D=C[$][E];for(var O=0;O<S;O++)C[$][O]=f(C[$][O],c(-1,c(D,C[A][O])))}E++}return C}function v(x,w,S){var C=m(x,w,S),E=x.map((k,D)=>k.filter((I,$)=>$<w&&!y(o(C[$],C[$])))),A=C.filter((k,D)=>!y(o(C[D],C[D])));return{C:E,F:A}}function y(x){return i(f(x,d(1,1)),f(0,d(1,1)))}function b(x){return a(f(x,d(1,1)),f(c(x,0),d(1,1)))}});function p8e(t){var{addScalar:e,subtract:n,flatten:r,multiply:a,multiplyScalar:i,divideScalar:s,sqrt:o,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:y,equal:b,complex:x,larger:w,smaller:S,matrixFromColumns:C,dot:E}=t;function A(j,H,ne,ue){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,se=k(j,H,ne,ue,te);D(j,H,ne,ue,te,se);var{values:J,C:K}=I(j,H,ne,ue,te);if(te){var ae=$(j,H,K,se,J,ne,ue);return{values:J,eigenvectors:ae}}return{values:J}}function k(j,H,ne,ue,te){var se=ue==="BigNumber",J=ue==="Complex",K=se?l(0):0,ae=se?l(1):J?x(1):1,pe=se?l(1):1,he=se?l(10):2,Se=i(he,he),Ee;te&&(Ee=Array(H).fill(ae));for(var Z=!1;!Z;){Z=!0;for(var ie=0;ie<H;ie++){for(var ve=K,xe=K,Re=0;Re<H;Re++)ie!==Re&&(ve=e(ve,u(j[Re][ie])),xe=e(xe,u(j[ie][Re])));if(!b(ve,0)&&!b(xe,0)){for(var Me=pe,je=ve,Qe=s(xe,he),re=i(xe,he);S(je,Qe);)je=i(je,Se),Me=i(Me,he);for(;w(je,re);)je=s(je,Se),Me=s(Me,he);var ce=S(s(e(je,xe),Me),i(e(ve,xe),.95));if(ce){Z=!1;for(var Ce=s(1,Me),$e=0;$e<H;$e++)ie!==$e&&(j[ie][$e]=i(j[ie][$e],Ce),j[$e][ie]=i(j[$e][ie],Me));te&&(Ee[ie]=i(Ee[ie],Ce))}}}}return te?c(Ee):null}function D(j,H,ne,ue,te,se){var J=ue==="BigNumber",K=ue==="Complex",ae=J?l(0):K?x(0):0;J&&(ne=l(ne));for(var pe=0;pe<H-2;pe++){for(var he=0,Se=ae,Ee=pe+1;Ee<H;Ee++){var Z=j[Ee][pe];S(u(Se),u(Z))&&(Se=Z,he=Ee)}if(!S(u(Se),ne)){if(he!==pe+1){var ie=j[he];j[he]=j[pe+1],j[pe+1]=ie;for(var ve=0;ve<H;ve++){var xe=j[ve][he];j[ve][he]=j[ve][pe+1],j[ve][pe+1]=xe}if(te){var Re=se[he];se[he]=se[pe+1],se[pe+1]=Re}}for(var Me=pe+2;Me<H;Me++){var je=s(j[Me][pe],Se);if(je!==0){for(var Qe=0;Qe<H;Qe++)j[Me][Qe]=n(j[Me][Qe],i(je,j[pe+1][Qe]));for(var re=0;re<H;re++)j[re][pe+1]=e(j[re][pe+1],i(je,j[re][Me]));if(te)for(var ce=0;ce<H;ce++)se[Me][ce]=n(se[Me][ce],i(je,se[pe+1][ce]))}}}}return se}function I(j,H,ne,ue,te){var se=ue==="BigNumber",J=ue==="Complex",K=se?l(1):J?x(1):1;se&&(ne=l(ne));for(var ae=zt(j),pe=[],he=H,Se=[],Ee=te?c(Array(H).fill(K)):void 0,Z=te?c(Array(he).fill(K)):void 0,ie=0;ie<=100;){ie+=1;for(var ve=ae[he-1][he-1],xe=0;xe<he;xe++)ae[xe][xe]=n(ae[xe][xe],ve);var{Q:Re,R:Me}=m(ae);ae=a(Me,Re);for(var je=0;je<he;je++)ae[je][je]=e(ae[je][je],ve);if(te&&(Z=a(Z,Re)),he===1||S(u(ae[he-1][he-2]),ne)){ie=0,pe.push(ae[he-1][he-1]),te&&(Se.unshift([[1]]),z(Z,H),Ee=a(Ee,Z),he>1&&(Z=c(Array(he-1).fill(K)))),he-=1,ae.pop();for(var Qe=0;Qe<he;Qe++)ae[Qe].pop()}else if(he===2||S(u(ae[he-2][he-3]),ne)){ie=0;var re=O(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1]);pe.push(...re),te&&(Se.unshift(B(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1],re[0],re[1],ne,ue)),z(Z,H),Ee=a(Ee,Z),he>2&&(Z=c(Array(he-2).fill(K)))),he-=2,ae.pop(),ae.pop();for(var ce=0;ce<he;ce++)ae[ce].pop(),ae[ce].pop()}if(he===0)break}if(pe.sort((Le,Pe)=>+n(u(Le),u(Pe))),ie>100){var Ce=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+pe.join(", "));throw Ce.values=pe,Ce.vectors=[],Ce}var $e=te?a(Ee,L(Se,H)):void 0;return{values:pe,C:$e}}function $(j,H,ne,ue,te,se,J){var K=h(ne),ae=a(K,j,ne),pe=J==="BigNumber",he=J==="Complex",Se=pe?l(0):he?x(0):0,Ee=pe?l(1):he?x(1):1,Z=[],ie=[];for(var ve of te){var xe=F(Z,ve,b);xe===-1?(Z.push(ve),ie.push(1)):ie[xe]+=1}for(var Re=[],Me=Z.length,je=Array(H).fill(Se),Qe=c(Array(H).fill(Ee)),re=function(){var $e=Z[ce],Le=n(ae,a($e,Qe)),Pe=y(Le,je);for(Pe.shift();Pe.length<ie[ce];){var Je=R(Le,H,Pe,se,J);if(Je===null)break;Pe.push(Je)}var He=a(h(ue),ne);Pe=Pe.map(tt=>a(He,tt)),Re.push(...Pe.map(tt=>({value:$e,vector:r(tt)})))},ce=0;ce<Me;ce++)re();return Re}function O(j,H,ne,ue){var te=e(j,ue),se=n(i(j,ue),i(H,ne)),J=i(te,.5),K=i(o(n(i(te,te),i(4,se))),.5);return[e(J,K),n(J,K)]}function B(j,H,ne,ue,te,se,J,K){var ae=K==="BigNumber",pe=K==="Complex",he=ae?l(0):pe?x(0):0,Se=ae?l(1):pe?x(1):1;if(S(u(ne),J))return[[Se,he],[he,Se]];if(w(u(n(te,se)),J))return[[n(te,ue),n(se,ue)],[ne,ne]];var Ee=n(j,te),Z=n(ue,te);return S(u(H),J)&&S(u(Z),J)?[[Ee,Se],[ne,he]]:[[H,he],[Z,Se]]}function z(j,H){for(var ne=0;ne<j.length;ne++)j[ne].push(...Array(H-j[ne].length).fill(0));for(var ue=j.length;ue<H;ue++)j.push(Array(H).fill(0)),j[ue][ue]=1;return j}function L(j,H){for(var ne=[],ue=0;ue<H;ue++)ne[ue]=Array(H).fill(0);var te=0;for(var se of j){for(var J=se.length,K=0;K<J;K++)for(var ae=0;ae<J;ae++)ne[te+K][te+ae]=se[K][ae];te+=J}return ne}function F(j,H,ne){for(var ue=0;ue<j.length;ue++)if(ne(j[ue],H))return ue;return-1}function R(j,H,ne,ue,te){for(var se=te==="BigNumber"?l(1e3):1e3,J,K=0;K<5;++K){J=W(H,ne,te);try{J=v(j,J)}catch{continue}if(w(G(J),se))break}if(K>=5)return null;for(K=0;;){var ae=v(j,J);if(S(G(M(J,[ae])),ue))break;if(++K>=10)return null;J=q(ae)}return J}function W(j,H,ne){var ue=ne==="BigNumber",te=ne==="Complex",se=Array(j).fill(0).map(J=>2*Math.random()-1);return ue&&(se=se.map(J=>l(J))),te&&(se=se.map(J=>x(J))),se=M(se,H),q(se,ne)}function M(j,H){var ne=f(j);for(var ue of H)ue=d(ue,ne),j=n(j,a(s(E(ue,j),E(ue,ue)),ue));return j}function G(j){return u(o(E(j,j)))}function q(j,H){var ne=H==="BigNumber",ue=H==="Complex",te=ne?l(1):ue?x(1):1;return a(s(te,G(j)),j)}return A}function h8e(t){var{config:e,addScalar:n,subtract:r,abs:a,atan:i,cos:s,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(D,I){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,O=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if(O==="number")return m(D,$,B);if(O==="BigNumber")return v(D,$,B);throw TypeError("Unsupported data type: "+O)}function m(D,I,$){var O=D.length,B=Math.abs(I/O),z,L;if($){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=E(D);Math.abs(R[1])>=Math.abs(B);){var W=R[0][0],M=R[0][1];z=y(D[W][W],D[M][M],D[W][M]),D=C(D,z,W,M),$&&(L=x(L,z,W,M)),R=E(D)}for(var G=Array(O).fill(0),q=0;q<O;q++)G[q]=D[q][q];return k(zt(G),L,$)}function v(D,I,$){var O=D.length,B=a(I/O),z,L;if($){L=new Array(O);for(var F=0;F<O;F++)L[F]=Array(O).fill(0),L[F][F]=1}for(var R=A(D);a(R[1])>=a(B);){var W=R[0][0],M=R[0][1];z=b(D[W][W],D[M][M],D[W][M]),D=S(D,z,W,M),$&&(L=w(L,z,W,M)),R=A(D)}for(var G=Array(O).fill(0),q=0;q<O;q++)G[q]=D[q][q];return k(zt(G),L,$)}function y(D,I,$){var O=I-D;return Math.abs(O)<=e.relTol?Math.PI/4:.5*Math.atan(2*$/(I-D))}function b(D,I,$){var O=r(I,D);return a(O)<=e.relTol?c(-1).acos().div(4):u(.5,i(f(2,$,l(O))))}function x(D,I,$,O){for(var B=D.length,z=Math.cos(I),L=Math.sin(I),F=Array(B).fill(0),R=Array(B).fill(0),W=0;W<B;W++)F[W]=z*D[W][$]-L*D[W][O],R[W]=L*D[W][$]+z*D[W][O];for(var M=0;M<B;M++)D[M][$]=F[M],D[M][O]=R[M];return D}function w(D,I,$,O){for(var B=D.length,z=s(I),L=o(I),F=Array(B).fill(c(0)),R=Array(B).fill(c(0)),W=0;W<B;W++)F[W]=r(u(z,D[W][$]),u(L,D[W][O])),R[W]=n(u(L,D[W][$]),u(z,D[W][O]));for(var M=0;M<B;M++)D[M][$]=F[M],D[M][O]=R[M];return D}function S(D,I,$,O){for(var B=D.length,z=c(s(I)),L=c(o(I)),F=u(z,z),R=u(L,L),W=Array(B).fill(c(0)),M=Array(B).fill(c(0)),G=f(c(2),z,L,D[$][O]),q=n(r(u(F,D[$][$]),G),u(R,D[O][O])),j=d(u(R,D[$][$]),G,u(F,D[O][O])),H=0;H<B;H++)W[H]=r(u(z,D[$][H]),u(L,D[O][H])),M[H]=n(u(L,D[$][H]),u(z,D[O][H]));D[$][$]=q,D[O][O]=j,D[$][O]=c(0),D[O][$]=c(0);for(var ne=0;ne<B;ne++)ne!==$&&ne!==O&&(D[$][ne]=W[ne],D[ne][$]=W[ne],D[O][ne]=M[ne],D[ne][O]=M[ne]);return D}function C(D,I,$,O){for(var B=D.length,z=Math.cos(I),L=Math.sin(I),F=z*z,R=L*L,W=Array(B).fill(0),M=Array(B).fill(0),G=F*D[$][$]-2*z*L*D[$][O]+R*D[O][O],q=R*D[$][$]+2*z*L*D[$][O]+F*D[O][O],j=0;j<B;j++)W[j]=z*D[$][j]-L*D[O][j],M[j]=L*D[$][j]+z*D[O][j];D[$][$]=G,D[O][O]=q,D[$][O]=0,D[O][$]=0;for(var H=0;H<B;H++)H!==$&&H!==O&&(D[$][H]=W[H],D[H][$]=W[H],D[O][H]=M[H],D[H][O]=M[H]);return D}function E(D){for(var I=D.length,$=0,O=[0,1],B=0;B<I;B++)for(var z=B+1;z<I;z++)Math.abs($)<Math.abs(D[B][z])&&($=Math.abs(D[B][z]),O=[B,z]);return[O,$]}function A(D){for(var I=D.length,$=0,O=[0,1],B=0;B<I;B++)for(var z=B+1;z<I;z++)a($)<a(D[B][z])&&($=a(D[B][z]),O=[B,z]);return[O,$]}function k(D,I,$){var O=D.length,B=Array(O),z;if($){z=Array(O);for(var L=0;L<O;L++)z[L]=Array(O)}for(var F=0;F<O;F++){for(var R=0,W=D[0],M=0;M<D.length;M++)a(D[M])<a(W)&&(R=M,W=D[R]);if(B[F]=D.splice(R,1)[0],$)for(var G=0;G<O;G++)z[F][G]=I[G][R],I[G].splice(R,1)}if(!$)return{values:B};var q=z.map((j,H)=>({value:B[H],vector:j}));return{values:B,eigenvectors:q}}return h}var m8e="eigs",g8e=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],v8e=ee(m8e,g8e,t=>{var{config:e,typed:n,matrix:r,addScalar:a,subtract:i,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:y,larger:b,column:x,flatten:w,number:S,complex:C,sqrt:E,diag:A,size:k,reshape:D,qr:I,usolve:$,usolveAll:O,im:B,re:z,smaller:L,matrixFromColumns:F,dot:R}=t,W=h8e({config:e,addScalar:a,subtract:i,column:x,flatten:w,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:C,multiply:v,add:y}),M=p8e({config:e,addScalar:a,subtract:i,multiply:v,multiplyScalar:f,flatten:w,divideScalar:d,sqrt:E,abs:o,bignumber:m,diag:A,size:k,reshape:D,qr:I,inv:h,usolve:$,usolveAll:O,equal:s,complex:C,larger:b,smaller:L,matrixFromColumns:F,dot:R});return n("eigs",{Array:function(se){return G(r(se))},"Array, number|BigNumber":function(se,J){return G(r(se),{precision:J})},"Array, Object"(te,se){return G(r(te),se)},Matrix:function(se){return G(se,{matricize:!0})},"Matrix, number|BigNumber":function(se,J){return G(se,{precision:J,matricize:!0})},"Matrix, Object":function(se,J){var K={matricize:!0};return Br(K,J),G(se,K)}});function G(te){var se,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in J?J.eigenvectors:!0,ae=(se=J.precision)!==null&&se!==void 0?se:e.relTol,pe=q(te,ae,K);return J.matricize&&(pe.values=r(pe.values),K&&(pe.eigenvectors=pe.eigenvectors.map(he=>{var{value:Se,vector:Ee}=he;return{value:Se,vector:r(Ee)}}))),K&&Object.defineProperty(pe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),pe}function q(te,se,J){var K=te.toArray(),ae=te.size();if(ae.length!==2||ae[0]!==ae[1])throw new RangeError("Matrix must be square (size: ".concat(Yt(ae),")"));var pe=ae[0];if(H(K,pe,se)&&(ne(K,pe),j(K,pe,se))){var he=ue(te,K,pe);return W(K,pe,se,he,J)}var Se=ue(te,K,pe);return M(K,pe,se,Se,J)}function j(te,se,J){for(var K=0;K<se;K++)for(var ae=K;ae<se;ae++)if(b(m(o(i(te[K][ae],te[ae][K]))),J))return!1;return!0}function H(te,se,J){for(var K=0;K<se;K++)for(var ae=0;ae<se;ae++)if(b(m(o(B(te[K][ae]))),J))return!1;return!0}function ne(te,se){for(var J=0;J<se;J++)for(var K=0;K<se;K++)te[J][K]=z(te[J][K])}function ue(te,se,J){var K=te.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var ae=!1,pe=!1,he=!1,Se=0;Se<J;Se++)for(var Ee=0;Ee<J;Ee++){var Z=se[Se][Ee];if(qt(Z)||Og(Z))ae=!0;else if(jt(Z))pe=!0;else if(eu(Z))he=!0;else throw TypeError("Unsupported type in Matrix: "+Ln(Z))}if(pe&&he&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),he){for(var ie=0;ie<J;ie++)for(var ve=0;ve<J;ve++)se[ie][ve]=C(se[ie][ve]);return"Complex"}if(pe){for(var xe=0;xe<J;xe++)for(var Re=0;Re<J;Re++)se[xe][Re]=m(se[xe][Re]);return"BigNumber"}if(ae){for(var Me=0;Me<J;Me++)for(var je=0;je<J;je++)se[Me][je]=S(se[Me][je]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),B4="expm",y8e=["typed","abs","add","identity","inv","multiply"],b8e=ee(B4,y8e,t=>{var{typed:e,abs:n,add:r,identity:a,inv:i,multiply:s}=t;return e(B4,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Yt(d)+")");for(var h=d[0],m=1e-15,v=o(f),y=u(v,m),b=y.q,x=y.j,w=s(f,Math.pow(2,-x)),S=a(h),C=a(h),E=1,A=w,k=-1,D=1;D<=b;D++)D>1&&(A=s(A,w),k=-k),E=E*(b-D+1)/((2*b-D+1)*D),S=r(S,s(E,A)),C=r(C,s(E*k,A));for(var I=s(i(C),S),$=0;$<x;$++)I=s(I,I);return vc(f)?f.createSparseMatrix(I):I}});function o(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(l(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var b=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*b)}}),L4="sqrtm",w8e=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],x8e=ee(L4,w8e,t=>{var{typed:e,abs:n,add:r,multiply:a,map:i,sqrt:s,subtract:o,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function m(v){var y,b=0,x=v,w=f(l(v));do{var S=x;if(x=a(.5,r(S,u(w))),w=a(.5,r(w,u(S))),y=c(n(o(x,S))),y>h&&++b>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return x}return e(L4,{"Array | Matrix":function(y){var b=$t(y)?y.size():Bt(y);switch(b.length){case 1:if(b[0]===1)return i(y,s);throw new RangeError("Matrix must be square (size: "+Yt(b)+")");case 2:{var x=b[0],w=b[1];if(x===w)return m(y);throw new RangeError("Matrix must be square (size: "+Yt(b)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Yt(b)+")")}}})}),z4="sylvester",N8e=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],S8e=ee(z4,N8e,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:a,multiply:i,range:s,concat:o,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v}=t;return e(z4,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(x,w,S){return y(a(x),w,S)},"Array, Array, Matrix":function(x,w,S){return y(a(x),a(w),S)},"Array, Matrix, Array":function(x,w,S){return y(a(x),w,a(S))},"Matrix, Array, Matrix":function(x,w,S){return y(x,a(w),S)},"Matrix, Array, Array":function(x,w,S){return y(x,a(w),a(S))},"Matrix, Matrix, Array":function(x,w,S){return y(x,w,a(S))},"Array, Array, Array":function(x,w,S){return y(a(x),a(w),a(S)).toArray()}});function y(b,x,w){for(var S=x.size()[0],C=b.size()[0],E=n(b),A=E.T,k=E.U,D=n(i(-1,x)),I=D.T,$=D.U,O=i(i(u(k),w),$),B=s(0,C),z=[],L=(he,Se)=>o(he,Se,1),F=(he,Se)=>o(he,Se,0),R=0;R<S;R++)if(R<S-1&&v(c(I,l(R+1,R)))>1e-5){for(var W=F(c(O,l(B,R)),c(O,l(B,R+1))),M=0;M<R;M++)W=f(W,F(i(z[M],c(I,l(M,R))),i(z[M],c(I,l(M,R+1)))));var G=i(h(C),i(-1,c(I,l(R,R)))),q=i(h(C),i(-1,c(I,l(R+1,R)))),j=i(h(C),i(-1,c(I,l(R,R+1)))),H=i(h(C),i(-1,c(I,l(R+1,R+1)))),ne=F(L(f(A,G),q),L(j,f(A,H))),ue=m(ne,W);z[R]=ue.subset(l(s(0,C),0)),z[R+1]=ue.subset(l(s(C,2*C),0)),R++}else{for(var te=c(O,l(B,R)),se=0;se<R;se++)te=f(te,i(z[se],c(I,l(se,R))));var J=c(I,l(R,R)),K=d(A,i(J,h(C)));z[R]=m(K,te)}var ae=a(r(...z)),pe=i(k,i(ae,u($)));return pe}}),U4="schur",C8e=["typed","matrix","identity","multiply","qr","norm","subtract"],E8e=ee(U4,C8e,t=>{var{typed:e,matrix:n,identity:r,multiply:a,qr:i,norm:s,subtract:o}=t;return e(U4,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,m;do{m=f;var v=i(f),y=v.Q,b=v.R;if(f=a(b,y),d=a(d,y),h++>100)break}while(s(o(f,m))>1e-4);return{U:d,T:f}}}),V4="lyap",T8e=["typed","matrix","sylvester","multiply","transpose"],D8e=ee(V4,T8e,t=>{var{typed:e,matrix:n,sylvester:r,multiply:a,transpose:i}=t;return e(V4,{"Matrix, Matrix":function(o,u){return r(o,i(o),a(-1,u))},"Array, Matrix":function(o,u){return r(n(o),i(n(o)),a(-1,u))},"Matrix, Array":function(o,u){return r(o,i(n(o)),n(a(-1,u)))},"Array, Array":function(o,u){return r(n(o),i(n(o)),n(a(-1,u))).toArray()}})}),$8e="divide",A8e=["typed","matrix","multiply","equalScalar","divideScalar","inv"],I8e=ee($8e,A8e,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:a,divideScalar:i,inv:s}=t,o=ba({typed:e,equalScalar:a}),u=Zs({typed:e});return e("divide",eW({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,i,!1)},"SparseMatrix, any":function(c,f){return o(c,f,i,!1)},"Array, any":function(c,f){return u(n(c),f,i,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},i.signatures))}),W4="distance",k8e=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],_8e=ee(W4,k8e,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:i,deepEqual:s,sqrt:o,abs:u}=t;return e(W4,{"Array, Array, Array":function(C,E,A){if(C.length===2&&E.length===2&&A.length===2){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(E,A))throw new TypeError("LinePoint1 should not be same with LinePoint2");var k=r(A[1],E[1]),D=r(E[0],A[0]),I=r(a(A[0],E[1]),a(E[0],A[1]));return y(C[0],C[1],k,D,I)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(C,E,A){if(Object.keys(C).length===2&&Object.keys(E).length===2&&Object.keys(A).length===2){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(m(E),m(A)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in C&&"pointY"in C&&"lineOnePtX"in E&&"lineOnePtY"in E&&"lineTwoPtX"in A&&"lineTwoPtY"in A){var k=r(A.lineTwoPtY,E.lineOnePtY),D=r(E.lineOnePtX,A.lineTwoPtX),I=r(a(A.lineTwoPtX,E.lineOnePtY),a(E.lineOnePtX,A.lineTwoPtY));return y(C.pointX,C.pointY,k,D,I)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(C,E){if(C.length===2&&E.length===3){if(!c(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(C[0],C[1],E[0],E[1],E[2])}else if(C.length===3&&E.length===6){if(!f(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(E))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return b(C[0],C[1],C[2],E[0],E[1],E[2],E[3],E[4],E[5])}else if(C.length===E.length&&C.length>0){if(!d(C))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(C,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(C,E){if(Object.keys(C).length===2&&Object.keys(E).length===3){if(!c(C))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"xCoeffLine"in E&&"yCoeffLine"in E&&"constant"in E)return y(C.pointX,C.pointY,E.xCoeffLine,E.yCoeffLine,E.constant);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===6){if(!f(C))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in C&&"pointY"in C&&"x0"in E&&"y0"in E&&"z0"in E&&"a"in E&&"b"in E&&"c"in E)return b(C.pointX,C.pointY,C.pointZ,E.x0,E.y0,E.z0,E.a,E.b,E.c);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===2&&Object.keys(E).length===2){if(!c(C))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointTwoX"in E&&"pointTwoY"in E)return x([C.pointOneX,C.pointOneY],[E.pointTwoX,E.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(C).length===3&&Object.keys(E).length===3){if(!f(C))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(E))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in C&&"pointOneY"in C&&"pointOneZ"in C&&"pointTwoX"in E&&"pointTwoY"in E&&"pointTwoZ"in E)return x([C.pointOneX,C.pointOneY,C.pointOneZ],[E.pointTwoX,E.pointTwoY,E.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(C){if(!v(C))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return w(C)}});function l(S){return typeof S=="number"||jt(S)}function c(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])}function f(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])}function d(S){return Array.isArray(S)||(S=m(S)),S.every(l)}function h(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])&&l(S[3])&&l(S[4])&&l(S[5])}function m(S){for(var C=Object.keys(S),E=[],A=0;A<C.length;A++)E.push(S[C[A]]);return E}function v(S){if(S[0].length===2&&l(S[0][0])&&l(S[0][1])){if(S.some(C=>C.length!==2||!l(C[0])||!l(C[1])))return!1}else if(S[0].length===3&&l(S[0][0])&&l(S[0][1])&&l(S[0][2])){if(S.some(C=>C.length!==3||!l(C[0])||!l(C[1])||!l(C[2])))return!1}else return!1;return!0}function y(S,C,E,A,k){var D=u(n(n(a(E,S),a(A,C)),k)),I=o(n(a(E,E),a(A,A)));return i(D,I)}function b(S,C,E,A,k,D,I,$,O){var B=[r(a(r(k,C),O),a(r(D,E),$)),r(a(r(D,E),I),a(r(A,S),O)),r(a(r(A,S),$),a(r(k,C),I))];B=o(n(n(a(B[0],B[0]),a(B[1],B[1])),a(B[2],B[2])));var z=o(n(n(a(I,I),a($,$)),a(O,O)));return i(B,z)}function x(S,C){for(var E=S.length,A=0,k=0,D=0;D<E;D++)k=r(S[D],C[D]),A=n(a(k,k),A);return o(A)}function w(S){for(var C=[],E=[],A=[],k=0;k<S.length-1;k++)for(var D=k+1;D<S.length;D++)S[0].length===2?(E=[S[k][0],S[k][1]],A=[S[D][0],S[D][1]]):S[0].length===3&&(E=[S[k][0],S[k][1],S[k][2]],A=[S[D][0],S[D][1],S[D][2]]),C.push(x(E,A));return C}}),O8e="intersect",F8e=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],R8e=ee(O8e,F8e,t=>{var{typed:e,config:n,abs:r,add:a,addScalar:i,matrix:s,multiply:o,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":b,"Matrix, Matrix, Matrix":function($,O,B){var z=y($.valueOf(),O.valueOf(),B.valueOf());return z===null?null:s(z)},"Matrix, Matrix, Matrix, Matrix":function($,O,B,z){var L=b($.valueOf(),O.valueOf(),B.valueOf(),z.valueOf());return L===null?null:s(L)}});function y(I,$,O){if(I=x(I),$=x($),O=x(O),!S(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S($))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!C(O))throw new TypeError("Array with 4 numbers expected as third argument");return D(I[0],I[1],I[2],$[0],$[1],$[2],O[0],O[1],O[2],O[3])}function b(I,$,O,B){if(I=x(I),$=x($),O=x(O),B=x(B),I.length===2){if(!w(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!w($))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!w(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!w(B))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return E(I,$,O,B)}else if(I.length===3){if(!S(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S($))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!S(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!S(B))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return k(I[0],I[1],I[2],$[0],$[1],$[2],O[0],O[1],O[2],B[0],B[1],B[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(I){return I.length===1?I[0]:I.length>1&&Array.isArray(I[0])&&I.every($=>Array.isArray($)&&$.length===1)?h(I):I}function w(I){return I.length===2&&v(I[0])&&v(I[1])}function S(I){return I.length===3&&v(I[0])&&v(I[1])&&v(I[2])}function C(I){return I.length===4&&v(I[0])&&v(I[1])&&v(I[2])&&v(I[3])}function E(I,$,O,B){var z=I,L=O,F=c(z,$),R=c(L,B),W=c(u(F[0],R[1]),u(R[0],F[1]));if(m(W)||f(r(W),n.relTol))return null;var M=u(R[0],z[1]),G=u(R[1],z[0]),q=u(R[0],L[1]),j=u(R[1],L[0]),H=l(i(c(c(M,G),q),j),W);return a(o(F,H),z)}function A(I,$,O,B,z,L,F,R,W,M,G,q){var j=u(c(I,$),c(O,B)),H=u(c(z,L),c(F,R)),ne=u(c(W,M),c(G,q));return i(i(j,H),ne)}function k(I,$,O,B,z,L,F,R,W,M,G,q){var j=A(I,F,M,F,$,R,G,R,O,W,q,W),H=A(M,F,B,I,G,R,z,$,q,W,L,O),ne=A(I,F,B,I,$,R,z,$,O,W,L,O),ue=A(M,F,M,F,G,R,G,R,q,W,q,W),te=A(B,I,B,I,z,$,z,$,L,O,L,O),se=c(u(j,H),u(ne,ue)),J=c(u(te,ue),u(H,H));if(m(J))return null;var K=l(se,J),ae=l(i(j,u(K,H)),ue),pe=i(I,u(K,c(B,I))),he=i($,u(K,c(z,$))),Se=i(O,u(K,c(L,O))),Ee=i(F,u(ae,c(M,F))),Z=i(R,u(ae,c(G,R))),ie=i(W,u(ae,c(q,W)));return d(pe,Ee)&&d(he,Z)&&d(Se,ie)?[pe,he,Se]:null}function D(I,$,O,B,z,L,F,R,W,M){var G=u(I,F),q=u(B,F),j=u($,R),H=u(z,R),ne=u(O,W),ue=u(L,W),te=c(c(c(M,G),j),ne),se=c(c(c(i(i(q,H),ue),G),j),ne),J=l(te,se),K=i(I,u(J,c(B,I))),ae=i($,u(J,c(z,$))),pe=i(O,u(J,c(L,O)));return[K,ae,pe]}}),q4="sum",M8e=["typed","config","add","numeric"],j7=ee(q4,M8e,t=>{var{typed:e,config:n,add:r,numeric:a}=t;return e(q4,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":s,"...":function(u){if(fp(u))throw new TypeError("Scalar values expected in function sum");return i(u)}});function i(o){var u;return fu(o,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Za(c,"sum",l)}}),u===void 0&&(u=a(0,n.number)),typeof u=="string"&&(u=a(u,kl(u,n))),u}function s(o,u){try{var l=Uw(o,u,r);return l}catch(c){throw Za(c,"sum")}}}),Jy="cumsum",P8e=["typed","add","unaryPlus"],G7=ee(Jy,P8e,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(Jy,{Array:a,Matrix:function(l){return l.create(a(l.valueOf(),l.datatype()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(l,c){return l.create(s(l.valueOf(),c),l.datatype())},"...":function(l){if(fp(l))throw new TypeError("All values expected to be scalar in function cumsum");return a(l)}});function a(u){try{return i(u)}catch(l){throw Za(l,Jy)}}function i(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function s(u,l){var c=Bt(u);if(l<0||l>=c.length)throw new Ks(l,c.length);try{return o(u,l)}catch(f){throw Za(f,Jy)}}function o(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=DW(u),f=[],c=0;c<d.length;c++)f[c]=o(d[c],l-1);return f}else return i(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=o(u[c],l-1);return f}}}),H4="mean",B8e=["typed","add","divide"],X7=ee(H4,B8e,t=>{var{typed:e,add:n,divide:r}=t;return e(H4,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":a,"...":function(o){if(fp(o))throw new TypeError("Scalar values expected in function mean");return i(o)}});function a(s,o){try{var u=Uw(s,o,n),l=Array.isArray(s)?Bt(s):s.size();return r(u,l[o])}catch(c){throw Za(c,"mean")}}function i(s){var o,u=0;if(fu(s,function(l){try{o=o===void 0?l:n(o,l),u++}catch(c){throw Za(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(o,u)}}),j4="median",L8e=["typed","add","divide","compare","partitionSelect"],z8e=ee(j4,L8e,t=>{var{typed:e,add:n,divide:r,compare:a,partitionSelect:i}=t;function s(l){try{l=vn(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=i(l,f+1),h=l[f],m=0;m<f;++m)a(l[m],h)>0&&(h=l[m]);return u(h,d)}else{var v=i(l,(c-1)/2);return o(v)}}catch(y){throw Za(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(j4,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(fp(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),G4="mad",U8e=["typed","abs","map","median","subtract"],V8e=ee(G4,U8e,t=>{var{typed:e,abs:n,map:r,median:a,subtract:i}=t;return e(G4,{"Array | Matrix":s,"...":function(u){return s(u)}});function s(o){if(o=vn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=a(o);return a(r(o,function(l){return n(i(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.includes("median")?new TypeError(l.message.replace("median","mad")):Za(l,"mad")}}}),GN="unbiased",X4="variance",W8e=["typed","add","subtract","multiply","divide","apply","isNaN"],K7=ee(X4,W8e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o}=t;return e(X4,{"Array | Matrix":function(f){return u(f,GN)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,GN)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,GN)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(fu(c,function(y){try{d=d===void 0?y:n(d,y),h++}catch(b){throw Za(b,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=i(d,h);if(d=void 0,fu(c,function(y){var b=r(y,m);d=d===void 0?a(b,b):n(d,a(b,b))}),o(d))return d;switch(f){case"uncorrected":return i(d,h);case"biased":return i(d,h+1);case"unbiased":{var v=jt(d)?d.mul(0):0;return h===1?v:i(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>u(h,d))}catch(h){throw Za(h,"variance")}}}),K4="quantileSeq",q8e=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],Y7=ee(K4,q8e,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=H$({typed:e,isInteger:l});return e(K4,{"Array | Matrix, number | BigNumber":(x,w)=>v(x,w,!1),"Array | Matrix, number | BigNumber, number":(x,w,S)=>m(x,w,!1,S,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(x,w,S,C)=>m(x,w,S,C,v),"Array | Matrix, Array | Matrix":(x,w)=>y(x,w,!1),"Array | Matrix, Array | Matrix, number":(x,w,S)=>m(x,w,!1,S,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(x,w,S,C)=>m(x,w,S,C,y)});function m(x,w,S,C,E){return h(x,C,A=>E(A,w,S))}function v(x,w,S){var C,E=x.valueOf();if(c(w,0))throw new Error("N/prob must be non-negative");if(f(w,1))return qt(w)?b(E,w,S):n(b(E,w,S));if(d(w,1)){if(!l(w))throw new Error("N must be a positive integer");if(d(w,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var A=r(w,1);C=[];for(var k=0;c(k,w);k++){var D=i(k+1,A);C.push(b(E,D,S))}return qt(w)?C:n(C)}}function y(x,w,S){for(var C=x.valueOf(),E=w.valueOf(),A=[],k=0;k<E.length;++k)A.push(b(C,E[k],S));return A}function b(x,w,S){var C=vn(x),E=C.length;if(E===0)throw new Error("Cannot calculate quantile of an empty sequence");var A=qt(w)?w*(E-1):w.times(E-1),k=qt(w)?Math.floor(A):A.floor().toNumber(),D=qt(w)?A%1:A.minus(k);if(l(A))return S?C[A]:o(C,qt(w)?A:A.valueOf());var I,$;if(S)I=C[k],$=C[k+1];else{$=o(C,k+1),I=C[k];for(var O=0;O<k;++O)u(C[O],I)>0&&(I=C[O])}return r(s(I,a(1,D)),s($,D))}}),Y4="std",H8e=["typed","map","sqrt","variance"],Z7=ee(Y4,H8e,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t;return e(Y4,{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(o){return i(o)}});function i(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=a.apply(null,arguments);return ws(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),Z4="corr",j8e=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],G8e=ee(Z4,j8e,t=>{var{typed:e,matrix:n,sqrt:r,sum:a,add:i,subtract:s,multiply:o,pow:u,divide:l}=t;return e(Z4,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?n(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=a(d),y=a(h),b=d.reduce((E,A,k)=>i(E,o(A,h[k])),0),x=a(d.map(E=>u(E,2))),w=a(h.map(E=>u(E,2))),S=s(o(m,b),o(v,y)),C=r(o(s(o(m,x),u(v,2)),s(o(m,w),u(y,2))));return l(S,C)}}),Q4="combinations",X8e=["typed"],K8e=ee(Q4,X8e,t=>{var{typed:e}=t;return e(Q4,{"number, number":YW,"BigNumber, BigNumber":function(r,a){var i=r.constructor,s,o,u=r.minus(a),l=new i(1);if(!J4(r)||!J4(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(r))throw new TypeError("k must be less than n in function combinations");if(s=l,a.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(a.plus(o)).dividedBy(o);else for(o=l;o.lte(a);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function J4(t){return t.isInteger()&&t.gte(0)}var eP="combinationsWithRep",Y8e=["typed"],Z8e=ee(eP,Y8e,t=>{var{typed:e}=t;return e(eP,{"number, number":function(r,a){if(!wt(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!wt(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<r-1){var i=Zo(r,r+a-1);return i/Zo(1,a)}var s=Zo(a+1,r+a-1);return s/Zo(1,r-1)},"BigNumber, BigNumber":function(r,a){var i=r.constructor,s,o,u=new i(1),l=r.minus(u);if(!tP(r)||!tP(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=u,a.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(a.plus(o)).dividedBy(o);else for(o=u;o.lte(a);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function tP(t){return t.isInteger()&&t.gte(0)}var nP="gamma",Q8e=["typed","config","multiplyScalar","pow","BigNumber","Complex"],J8e=ee(nP,Q8e,t=>{var{typed:e,config:n,multiplyScalar:r,pow:a,BigNumber:i,Complex:s}=t;function o(l){if(l.im===0)return m1(l.re);if(l.re<.5){var c=new s(1-l.re,-l.im),f=new s(Math.PI*l.re,Math.PI*l.im);return new s(Math.PI).div(f.sin()).div(o(c))}l=new s(l.re-1,l.im);for(var d=new s(hd[0],0),h=1;h<hd.length;++h){var m=new s(hd[h],0);d=d.add(m.div(l.add(h)))}var v=new s(l.re+QW+.5,l.im),y=Math.sqrt(2*Math.PI),b=v.pow(l.add(.5)),x=v.neg().exp();return d.mul(y).mul(b).mul(x)}return e(nP,{number:m1,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new i(1/0):u(c.minus(1));if(!c.isFinite())return new i(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new i([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=i.clone({precision:c});if(l%2===1)return l.times(u(new i(l-1)));for(var d=l,h=new f(l),m=l.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new i(h.toPrecision(i.precision))}}),rP="lgamma",eUe=["Complex","typed"],tUe=ee(rP,eUe,t=>{var{Complex:e,typed:n}=t,r=7,a=7,i=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(rP,{number:g1,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(g1(l.re),0);if(l.re>=r||Math.abs(l.im)>=a)return o(l);if(l.re<=d){var h=Z$e(c,l.im)*Math.floor(.5*l.re+.25),m=l.mul(Math.PI).sin().log(),v=s(new e(1-l.re,-l.im));return new e(f,h).sub(m).sub(v)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function o(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(JW),f=new e(1,0).div(l),d=f.div(l),h=i[0],m=i[1],v=2*d.re,y=d.re*d.re+d.im*d.im,b=2;b<8;b++){var x=m;m=-y*h+i[b],h=v*h+x}var w=f.mul(d.mul(h).add(m));return c.add(w)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return o(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),aP="factorial",nUe=["typed","gamma"],rUe=ee(aP,nUe,t=>{var{typed:e,gamma:n}=t;return e(aP,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return n(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return n(a.plus(1))},"Array | Matrix":e.referToSelf(r=>a=>Vt(a,r))})}),iP="kldivergence",aUe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],iUe=ee(iP,aUe,t=>{var{typed:e,matrix:n,divide:r,sum:a,multiply:i,map:s,dotDivide:o,log:u,isNumeric:l}=t;return e(iP,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=a(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=a(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var b=r(f,a(f)),x=r(d,a(d)),w=a(i(b,s(o(b,x),S=>u(S))));return l(w)?w:Number.NaN}}),sP="multinomial",sUe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],oUe=ee(sP,sUe,t=>{var{typed:e,add:n,divide:r,multiply:a,factorial:i,isInteger:s,isPositive:o}=t;return e(sP,{"Array | Matrix":function(l){var c=0,f=1;return fu(l,function(d){if(!s(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=a(f,i(d))}),r(i(c),f)}})}),oP="permutations",uUe=["typed","factorial"],lUe=ee(oP,uUe,t=>{var{typed:e,factorial:n}=t;return e(oP,{"number | BigNumber":n,"number, number":function(a,i){if(!wt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!wt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(i>a)throw new TypeError("second argument k must be less than or equal to first argument n");return Zo(a-i+1,a)},"BigNumber, BigNumber":function(a,i){var s,o;if(!uP(a)||!uP(i))throw new TypeError("Positive integer value expected in function permutations");if(i.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var u=a.mul(0).add(1);for(s=u,o=a.minus(i).plus(1);o.lte(a);o=o.plus(1))s=s.times(o);return s}})});function uP(t){return t.isInteger()&&t.gte(0)}var cUe=mz(Date.now());function Ld(t){var e;function n(a){e=a===null?cUe:mz(String(a))}n(t);function r(){return e()}return r}var lP="pickRandom",fUe=["typed","config","?on"],dUe=ee(lP,fUe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(s,o){s.randomSeed!==o.randomSeed&&(a=Ld(s.randomSeed))}),e(lP,{"Array | Matrix":function(o){return i(o,{})},"Array | Matrix, Object":function(o,u){return i(o,u)},"Array | Matrix, number":function(o,u){return i(o,{number:u})},"Array | Matrix, Array | Matrix":function(o,u){return i(o,{weights:u})},"Array | Matrix, Array | Matrix, number":function(o,u,l){return i(o,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(o,u,l){return i(o,{number:u,weights:l})}});function i(s,o){var{number:u,weights:l,elementWise:c=!0}=o,f=typeof u>"u";f&&(u=1);var d=$t(s)?s.create:$t(l)?l.create:null;s=s.valueOf(),l&&(l=l.valueOf()),c===!0&&(s=vn(s),l=vn(l));var h=0;if(typeof l<"u"){if(l.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=l.length;m<v;m++){if(!qt(l[m])||l[m]<0)throw new Error("Weights must be an array of positive numbers");h+=l[m]}}for(var y=s.length,b=[],x;b.length<u;){if(typeof l>"u")x=s[Math.floor(a()*y)];else for(var w=a()*h,S=0,C=s.length;S<C;S++)if(w-=l[S],w<0){x=s[S];break}b.push(x)}return f?b[0]:d?d(b):b}});function Q$(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,a=t.shift();r<a;r++)n.push(Q$(t,e));else for(var i=0,s=t.shift();i<s;i++)n.push(e());return n}var cP="random",pUe=["typed","config","?on"],hUe=ee(cP,pUe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=Ld(o.randomSeed))}),e(cP,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>i(o,0,1),"Array | Matrix, number":(o,u)=>i(o,0,u),"Array | Matrix, number, number":(o,u,l)=>i(o,u,l)});function i(o,u,l){var c=Q$(o.valueOf(),()=>s(u,l));return $t(o)?o.create(c,"number"):c}function s(o,u){return o+a()*(u-o)}}),fP="randomInt",mUe=["typed","config","?on"],gUe=ee(fP,mUe,t=>{var{typed:e,config:n,on:r}=t,a=Ld(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=Ld(o.randomSeed))}),e(fP,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>i(o,0,1),"Array | Matrix, number":(o,u)=>i(o,0,u),"Array | Matrix, number, number":(o,u,l)=>i(o,u,l)});function i(o,u,l){var c=Q$(o.valueOf(),()=>s(u,l));return $t(o)?o.create(c,"number"):c}function s(o,u){return Math.floor(o+a()*(u-o))}}),dP="stirlingS2",vUe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],yUe=ee(dP,vUe,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:a,divideScalar:i,pow:s,factorial:o,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,m=[],v=[];return e(dP,{"number | BigNumber, number | BigNumber":function(b,x){if(!c(b)||l(b)||!c(x)||l(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(x,b))throw new TypeError("k must be less than or equal to n in function stirlingS2");var w=!(qt(b)&&qt(x)),S=w?v:m,C=w?d:f,E=f(b),A=f(x);if(S[E]&&S[E].length>A)return S[E][A];for(var k=0;k<=E;++k)if(S[k]||(S[k]=[C(k===0?1:0)]),k!==0)for(var D=S[k],I=S[k-1],$=D.length;$<=k&&$<=A;++$)$===k?D[$]=1:D[$]=n(a(C($),I[$]),I[$-1]);return S[E][A]}})}),pP="bellNumbers",bUe=["typed","addScalar","isNegative","isInteger","stirlingS2"],wUe=ee(pP,bUe,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:a,stirlingS2:i}=t;return e(pP,{"number | BigNumber":function(o){if(!a(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=o;l++)u=n(u,i(o,l));return u}})}),hP="catalan",xUe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],NUe=ee(hP,xUe,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:a,combinations:i,isNegative:s,isInteger:o}=t;return e(hP,{"number | BigNumber":function(l){if(!o(l)||s(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(i(a(l,2),l),n(l,1))}})}),mP="composition",SUe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],CUe=ee(mP,SUe,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:a,isNegative:i,isInteger:s,larger:o}=t;return e(mP,{"number | BigNumber, number | BigNumber":function(l,c){if(!s(l)||!a(l)||!s(c)||!a(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),gP="leafCount",EUe=["parse","typed"],TUe=ee(gP,EUe,t=>{var{parse:e,typed:n}=t;function r(a){var i=0;return a.forEach(s=>{i+=r(s)}),i||1}return n(gP,{Node:function(i){return r(i)}})});function vP(t){return cn(t)||br(t)&&t.isUnary()&&cn(t.args[0])}function T1(t){return!!(cn(t)||(ml(t)||br(t))&&t.args.every(T1)||lu(t)&&T1(t.content))}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function XN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){Ur(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var DUe="simplifyUtil",$Ue=["FunctionNode","OperatorNode","SymbolNode"],J$=ee(DUe,$Ue,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,a=!0,i=!1,s="defaultF",o={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:i,total:a,commutative:i,associative:i},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:i,total:a,commutative:i,associative:i},paren:{trivial:a,total:a,commutative:a,associative:i},defaultF:{trivial:i,total:a,commutative:i,associative:i}},u={divide:{total:i},log:{total:i}},l={subtract:{total:i},abs:{trivial:a},log:{total:a}};function c(w,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,E=s;if(typeof w=="string"?E=w:br(w)?E=w.fn.toString():ml(w)?E=w.name:lu(w)&&(E="paren"),pt(C,E)){var A=C[E];if(pt(A,S))return A[S];if(pt(o,E))return o[E][S]}if(pt(C,s)){var k=C[s];return pt(k,S)?k[S]:o[s][S]}if(pt(o,E)){var D=o[E];if(pt(D,S))return D[S]}return o[s][S]}function f(w){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(w,"commutative",S)}function d(w){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(w,"associative",S)}function h(w,S){var C=XN({},w);for(var E in S)pt(w,E)?C[E]=XN(XN({},S[E]),w[E]):C[E]=S[E];return C}function m(w,S){if(!w.args||w.args.length===0)return w;w.args=v(w,S);for(var C=0;C<w.args.length;C++)m(w.args[C],S)}function v(w,S){var C,E=[],A=function(D){for(var I=0;I<D.args.length;I++){var $=D.args[I];br($)&&C===$.op?A($):E.push($)}};return d(w,S)?(C=w.op,A(w),E):w.args}function y(w,S){if(!(!w.args||w.args.length===0)){for(var C=x(w),E=w.args.length,A=0;A<E;A++)y(w.args[A],S);if(E>2&&d(w,S)){for(var k=w.args.pop();w.args.length>0;)k=C([w.args.pop(),k]);w.args=k.args}}}function b(w,S){if(!(!w.args||w.args.length===0)){for(var C=x(w),E=w.args.length,A=0;A<E;A++)b(w.args[A],S);if(E>2&&d(w,S)){for(var k=w.args.shift();w.args.length>0;)k=C([k,w.args.shift()]);w.args=k.args}}}function x(w){return br(w)?function(S){try{return new n(w.op,w.fn,S,w.implicit)}catch(C){return console.error(C),[]}}:function(S){return new e(new r(w.name),S)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:y,unflattenl:b,defaultContext:o,realContext:u,positiveContext:l}}),AUe="simplify",IUe=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],kUe=ee(AUe,IUe,t=>{var{typed:e,parse:n,equal:r,resolve:a,simplifyConstant:i,simplifyCore:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,ParenthesisNode:m,SymbolNode:v,replacer:y}=t,{hasProperty:b,isCommutative:x,isAssociative:w,mergeContext:S,flatten:C,unflattenr:E,unflattenl:A,createMakeNodeFunction:k,defaultContext:D,realContext:I,positiveContext:$}=J$({FunctionNode:c,OperatorNode:h,SymbolNode:v});e.addConversion({from:"Object",to:"Map",convert:dd});var O=e("simplify",{Node:M,"Node, Map":(J,K)=>M(J,!1,K),"Node, Map, Object":(J,K,ae)=>M(J,!1,K,ae),"Node, Array":M,"Node, Array, Map":M,"Node, Array, Map, Object":M});e.removeConversion({from:"Object",to:"Map",convert:dd}),O.defaultContext=D,O.realContext=I,O.positiveContext=$;function B(J){return J.transform(function(K){return lu(K)?B(K.content):K})}var z={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};O.rules=[s,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},i,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},i,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function L(J,K){var ae={};if(J.s){var pe=J.s.split("->");if(pe.length===2)ae.l=pe[0],ae.r=pe[1];else throw SyntaxError("Could not parse rule: "+J.s)}else ae.l=J.l,ae.r=J.r;ae.l=B(n(ae.l)),ae.r=B(n(ae.r));for(var he of["imposeContext","repeat","assuming"])he in J&&(ae[he]=J[he]);if(J.evaluate&&(ae.evaluate=n(J.evaluate)),w(ae.l,K)){var Se=!x(ae.l,K),Ee;Se&&(Ee=W());var Z=k(ae.l),ie=W();ae.expanded={},ae.expanded.l=Z([ae.l,ie]),C(ae.expanded.l,K),E(ae.expanded.l,K),ae.expanded.r=Z([ae.r,ie]),Se&&(ae.expandedNC1={},ae.expandedNC1.l=Z([Ee,ae.l]),ae.expandedNC1.r=Z([Ee,ae.r]),ae.expandedNC2={},ae.expandedNC2.l=Z([Ee,ae.expanded.l]),ae.expandedNC2.r=Z([Ee,ae.expanded.r]))}return ae}function F(J,K){for(var ae=[],pe=0;pe<J.length;pe++){var he=J[pe],Se=void 0,Ee=typeof he;switch(Ee){case"string":he={s:he};case"object":Se=L(he,K);break;case"function":Se=he;break;default:throw TypeError("Unsupported type of rule: "+Ee)}ae.push(Se)}return ae}var R=0;function W(){return new v("_p"+R++)}function M(J,K){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tm(),pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=pe.consoleDebug;K=F(K||O.rules,pe.context);var Se=a(J,ae);Se=B(Se);for(var Ee={},Z=Se.toString({parenthesis:"all"});!Ee[Z];){Ee[Z]=!0,R=0;var ie=Z;he&&console.log("Working on: ",Z);for(var ve=0;ve<K.length;ve++){var xe="";if(typeof K[ve]=="function"?(Se=K[ve](Se,pe),he&&(xe=K[ve].name)):(C(Se,pe.context),Se=q(Se,K[ve],pe.context),he&&(xe="".concat(K[ve].l.toString()," -> ").concat(K[ve].r.toString()))),he){var Re=Se.toString({parenthesis:"all"});Re!==ie&&(console.log("Applying",xe,"produced",Re),ie=Re)}A(Se,pe.context)}Z=Se.toString({parenthesis:"all"})}return Se}function G(J,K,ae){var pe=J;if(J)for(var he=0;he<J.length;++he){var Se=q(J[he],K,ae);Se!==J[he]&&(pe===J&&(pe=J.slice()),pe[he]=Se)}return pe}function q(J,K,ae){if(K.assuming){for(var pe in K.assuming)for(var he in K.assuming[pe])if(b(pe,he,ae)!==K.assuming[pe][he])return J}var Se=S(K.imposeContext,ae),Ee=J;if(Ee instanceof h||Ee instanceof c){var Z=G(Ee.args,K,ae);Z!==Ee.args&&(Ee=Ee.clone(),Ee.args=Z)}else if(Ee instanceof m){if(Ee.content){var ie=q(Ee.content,K,ae);ie!==Ee.content&&(Ee=new m(ie))}}else if(Ee instanceof u){var ve=G(Ee.items,K,ae);ve!==Ee.items&&(Ee=new u(ve))}else if(Ee instanceof o){var xe=Ee.object;Ee.object&&(xe=q(Ee.object,K,ae));var Re=Ee.index;Ee.index&&(Re=q(Ee.index,K,ae)),(xe!==Ee.object||Re!==Ee.index)&&(Ee=new o(xe,Re))}else if(Ee instanceof f){var Me=G(Ee.dimensions,K,ae);Me!==Ee.dimensions&&(Ee=new f(Me))}else if(Ee instanceof d){var je=!1,Qe={};for(var re in Ee.properties)Qe[re]=q(Ee.properties[re],K,ae),Qe[re]!==Ee.properties[re]&&(je=!0);je&&(Ee=new d(Qe))}var ce=K.r,Ce=te(K.l,Ee,Se)[0];if(!Ce&&K.expanded&&(ce=K.expanded.r,Ce=te(K.expanded.l,Ee,Se)[0]),!Ce&&K.expandedNC1&&(ce=K.expandedNC1.r,Ce=te(K.expandedNC1.l,Ee,Se)[0],Ce||(ce=K.expandedNC2.r,Ce=te(K.expandedNC2.l,Ee,Se)[0])),Ce){var $e=Ee.implicit;Ee=ce.clone(),$e&&"implicit"in ce&&(Ee.implicit=!0),Ee=Ee.transform(function(Le){return Le.isSymbolNode&&pt(Ce.placeholders,Le.name)?Ce.placeholders[Le.name].clone():Le})}return K.repeat&&Ee!==J&&(Ee=q(Ee,K,ae)),Ee}function j(J,K){var ae=[],pe,he,Se=k(J);if(x(J,K))for(var Ee=0;Ee<J.args.length;Ee++)he=J.args.slice(0),he.splice(Ee,1),pe=he.length===1?he[0]:Se(he),ae.push(Se([J.args[Ee],pe]));else for(var Z=1;Z<J.args.length;Z++){var ie=J.args[0];Z>1&&(ie=Se(J.args.slice(0,Z))),he=J.args.slice(Z),pe=he.length===1?he[0]:Se(he),ae.push(Se([ie,pe]))}return ae}function H(J,K){var ae={placeholders:{}};if(!J.placeholders&&!K.placeholders)return ae;if(J.placeholders){if(!K.placeholders)return J}else return K;for(var pe in J.placeholders)if(pt(J.placeholders,pe)&&(ae.placeholders[pe]=J.placeholders[pe],pt(K.placeholders,pe)&&!se(J.placeholders[pe],K.placeholders[pe])))return null;for(var he in K.placeholders)pt(K.placeholders,he)&&(ae.placeholders[he]=K.placeholders[he]);return ae}function ne(J,K){var ae=[];if(J.length===0||K.length===0)return ae;for(var pe,he=0;he<J.length;he++)for(var Se=0;Se<K.length;Se++)pe=H(J[he],K[Se]),pe&&ae.push(pe);return ae}function ue(J){if(J.length===0)return J;for(var K=J.reduce(ne),ae=[],pe={},he=0;he<K.length;he++){var Se=JSON.stringify(K[he],y);pe[Se]||(pe[Se]=!0,ae.push(K[he]))}return ae}function te(J,K,ae,pe){var he=[{placeholders:{}}];if(J instanceof h&&K instanceof h||J instanceof c&&K instanceof c){if(J instanceof h){if(J.op!==K.op||J.fn!==K.fn)return[]}else if(J instanceof c&&J.name!==K.name)return[];if(K.args.length===1&&J.args.length===1||!w(K,ae)&&K.args.length===J.args.length||pe){for(var Se=[],Ee=0;Ee<J.args.length;Ee++){var Z=te(J.args[Ee],K.args[Ee],ae);if(Z.length===0)break;Se.push(Z)}if(Se.length!==J.args.length){if(!x(K,ae)||J.args.length===1)return[];if(J.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var ie=te(J.args[0],K.args[1],ae);if(ie.length===0)return[];var ve=te(J.args[1],K.args[0],ae);if(ve.length===0)return[];Se=[ie,ve]}he=ue(Se)}else if(K.args.length>=2&&J.args.length===2){for(var xe=j(K,ae),Re=[],Me=0;Me<xe.length;Me++){var je=te(J,xe[Me],ae,!0);Re=Re.concat(je)}return Re}else{if(J.args.length>2)throw Error("Unexpected non-binary associative function: "+J.toString());return[]}}else if(J instanceof v){if(J.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(z[J.name]){if(J.name!==K.name)return[]}else switch(J.name[1]>="a"&&J.name[1]<="z"?J.name.substring(0,2):J.name[0]){case"n":case"_p":he[0].placeholders[J.name]=K;break;case"c":case"cl":if(cn(K))he[0].placeholders[J.name]=K;else return[];break;case"v":if(!cn(K))he[0].placeholders[J.name]=K;else return[];break;case"vl":if(ea(K))he[0].placeholders[J.name]=K;else return[];break;case"cd":if(vP(K))he[0].placeholders[J.name]=K;else return[];break;case"vd":if(!vP(K))he[0].placeholders[J.name]=K;else return[];break;case"ce":if(T1(K))he[0].placeholders[J.name]=K;else return[];break;case"ve":if(!T1(K))he[0].placeholders[J.name]=K;else return[];break;default:throw new Error("Invalid symbol in rule: "+J.name)}}else if(J instanceof l){if(!r(J.value,K.value))return[]}else return[];return he}function se(J,K){if(J instanceof l&&K instanceof l){if(!r(J.value,K.value))return!1}else if(J instanceof v&&K instanceof v){if(J.name!==K.name)return!1}else if(J instanceof h&&K instanceof h||J instanceof c&&K instanceof c){if(J instanceof h){if(J.op!==K.op||J.fn!==K.fn)return!1}else if(J instanceof c&&J.name!==K.name)return!1;if(J.args.length!==K.args.length)return!1;for(var ae=0;ae<J.args.length;ae++)if(!se(J.args[ae],K.args[ae]))return!1}else return!1;return!0}return O}),_Ue="simplifyConstant",OUe=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],FUe=ee(_Ue,OUe,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:a,fraction:i,bignumber:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:b,createMakeNodeFunction:x}=J$({FunctionNode:c,OperatorNode:h,SymbolNode:m}),w=e("simplifyConstant",{Node:L=>A(z(L,{})),"Node, Object":function(F,R){return A(z(F,R))}});function S(L){return Og(L)?L.valueOf():L instanceof Array?L.map(S):$t(L)?a(S(L.valueOf())):L}function C(L,F,R){try{return r[L].apply(null,F)}catch{return F=F.map(S),D(r[L].apply(null,F),R)}}var E=e({Fraction:$,number:function(F){return F<0?I(new l(-F)):new l(F)},BigNumber:function(F){return F<0?I(new l(-F)):new l(F)},bigint:function(F){return F<0n?I(new l(-F)):new l(F)},Complex:function(F){throw new Error("Cannot convert Complex number to Node")},string:function(F){return new l(F)},Matrix:function(F){return new u(F.valueOf().map(R=>E(R)))}});function A(L){return An(L)?L:E(L)}function k(L,F){var R=F&&F.exactFractions!==!1;if(R&&isFinite(L)&&i){var W=i(L),M=F&&typeof F.fractionsLimit=="number"?F.fractionsLimit:1/0;if(W.valueOf()===L&&W.n<M&&W.d<M)return W}return L}var D=e({"string, Object":function(F,R){var W=kl(F,n);if(W==="BigNumber")return s===void 0&&X$(),s(F);if(W==="bigint")return BigInt(F);if(W==="Fraction")return i===void 0&&k7(),i(F);var M=parseFloat(F);return k(M,R)},"Fraction, Object":function(F,R){return F},"BigNumber, Object":function(F,R){return F},"number, Object":function(F,R){return k(F,R)},"bigint, Object":function(F,R){return F},"Complex, Object":function(F,R){return F.im!==0?F:k(F.re,R)},"Matrix, Object":function(F,R){return a(k(F.valueOf()))},"Array, Object":function(F,R){return F.map(k)}});function I(L){return new h("-","unaryMinus",[L])}function $(L){var F=M=>n.number==="BigNumber"&&s?s(M):Number(M),R=L.s*L.n,W=R<0n?new h("-","unaryMinus",[new l(-F(R))]):new l(F(R));return L.d===1n?W:new h("/","divide",[W,new l(F(L.d))])}function O(L,F,R){if(!cp(F))return new o(A(L),A(F));if(as(L)||$t(L)){for(var W=Array.from(F.dimensions);W.length>0;)if(cn(W[0])&&typeof W[0].value!="string"){var M=D(W.shift().value,R);as(L)?L=L.items[M-1]:(L=L.valueOf()[M-1],L instanceof Array&&(L=a(L)))}else if(W.length>1&&cn(W[1])&&typeof W[1].value!="string"){var G=D(W[1].value,R),q=[],j=as(L)?L.items:L.valueOf();for(var H of j)if(as(H))q.push(H.items[G-1]);else if($t(L))q.push(H[G-1]);else break;if(q.length===j.length)as(L)?L=new u(q):L=a(q),W.splice(1,1);else break}else break;return W.length===F.dimensions.length?new o(A(L),F):W.length>0?(F=new f(W),new o(A(L),F)):L}if(Rw(L)&&F.dimensions.length===1&&cn(F.dimensions[0])){var ne=F.dimensions[0].value;return ne in L.properties?L.properties[ne]:new l}return new o(A(L),F)}function B(L,F,R,W){var M=F.shift(),G=F.reduce((q,j)=>{if(!An(j)){var H=q.pop();if(An(H))return[H,j];try{return q.push(C(L,[H,j],W)),q}catch{q.push(H)}}q.push(A(q.pop()));var ne=q.length===1?q[0]:R(q);return[R([ne,A(j)])]},[M]);return G.length===1?G[0]:R([G[0],E(G[1])])}function z(L,F){switch(L.type){case"SymbolNode":return L;case"ConstantNode":switch(typeof L.value){case"number":return D(L.value,F);case"bigint":return D(L.value,F);case"string":return L.value;default:if(!isNaN(L.value))return D(L.value,F)}return L;case"FunctionNode":if(r[L.name]&&r[L.name].rawArgs)return L;{var R=["add","multiply"];if(!R.includes(L.name)){var W=L.args.map(pe=>z(pe,F));if(!W.some(An))try{return C(L.name,W,F)}catch{}if(L.name==="size"&&W.length===1&&as(W[0])){for(var M=[],G=W[0];as(G);)M.push(G.items.length),G=G.items[0];return a(M)}return new c(L.name,W.map(A))}}case"OperatorNode":{var q=L.fn.toString(),j,H,ne=x(L);if(br(L)&&L.isUnary())j=[z(L.args[0],F)],An(j[0])?H=ne(j):H=C(q,j,F);else if(y(L,F.context))if(j=b(L,F.context),j=j.map(pe=>z(pe,F)),v(q,F.context)){for(var ue=[],te=[],se=0;se<j.length;se++)An(j[se])?te.push(j[se]):ue.push(j[se]);ue.length>1?(H=B(q,ue,ne,F),te.unshift(H),H=B(q,te,ne,F)):H=B(q,j,ne,F)}else H=B(q,j,ne,F);else j=L.args.map(pe=>z(pe,F)),H=B(q,j,ne,F);return H}case"ParenthesisNode":return z(L.content,F);case"AccessorNode":return O(z(L.object,F),z(L.index,F),F);case"ArrayNode":{var J=L.items.map(pe=>z(pe,F));return J.some(An)?new u(J.map(A)):a(J)}case"IndexNode":return new f(L.dimensions.map(pe=>w(pe,F)));case"ObjectNode":{var K={};for(var ae in L.properties)K[ae]=w(L.properties[ae],F);return new d(K)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(L.type))}}return w}),bP="simplifyCore",RUe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],MUe=ee(bP,RUe,t=>{var{typed:e,parse:n,equal:r,isZero:a,add:i,subtract:s,multiply:o,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:y,ParenthesisNode:b,SymbolNode:x}=t,w=new d(0),S=new d(1),C=new d(!0),E=new d(!1);function A($){return br($)&&["and","not","or"].includes($.op)}var{hasProperty:k,isCommutative:D}=J$({FunctionNode:h,OperatorNode:y,SymbolNode:x});function I($){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=O?O.context:void 0;if(k($,"trivial",B)){if(ml($)&&$.args.length===1)return I($.args[0],O);var z=!1,L=0;if($.forEach(te=>{++L,L===1&&(z=I(te,O))}),L===1)return z}var F=$;if(ml(F)){var R=rPe(F.name);if(R){if(F.args.length>2&&k(F,"associative",B))for(;F.args.length>2;){var W=F.args.pop(),M=F.args.pop();F.args.push(new y(R,F.name,[W,M]))}F=new y(R,F.name,F.args)}else return new h(I(F.fn),F.args.map(te=>I(te,O)))}if(br(F)&&F.isUnary()){var G=I(F.args[0],O);if(F.op==="~"&&br(G)&&G.isUnary()&&G.op==="~"||F.op==="not"&&br(G)&&G.isUnary()&&G.op==="not"&&A(G.args[0]))return G.args[0];var q=!0;if(F.op==="-"&&br(G)&&(G.isBinary()&&G.fn==="subtract"&&(F=new y("-","subtract",[G.args[1],G.args[0]]),q=!1),G.isUnary()&&G.op==="-"))return G.args[0];if(q)return new y(F.op,F.fn,[G])}if(br(F)&&F.isBinary()){var j=I(F.args[0],O),H=I(F.args[1],O);if(F.op==="+"){if(cn(j)&&a(j.value))return H;if(cn(H)&&a(H.value))return j;br(H)&&H.isUnary()&&H.op==="-"&&(H=H.args[0],F=new y("-","subtract",[j,H]))}if(F.op==="-")return br(H)&&H.isUnary()&&H.op==="-"?I(new y("+","add",[j,H.args[0]]),O):cn(j)&&a(j.value)?I(new y("-","unaryMinus",[H])):cn(H)&&a(H.value)?j:new y(F.op,F.fn,[j,H]);if(F.op==="*"){if(cn(j)){if(a(j.value))return w;if(r(j.value,1))return H}if(cn(H)){if(a(H.value))return w;if(r(H.value,1))return j;if(D(F,B))return new y(F.op,F.fn,[H,j],F.implicit)}return new y(F.op,F.fn,[j,H],F.implicit)}if(F.op==="/")return cn(j)&&a(j.value)?w:cn(H)&&r(H.value,1)?j:new y(F.op,F.fn,[j,H]);if(F.op==="^"&&cn(H)){if(a(H.value))return S;if(r(H.value,1))return j}if(F.op==="and"){if(cn(j))if(j.value){if(A(H))return H;if(cn(H))return H.value?C:E}else return E;if(cn(H))if(H.value){if(A(j))return j}else return E}if(F.op==="or"){if(cn(j)){if(j.value)return C;if(A(H))return H}if(cn(H)){if(H.value)return C;if(A(j))return j}}return new y(F.op,F.fn,[j,H])}if(br(F))return new y(F.op,F.fn,F.args.map(te=>I(te,O)));if(as(F))return new f(F.items.map(te=>I(te,O)));if(Lc(F))return new c(I(F.object,O),I(F.index,O));if(cp(F))return new m(F.dimensions.map(te=>I(te,O)));if(Rw(F)){var ne={};for(var ue in F.properties)ne[ue]=I(F.properties[ue],O);return new v(ne)}return F}return e(bP,{Node:I,"Node,Object":I})}),PUe="resolve",BUe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],LUe=ee(PUe,BUe,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:a,OperatorNode:i,ParenthesisNode:s}=t;function o(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(ea(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(An(d)){var h=new Set(c);return h.add(u.name),o(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(br(u)){var m=u.args.map(function(y){return o(y,l,c)});return new i(u.op,u.fn,m,u.implicit)}else{if(lu(u))return new s(o(u.content,l,c));if(ml(u)){var v=u.args.map(function(y){return o(y,l,c)});return new a(u.name,v)}}return u.map(y=>o(y,l,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(u,l)=>o(u,dd(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,dd(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,dd(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),wP="symbolicEqual",zUe=["parse","simplify","typed","OperatorNode"],UUe=ee(wP,zUe,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:a}=t;function i(s,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new a("-","subtract",[s,o]),c=n(l,{},u);return cn(c)&&!c.value}return r(wP,{"Node, Node":i,"Node, Node, Object":i})}),xP="derivative",VUe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],WUe=ee(xP,VUe,t=>{var{typed:e,config:n,parse:r,simplify:a,equal:i,isZero:s,numeric:o,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(S,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},A={};b(A,S,C.name);var k=x(S,A);return E.simplify?a(k):k}function m(S){var C=r(S);if(!C.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(S)," into a variable in function derivative"));return C}var v=e(xP,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h,"Node, string":(S,C)=>h(S,m(C)),"Node, string, Object":(S,C,E)=>h(S,m(C),E)});v._simplify=!0,v.toTex=function(S){return y.apply(null,S.args)};var y=e("_derivTex",{"Node, SymbolNode":function(C,E){return cn(C)&&Ln(C.value)==="string"?y(r(C.value).toString(),E.toString(),1):y(C.toTex(),E.toString(),1)},"Node, ConstantNode":function(C,E){if(Ln(E.value)==="string")return y(C,r(E.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(C,E,A){return y(C.toString(),E.name,A.value)},"string, string, number":function(C,E,A){var k;return A===1?k="{d\\over d"+E+"}":k="{d^{"+A+"}\\over d"+E+"^{"+A+"}}",k+"\\left[".concat(C,"\\right]")}}),b=e("constTag",{"Object, ConstantNode, string":function(C,E){return C[E]=!0,!0},"Object, SymbolNode, string":function(C,E,A){return E.name!==A?(C[E]=!0,!0):!1},"Object, ParenthesisNode, string":function(C,E,A){return b(C,E.content,A)},"Object, FunctionAssignmentNode, string":function(C,E,A){return E.params.includes(A)?b(C,E.expr,A):(C[E]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(C,E,A){if(E.args.length>0){for(var k=b(C,E.args[0],A),D=1;D<E.args.length;++D)k=b(C,E.args[D],A)&&k;if(k)return C[E]=!0,!0}return!1}}),x=e("_derivative",{"ConstantNode, Object":function(C){return w(0)},"SymbolNode, Object":function(C,E){return E[C]!==void 0?w(0):w(1)},"ParenthesisNode, Object":function(C,E){return new f(x(C.content,E))},"FunctionAssignmentNode, Object":function(C,E){return E[C]!==void 0?w(0):x(C.expr,E)},"FunctionNode, Object":function(C,E){if(E[C]!==void 0)return w(0);var A=C.args[0],k,D=!1,I=!1,$;switch(C.name){case"cbrt":D=!0,$=new c("*","multiply",[w(3),new c("^","pow",[A,new c("/","divide",[w(2),w(3)])])]);break;case"sqrt":case"nthRoot":if(C.args.length===1)D=!0,$=new c("*","multiply",[w(2),new l("sqrt",[A])]);else if(C.args.length===2)return k=new c("/","divide",[w(1),C.args[1]]),E[k]=E[C.args[1]],x(new c("^","pow",[A,k]),E);break;case"log10":k=w(10);case"log":if(!k&&C.args.length===1)$=A.clone(),D=!0;else if(C.args.length===1&&k||C.args.length===2&&E[C.args[1]]!==void 0)$=new c("*","multiply",[A.clone(),new l("log",[k||C.args[1]])]),D=!0;else if(C.args.length===2)return x(new c("/","divide",[new l("log",[A]),new l("log",[C.args[1]])]),E);break;case"pow":if(C.args.length===2)return E[k]=E[C.args[1]],x(new c("^","pow",[A,C.args[1]]),E);break;case"exp":$=new l("exp",[A.clone()]);break;case"sin":$=new l("cos",[A.clone()]);break;case"cos":$=new c("-","unaryMinus",[new l("sin",[A.clone()])]);break;case"tan":$=new c("^","pow",[new l("sec",[A.clone()]),w(2)]);break;case"sec":$=new c("*","multiply",[C,new l("tan",[A.clone()])]);break;case"csc":I=!0,$=new c("*","multiply",[C,new l("cot",[A.clone()])]);break;case"cot":I=!0,$=new c("^","pow",[new l("csc",[A.clone()]),w(2)]);break;case"asin":D=!0,$=new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[A.clone(),w(2)])])]);break;case"acos":D=!0,I=!0,$=new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[A.clone(),w(2)])])]);break;case"atan":D=!0,$=new c("+","add",[new c("^","pow",[A.clone(),w(2)]),w(1)]);break;case"asec":D=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),w(2)]),w(1)])])]);break;case"acsc":D=!0,I=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),w(2)]),w(1)])])]);break;case"acot":D=!0,I=!0,$=new c("+","add",[new c("^","pow",[A.clone(),w(2)]),w(1)]);break;case"sinh":$=new l("cosh",[A.clone()]);break;case"cosh":$=new l("sinh",[A.clone()]);break;case"tanh":$=new c("^","pow",[new l("sech",[A.clone()]),w(2)]);break;case"sech":I=!0,$=new c("*","multiply",[C,new l("tanh",[A.clone()])]);break;case"csch":I=!0,$=new c("*","multiply",[C,new l("coth",[A.clone()])]);break;case"coth":I=!0,$=new c("^","pow",[new l("csch",[A.clone()]),w(2)]);break;case"asinh":D=!0,$=new l("sqrt",[new c("+","add",[new c("^","pow",[A.clone(),w(2)]),w(1)])]);break;case"acosh":D=!0,$=new l("sqrt",[new c("-","subtract",[new c("^","pow",[A.clone(),w(2)]),w(1)])]);break;case"atanh":D=!0,$=new c("-","subtract",[w(1),new c("^","pow",[A.clone(),w(2)])]);break;case"asech":D=!0,I=!0,$=new c("*","multiply",[A.clone(),new l("sqrt",[new c("-","subtract",[w(1),new c("^","pow",[A.clone(),w(2)])])])]);break;case"acsch":D=!0,I=!0,$=new c("*","multiply",[new l("abs",[A.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[A.clone(),w(2)]),w(1)])])]);break;case"acoth":D=!0,I=!0,$=new c("-","subtract",[w(1),new c("^","pow",[A.clone(),w(2)])]);break;case"abs":$=new c("/","divide",[new l(new d("abs"),[A.clone()]),A.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+C.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var O,B;D?(O="/",B="divide"):(O="*",B="multiply");var z=x(A,E);return I&&(z=new c("-","unaryMinus",[z])),new c(O,B,[z,$])},"OperatorNode, Object":function(C,E){if(E[C]!==void 0)return w(0);if(C.op==="+")return new c(C.op,C.fn,C.args.map(function(F){return x(F,E)}));if(C.op==="-"){if(C.isUnary())return new c(C.op,C.fn,[x(C.args[0],E)]);if(C.isBinary())return new c(C.op,C.fn,[x(C.args[0],E),x(C.args[1],E)])}if(C.op==="*"){var A=C.args.filter(function(F){return E[F]!==void 0});if(A.length>0){var k=C.args.filter(function(F){return E[F]===void 0}),D=k.length===1?k[0]:new c("*","multiply",k),I=A.concat(x(D,E));return new c("*","multiply",I)}return new c("+","add",C.args.map(function(F){return new c("*","multiply",C.args.map(function(R){return R===F?x(R,E):R.clone()}))}))}if(C.op==="/"&&C.isBinary()){var $=C.args[0],O=C.args[1];return E[O]!==void 0?new c("/","divide",[x($,E),O]):E[$]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[$]),new c("/","divide",[x(O,E),new c("^","pow",[O.clone(),w(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x($,E),O.clone()]),new c("*","multiply",[$.clone(),x(O,E)])]),new c("^","pow",[O.clone(),w(2)])])}if(C.op==="^"&&C.isBinary()){var B=C.args[0],z=C.args[1];if(E[B]!==void 0)return cn(B)&&(s(B.value)||i(B.value,1))?w(0):new c("*","multiply",[C,new c("*","multiply",[new l("log",[B.clone()]),x(z.clone(),E)])]);if(E[z]!==void 0){if(cn(z)){if(s(z.value))return w(0);if(i(z.value,1))return x(B,E)}var L=new c("^","pow",[B.clone(),new c("-","subtract",[z,w(1)])]);return new c("*","multiply",[z.clone(),new c("*","multiply",[x(B,E),L])])}return new c("*","multiply",[new c("^","pow",[B.clone(),z.clone()]),new c("+","add",[new c("*","multiply",[x(B,E),new c("/","divide",[z.clone(),B.clone()])]),new c("*","multiply",[x(z,E),new l("log",[B.clone()])])])])}throw new Error('Cannot process operator "'+C.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function w(S,C){return new u(o(S,kl(String(S),n)))}return v}),NP="rationalize",qUe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],HUe=ee(NP,qUe,t=>{var{config:e,typed:n,equal:r,isZero:a,add:i,subtract:s,multiply:o,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:b,AccessorNode:x,ArrayNode:w,ConstantNode:S,FunctionNode:C,IndexNode:E,ObjectNode:A,OperatorNode:k,SymbolNode:D,ParenthesisNode:I}=t;function $(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M=B(),G=O(F,R,!0,M.firstRules),q=G.variables.length,j={exactFractions:!1},H={exactFractions:!0};if(F=G.expression,q>=1){F=z(F);var ne,ue,te=!0,se=!1;F=h(F,M.firstRules,{},j);for(var J;ue=te?M.distrDivRules:M.sucDivRules,F=h(F,ue,{},H),te=!te,J=F.toString(),J!==ne;)se=!0,ne=J;se&&(F=h(F,M.firstRulesAgain,{},j)),F=h(F,M.finalRules,{},j)}var K=[],ae={};return F.type==="OperatorNode"&&F.isBinary()&&F.op==="/"?(q===1&&(F.args[0]=L(F.args[0],K),F.args[1]=L(F.args[1])),W&&(ae.numerator=F.args[0],ae.denominator=F.args[1])):(q===1&&(F=L(F,K)),W&&(ae.numerator=F,ae.denominator=null)),W?(ae.coefficients=K,ae.variables=G.variables,ae.expression=F,ae):F}return n(NP,{Node:$,"Node, boolean":(F,R)=>$(F,{},R),"Node, Object":$,"Node, Object, boolean":$});function O(F,R,W,M){var G=[],q=h(F,M,R,{exactFractions:!1});W=!!W;var j="+-*"+(W?"/":"");ne(q);var H={};return H.expression=q,H.variables=G,H;function ne(ue){var te=ue.type;if(te==="FunctionNode")throw new Error("There is an unsolved function call");if(te==="OperatorNode")if(ue.op==="^"){if(ue.args[1].type!=="ConstantNode"||!wt(parseFloat(ue.args[1].value)))throw new Error("There is a non-integer exponent");ne(ue.args[0])}else{if(!j.includes(ue.op))throw new Error("Operator "+ue.op+" invalid in polynomial expression");for(var se=0;se<ue.args.length;se++)ne(ue.args[se])}else if(te==="SymbolNode"){var J=ue.name,K=G.indexOf(J);K===-1&&G.push(J)}else if(te==="ParenthesisNode")ne(ue.content);else if(te!=="ConstantNode")throw new Error("type "+te+" is not allowed in polynomial expression")}}function B(){var F=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],R=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],W=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],M=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],G={};return G.firstRules=F.concat(R,M),G.distrDivRules=W,G.sucDivRules=M,G.firstRulesAgain=F.concat(R),G.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],G}function z(F,R,W){var M=F.type,G=arguments.length>1;if(M==="OperatorNode"&&F.isBinary()){var q=!1,j;if(F.op==="^"&&(F.args[0].type==="ParenthesisNode"||F.args[0].type==="OperatorNode")&&F.args[1].type==="ConstantNode"&&(j=parseFloat(F.args[1].value),q=j>=2&&wt(j)),q){if(j>2){var H=F.args[0],ne=new k("^","pow",[F.args[0].cloneDeep(),new S(j-1)]);F=new k("*","multiply",[H,ne])}else F=new k("*","multiply",[F.args[0],F.args[0].cloneDeep()]);G&&(W==="content"?R.content=F:R.args[W]=F)}}if(M==="ParenthesisNode")z(F.content,F,"content");else if(M!=="ConstantNode"&&M!=="SymbolNode")for(var ue=0;ue<F.args.length;ue++)z(F.args[ue],F,ue);if(!G)return F}function L(F,R){R===void 0&&(R=[]),R[0]=0;var W={};W.cte=1,W.oper="+",W.fire="";var M=0,G="";J(F,null,W),M=R.length-1;for(var q=!0,j,H=M;H>=0;H--)if(R[H]!==0){var ne=new S(q?R[H]:Math.abs(R[H])),ue=R[H]<0?"-":"+";if(H>0){var te=new D(G);if(H>1){var se=new S(H);te=new k("^","pow",[te,se])}R[H]===-1&&q?ne=new k("-","unaryMinus",[te]):Math.abs(R[H])===1?ne=te:ne=new k("*","multiply",[ne,te])}q?j=ne:ue==="+"?j=new k("+","add",[j,ne]):j=new k("-","subtract",[j,ne]),q=!1}if(q)return new S(0);return j;function J(K,ae,pe){var he=K.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode"){if(!"+-*^".includes(K.op))throw new Error("Operator "+K.op+" invalid");if(ae!==null){if((K.fn==="unaryMinus"||K.fn==="pow")&&ae.fn!=="add"&&ae.fn!=="subtract"&&ae.fn!=="multiply")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="multiply")&&ae.fn!=="add"&&ae.fn!=="subtract")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="unaryMinus")&&pe.noFil!==0)throw new Error("Invalid "+K.op+" placing")}(K.op==="^"||K.op==="*")&&(pe.fire=K.op);for(var Se=0;Se<K.args.length;Se++)K.fn==="unaryMinus"&&(pe.oper="-"),(K.op==="+"||K.fn==="subtract")&&(pe.fire="",pe.cte=1,pe.oper=Se===0?"+":K.op),pe.noFil=Se,J(K.args[Se],K,pe)}else if(he==="SymbolNode"){if(K.name!==G&&G!=="")throw new Error("There is more than one variable");if(G=K.name,ae===null){R[1]=1;return}if(ae.op==="^"&&pe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ae.op==="*"&&pe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(pe.fire===""||pe.fire==="*")&&(M<1&&(R[1]=0),R[1]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(1,M))}else if(he==="ConstantNode"){var Ee=parseFloat(K.value);if(ae===null){R[0]=Ee;return}if(ae.op==="^"){if(pe.noFil!==1)throw new Error("Constant cannot be powered");if(!wt(Ee)||Ee<=0)throw new Error("Non-integer exponent is not allowed");for(var Z=M+1;Z<Ee;Z++)R[Z]=0;Ee>M&&(R[Ee]=0),R[Ee]+=pe.cte*(pe.oper==="+"?1:-1),M=Math.max(Ee,M);return}pe.cte=Ee,pe.fire===""&&(R[0]+=pe.cte*(pe.oper==="+"?1:-1))}else throw new Error("Type "+he+" is not allowed")}}}),SP="zpk2tf",jUe=["typed","add","multiply","Complex","number"],GUe=ee(SP,jUe,t=>{var{typed:e,add:n,multiply:r,Complex:a,number:i}=t;return e(SP,{"Array,Array,number":function(l,c,f){return s(l,c,f)},"Array,Array":function(l,c){return s(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return s(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return s(l.valueOf(),c.valueOf(),1)}});function s(u,l,c){u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>i(x))),l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>i(x)));for(var f=[a(1,0)],d=[a(1,0)],h=0;h<u.length;h++){var m=u[h];typeof m=="number"&&(m=a(m,0)),f=o(f,[a(1,0),a(-m.re,-m.im)])}for(var v=0;v<l.length;v++){var y=l[v];typeof y=="number"&&(y=a(y,0)),d=o(d,[a(1,0),a(-y.re,-y.im)])}for(var b=0;b<f.length;b++)f[b]=r(f[b],c);return[f,d]}function o(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=a(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),CP="freqz",XUe=["typed","add","multiply","Complex","divide","matrix"],KUe=ee(CP,XUe,t=>{var{typed:e,add:n,multiply:r,Complex:a,divide:i,matrix:s}=t;return e(CP,{"Array, Array":function(c,f){var d=u(512);return o(c,f,d)},"Array, Array, Array":function(c,f,d){return o(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return o(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:m}=o(c.valueOf(),f.valueOf(),d);return{w:s(h),h:s(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=o(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(h),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:m}=o(c.valueOf(),f.valueOf(),h);return{h:s(m),w:s(h)}}});function o(l,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=a(0,0),y=a(0,0),b=0;b<l.length;b++)v=n(v,r(l[b],a(Math.cos(-b*f[m]),Math.sin(-b*f[m]))));for(var x=0;x<c.length;x++)y=n(y,r(c[x],a(Math.cos(-x*f[m]),Math.sin(-x*f[m]))));d.push(v),h.push(y)}for(var w=[],S=0;S<d.length;S++)w.push(i(d[S],h[S]));return{h:w,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),YUe="reviver",ZUe=["classes"],QUe=ee(YUe,ZUe,t=>{var{classes:e}=t;return function(r,a){var i=e[a&&a.mathjs];return i&&typeof i.fromJSON=="function"?i.fromJSON(a):a}}),JUe="replacer",eVe=[],tVe=ee(JUe,eVe,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:typeof n=="bigint"?{mathjs:"bigint",value:String(n)}:n}),nVe="14.0.0",rVe=ee("true",[],()=>!0),aVe=ee("false",[],()=>!1),iVe=ee("null",[],()=>null),sVe=Ui("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),oVe=Ui("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),uVe=Ui("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?Z$(n):LIe}),lVe=Ui("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?oMe(n):zIe}),cVe=Ui("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?iMe(n):UIe}),fVe=Ui("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?sMe(n):VIe}),dVe=Ui("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),pVe=Ui("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),hVe=Ui("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),mVe=Ui("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),gVe=Ui("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),vVe=Ui("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),yVe=Ui("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),bVe=ee("version",[],()=>nVe);function Ui(t,e,n){return ee(t,e,n,{recreateOnConfigChange:!0})}var wVe=Wt("speedOfLight","299792458","m s^-1"),xVe=Wt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),NVe=Wt("planckConstant","6.62607015e-34","J s"),SVe=Wt("reducedPlanckConstant","1.0545718176461565e-34","J s"),CVe=Wt("magneticConstant","1.25663706212e-6","N A^-2"),EVe=Wt("electricConstant","8.8541878128e-12","F m^-1"),TVe=Wt("vacuumImpedance","376.730313667","ohm"),DVe=Wt("coulomb","8.987551792261171e9","N m^2 C^-2"),$Ve=Wt("elementaryCharge","1.602176634e-19","C"),AVe=Wt("bohrMagneton","9.2740100783e-24","J T^-1"),IVe=Wt("conductanceQuantum","7.748091729863649e-5","S"),kVe=Wt("inverseConductanceQuantum","12906.403729652257","ohm"),_Ve=Wt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),OVe=Wt("nuclearMagneton","5.0507837461e-27","J T^-1"),FVe=Wt("klitzing","25812.807459304513","ohm"),RVe=Wt("bohrRadius","5.29177210903e-11","m"),MVe=Wt("classicalElectronRadius","2.8179403262e-15","m"),PVe=Wt("electronMass","9.1093837015e-31","kg"),BVe=Wt("fermiCoupling","1.1663787e-5","GeV^-2"),LVe=Hw("fineStructure",.0072973525693),zVe=Wt("hartreeEnergy","4.3597447222071e-18","J"),UVe=Wt("protonMass","1.67262192369e-27","kg"),VVe=Wt("deuteronMass","3.3435830926e-27","kg"),WVe=Wt("neutronMass","1.6749271613e-27","kg"),qVe=Wt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),HVe=Wt("rydberg","10973731.568160","m^-1"),jVe=Wt("thomsonCrossSection","6.6524587321e-29","m^2"),GVe=Hw("weakMixingAngle",.2229),XVe=Hw("efimovFactor",22.7),KVe=Wt("atomicMass","1.66053906660e-27","kg"),YVe=Wt("avogadro","6.02214076e23","mol^-1"),ZVe=Wt("boltzmann","1.380649e-23","J K^-1"),QVe=Wt("faraday","96485.33212331001","C mol^-1"),JVe=Wt("firstRadiation","3.7417718521927573e-16","W m^2"),eWe=Wt("loschmidt","2.686780111798444e25","m^-3"),tWe=Wt("gasConstant","8.31446261815324","J K^-1 mol^-1"),nWe=Wt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),rWe=Wt("molarVolume","0.022413969545014137","m^3 mol^-1"),aWe=Hw("sackurTetrode",-1.16487052358),iWe=Wt("secondRadiation","0.014387768775039337","m K"),sWe=Wt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),oWe=Wt("wienDisplacement","2.897771955e-3","m K"),uWe=Wt("molarMass","0.99999999965e-3","kg mol^-1"),lWe=Wt("molarMassC12","11.9999999958e-3","kg mol^-1"),cWe=Wt("gravity","9.80665","m s^-2"),fWe=Wt("planckLength","1.616255e-35","m"),dWe=Wt("planckMass","2.176435e-8","kg"),pWe=Wt("planckTime","5.391245e-44","s"),hWe=Wt("planckCharge","1.87554603778e-18","C"),mWe=Wt("planckTemperature","1.416785e+32","K");function Wt(t,e,n){var r=["config","Unit","BigNumber"];return ee(t,r,a=>{var{config:i,Unit:s,BigNumber:o}=a,u=i.number==="BigNumber"?new o(e):parseFloat(e),l=new s(u,n);return l.fixPrefix=!0,l})}function Hw(t,e){var n=["config","BigNumber"];return ee(t,n,r=>{var{config:a,BigNumber:i}=r;return a.number==="BigNumber"?new i(e):e})}var gWe="apply",vWe=["typed","isInteger"],yWe=ee(gWe,vWe,t=>{var{typed:e,isInteger:n}=t,r=H$({typed:e,isInteger:n});return e("apply",{"...any":function(i){var s=i[1];qt(s)?i[1]=s-1:jt(s)&&(i[1]=s.minus(1));try{return r.apply(null,i)}catch(o){throw Ja(o)}}})},{isTransformFunction:!0}),bWe="column",wWe=["typed","Index","matrix","range"],xWe=ee(bWe,wWe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,i=T7({typed:e,Index:n,matrix:r,range:a});return e("column",{"...any":function(o){var u=o.length-1,l=o[u];qt(l)&&(o[u]=l-1);try{return i.apply(null,o)}catch(c){throw Ja(c)}}})},{isTransformFunction:!0});function eA(t,e,n){var r=t.filter(function(u){return ea(u)&&!(u.name in e)&&!n.has(u.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=r.name,i=new Map,s=new KV(n,i,new Set([a])),o=t.compile();return function(l){return i.set(a,l),o.evaluate(s)}}var NWe="transformCallback",SWe=["typed"],tA=ee(NWe,SWe,t=>{var{typed:e}=t;return function(r,a){return e.isTypedFunction(r)?n(r,a):EP(r,r.length,a)};function n(r,a){var i=Object.fromEntries(Object.entries(r.signatures).map(s=>{var[o,u]=s,l=o.split(",").length;return e.isTypedFunction(u)?[o,n(u,a)]:[o,EP(u,l,a)]}));return typeof r.name=="string"?e(r.name,i):e(i)}});function EP(t,e,n){return e===n?t:e===n+1?function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.slice(0,n),o=TP(a[n]);return t(...s,o)}:e>n+1?function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var s=a.slice(0,n),o=TP(a[n]),u=a.slice(n+1);return t(...s,o,...u)}:t}function TP(t){return t.map(e=>e+1)}var CWe="filter",EWe=["typed"],TWe=ee(CWe,EWe,t=>{var{typed:e}=t;function n(a,i,s){var o=D7({typed:e}),u=tA({typed:e});if(a.length===0)return o();var l=a[0];if(a.length===1)return o(l);var c=a.length-1,f=a[c];return l&&(l=r(l,s)),f&&(ea(f)||Fg(f)?f=r(f,s):f=eA(f,i,s)),o(l,u(f,c))}n.rawArgs=!0;function r(a,i){return a.compile().evaluate(i)}return n},{isTransformFunction:!0}),DWe="forEach",$We=["typed"],AWe=ee(DWe,$We,t=>{var{typed:e}=t,n=$7({typed:e}),r=tA({typed:e});function a(s,o,u){if(s.length===0)return n();var l=s[0];if(s.length===1)return n(l);var c=s.length-1,f=s[c];return l&&(l=i(l,u)),f&&(ea(f)||Fg(f)?f=i(f,u):f=eA(f,o,u)),n(l,r(f,c))}a.rawArgs=!0;function i(s,o){return s.compile().evaluate(o)}return a},{isTransformFunction:!0}),IWe="index",kWe=["Index","getMatrixDataType"],_We=ee(IWe,kWe,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var a=[],i=0,s=arguments.length;i<s;i++){var o=arguments[i];if(R$(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if($n(o)||$t(o))n(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(qt(o))o--;else if(jt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");a[i]=o}var u=new e;return e.apply(u,a),u}},{isTransformFunction:!0}),OWe="map",FWe=["typed"],RWe=ee(OWe,FWe,t=>{var{typed:e}=t,n=A7({typed:e}),r=tA({typed:e});function a(i,s,o){if(i.length===0)return n();if(i.length===1)return n(i[0]);var u=i.length-1,l=i.slice(0,u),c=i[u];return l=l.map(d=>f(d,o)),c&&(ea(c)||Fg(c)?c=f(c,o):c=eA(c,s,o)),n(...l,r(c,u));function f(d,h){return d.compile().evaluate(h)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function MWe(t){return qt(t)?t-1:jt(t)?t.minus(1):t}function PWe(t){return qt(t)||jt(t)}function Fl(t){if(t.length===2&&ws(t[0])){t=t.slice();var e=t[1];PWe(e)&&(t[1]=MWe(e))}return t}var BWe="max",LWe=["typed","config","numeric","larger"],zWe=ee(BWe,LWe,t=>{var{typed:e,config:n,numeric:r,larger:a}=t,i=L7({typed:e,config:n,numeric:r,larger:a});return e("max",{"...any":function(o){o=Fl(o);try{return i.apply(null,o)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),UWe="mean",VWe=["typed","add","divide"],WWe=ee(UWe,VWe,t=>{var{typed:e,add:n,divide:r}=t,a=X7({typed:e,add:n,divide:r});return e("mean",{"...any":function(s){s=Fl(s);try{return a.apply(null,s)}catch(o){throw Ja(o)}}})},{isTransformFunction:!0}),qWe="min",HWe=["typed","config","numeric","smaller"],jWe=ee(qWe,HWe,t=>{var{typed:e,config:n,numeric:r,smaller:a}=t,i=z7({typed:e,config:n,numeric:r,smaller:a});return e("min",{"...any":function(o){o=Fl(o);try{return i.apply(null,o)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),GWe="range",XWe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],KWe=ee(GWe,XWe,t=>{var{typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t,f=O7({typed:e,config:n,matrix:r,bignumber:a,smaller:i,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,v=h[m];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),YWe="row",ZWe=["typed","Index","matrix","range"],QWe=ee(YWe,ZWe,t=>{var{typed:e,Index:n,matrix:r,range:a}=t,i=F7({typed:e,Index:n,matrix:r,range:a});return e("row",{"...any":function(o){var u=o.length-1,l=o[u];qt(l)&&(o[u]=l-1);try{return i.apply(null,o)}catch(c){throw Ja(c)}}})},{isTransformFunction:!0}),JWe="subset",e7e=["typed","matrix","zeros","add"],t7e=ee(JWe,e7e,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,i=R7({typed:e,matrix:n,zeros:r,add:a});return e("subset",{"...any":function(o){try{return i.apply(null,o)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),n7e="concat",r7e=["typed","matrix","isInteger"],a7e=ee(n7e,r7e,t=>{var{typed:e,matrix:n,isInteger:r}=t,a=E7({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(s){var o=s.length-1,u=s[o];qt(u)?s[o]=u-1:jt(u)&&(s[o]=u.minus(1));try{return a.apply(null,s)}catch(l){throw Ja(l)}}})},{isTransformFunction:!0}),DP="diff",i7e=["typed","matrix","subtract","number","bignumber"],s7e=ee(DP,i7e,t=>{var{typed:e,matrix:n,subtract:r,number:a,bignumber:i}=t,s=I7({typed:e,matrix:n,subtract:r,number:a,bignumber:i});return e(DP,{"...any":function(u){u=Fl(u);try{return s.apply(null,u)}catch(l){throw Ja(l)}}})},{isTransformFunction:!0}),o7e="std",u7e=["typed","map","sqrt","variance"],l7e=ee(o7e,u7e,t=>{var{typed:e,map:n,sqrt:r,variance:a}=t,i=Z7({typed:e,map:n,sqrt:r,variance:a});return e("std",{"...any":function(o){o=Fl(o);try{return i.apply(null,o)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),$P="sum",c7e=["typed","config","add","numeric"],f7e=ee($P,c7e,t=>{var{typed:e,config:n,add:r,numeric:a}=t,i=j7({typed:e,config:n,add:r,numeric:a});return e($P,{"...any":function(o){o=Fl(o);try{return i.apply(null,o)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),d7e="quantileSeq",p7e=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],h7e=ee(d7e,p7e,t=>{var{typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=Y7({typed:e,bignumber:n,add:r,subtract:a,divide:i,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,b,x)=>h(v,y,b,m(x)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,b)=>h(v,y,m(b)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,b,x)=>h(v,y,b,m(x))});function m(v){return Fl([[],v])[1]}},{isTransformFunction:!0}),AP="cumsum",m7e=["typed","add","unaryPlus"],g7e=ee(AP,m7e,t=>{var{typed:e,add:n,unaryPlus:r}=t,a=G7({typed:e,add:n,unaryPlus:r});return e(AP,{"...any":function(s){if(s.length===2&&ws(s[0])){var o=s[1];qt(o)?s[1]=o-1:jt(o)&&(s[1]=o.minus(1))}try{return a.apply(null,s)}catch(u){throw Ja(u)}}})},{isTransformFunction:!0}),IP="variance",v7e=["typed","add","subtract","multiply","divide","apply","isNaN"],y7e=ee(IP,v7e,t=>{var{typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o}=t,u=K7({typed:e,add:n,subtract:r,multiply:a,divide:i,apply:s,isNaN:o});return e(IP,{"...any":function(c){c=Fl(c);try{return u.apply(null,c)}catch(f){throw Ja(f)}}})},{isTransformFunction:!0}),kP="print",b7e=["typed","matrix","zeros","add"],w7e=ee(kP,b7e,t=>{var{typed:e,matrix:n,zeros:r,add:a}=t,i=P7({typed:e,matrix:n,zeros:r,add:a});return e(kP,{"string, Object | Array":function(u,l){return i(s(u),l)},"string, Object | Array, number | Object":function(u,l,c){return i(s(u),l,c)}});function s(o){return o.replace(M7,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),x7e="and",N7e=["typed","matrix","zeros","add","equalScalar","not","concat"],S7e=ee(x7e,N7e,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=B7({typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!ws(d)&&!o(d,!0))return!1;var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),C7e="or",E7e=["typed","matrix","equalScalar","DenseMatrix","concat"],T7e=ee(C7e,E7e,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=C7({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!ws(f)&&s(f,!1))return!0;var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),D7e="bitAnd",$7e=["typed","matrix","zeros","add","equalScalar","not","concat"],A7e=ee(D7e,$7e,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s}=t,o=N7({typed:e,matrix:n,equalScalar:r,zeros:a,not:i,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!ws(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),I7e="bitOr",k7e=["typed","matrix","equalScalar","DenseMatrix","concat"],_7e=ee(I7e,k7e,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i}=t,s=S7({typed:e,matrix:n,equalScalar:r,DenseMatrix:a,concat:i});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!ws(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),rt=JAe({config:Ve}),Rn=aIe({}),_P=cVe({BigNumber:rt,config:Ve}),O7e=aVe({}),F7e=LVe({BigNumber:rt,config:Ve}),nf=fIe({}),Q7=yVe({Complex:Rn}),R7e=sVe({BigNumber:rt,config:Ve}),M7e=pVe({BigNumber:rt,config:Ve}),P7e=mVe({BigNumber:rt,config:Ve}),jw=vIe({}),B7e=oVe({BigNumber:rt,config:Ve}),L7e=iVe({}),z7e=fVe({BigNumber:rt,config:Ve}),U7e=hIe({}),J7=rAe({}),V7e=gVe({BigNumber:rt,config:Ve}),W7e=aWe({BigNumber:rt,config:Ve}),e9=lVe({BigNumber:rt,config:Ve}),q7e=rVe({}),H7e=bVe({}),Gt=_Ie({Matrix:jw}),j7e=XVe({BigNumber:rt,config:Ve}),G7e=dVe({BigNumber:rt,config:Ve}),sE=uVe({BigNumber:rt,config:Ve}),t9=tVe({}),X7e=vVe({BigNumber:rt,config:Ve}),oe=J$e({BigNumber:rt,Complex:Rn,DenseMatrix:Gt,Fraction:nf}),K7e=GVe({BigNumber:rt,config:Ve}),ei=Xke({typed:oe}),Y7e=yMe({Complex:Rn,config:Ve,typed:oe}),Z7e=NMe({BigNumber:rt,typed:oe}),Q7e=TMe({BigNumber:rt,Complex:Rn,config:Ve,typed:oe}),Hr=Qke({typed:oe}),J7e=POe({typed:oe}),e9e=_Me({BigNumber:rt,Complex:Rn,config:Ve,typed:oe}),t9e=PMe({typed:oe}),n9=zMe({typed:oe}),n9e=qMe({Complex:Rn,config:Ve,typed:oe}),r9e=bke({typed:oe}),a9e=IOe({typed:oe}),i9e=Ske({typed:oe}),s9e=FIe({typed:oe}),Gw=K8e({typed:oe}),Xw=Ake({Complex:Rn,typed:oe}),rf=LOe({typed:oe}),nA=jMe({typed:oe}),o9e=YMe({BigNumber:rt,typed:oe}),u9e=e4e({BigNumber:rt,typed:oe}),l9e=p_e({typed:oe}),Jt=uke({config:Ve,typed:oe}),c9e=rFe({typed:oe}),r9=m_e({typed:oe}),f9e=v_e({Complex:Rn,typed:oe}),d9e=D7({typed:oe}),Bg=s3e({typed:oe}),p9e=$7({typed:oe}),Lg=hFe({typed:oe}),rA=c3e({typed:oe}),h9e=wFe({format:Lg,typed:oe}),aA=UOe({typed:oe}),mi=MIe({typed:oe}),Rl=GIe({config:Ve,typed:oe}),af=JIe({config:Ve,typed:oe}),_o=tke({equalScalar:Jt,typed:oe}),m9e=hVe({BigNumber:rt,config:Ve}),g9e=tUe({Complex:Rn,typed:oe}),v9e=Y_e({Complex:Rn,config:Ve,typed:oe}),a9=Q_e({Complex:Rn,config:Ve,typed:oe}),sf=A7({typed:oe}),gr=tOe({typed:oe}),D1=HOe({typed:oe}),vu=gke({typed:oe}),y9e=yFe({format:Lg,typed:oe}),b9e=dUe({config:Ve,typed:oe}),w9e=P7({typed:oe}),x9e=hUe({config:Ve,typed:oe}),iA=WOe({typed:oe}),N9e=a4e({BigNumber:rt,typed:oe}),i9=oOe({BigNumber:rt,Fraction:nf,complex:Xw,typed:oe}),Kw=u4e({typed:oe}),jr=fke({Matrix:jw,equalScalar:Jt,typed:oe}),S9e=Vke({typed:oe}),C9e=dOe({typed:oe}),E9e=xke({typed:oe}),Cs=e_e({typed:oe}),T9e=d4e({typed:oe}),sA=ike({typed:oe}),D9e=wMe({Complex:Rn,config:Ve,typed:oe}),$9e=$Me({BigNumber:rt,typed:oe}),oA=H$({isInteger:mi,typed:oe}),A9e=IMe({BigNumber:rt,Complex:Rn,config:Ve,typed:oe}),hs=Tke({BigNumber:rt,typed:oe}),I9e=Z8e({typed:oe}),k9e=XMe({typed:oe}),_9e=n4e({BigNumber:rt,typed:oe}),zg=rke({typed:oe}),O9e=EFe({typed:oe}),F9e=gUe({config:Ve,typed:oe}),R9e=s4e({BigNumber:rt,typed:oe}),M9e=c4e({typed:oe}),P9e=hMe({SparseMatrix:jr,typed:oe}),Js=cOe({Complex:Rn,config:Ve,typed:oe}),B9e=F3e({typed:oe}),L9e=m4e({typed:oe}),Oo=qke({typed:oe}),z9e=CMe({BigNumber:rt,Complex:Rn,config:Ve,typed:oe}),U9e=gFe({format:Lg,typed:oe}),V9e=QMe({BigNumber:rt,typed:oe}),Ug=_ke({Fraction:nf,typed:oe}),of=KIe({typed:oe}),nt=Fke({DenseMatrix:Gt,Matrix:jw,SparseMatrix:jr,typed:oe}),W9e=Mke({isZero:_o,matrix:nt,typed:oe}),q9e=cFe({isNaN:zg,isNumeric:of,typed:oe}),ms=$Fe({bignumber:hs,fraction:Ug,number:vu}),s9=dFe({config:Ve,multiplyScalar:gr,numeric:ms,typed:oe}),o9=N3e({isInteger:mi,matrix:nt,typed:oe}),wa=_3e({matrix:nt,config:Ve,typed:oe}),Vg=z3e({matrix:nt,typed:oe}),u9=gOe({BigNumber:rt,config:Ve,matrix:nt,typed:oe}),da=q3e({BigNumber:rt,config:Ve,matrix:nt,typed:oe}),H9e=FMe({Complex:Rn,config:Ve,typed:oe}),l9=n_e({BigNumber:rt,Complex:Rn,Fraction:nf,config:Ve,isNegative:Rl,matrix:nt,typed:oe,unaryMinus:Oo}),hn=E7({isInteger:mi,matrix:nt,typed:oe}),j9e=QOe({prod:s9,size:wa,typed:oe}),uA=V3e({conj:rf,transpose:Vg,typed:oe}),c9=n3e({DenseMatrix:Gt,SparseMatrix:jr,matrix:nt,typed:oe}),rr=IFe({numeric:ms,typed:oe}),Wg=qFe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,divideScalar:rr,equalScalar:Jt,matrix:nt,typed:oe}),Es=bRe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),G9e=ZIe({isNumeric:of,typed:oe}),Ml=d3e({BigNumber:rt,DenseMatrix:Gt,SparseMatrix:jr,config:Ve,matrix:nt,typed:oe}),X9e=h3e({matrix:nt,multiplyScalar:gr,typed:oe}),Yw=ORe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,config:Ve,matrix:nt,typed:oe}),K9e=nRe({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe,zeros:da}),f9=jFe({DenseMatrix:Gt,divideScalar:rr,equalScalar:Jt,matrix:nt,multiplyScalar:gr,subtractScalar:Cs,typed:oe}),lA=zke({flatten:Bg,matrix:nt,size:wa,typed:oe}),Y9e=iOe({BigNumber:rt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),Z9e=b3e({BigNumber:rt,config:Ve,matrix:nt,typed:oe}),cA=KPe({addScalar:Hr,complex:Xw,conj:rf,divideScalar:rr,equal:Es,identity:Ml,isZero:_o,matrix:nt,multiplyScalar:gr,sign:i9,sqrt:Js,subtractScalar:Cs,typed:oe,unaryMinus:Oo,zeros:da}),Q9e=E3e({config:Ve,matrix:nt}),J9e=aRe({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe,zeros:da}),gp=FFe({BigNumber:rt,DenseMatrix:Gt,config:Ve,equalScalar:Jt,matrix:nt,typed:oe,zeros:da}),Ga=CRe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,config:Ve,matrix:nt,typed:oe}),xr=hOe({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,subtractScalar:Cs,typed:oe,unaryMinus:Oo}),eqe=SFe({concat:hn,matrix:nt,typed:oe}),fA=jke({config:Ve,numeric:ms,typed:oe}),dA=XFe({DenseMatrix:Gt,divideScalar:rr,equalScalar:Jt,matrix:nt,multiplyScalar:gr,subtractScalar:Cs,typed:oe}),tqe=XOe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,matrix:nt,typed:oe}),ln=P4e({DenseMatrix:Gt,SparseMatrix:jr,addScalar:Hr,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),nqe=VMe({BigNumber:rt,DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),rqe=N7({concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),aqe=S7({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),iqe=ROe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,matrix:nt,typed:oe}),sqe=NUe({addScalar:Hr,combinations:Gw,divideScalar:rr,isInteger:mi,isNegative:Rl,multiplyScalar:gr,typed:oe}),uf=lRe({BigNumber:rt,DenseMatrix:Gt,Fraction:nf,concat:hn,config:Ve,equalScalar:Jt,matrix:nt,typed:oe}),d9=vRe({concat:hn,matrix:nt,typed:oe}),oqe=G7({add:ln,typed:oe,unaryPlus:fA}),pA=MRe({equal:Es,typed:oe}),uqe=I7({matrix:nt,number:vu,subtract:xr,typed:oe}),lqe=_8e({abs:ei,addScalar:Hr,deepEqual:pA,divideScalar:rr,multiplyScalar:gr,sqrt:Js,subtractScalar:Cs,typed:oe}),Zw=W4e({addScalar:Hr,conj:rf,multiplyScalar:gr,size:wa,typed:oe}),cqe=NRe({compareText:d9,isZero:_o,typed:oe}),p9=b7({DenseMatrix:Gt,config:Ve,equalScalar:Jt,matrix:nt,round:gp,typed:oe,zeros:da}),fqe=q_e({BigNumber:rt,DenseMatrix:Gt,concat:hn,config:Ve,equalScalar:Jt,matrix:nt,round:gp,typed:oe,zeros:da}),dqe=L4e({abs:ei,addScalar:Hr,divideScalar:rr,isPositive:af,multiplyScalar:gr,smaller:Ga,sqrt:Js,typed:oe}),h9=XRe({DenseMatrix:Gt,smaller:Ga}),_a=ZRe({ImmutableDenseMatrix:h9,getMatrixDataType:rA}),Xa=IRe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,config:Ve,matrix:nt,typed:oe}),hA=MFe({Complex:Rn,config:Ve,divideScalar:rr,typeOf:sA,typed:oe}),pqe=YFe({DenseMatrix:Gt,divideScalar:rr,equalScalar:Jt,matrix:nt,multiplyScalar:gr,subtractScalar:Cs,typed:oe}),hqe=Bke({flatten:Bg,matrix:nt,size:wa,typed:oe}),mqe=z7({config:Ve,numeric:ms,smaller:Ga,typed:oe}),m9=w7({DenseMatrix:Gt,concat:hn,config:Ve,equalScalar:Jt,matrix:nt,round:gp,typed:oe,zeros:da}),Tn=rOe({addScalar:Hr,dot:Zw,equalScalar:Jt,matrix:nt,multiplyScalar:gr,typed:oe}),gqe=zFe({Complex:Rn,config:Ve,divideScalar:rr,typed:oe}),vqe=C7({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),Qw=URe({compare:uf,isNaN:zg,isNumeric:of,typed:oe}),yqe=sRe({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe,zeros:da}),g9=bBe({SparseMatrix:jr,abs:ei,add:ln,divideScalar:rr,larger:Xa,largerEq:Yw,multiply:Tn,subtract:xr,transpose:Vg,typed:oe}),Vi=R7({add:ln,matrix:nt,typed:oe,zeros:da}),mA=j7({add:ln,config:Ve,numeric:ms,typed:oe}),bqe=j4e({add:ln,matrix:nt,typed:oe}),v9=QFe({DenseMatrix:Gt,divideScalar:rr,equalScalar:Jt,matrix:nt,multiplyScalar:gr,subtractScalar:Cs,typed:oe}),wqe=GUe({Complex:Rn,add:ln,multiply:Tn,number:vu,typed:oe}),gA=f_e({DenseMatrix:Gt,config:Ve,equalScalar:Jt,matrix:nt,round:gp,typed:oe,zeros:da}),Fo=hRe({compare:uf,typed:oe}),xqe=CUe({addScalar:Hr,combinations:Gw,isInteger:mi,isNegative:Rl,isPositive:af,larger:Xa,typed:oe}),Nqe=e3e({matrix:nt,multiply:Tn,subtract:xr,typed:oe}),y9=u8e({divideScalar:rr,isZero:_o,matrix:nt,multiply:Tn,subtractScalar:Cs,typed:oe,unaryMinus:Oo}),Sqe=NOe({concat:hn,equalScalar:Jt,matrix:nt,multiplyScalar:gr,typed:oe}),b9=eMe({larger:Xa,smaller:Ga}),w9=w_e({Complex:Rn,DenseMatrix:Gt,ceil:gA,equalScalar:Jt,floor:p9,matrix:nt,typed:oe,zeros:da}),x9=X4e({Index:_a,typed:oe}),Cqe=R8e({abs:ei,add:ln,addScalar:Hr,config:Ve,divideScalar:rr,equalScalar:Jt,flatten:Bg,isNumeric:of,isZero:_o,matrix:nt,multiply:Tn,multiplyScalar:gr,smaller:Ga,subtract:xr,typed:oe}),Eqe=yOe({BigNumber:rt,add:ln,config:Ve,equal:Es,isInteger:mi,mod:m9,smaller:Ga,typed:oe,xgcd:u9}),Tqe=X_e({concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),Dqe=BFe({Complex:Rn,config:Ve,divideScalar:rr,log:hA,typed:oe}),vA=L7({config:Ve,larger:Xa,numeric:ms,typed:oe}),$qe=v4e({DenseMatrix:Gt,Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),Aqe=x4e({DenseMatrix:Gt,Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),Iqe=E4e({Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),kqe=A4e({Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),zd=DRe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,config:Ve,matrix:nt,typed:oe}),_qe=WRe({compare:uf,compareNatural:Fo,matrix:nt,typed:oe}),Oqe=BRe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,config:Ve,equalScalar:Jt,matrix:nt,typed:oe}),Fqe=B7({concat:hn,equalScalar:Jt,matrix:nt,not:D1,typed:oe,zeros:da}),Ud=O7({bignumber:hs,matrix:nt,add:ln,config:Ve,isPositive:af,larger:Xa,largerEq:Yw,smaller:Ga,smallerEq:zd,typed:oe}),Rqe=F7({Index:_a,matrix:nt,range:Ud,typed:oe}),N9=b4e({DenseMatrix:Gt,Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),Mqe=D4e({Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),S9=O4e({Index:_a,concat:hn,setDifference:N9,size:wa,subset:Vi,typed:oe}),C9=rMe({FibonacciHeap:b9,addScalar:Hr,equalScalar:Jt}),E9=T7({Index:_a,matrix:nt,range:Ud,typed:oe}),lf=c8e({abs:ei,addScalar:Hr,det:y9,divideScalar:rr,identity:Ml,matrix:nt,multiply:Tn,typed:oe,unaryMinus:Oo}),T9=GPe({DenseMatrix:Gt,Spa:C9,SparseMatrix:jr,abs:ei,addScalar:Hr,divideScalar:rr,equalScalar:Jt,larger:Xa,matrix:nt,multiplyScalar:gr,subtractScalar:Cs,typed:oe,unaryMinus:Oo}),Pqe=d8e({Complex:Rn,add:ln,ctranspose:uA,deepEqual:pA,divideScalar:rr,dot:Zw,dotDivide:Wg,equal:Es,inv:lf,matrix:nt,multiply:Tn,typed:oe}),eo=_Fe({Complex:Rn,config:Ve,fraction:Ug,identity:Ml,inv:lf,matrix:nt,multiply:Tn,number:vu,typed:oe}),D9=S4e({DenseMatrix:Gt,Index:_a,compareNatural:Fo,size:wa,subset:Vi,typed:oe}),Bqe=R4e({Index:_a,concat:hn,setIntersect:D9,setSymDifference:S9,size:wa,subset:Vi,typed:oe}),Lqe=x8e({abs:ei,add:ln,identity:Ml,inv:lf,map:sf,max:vA,multiply:Tn,size:wa,sqrt:Js,subtract:xr,typed:oe}),Pt=cMe({BigNumber:rt,Complex:Rn,Fraction:nf,abs:ei,addScalar:Hr,config:Ve,divideScalar:rr,equal:Es,fix:w9,format:Lg,isNumeric:of,multiplyScalar:gr,number:vu,pow:eo,round:gp,subtractScalar:Cs}),zqe=TVe({BigNumber:rt,Unit:Pt,config:Ve}),Uqe=oWe({BigNumber:rt,Unit:Pt,config:Ve}),Vqe=KVe({BigNumber:rt,Unit:Pt,config:Ve}),Wqe=AVe({BigNumber:rt,Unit:Pt,config:Ve}),qqe=ZVe({BigNumber:rt,Unit:Pt,config:Ve}),Hqe=IVe({BigNumber:rt,Unit:Pt,config:Ve}),jqe=DVe({BigNumber:rt,Unit:Pt,config:Ve}),Gqe=VVe({BigNumber:rt,Unit:Pt,config:Ve}),Xqe=VFe({DenseMatrix:Gt,SparseMatrix:jr,concat:hn,equalScalar:Jt,matrix:nt,pow:eo,typed:oe}),Kqe=EVe({BigNumber:rt,Unit:Pt,config:Ve}),Yqe=$Ve({BigNumber:rt,Unit:Pt,config:Ve}),Zqe=b8e({abs:ei,add:ln,identity:Ml,inv:lf,multiply:Tn,typed:oe}),Qqe=QVe({BigNumber:rt,Unit:Pt,config:Ve}),$9=j3e({addScalar:Hr,ceil:gA,conj:rf,divideScalar:rr,dotDivide:Wg,exp:r9,i:Q7,log2:a9,matrix:nt,multiplyScalar:gr,pow:eo,tau:e9,typed:oe}),yA=J8e({BigNumber:rt,Complex:Rn,config:Ve,multiplyScalar:gr,pow:eo,typed:oe}),Jqe=xVe({BigNumber:rt,Unit:Pt,config:Ve}),eHe=zVe({BigNumber:rt,Unit:Pt,config:Ve}),tHe=X3e({conj:rf,dotDivide:Wg,fft:$9,typed:oe}),nHe=FVe({BigNumber:rt,Unit:Pt,config:Ve}),rHe=eWe({BigNumber:rt,Unit:Pt,config:Ve}),aHe=CVe({BigNumber:rt,Unit:Pt,config:Ve}),iHe=uWe({BigNumber:rt,Unit:Pt,config:Ve}),sHe=nWe({BigNumber:rt,Unit:Pt,config:Ve}),oHe=WVe({BigNumber:rt,Unit:Pt,config:Ve}),uHe=OVe({BigNumber:rt,Unit:Pt,config:Ve}),lHe=hWe({BigNumber:rt,Unit:Pt,config:Ve}),cHe=fWe({BigNumber:rt,Unit:Pt,config:Ve}),fHe=mWe({BigNumber:rt,Unit:Pt,config:Ve}),dHe=UVe({BigNumber:rt,Unit:Pt,config:Ve}),pHe=qVe({BigNumber:rt,Unit:Pt,config:Ve}),hHe=SVe({BigNumber:rt,Unit:Pt,config:Ve}),mHe=HVe({BigNumber:rt,Unit:Pt,config:Ve}),gHe=iWe({BigNumber:rt,Unit:Pt,config:Ve}),vHe=wVe({BigNumber:rt,Unit:Pt,config:Ve}),yHe=sWe({BigNumber:rt,Unit:Pt,config:Ve}),bHe=jVe({BigNumber:rt,Unit:Pt,config:Ve}),wHe=YVe({BigNumber:rt,Unit:Pt,config:Ve}),xHe=RVe({BigNumber:rt,Unit:Pt,config:Ve}),NHe=gMe({Unit:Pt,typed:oe}),ha=I8e({divideScalar:rr,equalScalar:Jt,inv:lf,matrix:nt,multiply:Tn,typed:oe}),SHe=PVe({BigNumber:rt,Unit:Pt,config:Ve}),qg=rUe({gamma:yA,typed:oe}),CHe=JVe({BigNumber:rt,Unit:Pt,config:Ve}),EHe=cWe({BigNumber:rt,Unit:Pt,config:Ve}),THe=kVe({BigNumber:rt,Unit:Pt,config:Ve}),A9=xBe({DenseMatrix:Gt,lsolve:f9,lup:T9,matrix:nt,slu:g9,typed:oe,usolve:dA}),DHe=_Ve({BigNumber:rt,Unit:Pt,config:Ve}),$He=lWe({BigNumber:rt,Unit:Pt,config:Ve}),AHe=oUe({add:ln,divide:ha,factorial:qg,isInteger:mi,isPositive:af,multiply:Tn,typed:oe}),IHe=lUe({factorial:qg,typed:oe}),kHe=dWe({BigNumber:rt,Unit:Pt,config:Ve}),_He=SBe({add:ln,cbrt:l9,divide:ha,equalScalar:Jt,im:aA,isZero:_o,multiply:Tn,re:iA,sqrt:Js,subtract:xr,typeOf:sA,typed:oe,unaryMinus:Oo}),OHe=k4e({compareNatural:Fo,typed:oe}),FHe=eFe({abs:ei,add:ln,bignumber:hs,divide:ha,isNegative:Rl,isPositive:af,larger:Xa,map:sf,matrix:nt,max:vA,multiply:Tn,smaller:Ga,subtract:xr,typed:oe,unaryMinus:Oo}),I9=yUe({bignumber:hs,addScalar:Hr,combinations:Gw,divideScalar:rr,factorial:qg,isInteger:mi,isNegative:Rl,larger:Xa,multiplyScalar:gr,number:vu,pow:eo,subtractScalar:Cs,typed:oe}),RHe=dMe({Unit:Pt,typed:oe}),MHe=wUe({addScalar:Hr,isInteger:mi,isNegative:Rl,stirlingS2:I9,typed:oe}),k9=v8e({abs:ei,add:ln,addScalar:Hr,atan:n9,bignumber:hs,column:E9,complex:Xw,config:Ve,cos:nA,diag:c9,divideScalar:rr,dot:Zw,equal:Es,flatten:Bg,im:aA,inv:lf,larger:Xa,matrix:nt,matrixFromColumns:lA,multiply:Tn,multiplyScalar:gr,number:vu,qr:cA,re:iA,reshape:o9,sin:Kw,size:wa,smaller:Ga,sqrt:Js,subtract:xr,typed:oe,usolve:dA,usolveAll:v9}),PHe=BVe({BigNumber:rt,Unit:Pt,config:Ve}),BHe=tWe({BigNumber:rt,Unit:Pt,config:Ve}),LHe=iUe({divide:ha,dotDivide:Wg,isNumeric:of,log:hA,map:sf,matrix:nt,multiply:Tn,sum:mA,typed:oe}),_9=X7({add:ln,divide:ha,typed:oe}),zHe=rWe({BigNumber:rt,Unit:Pt,config:Ve}),UHe=NVe({BigNumber:rt,Unit:Pt,config:Ve}),VHe=Y7({bignumber:hs,add:ln,compare:uf,divide:ha,isInteger:mi,larger:Xa,multiply:Tn,partitionSelect:Qw,smaller:Ga,smallerEq:zd,subtract:xr,typed:oe}),bA=K7({add:ln,apply:oA,divide:ha,isNaN:zg,multiply:Tn,subtract:xr,typed:oe}),WHe=MVe({BigNumber:rt,Unit:Pt,config:Ve}),O9=z8e({add:ln,compare:uf,divide:ha,partitionSelect:Qw,typed:oe}),qHe=G8e({add:ln,divide:ha,matrix:nt,mean:_9,multiply:Tn,pow:eo,sqrt:Js,subtract:xr,sum:mA,typed:oe}),HHe=KUe({Complex:Rn,add:ln,divide:ha,matrix:nt,multiply:Tn,typed:oe}),jHe=V8e({abs:ei,map:sf,median:O9,subtract:xr,typed:oe}),GHe=Z7({map:sf,sqrt:Js,typed:oe,variance:bA}),XHe=uFe({BigNumber:rt,Complex:Rn,add:ln,config:Ve,divide:ha,equal:Es,factorial:qg,gamma:yA,isNegative:Rl,multiply:Tn,pi:sE,pow:eo,sin:Kw,smallerEq:zd,subtract:xr,typed:oe}),wA=U4e({abs:ei,add:ln,conj:rf,ctranspose:uA,eigs:k9,equalScalar:Jt,larger:Xa,matrix:nt,multiply:Tn,pow:eo,smaller:Ga,sqrt:Js,typed:oe}),F9=A3e({BigNumber:rt,DenseMatrix:Gt,SparseMatrix:jr,addScalar:Hr,config:Ve,cos:nA,matrix:nt,multiplyScalar:gr,norm:wA,sin:Kw,typed:oe,unaryMinus:Oo}),KHe=pWe({BigNumber:rt,Unit:Pt,config:Ve}),R9=E8e({identity:Ml,matrix:nt,multiply:Tn,norm:wA,qr:cA,subtract:xr,typed:oe}),YHe=D3e({multiply:Tn,rotationMatrix:F9,typed:oe}),M9=S8e({abs:ei,add:ln,concat:hn,identity:Ml,index:x9,lusolve:A9,matrix:nt,matrixFromColumns:lA,multiply:Tn,range:Ud,schur:R9,subset:Vi,subtract:xr,transpose:Vg,typed:oe}),ZHe=D8e({matrix:nt,multiply:Tn,sylvester:M9,transpose:Vg,typed:oe}),vp={},Hg={},P9={},La=Z4e({mathWithTransform:Hg}),yp=xPe({Node:La}),yu=SPe({Node:La}),cf=EPe({Node:La}),B9=APe({Node:La}),bp=tPe({Node:La}),L9=oPe({Node:La,ResultSet:J7}),z9=lPe({Node:La}),Pl=mPe({Node:La}),U9=DPe({Node:La}),QHe=QUe({classes:P9}),xA=ABe({math:vp,typed:oe}),V9=vPe({Node:La,typed:oe}),JHe=s8e({Chain:xA,typed:oe}),wp=bPe({Node:La,size:wa}),xp=J4e({Node:La,subset:Vi}),W9=iPe({matrix:nt,Node:La,subset:Vi}),Bl=_Pe({Unit:Pt,Node:La,math:vp}),Ll=FPe({Node:La,SymbolNode:Bl,math:vp}),to=MPe({AccessorNode:xp,ArrayNode:bp,AssignmentNode:W9,BlockNode:L9,ConditionalNode:z9,ConstantNode:Pl,FunctionAssignmentNode:V9,FunctionNode:Ll,IndexNode:wp,ObjectNode:yp,OperatorNode:yu,ParenthesisNode:cf,RangeNode:U9,RelationalNode:B9,SymbolNode:Bl,config:Ve,numeric:ms,typed:oe}),q9=LUe({ConstantNode:Pl,FunctionNode:Ll,OperatorNode:yu,ParenthesisNode:cf,parse:to,typed:oe}),NA=FUe({bignumber:hs,fraction:Ug,AccessorNode:xp,ArrayNode:bp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:wp,ObjectNode:yp,OperatorNode:yu,SymbolNode:Bl,config:Ve,mathWithTransform:Hg,matrix:nt,typed:oe}),eje=BPe({parse:to,typed:oe}),SA=MUe({AccessorNode:xp,ArrayNode:bp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:wp,ObjectNode:yp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,add:ln,divide:ha,equal:Es,isZero:_o,multiply:Tn,parse:to,pow:eo,subtract:xr,typed:oe}),Jw=zPe({parse:to,typed:oe}),H9=TBe({evaluate:Jw}),j9=WPe({evaluate:Jw,parse:to}),ex=kUe({AccessorNode:xp,ArrayNode:bp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:wp,ObjectNode:yp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,equal:Es,parse:to,replacer:t9,resolve:q9,simplifyConstant:NA,simplifyCore:SA,typed:oe}),tje=UUe({OperatorNode:yu,parse:to,simplify:ex,typed:oe}),nje=TUe({parse:to,typed:oe}),rje=HPe({Parser:j9,typed:oe}),aje=HUe({bignumber:hs,fraction:Ug,AccessorNode:xp,ArrayNode:bp,ConstantNode:Pl,FunctionNode:Ll,IndexNode:wp,ObjectNode:yp,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,add:ln,config:Ve,divide:ha,equal:Es,isZero:_o,mathWithTransform:Hg,matrix:nt,multiply:Tn,parse:to,pow:eo,simplify:ex,simplifyConstant:NA,simplifyCore:SA,subtract:xr,typed:oe}),ije=WUe({ConstantNode:Pl,FunctionNode:Ll,OperatorNode:yu,ParenthesisNode:cf,SymbolNode:Bl,config:Ve,equal:Es,isZero:_o,numeric:ms,parse:to,simplify:ex,typed:oe}),sje=a8e({Help:H9,mathWithTransform:Hg,typed:oe});Br(vp,{e:_P,false:O7e,fineStructure:F7e,i:Q7,Infinity:R7e,LN10:M7e,LOG10E:P7e,NaN:B7e,null:L7e,phi:z7e,SQRT1_2:V7e,sackurTetrode:W7e,tau:e9,true:q7e,E:_P,version:H7e,efimovFactor:j7e,LN2:G7e,pi:sE,replacer:t9,reviver:QHe,SQRT2:X7e,typed:oe,PI:sE,weakMixingAngle:K7e,abs:ei,acos:Y7e,acot:Z7e,acsc:Q7e,addScalar:Hr,arg:J7e,asech:e9e,asinh:t9e,atan:n9,atanh:n9e,bigint:r9e,bitNot:a9e,boolean:i9e,clone:s9e,combinations:Gw,complex:Xw,conj:rf,cos:nA,cot:o9e,csc:u9e,cube:l9e,equalScalar:Jt,erf:c9e,exp:r9,expm1:f9e,filter:d9e,flatten:Bg,forEach:p9e,format:Lg,getMatrixDataType:rA,hex:h9e,im:aA,isInteger:mi,isNegative:Rl,isPositive:af,isZero:_o,LOG2E:m9e,lgamma:g9e,log10:v9e,log2:a9,map:sf,multiplyScalar:gr,not:D1,number:vu,oct:y9e,pickRandom:b9e,print:w9e,random:x9e,re:iA,sec:N9e,sign:i9,sin:Kw,splitUnit:S9e,square:C9e,string:E9e,subtractScalar:Cs,tan:T9e,typeOf:sA,acosh:D9e,acsch:$9e,apply:oA,asec:A9e,bignumber:hs,chain:JHe,combinationsWithRep:I9e,cosh:k9e,csch:_9e,isNaN:zg,isPrime:O9e,randomInt:F9e,sech:R9e,sinh:M9e,sparse:P9e,sqrt:Js,squeeze:B9e,tanh:L9e,unaryMinus:Oo,acoth:z9e,bin:U9e,coth:V9e,fraction:Ug,isNumeric:of,matrix:nt,matrixFromFunction:W9e,mode:q9e,numeric:ms,prod:s9,reshape:o9,size:wa,transpose:Vg,xgcd:u9,zeros:da,asin:H9e,cbrt:l9,concat:hn,count:j9e,ctranspose:uA,diag:c9,divideScalar:rr,dotDivide:Wg,equal:Es,hasNumericValue:G9e,identity:Ml,kron:X9e,largerEq:Yw,leftShift:K9e,lsolve:f9,matrixFromColumns:lA,nthRoot:Y9e,ones:Z9e,qr:cA,resize:Q9e,rightArithShift:J9e,round:gp,smaller:Ga,subtract:xr,to:eqe,unaryPlus:fA,usolve:dA,xor:tqe,add:ln,atan2:nqe,bitAnd:rqe,bitOr:aqe,bitXor:iqe,catalan:sqe,compare:uf,compareText:d9,cumsum:oqe,deepEqual:pA,diff:uqe,distance:lqe,dot:Zw,equalText:cqe,floor:p9,gcd:fqe,hypot:dqe,larger:Xa,log:hA,lsolveAll:pqe,matrixFromRows:hqe,min:mqe,mod:m9,multiply:Tn,nthRoots:gqe,or:vqe,partitionSelect:Qw,rightLogShift:yqe,slu:g9,subset:Vi,sum:mA,trace:bqe,usolveAll:v9,zpk2tf:wqe,ceil:gA,compareNatural:Fo,composition:xqe,cross:Nqe,det:y9,dotMultiply:Sqe,fix:w9,index:x9,intersect:Cqe,invmod:Eqe,lcm:Tqe,log1p:Dqe,max:vA,setCartesian:$qe,setDistinct:Aqe,setIsSubset:Iqe,setPowerset:kqe,smallerEq:zd,sort:_qe,unequal:Oqe,and:Fqe,range:Ud,row:Rqe,setDifference:N9,setMultiplicity:Mqe,setSymDifference:S9,column:E9,inv:lf,lup:T9,pinv:Pqe,pow:eo,setIntersect:D9,setUnion:Bqe,sqrtm:Lqe,vacuumImpedance:zqe,wienDisplacement:Uqe,atomicMass:Vqe,bohrMagneton:Wqe,boltzmann:qqe,conductanceQuantum:Hqe,coulomb:jqe,deuteronMass:Gqe,dotPow:Xqe,electricConstant:Kqe,elementaryCharge:Yqe,expm:Zqe,faraday:Qqe,fft:$9,gamma:yA,gravitationConstant:Jqe,hartreeEnergy:eHe,ifft:tHe,klitzing:nHe,loschmidt:rHe,magneticConstant:aHe,molarMass:iHe,molarPlanckConstant:sHe,neutronMass:oHe,nuclearMagneton:uHe,planckCharge:lHe,planckLength:cHe,planckTemperature:fHe,protonMass:dHe,quantumOfCirculation:pHe,reducedPlanckConstant:hHe,rydberg:mHe,secondRadiation:gHe,speedOfLight:vHe,stefanBoltzmann:yHe,thomsonCrossSection:bHe,avogadro:wHe,bohrRadius:xHe,createUnit:NHe,divide:ha,electronMass:SHe,factorial:qg,firstRadiation:CHe,gravity:EHe,inverseConductanceQuantum:THe,lusolve:A9,magneticFluxQuantum:DHe,molarMassC12:$He,multinomial:AHe,parse:to,permutations:IHe,planckMass:kHe,polynomialRoot:_He,resolve:q9,setSize:OHe,simplifyConstant:NA,solveODE:FHe,stirlingS2:I9,unit:RHe,bellNumbers:MHe,compile:eje,eigs:k9,fermiCoupling:PHe,gasConstant:BHe,kldivergence:LHe,mean:_9,molarVolume:zHe,planckConstant:UHe,quantileSeq:VHe,simplifyCore:SA,variance:bA,classicalElectronRadius:WHe,evaluate:Jw,median:O9,simplify:ex,symbolicEqual:tje,corr:qHe,freqz:HHe,leafCount:nje,mad:jHe,parser:rje,rationalize:aje,std:GHe,zeta:XHe,derivative:ije,norm:wA,rotationMatrix:F9,help:sje,planckTime:KHe,schur:R9,rotate:YHe,sylvester:M9,lyap:ZHe,config:Ve});Br(Hg,vp,{filter:TWe({typed:oe}),forEach:AWe({typed:oe}),map:RWe({typed:oe}),apply:yWe({isInteger:mi,typed:oe}),or:T7e({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),and:S7e({add:ln,concat:hn,equalScalar:Jt,matrix:nt,not:D1,typed:oe,zeros:da}),concat:a7e({isInteger:mi,matrix:nt,typed:oe}),max:zWe({config:Ve,larger:Xa,numeric:ms,typed:oe}),print:w7e({add:ln,matrix:nt,typed:oe,zeros:da}),bitAnd:A7e({add:ln,concat:hn,equalScalar:Jt,matrix:nt,not:D1,typed:oe,zeros:da}),diff:s7e({bignumber:hs,matrix:nt,number:vu,subtract:xr,typed:oe}),min:jWe({config:Ve,numeric:ms,smaller:Ga,typed:oe}),subset:t7e({add:ln,matrix:nt,typed:oe,zeros:da}),bitOr:_7e({DenseMatrix:Gt,concat:hn,equalScalar:Jt,matrix:nt,typed:oe}),cumsum:g7e({add:ln,typed:oe,unaryPlus:fA}),index:_We({Index:_a,getMatrixDataType:rA}),sum:f7e({add:ln,config:Ve,numeric:ms,typed:oe}),range:KWe({bignumber:hs,matrix:nt,add:ln,config:Ve,isPositive:af,larger:Xa,largerEq:Yw,smaller:Ga,smallerEq:zd,typed:oe}),row:QWe({Index:_a,matrix:nt,range:Ud,typed:oe}),column:xWe({Index:_a,matrix:nt,range:Ud,typed:oe}),mean:WWe({add:ln,divide:ha,typed:oe}),quantileSeq:h7e({add:ln,bignumber:hs,compare:uf,divide:ha,isInteger:mi,larger:Xa,multiply:Tn,partitionSelect:Qw,smaller:Ga,smallerEq:zd,subtract:xr,typed:oe}),variance:y7e({add:ln,apply:oA,divide:ha,isNaN:zg,multiply:Tn,subtract:xr,typed:oe}),std:l7e({map:sf,sqrt:Js,typed:oe,variance:bA})});Br(P9,{BigNumber:rt,Complex:Rn,Fraction:nf,Matrix:jw,Node:La,ObjectNode:yp,OperatorNode:yu,ParenthesisNode:cf,Range:U7e,RelationalNode:B9,ResultSet:J7,ArrayNode:bp,BlockNode:L9,ConditionalNode:z9,ConstantNode:Pl,DenseMatrix:Gt,RangeNode:U9,Chain:xA,FunctionAssignmentNode:V9,SparseMatrix:jr,IndexNode:wp,ImmutableDenseMatrix:h9,Index:_a,AccessorNode:xp,AssignmentNode:W9,FibonacciHeap:b9,Spa:C9,Unit:Pt,SymbolNode:Bl,FunctionNode:Ll,Help:H9,Parser:j9});xA.createProxy(vp);/*!
* sweetalert2 v11.14.5
* Released under the MIT License.
*/function G9(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function oje(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function OP(t,e){return t.get(G9(t,e))}function uje(t,e,n){oje(t,e),e.set(t,n)}function lje(t,e,n){return t.set(G9(t,e),n),n}const cje=100,_t={},fje=()=>{_t.previousActiveElement instanceof HTMLElement?(_t.previousActiveElement.focus(),_t.previousActiveElement=null):document.body&&document.body.focus()},dje=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;_t.restoreFocusTimeout=setTimeout(()=>{fje(),e()},cje),window.scrollTo(n,r)}),X9="swal2-",pje=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],ze=pje.reduce((t,e)=>(t[e]=X9+e,t),{}),hje=["success","warning","info","question","error"],$1=hje.reduce((t,e)=>(t[e]=X9+e,t),{}),K9="SweetAlert2:",CA=t=>t.charAt(0).toUpperCase()+t.slice(1),Di=t=>{console.warn(`${K9} ${typeof t=="object"?t.join(" "):t}`)},ff=t=>{console.error(`${K9} ${t}`)},FP=[],mje=t=>{FP.includes(t)||(FP.push(t),Di(t))},Y9=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;mje(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},tx=t=>typeof t=="function"?t():t,EA=t=>t&&typeof t.toPromise=="function",jg=t=>EA(t)?t.toPromise():Promise.resolve(t),TA=t=>t&&Promise.resolve(t)===t,$i=()=>document.body.querySelector(`.${ze.container}`),Gg=t=>{const e=$i();return e?e.querySelector(t):null},Wi=t=>Gg(`.${t}`),On=()=>Wi(ze.popup),Xg=()=>Wi(ze.icon),gje=()=>Wi(ze["icon-content"]),Z9=()=>Wi(ze.title),DA=()=>Wi(ze["html-container"]),Q9=()=>Wi(ze.image),$A=()=>Wi(ze["progress-steps"]),nx=()=>Wi(ze["validation-message"]),Do=()=>Gg(`.${ze.actions} .${ze.confirm}`),Np=()=>Gg(`.${ze.actions} .${ze.cancel}`),df=()=>Gg(`.${ze.actions} .${ze.deny}`),vje=()=>Wi(ze["input-label"]),Sp=()=>Gg(`.${ze.loader}`),Kg=()=>Wi(ze.actions),J9=()=>Wi(ze.footer),rx=()=>Wi(ze["timer-progress-bar"]),AA=()=>Wi(ze.close),yje=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,IA=()=>{const t=On();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((i,s)=>{const o=parseInt(i.getAttribute("tabindex")||"0"),u=parseInt(s.getAttribute("tabindex")||"0");return o>u?1:o<u?-1:0}),r=t.querySelectorAll(yje),a=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(i=>gi(i))},kA=()=>tu(document.body,ze.shown)&&!tu(document.body,ze["toast-shown"])&&!tu(document.body,ze["no-backdrop"]),ax=()=>{const t=On();return t?tu(t,ze.toast):!1},bje=()=>{const t=On();return t?t.hasAttribute("data-loading"):!1},qi=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(s=>{t.appendChild(s)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(s=>{s instanceof HTMLVideoElement||s instanceof HTMLAudioElement?t.appendChild(s.cloneNode(!0)):t.appendChild(s)})}},tu=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},wje=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(ze).includes(n)&&!Object.values($1).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},Bi=(t,e,n)=>{if(wje(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Di(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Sn(t,r)}},ix=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${ze.popup} > .${ze[e]}`);case"checkbox":return t.querySelector(`.${ze.popup} > .${ze.checkbox} input`);case"radio":return t.querySelector(`.${ze.popup} > .${ze.radio} input:checked`)||t.querySelector(`.${ze.popup} > .${ze.radio} input:first-child`);case"range":return t.querySelector(`.${ze.popup} > .${ze.range} input`);default:return t.querySelector(`.${ze.popup} > .${ze.input}`)}},eq=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},tq=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(r):a.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},Sn=(t,e)=>{tq(t,e,!0)},$o=(t,e)=>{tq(t,e,!1)},Ku=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const a=n[r];if(a instanceof HTMLElement&&tu(a,e))return a}},Sc=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},ra=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},Ra=t=>{t&&(t.style.display="none")},_A=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{Yg(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},RP=(t,e,n,r)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,r)},Yg=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?ra(t,n):Ra(t)},gi=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),xje=()=>!gi(Do())&&!gi(df())&&!gi(Np()),MP=t=>t.scrollHeight>t.clientHeight,nq=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},OA=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=rx();n&&gi(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},Nje=()=>{const t=rx();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},Sje=()=>typeof window>"u"||typeof document>"u",Cje=`
 <div aria-labelledby="${ze.title}" aria-describedby="${ze["html-container"]}" class="${ze.popup}" tabindex="-1">
   <button type="button" class="${ze.close}"></button>
   <ul class="${ze["progress-steps"]}"></ul>
   <div class="${ze.icon}"></div>
   <img class="${ze.image}" />
   <h2 class="${ze.title}" id="${ze.title}"></h2>
   <div class="${ze["html-container"]}" id="${ze["html-container"]}"></div>
   <input class="${ze.input}" id="${ze.input}" />
   <input type="file" class="${ze.file}" />
   <div class="${ze.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ze.select}" id="${ze.select}"></select>
   <div class="${ze.radio}"></div>
   <label class="${ze.checkbox}">
     <input type="checkbox" id="${ze.checkbox}" />
     <span class="${ze.label}"></span>
   </label>
   <textarea class="${ze.textarea}" id="${ze.textarea}"></textarea>
   <div class="${ze["validation-message"]}" id="${ze["validation-message"]}"></div>
   <div class="${ze.actions}">
     <div class="${ze.loader}"></div>
     <button type="button" class="${ze.confirm}"></button>
     <button type="button" class="${ze.deny}"></button>
     <button type="button" class="${ze.cancel}"></button>
   </div>
   <div class="${ze.footer}"></div>
   <div class="${ze["timer-progress-bar-container"]}">
     <div class="${ze["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Eje=()=>{const t=$i();return t?(t.remove(),$o([document.documentElement,document.body],[ze["no-backdrop"],ze["toast-shown"],ze["has-column"]]),!0):!1},sc=()=>{_t.currentInstance.resetValidationMessage()},Tje=()=>{const t=On(),e=Ku(t,ze.input),n=Ku(t,ze.file),r=t.querySelector(`.${ze.range} input`),a=t.querySelector(`.${ze.range} output`),i=Ku(t,ze.select),s=t.querySelector(`.${ze.checkbox} input`),o=Ku(t,ze.textarea);e.oninput=sc,n.onchange=sc,i.onchange=sc,s.onchange=sc,o.oninput=sc,r.oninput=()=>{sc(),a.value=r.value},r.onchange=()=>{sc(),a.value=r.value}},Dje=t=>typeof t=="string"?document.querySelector(t):t,$je=t=>{const e=On();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},Aje=t=>{window.getComputedStyle(t).direction==="rtl"&&Sn($i(),ze.rtl)},Ije=t=>{const e=Eje();if(Sje()){ff("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=ze.container,e&&Sn(n,ze["no-transition"]),qi(n,Cje);const r=Dje(t.target);r.appendChild(n),$je(t),Aje(r),Tje()},FA=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?kje(t,e):t&&qi(e,t)},kje=(t,e)=>{t.jquery?_je(e,t):qi(e,t.toString())},_je=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},Oje=(t,e)=>{const n=Kg(),r=Sp();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Ra(n):ra(n),Bi(n,e,"actions"),Fje(n,r,e),qi(r,e.loaderHtml||""),Bi(r,e,"loader"))};function Fje(t,e,n){const r=Do(),a=df(),i=Np();!r||!a||!i||(KN(r,"confirm",n),KN(a,"deny",n),KN(i,"cancel",n),Rje(r,a,i,n),n.reverseButtons&&(n.toast?(t.insertBefore(i,r),t.insertBefore(a,r)):(t.insertBefore(i,e),t.insertBefore(a,e),t.insertBefore(r,e))))}function Rje(t,e,n,r){if(!r.buttonsStyling){$o([t,e,n],ze.styled);return}Sn([t,e,n],ze.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,Sn(t,ze["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,Sn(e,ze["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,Sn(n,ze["default-outline"]))}function KN(t,e,n){const r=CA(e);Yg(t,n[`show${r}Button`],"inline-block"),qi(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=ze[e],Bi(t,n,`${e}Button`)}const Mje=(t,e)=>{const n=AA();n&&(qi(n,e.closeButtonHtml||""),Bi(n,e,"closeButton"),Yg(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Pje=(t,e)=>{const n=$i();n&&(Bje(n,e.backdrop),Lje(n,e.position),zje(n,e.grow),Bi(n,e,"container"))};function Bje(t,e){typeof e=="string"?t.style.background=e:e||Sn([document.documentElement,document.body],ze["no-backdrop"])}function Lje(t,e){e&&(e in ze?Sn(t,ze[e]):(Di('The "position" parameter is not valid, defaulting to "center"'),Sn(t,ze.center)))}function zje(t,e){e&&Sn(t,ze[`grow-${e}`])}var jn={innerParams:new WeakMap,domCache:new WeakMap};const Uje=["input","file","range","select","radio","checkbox","textarea"],Vje=(t,e)=>{const n=On();if(!n)return;const r=jn.innerParams.get(t),a=!r||e.input!==r.input;Uje.forEach(i=>{const s=Ku(n,ze[i]);s&&(Hje(i,e.inputAttributes),s.className=ze[i],a&&Ra(s))}),e.input&&(a&&Wje(e),jje(e))},Wje=t=>{if(!t.input)return;if(!yr[t.input]){ff(`Unexpected type of input! Expected ${Object.keys(yr).join(" | ")}, got "${t.input}"`);return}const e=rq(t.input);if(!e)return;const n=yr[t.input](e,t);ra(e),t.inputAutoFocus&&setTimeout(()=>{eq(n)})},qje=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},Hje=(t,e)=>{const n=On();if(!n)return;const r=ix(n,t);if(r){qje(r);for(const a in e)r.setAttribute(a,e[a])}},jje=t=>{if(!t.input)return;const e=rq(t.input);e&&Bi(e,t,"input")},RA=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Zg=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),a=ze["input-label"];r.setAttribute("for",t.id),r.className=a,typeof n.customClass=="object"&&Sn(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},rq=t=>{const e=On();if(e)return Ku(e,ze[t]||ze.input)},A1=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:TA(e)||Di(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},yr={};yr.text=yr.email=yr.password=yr.number=yr.tel=yr.url=yr.search=yr.date=yr["datetime-local"]=yr.time=yr.week=yr.month=(t,e)=>(A1(t,e.inputValue),Zg(t,t,e),RA(t,e),t.type=e.input,t);yr.file=(t,e)=>(Zg(t,t,e),RA(t,e),t);yr.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return A1(n,e.inputValue),n.type=e.input,A1(r,e.inputValue),Zg(n,t,e),t};yr.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");qi(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Zg(t,t,e),t};yr.radio=t=>(t.textContent="",t);yr.checkbox=(t,e)=>{const n=ix(On(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return qi(r,e.inputPlaceholder||e.inputLabel),n};yr.textarea=(t,e)=>{A1(t,e.inputValue),RA(t,e),Zg(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(On()).width),a=()=>{if(!document.body.contains(t))return;const i=t.offsetWidth+n(t);i>r?On().style.width=`${i}px`:Sc(On(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const Gje=(t,e)=>{const n=DA();n&&(_A(n),Bi(n,e,"htmlContainer"),e.html?(FA(e.html,n),ra(n,"block")):e.text?(n.textContent=e.text,ra(n,"block")):Ra(n),Vje(t,e))},Xje=(t,e)=>{const n=J9();n&&(_A(n),Yg(n,e.footer,"block"),e.footer&&FA(e.footer,n),Bi(n,e,"footer"))},Kje=(t,e)=>{const n=jn.innerParams.get(t),r=Xg();if(r){if(n&&e.icon===n.icon){BP(r,e),PP(r,e);return}if(!e.icon&&!e.iconHtml){Ra(r);return}if(e.icon&&Object.keys($1).indexOf(e.icon)===-1){ff(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Ra(r);return}ra(r),BP(r,e),PP(r,e),Sn(r,e.showClass&&e.showClass.icon)}},PP=(t,e)=>{for(const[n,r]of Object.entries($1))e.icon!==n&&$o(t,r);Sn(t,e.icon&&$1[e.icon]),Jje(t,e),Yje(),Bi(t,e,"icon")},Yje=()=>{const t=On();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},Zje=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Qje=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,BP=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=LP(e.iconHtml):e.icon==="success"?(r=Zje,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=Qje:e.icon&&(r=LP({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&qi(t,r)},Jje=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])RP(t,n,"background-color",e.iconColor);RP(t,".swal2-success-ring","border-color",e.iconColor)}},LP=t=>`<div class="${ze["icon-content"]}">${t}</div>`,eGe=(t,e)=>{const n=Q9();if(n){if(!e.imageUrl){Ra(n);return}ra(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Sc(n,"width",e.imageWidth),Sc(n,"height",e.imageHeight),n.className=ze.image,Bi(n,e,"image")}},tGe=(t,e)=>{const n=$i(),r=On();if(!(!n||!r)){if(e.toast){Sc(n,"width",e.width),r.style.width="100%";const a=Sp();a&&r.insertBefore(a,Xg())}else Sc(r,"width",e.width);Sc(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Ra(nx()),nGe(r,e)}},nGe=(t,e)=>{const n=e.showClass||{};t.className=`${ze.popup} ${gi(t)?n.popup:""}`,e.toast?(Sn([document.documentElement,document.body],ze["toast-shown"]),Sn(t,ze.toast)):Sn(t,ze.modal),Bi(t,e,"popup"),typeof e.customClass=="string"&&Sn(t,e.customClass),e.icon&&Sn(t,ze[`icon-${e.icon}`])},rGe=(t,e)=>{const n=$A();if(!n)return;const{progressSteps:r,currentProgressStep:a}=e;if(!r||r.length===0||a===void 0){Ra(n);return}ra(n),n.textContent="",a>=r.length&&Di("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,s)=>{const o=aGe(i);if(n.appendChild(o),s===a&&Sn(o,ze["active-progress-step"]),s!==r.length-1){const u=iGe(e);n.appendChild(u)}})},aGe=t=>{const e=document.createElement("li");return Sn(e,ze["progress-step"]),qi(e,t),e},iGe=t=>{const e=document.createElement("li");return Sn(e,ze["progress-step-line"]),t.progressStepsDistance&&Sc(e,"width",t.progressStepsDistance),e},sGe=(t,e)=>{const n=Z9();n&&(_A(n),Yg(n,e.title||e.titleText,"block"),e.title&&FA(e.title,n),e.titleText&&(n.innerText=e.titleText),Bi(n,e,"title"))},aq=(t,e)=>{tGe(t,e),Pje(t,e),rGe(t,e),Kje(t,e),eGe(t,e),sGe(t,e),Mje(t,e),Gje(t,e),Oje(t,e),Xje(t,e);const n=On();typeof e.didRender=="function"&&n&&e.didRender(n),_t.eventEmitter.emit("didRender",n)},oGe=()=>gi(On()),iq=()=>{var t;return(t=Do())===null||t===void 0?void 0:t.click()},uGe=()=>{var t;return(t=df())===null||t===void 0?void 0:t.click()},lGe=()=>{var t;return(t=Np())===null||t===void 0?void 0:t.click()},Cp=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),sq=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},cGe=(t,e,n)=>{sq(t),e.toast||(t.keydownHandler=r=>dGe(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:On(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},oE=(t,e)=>{var n;const r=IA();if(r.length){t=t+e,t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=On())===null||n===void 0||n.focus()},oq=["ArrowRight","ArrowDown"],fGe=["ArrowLeft","ArrowUp"],dGe=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?pGe(e,t):e.key==="Tab"?hGe(e):[...oq,...fGe].includes(e.key)?mGe(e.key):e.key==="Escape"&&gGe(e,t,n)))},pGe=(t,e)=>{if(!tx(e.allowEnterKey))return;const n=ix(On(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;iq(),t.preventDefault()}},hGe=t=>{const e=t.target,n=IA();let r=-1;for(let a=0;a<n.length;a++)if(e===n[a]){r=a;break}t.shiftKey?oE(r,-1):oE(r,1),t.stopPropagation(),t.preventDefault()},mGe=t=>{const e=Kg(),n=Do(),r=df(),a=Np();if(!e||!n||!r||!a)return;const i=[n,r,a];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const s=oq.includes(t)?"nextElementSibling":"previousElementSibling";let o=document.activeElement;if(o){for(let u=0;u<e.children.length;u++){if(o=o[s],!o)return;if(o instanceof HTMLButtonElement&&gi(o))break}o instanceof HTMLButtonElement&&o.focus()}},gGe=(t,e,n)=>{tx(e.allowEscapeKey)&&(t.preventDefault(),n(Cp.esc))};var Vd={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const vGe=()=>{const t=$i();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},uq=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},lq=typeof window<"u"&&!!window.GestureEvent,yGe=()=>{if(lq&&!tu(document.body,ze.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Sn(document.body,ze.iosfix),bGe()}},bGe=()=>{const t=$i();if(!t)return;let e;t.ontouchstart=n=>{e=wGe(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},wGe=t=>{const e=t.target,n=$i(),r=DA();return!n||!r||xGe(t)||NGe(t)?!1:e===n||!MP(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(MP(r)&&r.contains(e))},xGe=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",NGe=t=>t.touches&&t.touches.length>1,SGe=()=>{if(tu(document.body,ze.iosfix)){const t=parseInt(document.body.style.top,10);$o(document.body,ze.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},CGe=()=>{const t=document.createElement("div");t.className=ze["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let md=null;const EGe=t=>{md===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(md=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${md+CGe()}px`)},TGe=()=>{md!==null&&(document.body.style.paddingRight=`${md}px`,md=null)};function cq(t,e,n,r){ax()?zP(t,r):(dje(n).then(()=>zP(t,r)),sq(_t)),lq?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),kA()&&(TGe(),SGe(),uq()),DGe()}function DGe(){$o([document.documentElement,document.body],[ze.shown,ze["height-auto"],ze["no-backdrop"],ze["toast-shown"]])}function Yu(t){t=AGe(t);const e=Vd.swalPromiseResolve.get(this),n=$Ge(this);this.isAwaitingPromise?t.isDismissed||(Qg(this),e(t)):n&&e(t)}const $Ge=t=>{const e=On();if(!e)return!1;const n=jn.innerParams.get(t);if(!n||tu(e,n.hideClass.popup))return!1;$o(e,n.showClass.popup),Sn(e,n.hideClass.popup);const r=$i();return $o(r,n.showClass.backdrop),Sn(r,n.hideClass.backdrop),IGe(t,e,n),!0};function fq(t){const e=Vd.swalPromiseReject.get(this);Qg(this),e&&e(t)}const Qg=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,jn.innerParams.get(t)||t._destroy())},AGe=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),IGe=(t,e,n)=>{var r;const a=$i(),i=nq(e);typeof n.willClose=="function"&&n.willClose(e),(r=_t.eventEmitter)===null||r===void 0||r.emit("willClose",e),i?kGe(t,e,a,n.returnFocus,n.didClose):cq(t,a,n.returnFocus,n.didClose)},kGe=(t,e,n,r,a)=>{_t.swalCloseEventFinishedCallback=cq.bind(null,t,n,r,a);const i=function(s){if(s.target===e){var o;(o=_t.swalCloseEventFinishedCallback)===null||o===void 0||o.call(_t),delete _t.swalCloseEventFinishedCallback,e.removeEventListener("animationend",i),e.removeEventListener("transitionend",i)}};e.addEventListener("animationend",i),e.addEventListener("transitionend",i)},zP=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=_t.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Wd=t=>{let e=On();if(e||new F1,e=On(),!e)return;const n=Sp();ax()?Ra(Xg()):_Ge(e,t),ra(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},_Ge=(t,e)=>{const n=Kg(),r=Sp();!n||!r||(!e&&gi(Do())&&(e=Do()),ra(n),e&&(Ra(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),Sn([t,n],ze.loading))},OGe=(t,e)=>{e.input==="select"||e.input==="radio"?BGe(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(EA(e.inputValue)||TA(e.inputValue))&&(Wd(Do()),LGe(t,e))},FGe=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return RGe(n);case"radio":return MGe(n);case"file":return PGe(n);default:return e.inputAutoTrim?n.value.trim():n.value}},RGe=t=>t.checked?1:0,MGe=t=>t.checked?t.value:null,PGe=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,BGe=(t,e)=>{const n=On();if(!n)return;const r=a=>{e.input==="select"?zGe(n,I1(a),e):e.input==="radio"&&UGe(n,I1(a),e)};EA(e.inputOptions)||TA(e.inputOptions)?(Wd(Do()),jg(e.inputOptions).then(a=>{t.hideLoading(),r(a)})):typeof e.inputOptions=="object"?r(e.inputOptions):ff(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},LGe=(t,e)=>{const n=t.getInput();n&&(Ra(n),jg(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,ra(n),n.focus(),t.hideLoading()}).catch(r=>{ff(`Error in inputValue promise: ${r}`),n.value="",ra(n),n.focus(),t.hideLoading()}))};function zGe(t,e,n){const r=Ku(t,ze.select);if(!r)return;const a=(i,s,o)=>{const u=document.createElement("option");u.value=o,qi(u,s),u.selected=dq(o,n.inputValue),i.appendChild(u)};e.forEach(i=>{const s=i[0],o=i[1];if(Array.isArray(o)){const u=document.createElement("optgroup");u.label=s,u.disabled=!1,r.appendChild(u),o.forEach(l=>a(u,l[1],l[0]))}else a(r,o,s)}),r.focus()}function UGe(t,e,n){const r=Ku(t,ze.radio);if(!r)return;e.forEach(i=>{const s=i[0],o=i[1],u=document.createElement("input"),l=document.createElement("label");u.type="radio",u.name=ze.radio,u.value=s,dq(s,n.inputValue)&&(u.checked=!0);const c=document.createElement("span");qi(c,o),c.className=ze.label,l.appendChild(u),l.appendChild(c),r.appendChild(l)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const I1=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let a=n;typeof a=="object"&&(a=I1(a)),e.push([r,a])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=I1(r)),e.push([n,r])}),e},dq=(t,e)=>!!e&&e.toString()===t.toString(),VGe=t=>{const e=jn.innerParams.get(t);t.disableButtons(),e.input?pq(t,"confirm"):PA(t,!0)},WGe=t=>{const e=jn.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?pq(t,"deny"):MA(t,!1)},qGe=(t,e)=>{t.disableButtons(),e(Cp.cancel)},pq=(t,e)=>{const n=jn.innerParams.get(t);if(!n.input){ff(`The "input" parameter is needed to be set when using returnInputValueOn${CA(e)}`);return}const r=t.getInput(),a=FGe(t,n);n.inputValidator?HGe(t,a,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?MA(t,a):PA(t,a)},HGe=(t,e,n)=>{const r=jn.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>jg(r.inputValidator(e,r.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):n==="deny"?MA(t,e):PA(t,e)})},MA=(t,e)=>{const n=jn.innerParams.get(t||void 0);n.showLoaderOnDeny&&Wd(df()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>jg(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),Qg(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>hq(t||void 0,a))):t.close({isDenied:!0,value:e})},UP=(t,e)=>{t.close({isConfirmed:!0,value:e})},hq=(t,e)=>{t.rejectPromise(e)},PA=(t,e)=>{const n=jn.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Wd(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>jg(n.preConfirm(e,n.validationMessage))).then(a=>{gi(nx())||a===!1?(t.hideLoading(),Qg(t)):UP(t,typeof a>"u"?e:a)}).catch(a=>hq(t||void 0,a))):UP(t,e)};function k1(){const t=jn.innerParams.get(this);if(!t)return;const e=jn.domCache.get(this);Ra(e.loader),ax()?t.icon&&ra(Xg()):jGe(e),$o([e.popup,e.actions],ze.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const jGe=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?ra(e[0],"inline-block"):xje()&&Ra(t.actions)};function mq(){const t=jn.innerParams.get(this),e=jn.domCache.get(this);return e?ix(e.popup,t.input):null}function gq(t,e,n){const r=jn.domCache.get(t);e.forEach(a=>{r[a].disabled=n})}function vq(t,e){const n=On();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${ze.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=e}else t.disabled=e}function yq(){gq(this,["confirmButton","denyButton","cancelButton"],!1)}function bq(){gq(this,["confirmButton","denyButton","cancelButton"],!0)}function wq(){vq(this.getInput(),!1)}function xq(){vq(this.getInput(),!0)}function Nq(t){const e=jn.domCache.get(this),n=jn.innerParams.get(this);qi(e.validationMessage,t),e.validationMessage.className=ze["validation-message"],n.customClass&&n.customClass.validationMessage&&Sn(e.validationMessage,n.customClass.validationMessage),ra(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",ze["validation-message"]),eq(r),Sn(r,ze.inputerror))}function Sq(){const t=jn.domCache.get(this);t.validationMessage&&Ra(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),$o(e,ze.inputerror))}const gd={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},GGe=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],XGe={allowEnterKey:void 0},KGe=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Cq=t=>Object.prototype.hasOwnProperty.call(gd,t),Eq=t=>GGe.indexOf(t)!==-1,Tq=t=>XGe[t],YGe=t=>{Cq(t)||Di(`Unknown parameter "${t}"`)},ZGe=t=>{KGe.includes(t)&&Di(`The parameter "${t}" is incompatible with toasts`)},QGe=t=>{const e=Tq(t);e&&Y9(t,e)},JGe=t=>{t.backdrop===!1&&t.allowOutsideClick&&Di('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const e in t)YGe(e),t.toast&&ZGe(e),QGe(e)};function Dq(t){const e=On(),n=jn.innerParams.get(this);if(!e||tu(e,n.hideClass.popup)){Di("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=eXe(t),a=Object.assign({},n,r);aq(this,a),jn.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const eXe=t=>{const e={};return Object.keys(t).forEach(n=>{Eq(n)?e[n]=t[n]:Di(`Invalid parameter to update: ${n}`)}),e};function $q(){const t=jn.domCache.get(this),e=jn.innerParams.get(this);if(!e){Aq(this);return}t.popup&&_t.swalCloseEventFinishedCallback&&(_t.swalCloseEventFinishedCallback(),delete _t.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),_t.eventEmitter.emit("didDestroy"),tXe(this)}const tXe=t=>{Aq(t),delete t.params,delete _t.keydownHandler,delete _t.keydownTarget,delete _t.currentInstance},Aq=t=>{t.isAwaitingPromise?(YN(jn,t),t.isAwaitingPromise=!0):(YN(Vd,t),YN(jn,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},YN=(t,e)=>{for(const n in t)t[n].delete(e)};var nXe=Object.freeze({__proto__:null,_destroy:$q,close:Yu,closeModal:Yu,closePopup:Yu,closeToast:Yu,disableButtons:bq,disableInput:xq,disableLoading:k1,enableButtons:yq,enableInput:wq,getInput:mq,handleAwaitingPromise:Qg,hideLoading:k1,rejectPromise:fq,resetValidationMessage:Sq,showValidationMessage:Nq,update:Dq});const rXe=(t,e,n)=>{t.toast?aXe(t,e,n):(sXe(e),oXe(e),uXe(t,e,n))},aXe=(t,e,n)=>{e.popup.onclick=()=>{t&&(iXe(t)||t.timer||t.input)||n(Cp.close)}},iXe=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let _1=!1;const sXe=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(_1=!0)}}},oXe=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(_1=!0)}}},uXe=(t,e,n)=>{e.container.onclick=r=>{if(_1){_1=!1;return}r.target===e.container&&tx(t.allowOutsideClick)&&n(Cp.backdrop)}},lXe=t=>typeof t=="object"&&t.jquery,VP=t=>t instanceof Element||lXe(t),cXe=t=>{const e={};return typeof t[0]=="object"&&!VP(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const a=t[r];typeof a=="string"||VP(a)?e[n]=a:a!==void 0&&ff(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function fXe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function dXe(t){class e extends this{_main(r,a){return super._main(r,Object.assign({},t,a))}}return e}const pXe=()=>_t.timeout&&_t.timeout.getTimerLeft(),Iq=()=>{if(_t.timeout)return Nje(),_t.timeout.stop()},kq=()=>{if(_t.timeout){const t=_t.timeout.start();return OA(t),t}},hXe=()=>{const t=_t.timeout;return t&&(t.running?Iq():kq())},mXe=t=>{if(_t.timeout){const e=_t.timeout.increase(t);return OA(e,!0),e}},gXe=()=>!!(_t.timeout&&_t.timeout.isRunning());let WP=!1;const uE={};function vXe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";uE[t]=this,WP||(document.body.addEventListener("click",yXe),WP=!0)}const yXe=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in uE){const r=e.getAttribute(n);if(r){uE[n].fire({template:r});return}}};class bXe{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){var r=this;const a=function(){r.removeListener(e,a);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n.apply(r,s)};this.on(e,a)}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,r)}catch(s){console.error(s)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),a=r.indexOf(n);a>-1&&r.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}_t.eventEmitter=new bXe;const wXe=(t,e)=>{_t.eventEmitter.on(t,e)},xXe=(t,e)=>{_t.eventEmitter.once(t,e)},NXe=(t,e)=>{if(!t){_t.eventEmitter.reset();return}e?_t.eventEmitter.removeListener(t,e):_t.eventEmitter.removeAllListeners(t)};var SXe=Object.freeze({__proto__:null,argsToParams:cXe,bindClickHandler:vXe,clickCancel:lGe,clickConfirm:iq,clickDeny:uGe,enableLoading:Wd,fire:fXe,getActions:Kg,getCancelButton:Np,getCloseButton:AA,getConfirmButton:Do,getContainer:$i,getDenyButton:df,getFocusableElements:IA,getFooter:J9,getHtmlContainer:DA,getIcon:Xg,getIconContent:gje,getImage:Q9,getInputLabel:vje,getLoader:Sp,getPopup:On,getProgressSteps:$A,getTimerLeft:pXe,getTimerProgressBar:rx,getTitle:Z9,getValidationMessage:nx,increaseTimer:mXe,isDeprecatedParameter:Tq,isLoading:bje,isTimerRunning:gXe,isUpdatableParameter:Eq,isValidParameter:Cq,isVisible:oGe,mixin:dXe,off:NXe,on:wXe,once:xXe,resumeTimer:kq,showLoading:Wd,stopTimer:Iq,toggleTimer:hXe});class CXe{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const _q=["swal-title","swal-html","swal-footer"],EXe=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return OXe(n),Object.assign(TXe(n),DXe(n),$Xe(n),AXe(n),IXe(n),kXe(n),_Xe(n,_q))},TXe=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Uc(r,["name","value"]);const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(typeof gd[a]=="boolean"?e[a]=i!=="false":typeof gd[a]=="object"?e[a]=JSON.parse(i):e[a]=i)}),e},DXe=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(e[a]=new Function(`return ${i}`)())}),e},$Xe=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Uc(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=r.innerHTML,e[`show${CA(a)}Button`]=!0,r.hasAttribute("color")&&(e[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},AXe=t=>{const e={},n=t.querySelector("swal-image");return n&&(Uc(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},IXe=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Uc(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},kXe=t=>{const e={},n=t.querySelector("swal-input");n&&(Uc(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(a=>{Uc(a,["value"]);const i=a.getAttribute("value");if(!i)return;const s=a.innerHTML;e.inputOptions[i]=s})),e},_Xe=(t,e)=>{const n={};for(const r in e){const a=e[r],i=t.querySelector(a);i&&(Uc(i,[]),n[a.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},OXe=t=>{const e=_q.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||Di(`Unrecognized element <${r}>`)})},Uc=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Di([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},Oq=10,FXe=t=>{const e=$i(),n=On();typeof t.willOpen=="function"&&t.willOpen(n),_t.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;PXe(e,n,t),setTimeout(()=>{RXe(e,n)},Oq),kA()&&(MXe(e,t.scrollbarPadding,a),vGe()),!ax()&&!_t.previousActiveElement&&(_t.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),_t.eventEmitter.emit("didOpen",n),$o(e,ze["no-transition"])},O1=t=>{const e=On();if(t.target!==e)return;const n=$i();e.removeEventListener("animationend",O1),e.removeEventListener("transitionend",O1),n.style.overflowY="auto"},RXe=(t,e)=>{nq(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",O1),e.addEventListener("transitionend",O1)):t.style.overflowY="auto"},MXe=(t,e,n)=>{yGe(),e&&n!=="hidden"&&EGe(n),setTimeout(()=>{t.scrollTop=0})},PXe=(t,e,n)=>{Sn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),ra(e,"grid"),setTimeout(()=>{Sn(e,n.showClass.popup),e.style.removeProperty("opacity")},Oq)):ra(e,"grid"),Sn([document.documentElement,document.body],ze.shown),n.heightAuto&&n.backdrop&&!n.toast&&Sn([document.documentElement,document.body],ze["height-auto"])};var qP={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function BXe(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=qP.email),t.input==="url"&&(t.inputValidator=qP.url))}function LXe(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Di('Target parameter is not valid, defaulting to "body"'),t.target="body")}function zXe(t){BXe(t),t.showLoaderOnConfirm&&!t.preConfirm&&Di(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),LXe(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),Ije(t)}let lo;var e0=new WeakMap;class Nr{constructor(){if(uje(this,e0,void 0),typeof window>"u")return;lo=this;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,lje(e0,this,this._main(lo.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(JGe(Object.assign({},n,e)),_t.currentInstance){const i=Vd.swalPromiseResolve.get(_t.currentInstance),{isAwaitingPromise:s}=_t.currentInstance;_t.currentInstance._destroy(),s||i({isDismissed:!0}),kA()&&uq()}_t.currentInstance=lo;const r=VXe(e,n);zXe(r),Object.freeze(r),_t.timeout&&(_t.timeout.stop(),delete _t.timeout),clearTimeout(_t.restoreFocusTimeout);const a=WXe(lo);return aq(lo,r),jn.innerParams.set(lo,r),UXe(lo,a,r)}then(e){return OP(e0,this).then(e)}finally(e){return OP(e0,this).finally(e)}}const UXe=(t,e,n)=>new Promise((r,a)=>{const i=s=>{t.close({isDismissed:!0,dismiss:s})};Vd.swalPromiseResolve.set(t,r),Vd.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{VGe(t)},e.denyButton.onclick=()=>{WGe(t)},e.cancelButton.onclick=()=>{qGe(t,i)},e.closeButton.onclick=()=>{i(Cp.close)},rXe(n,e,i),cGe(_t,n,i),OGe(t,n),FXe(n),qXe(_t,n,i),HXe(e,n),setTimeout(()=>{e.container.scrollTop=0})}),VXe=(t,e)=>{const n=EXe(t),r=Object.assign({},gd,e,n,t);return r.showClass=Object.assign({},gd.showClass,r.showClass),r.hideClass=Object.assign({},gd.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},WXe=t=>{const e={popup:On(),container:$i(),actions:Kg(),confirmButton:Do(),denyButton:df(),cancelButton:Np(),loader:Sp(),closeButton:AA(),validationMessage:nx(),progressSteps:$A()};return jn.domCache.set(t,e),e},qXe=(t,e,n)=>{const r=rx();Ra(r),e.timer&&(t.timeout=new CXe(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(ra(r),Bi(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&OA(e.timer)})))},HXe=(t,e)=>{if(!e.toast){if(!tx(e.allowEnterKey)){Y9("allowEnterKey"),XXe();return}jXe(t)||GXe(t,e)||oE(-1,1)}},jXe=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&gi(n))return n.focus(),!0;return!1},GXe=(t,e)=>e.focusDeny&&gi(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&gi(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&gi(t.confirmButton)?(t.confirmButton.focus(),!0):!1,XXe=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const n=document.createElement("audio");n.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",n.loop=!0,document.body.appendChild(n),setTimeout(()=>{n.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${t}`)}Nr.prototype.disableButtons=bq;Nr.prototype.enableButtons=yq;Nr.prototype.getInput=mq;Nr.prototype.disableInput=xq;Nr.prototype.enableInput=wq;Nr.prototype.hideLoading=k1;Nr.prototype.disableLoading=k1;Nr.prototype.showValidationMessage=Nq;Nr.prototype.resetValidationMessage=Sq;Nr.prototype.close=Yu;Nr.prototype.closePopup=Yu;Nr.prototype.closeModal=Yu;Nr.prototype.closeToast=Yu;Nr.prototype.rejectPromise=fq;Nr.prototype.update=Dq;Nr.prototype._destroy=$q;Object.assign(Nr,SXe);Object.keys(nXe).forEach(t=>{Nr[t]=function(){return lo&&lo[t]?lo[t](...arguments):null}});Nr.DismissReason=Cp;Nr.version="11.14.5";const F1=Nr;F1.default=F1;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const HP=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],ZN=()=>{};function KXe(t){function e(a){const i={},s={},o=HP.map(u=>u.key);return Object.entries(a).forEach(u=>{let[l,c]=u;o.includes(l)&&Fe.isValidElement(c)?(i[l]=c,s[l]=" "):s[l]=c}),[i,s]}function n(a,i){Object.entries(i).forEach(s=>{let[o,u]=s;const c=HP.find(d=>d.key===o).getter(t),f=jP.createRoot(c);f.render(u),a.__roots.push(f)})}function r(a){a.__roots.forEach(i=>{i.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(Fe.isValidElement(a[0])||Fe.isValidElement(a[1])){const i={};return["title","html","icon"].forEach((s,o)=>{a[o]!==void 0&&(i[s]=a[o])}),i}else return t.argsToParams(a)}_main(a,i){this.__roots=[],this.__params=Object.assign({},i,a);const[s,o]=e(this.__params),u=o.willOpen||ZN,l=o.didOpen||ZN,c=o.didDestroy||ZN;return super._main(Object.assign({},o,{willOpen:f=>{n(this,s),u(f)},didOpen:f=>{setTimeout(()=>{l(f)})},didDestroy:f=>{c(f),r(this)}}))}update(a){Object.assign(this.__params,a),r(this);const[i,s]=e(this.__params);super.update(s),n(this,i)}}}const QN=KXe(F1),YXe=()=>{const[t,e]=xn.useState([{message:"Hola! Soy tu chatbot. En qu puedo ayudarte?",sentTime:"justo ahora",sender:"Chatbot"}]),[n,r]=xn.useState(null),[a,i]=xn.useState([]),[s,o]=xn.useState(!0);xn.useEffect(()=>{(async()=>{QN.fire({title:"Cargando...",text:"Por favor espera mientras se carga el modelo",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{QN.showLoading()}});try{await EJ("webgl"),await TJ();const m=await jue();r(m);const v=iF.map(b=>b.question),y=await m.embed(v);i(y),console.log("Modelo y embeddings cargados")}catch(m){console.error("Error al cargar el modelo:",m)}finally{QN.close(),o(!1)}})()},[]);const u=h=>/^[0-9+\-*/().\s]+$/.test(h.trim()),l=h=>{const m=/cunto es\s*([\d+\-*/().\s]+)/i,v=h.match(m);return v?v[1]:null},c=h=>{try{return`El resultado es: ${Jw(h)}`}catch{return"Lo siento, no pude calcular esa expresin. Puedes verificar si es correcta?"}},f=async h=>{var S;if(!n)return"El modelo an no est listo, por favor espera un momento.";const m=h.trim().toLowerCase(),v={hola:"Hola! En qu puedo ayudarte?","cmo ests":"Estoy aqu para ayudarte con tus dudas.","cmo te sientes":"Me siento genial ayudndote con tus consultas.","eres humano":"No, soy una inteligencia artificial, pero estoy aqu para ayudarte."};if(v[m])return v[m];if(u(m))return c(m);const y=l(m);if(y)return c(y);const b=await n.embed([m]),w=nn(b,a,!1,!0).argMax(1).arraySync()[0];return((S=iF[w])==null?void 0:S.answer)||"Lo siento, no entiendo tu consulta."},d=async h=>{const m={message:h,sentTime:"justo ahora",sender:"Usuario"};e(y=>[...y,m]);const v=await f(h);setTimeout(()=>{e(y=>[...y,{message:v,sentTime:"justo ahora",sender:"Chatbot"}])},1e3)};return tn.jsx("div",{className:"w-full flex justify-center items-start h-screen mt-2",children:s?tn.jsx("div",{className:"flex items-center justify-center w-full h-full",children:tn.jsx("span",{className:"text-white text-xl",children:"Cargando el chat..."})}):tn.jsx(cQ,{style:{width:"100%",maxWidth:"800px",height:"88vh",maxHeight:"600px",backgroundColor:"#1e1e1e",borderRadius:"12px",overflow:"hidden"},children:tn.jsxs(qZ,{children:[tn.jsxs(Zu,{style:{padding:"1px",backgroundColor:"#1e1e1e"},children:[tn.jsx(Cc,{name:"Emily",title:"Emely Chat Bot IA",src:"https://chatscope.io/storybook/react/assets/emily-xzL8sDL2.svg",style:{padding:"4px",backgroundColor:"#1e1e1e"}}),tn.jsx(Zu.Content,{children:tn.jsx("span",{style:{alignSelf:"flex-center",color:"#fff"},children:"Emely Chat Bot"})}),tn.jsxs(Zu.Actions,{children:[tn.jsx(UX,{title:"Add to favourites"}),tn.jsx(RX,{title:"Show info"})]})]}),tn.jsx(Hd,{style:{flex:"1 1 auto",overflowY:"auto",padding:"10px",backgroundColor:"#1e1e1e"},children:t.map((h,m)=>tn.jsx(yl,{model:{message:h.message,sentTime:h.sentTime,sender:h.sender,direction:h.sender==="Usuario"?"outgoing":"incoming",position:"normal"},children:h.sender!=="Usuario"&&tn.jsx(Cc,{name:"Emily",src:"https://chatscope.io/storybook/react/assets/emily-xzL8sDL2.svg"})},m))}),tn.jsx(L1,{placeholder:"Escribe tu mensaje aqu...",onSend:d,attachButton:!1,autoFocus:!0,style:{borderTop:"1px solid #444",backgroundColor:"#1e1e1e",color:"#fff"}})]})})})},ZXe=()=>tn.jsxs("div",{className:"h-screen flex flex-col bg-primary text-text",children:[tn.jsx(Aj,{}),tn.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[tn.jsx(Vj,{}),tn.jsx("div",{className:"flex-1",children:tn.jsx(YXe,{})})]})]});jP.createRoot(document.getElementById("root")).render(tn.jsx(xn.StrictMode,{children:tn.jsx(ZXe,{})}));
